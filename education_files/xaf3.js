var xaf=function(){"use strict";function t(){var t;if(document.currentScript)t=document.currentScript;else{var e=document.getElementsByTagName("script"),a=e[e.length-1];if(a.getAttribute("data-bdms-faccdee21b68")||a.getAttribute("data-app"))t=a;else for(var r=0;r<e.length;r++){var o=e[r].getAttribute("src");if(o&&-1<o.indexOf("xaf.js")){t=e[r];break}}}var n="",i="";return t&&t.getAttribute&&(n=(a=function(t){var e={dataApp:"",dataAppProp:""};t.getAttribute("data-bdms-faccdee21b68")?(e.dataApp=t.getAttribute("data-bdms-faccdee21b68"),e.dataAppProp="data-bdms-faccdee21b68"):t.getAttribute("data-app")?(e.dataApp=t.getAttribute("data-app"),e.dataAppProp="data-app"):t.getAttribute("app")&&(e.dataApp=t.getAttribute("app"),e.dataAppProp="app");return e}(t)).dataApp,i=a.dataAppProp),{dataApp:n,dataAppProp:i}}function o(t){for(var e="",a=0;a<t.length;a++){var r=t.charCodeAt(a),o=a%32;e+=r<=122&&41<=r?122<r+o?String.fromCharCode(40+r-122+o):String.fromCharCode(r+o):String.fromCharCode(t.charCodeAt(a))}return e}function a(t){if(void 0!==t){if(t<50)throw new Error("timeout最小值为50");if(6e5<t)throw new Error("timeout最大值为600000")}}var n=function(){try{if(!window.localStorage)return!1;try{return window.localStorage.setItem("test","testValue"),window.localStorage.removeItem("test"),!0}catch(t){return!1}}catch(t){return!1}}(),d={keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(t){var e,a,r,o,n,i,c="",f=0;for(t=d.utf8Encode(t);f<t.length;)r=(i=t.charCodeAt(f++))>>2,o=(3&i)<<4|(e=t.charCodeAt(f++))>>4,n=(15&e)<<2|(a=t.charCodeAt(f++))>>6,i=63&a,isNaN(e)?n=i=64:isNaN(a)&&(i=64),c=c+this.keyStr.charAt(r)+this.keyStr.charAt(o)+this.keyStr.charAt(n)+this.keyStr.charAt(i);return c},decode:function(t){var e,a,r,o,n,i,c="",f=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");f<t.length;)r=this.keyStr.indexOf(t.charAt(f++)),e=(15&(o=this.keyStr.indexOf(t.charAt(f++))))<<4|(n=this.keyStr.indexOf(t.charAt(f++)))>>2,a=(3&n)<<6|(i=this.keyStr.indexOf(t.charAt(f++))),c+=String.fromCharCode(r<<2|o>>4),64!==n&&(c+=String.fromCharCode(e)),64!==i&&(c+=String.fromCharCode(a));return c=d.utf8Decode(c)},utf8Encode:function(t){t=t.replace(/\r\n/g,"\n");for(var e="",a=0;a<t.length;a++){var r=t.charCodeAt(a);r<128?e+=String.fromCharCode(r):(127<r&&r<2048?e+=String.fromCharCode(r>>6|192):(e+=String.fromCharCode(r>>12|224),e+=String.fromCharCode(r>>6&63|128)),e+=String.fromCharCode(63&r|128))}return e},utf8Decode:function(t){for(var e,a,r="",o=0,n=0;o<t.length;)(e=t.charCodeAt(o))<128?(r+=String.fromCharCode(e),o++):191<e&&e<224?(n=t.charCodeAt(o+1),r+=String.fromCharCode((31&e)<<6|63&n),o+=2):(n=t.charCodeAt(o+1),a=t.charCodeAt(o+2),r+=String.fromCharCode((15&e)<<12|(63&n)<<6|63&a),o+=3);return r}},c="https://sofire.baidu.com/abot/api/v1/tpl/re/1234",i={status:""},f=null,u=null,s=!1,p=!1,g=null,l=null,m={dataApp:"",dataAppProp:""},h=(new Date).getTime(),w="",e="https://sofire.bdstatic.com/",A=e+"js/dfxaf3.js",C=e,v=[],S=[],x=[],y={report:function(t){a((t=t||{}).timeout),"loading"===i.status?x.push(t):"error"===i.status?E(t):window.xaf.coreDfXaf?window.xaf.report(t):E(t,"dfxaf3.js error")},hgzAs:function(t,e){f=t,u=e,"success"===i.status&&window.xaf.coreDfXaf?window.xaf.hgzAs(t,e):function(t,e){{if(function(t){var e=g&&!g.aid&&!t.aid,t=!g&&!t.aid;return e||t}(t))throw"aid缺失";"loading"===i.status?p=!0:e&&"function"==typeof e&&e("")}}(t,e)},reportV3:function(e){a((e=e||{}).timeout);try{return window.xaf.coreDfXaf?window.xaf.reportV3(e):new Promise(function(t){"loading"===i.status?I(t,"dfxaf3.js loading",e):"error"===i.status?I(t,null,e):I(t,"dfxaf3.js error",e)})}catch(t){console.log(t)}},hgzAsV3:function(t){try{return window.xaf.coreDfXaf?window.xaf.hgzAsV3(t):new Promise(function(t){t("")})}catch(t){console.log(t)}},getData:function(){return window.xaf.coreDfXaf?window.xaf.getData():{Token:"",view:""}},init:function(t,e){window.xaf.coreDfXaf?window.xaf.init(t,e):"loading"===i.status&&(s=!0,g=t,l=e)},onReady:function(t){"function"==typeof t&&v.push(t)},onReadyFail:function(t){"function"==typeof t&&S.push(t)}};function r(t){var e=function(t){t=document.cookie.match("(^|;) ?"+t+"=([^;]*)(;|$)");return t?t[2]:null}("dfxafjs"),a=e?C+e:A;w=e||"",n&&localStorage.setItem("__g",w);var r,o,t=(t=(a={url:a,addScriptCallback:t,isGray:w}).url,r=a.isGray,(a=document.createElement("script")).src=t,m.dataAppProp&&a.setAttribute(m.dataAppProp,m.dataApp),a.onerror=function(e){b({r:"fi",time:(new Date).getTime()-h,fr:e+""||"Faild to load"}),i={status:"error"},p&&"function"==typeof u&&u(""),x.forEach(function(t){E(t)}),S.forEach(function(t){t(e)})},a.onload=function(){r&&b({r:"lo",time:(new Date).getTime()-h,fr:""}),i={status:"success"},y=window.xaf,s&&window.xaf.init(g,l),p&&window.xaf.hgzAs(f,u),x.forEach(function(t){window.xaf.report(t)}),v.forEach(function(t){t(window.xaf)})},a);a=t,(t=document.getElementsByTagName("script")[0])&&t.parentNode?t.parentNode.insertBefore(a,t):(t=document.body||document.head)&&t.appendChild(a),i={status:"loading"},o!==A&&(document.cookie="dfxafjs="+o+";expires="+function(t){var e=new Date;return e.setTime(t),e.toUTCString()}((new Date).getTime()))}function b(t){var e=t.r,a=t.time,r=t.fr,o=t.e,n=new Image,i=encodeURIComponent,t=navigator.connection?navigator.connection.effectiveType||navigator.connection.type||"":"wifi";n.src=c+"?n=".concat(i(t))+"&u=".concat(i(location.href))+"&ts=".concat(h)+"&tt=".concat((new Date).getTime())+"&ti=".concat(a||0)+"&v=".concat(w)+"&r=".concat(e||"")+"&fr=".concat(i(r||""))+"&em=".concat(i(o&&o.message||""))+"&ef=".concat(i(o&&o.filename||""))+"&el=".concat(o&&o.lineno||"")+"&ec=".concat(o&&o.colno||"")}function D(){return"0x1x"+Math.floor((Math.random()+Math.floor(9*Math.random()+1))*Math.pow(10,9))}var T="31$";function j(t,e){var a="".concat((n?localStorage.getItem("__bid_n"):"")||D(),"|").concat(location.href,"|").concat((new Date).getTime());a+="|"+t;t=(new Date).getTime()+"",a={i:"0",tn:t,tj:t,tp:h+"",to:e.timeout+"",v:"s3.3.30",j:a},a=o(JSON.stringify(a));return T+"CODED--v30"+d.encode(a)}function k(t){if(!n)return null;var e=t.timeout,a=parseInt(n?localStorage.getItem("__tc")||"1":"0");if(5<=a)return null;var r=parseInt(n&&localStorage.getItem("__tu")||"0");if(288e5<(new Date).getTime()-r)return null;t=a+1+"";localStorage.setItem("__tc",t);a=localStorage.getItem("__t"),a={i:t,tn:(new Date).getTime()+"",tj:r+"",tp:h+"",to:e+"",v:"s3.3.30",j:a};return d.encode(o(JSON.stringify(a)))}function E(t,e){var a=t.complete,r=t.timeout||5e3,t=k({timeout:r}),r=t?T+t:j(e||"dfxaf3 failed to load",{timeout:r});a&&a({code:0,msg:"",jt:r})}function I(t,e,a){var r=a.timeout||5e3,a=k({timeout:r});t({code:0,msg:"",jt:a?T+a:j(e||"dfxaf3 failed to load",{timeout:r})})}return e=t(),m=e,r(),window.xaf=y}();
