!function(n,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=n.document?t(n,!0):function(n){if(!n.document)throw new Error("jQuery requires a window with a document");return t(n)}:t(n)}("undefined"!=typeof window?window:this,function(n,t){function ii(n){var t=!!n&&"length"in n&&n.length,r=i.type(n);return"function"===r||i.isWindow(n)?!1:"array"===r||0===t||"number"==typeof t&&t>0&&t-1 in n}function ri(n,t,r){if(i.isFunction(t))return i.grep(n,function(n,i){return!!t.call(n,i,n)!==r});if(t.nodeType)return i.grep(n,function(n){return n===t!==r});if("string"==typeof t){if(pe.test(t))return i.filter(t,n,r);t=i.filter(t,n)}return i.grep(n,function(n){return i.inArray(n,t)>-1!==r})}function kr(n,t){do n=n[t];while(n&&1!==n.nodeType);return n}function we(n){var t={};return i.each(n.match(s)||[],function(n,i){t[i]=!0}),t}function dr(){u.addEventListener?(u.removeEventListener("DOMContentLoaded",v),n.removeEventListener("load",v)):(u.detachEvent("onreadystatechange",v),n.detachEvent("onload",v))}function v(){(u.addEventListener||"load"===n.event.type||"complete"===u.readyState)&&(dr(),i.ready())}function nu(n,t,r){if(void 0===r&&1===n.nodeType){var u="data-"+t.replace(ke,"-$1").toLowerCase();if(r=n.getAttribute(u),"string"==typeof r){try{r="true"===r?!0:"false"===r?!1:"null"===r?null:+r+""===r?+r:be.test(r)?i.parseJSON(r):r}catch(f){}i.data(n,t,r)}else r=void 0}return r}function fi(n){for(var t in n)if(("data"!==t||!i.isEmptyObject(n[t]))&&"toJSON"!==t)return!1;return!0}function tu(n,t,r,u){if(ot(n)){var s,e,h=i.expando,l=n.nodeType,o=l?i.cache:n,f=l?n[h]:n[h]&&h;if(f&&o[f]&&(u||o[f].data)||void 0!==r||"string"!=typeof t)return f||(f=l?n[h]=c.pop()||i.guid++:h),o[f]||(o[f]=l?{}:{toJSON:i.noop}),"object"!=typeof t&&"function"!=typeof t||(u?o[f]=i.extend(o[f],t):o[f].data=i.extend(o[f].data,t)),e=o[f],u||(e.data||(e.data={}),e=e.data),void 0!==r&&(e[i.camelCase(t)]=r),"string"==typeof t?(s=e[t],null==s&&(s=e[i.camelCase(t)])):s=e,s}}function iu(n,t,u){if(ot(n)){var o,s,h=n.nodeType,f=h?i.cache:n,e=h?n[i.expando]:i.expando;if(f[e]){if(t&&(o=u?f[e]:f[e].data)){for(i.isArray(t)?t=t.concat(i.map(t,i.camelCase)):(t in o)?t=[t]:(t=i.camelCase(t),t=(t in o)?[t]:t.split(" ")),s=t.length;s--;)delete o[t[s]];if(u?!fi(o):!i.isEmptyObject(o))return}(u||(delete f[e].data,fi(f[e])))&&(h?i.cleanData([n],!0):r.deleteExpando||f!=f.window?delete f[e]:f[e]=void 0)}}}function ru(n,t,r,u){var h,e=1,l=20,c=u?function(){return u.cur()}:function(){return i.css(n,t,"")},s=c(),o=r&&r[3]||(i.cssNumber[t]?"":"px"),f=(i.cssNumber[t]||"px"!==o&&+s)&&oi.exec(i.css(n,t));if(f&&f[3]!==o){o=o||f[3];r=r||[];f=+s||1;do e=e||".5",f/=e,i.style(n,t,f+o);while(e!==(e=c()/s)&&1!==e&&--l)}return r&&(f=+f||+s||0,h=r[1]?f+(r[1]+1)*r[2]:+r[2],u&&(u.unit=o,u.start=f,u.end=h)),h}function ou(n){var i=eu.split("|"),t=n.createDocumentFragment();if(t.createElement)while(i.length)t.createElement(i.pop());return t}function f(n,t){var e,u,o=0,r="undefined"!=typeof n.getElementsByTagName?n.getElementsByTagName(t||"*"):"undefined"!=typeof n.querySelectorAll?n.querySelectorAll(t||"*"):void 0;if(!r)for(r=[],e=n.childNodes||n;null!=(u=e[o]);o++)!t||i.nodeName(u,t)?r.push(u):i.merge(r,f(u,t));return void 0===t||t&&i.nodeName(n,t)?i.merge([n],r):r}function ci(n,t){for(var u,r=0;null!=(u=n[r]);r++)i._data(u,"globalEval",!t||i._data(t[r],"globalEval"))}function de(n){si.test(n.type)&&(n.defaultChecked=n.checked)}function hu(n,t,u,e,s){for(var l,h,k,c,w,b,v,d=n.length,y=ou(t),a=[],p=0;d>p;p++)if(h=n[p],h||0===h)if("object"===i.type(h))i.merge(a,h.nodeType?[h]:h);else if(su.test(h)){for(c=c||y.appendChild(t.createElement("div")),w=(uu.exec(h)||["",""])[1].toLowerCase(),v=o[w]||o._default,c.innerHTML=v[1]+i.htmlPrefilter(h)+v[2],l=v[0];l--;)c=c.lastChild;if(!r.leadingWhitespace&&hi.test(h)&&a.push(t.createTextNode(hi.exec(h)[0])),!r.tbody)for(h="table"!==w||li.test(h)?"<table>"!==v[1]||li.test(h)?0:c:c.firstChild,l=h&&h.childNodes.length;l--;)i.nodeName(b=h.childNodes[l],"tbody")&&!b.childNodes.length&&h.removeChild(b);for(i.merge(a,c.childNodes),c.textContent="";c.firstChild;)c.removeChild(c.firstChild);c=y.lastChild}else a.push(t.createTextNode(h));for(c&&y.removeChild(c),r.appendChecked||i.grep(f(a,"input"),de),p=0;h=a[p++];)if(e&&i.inArray(h,e)>-1)s&&s.push(h);else if(k=i.contains(h.ownerDocument,h),c=f(y.appendChild(h),"script"),k&&ci(c),u)for(l=0;h=c[l++];)fu.test(h.type||"")&&u.push(h);return c=null,y}function vt(){return!0}function rt(){return!1}function au(){try{return u.activeElement}catch(n){}}function vi(n,t,r,u,f,e){var o,s;if("object"==typeof t){"string"!=typeof r&&(u=u||r,r=void 0);for(s in t)vi(n,s,r,u,t[s],e);return n}if(null==u&&null==f?(f=r,u=r=void 0):null==f&&("string"==typeof r?(f=u,u=void 0):(f=u,u=r,r=void 0)),f===!1)f=rt;else if(!f)return n;return 1===e&&(o=f,f=function(n){return i().off(n),o.apply(this,arguments)},f.guid=o.guid||(o.guid=i.guid++)),n.each(function(){i.event.add(this,t,f,u,r)})}function yu(n,t){return i.nodeName(n,"table")&&i.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?n.getElementsByTagName("tbody")[0]||n.appendChild(n.ownerDocument.createElement("tbody")):n}function pu(n){return n.type=(null!==i.find.attr(n,"type"))+"/"+n.type,n}function wu(n){var t=fo.exec(n.type);return t?n.type=t[1]:n.removeAttribute("type"),n}function bu(n,t){if(1===t.nodeType&&i.hasData(n)){var u,f,o,s=i._data(n),r=i._data(t,s),e=s.events;if(e){delete r.handle;r.events={};for(u in e)for(f=0,o=e[u].length;o>f;f++)i.event.add(t,u,e[u][f])}r.data&&(r.data=i.extend({},r.data))}}function so(n,t){var u,e,f;if(1===t.nodeType){if(u=t.nodeName.toLowerCase(),!r.noCloneEvent&&t[i.expando]){f=i._data(t);for(e in f.events)i.removeEvent(t,e,f.handle);t.removeAttribute(i.expando)}"script"===u&&t.text!==n.text?(pu(t).text=n.text,wu(t)):"object"===u?(t.parentNode&&(t.outerHTML=n.outerHTML),r.html5Clone&&n.innerHTML&&!i.trim(t.innerHTML)&&(t.innerHTML=n.innerHTML)):"input"===u&&si.test(n.type)?(t.defaultChecked=t.checked=n.checked,t.value!==n.value&&(t.value=n.value)):"option"===u?t.defaultSelected=t.selected=n.defaultSelected:"input"!==u&&"textarea"!==u||(t.defaultValue=n.defaultValue)}}function k(n,t,u,e){t=sr.apply([],t);var l,o,a,h,p,c,s=0,v=n.length,b=v-1,y=t[0],w=i.isFunction(y);if(w||v>1&&"string"==typeof y&&!r.checkClone&&uo.test(y))return n.each(function(i){var r=n.eq(i);w&&(t[0]=y.call(this,i,r.html()));k(r,t,u,e)});if(v&&(c=hu(t,n[0].ownerDocument,!1,n,e),l=c.firstChild,1===c.childNodes.length&&(c=l),l||e)){for(h=i.map(f(c,"script"),pu),a=h.length;v>s;s++)o=c,s!==b&&(o=i.clone(o,!0,!0),a&&i.merge(h,f(o,"script"))),u.call(n[s],o,s);if(a)for(p=h[h.length-1].ownerDocument,i.map(h,wu),s=0;a>s;s++)o=h[s],fu.test(o.type||"")&&!i._data(o,"globalEval")&&i.contains(p,o)&&(o.src?i._evalUrl&&i._evalUrl(o.src):i.globalEval((o.text||o.textContent||o.innerHTML||"").replace(eo,"")));c=l=null}return n}function ku(n,t,r){for(var u,o=t?i.filter(t,n):n,e=0;null!=(u=o[e]);e++)r||1!==u.nodeType||i.cleanData(f(u)),u.parentNode&&(r&&i.contains(u.ownerDocument,u)&&ci(f(u,"script")),u.parentNode.removeChild(u));return n}function du(n,t){var r=i(t.createElement(n)).appendTo(t.body),u=i.css(r[0],"display");return r.detach(),u}function yt(n){var r=u,t=pi[n];return t||(t=du(n,r),"none"!==t&&t||(ht=(ht||i("<iframe frameborder='0' width='0' height='0'/>")).appendTo(r.documentElement),r=(ht[0].contentWindow||ht[0].contentDocument).document,r.write(),r.close(),t=du(n,r),ht.detach()),pi[n]=t),t}function bi(n,t){return{get:function(){return n()?void delete this.get:(this.get=t).apply(this,arguments)}}}function ef(n){if(n in ff)return n;for(var i=n.charAt(0).toUpperCase()+n.slice(1),t=uf.length;t--;)if(n=uf[t]+i,n in ff)return n}function of(n,t){for(var f,r,o,e=[],u=0,s=n.length;s>u;u++)r=n[u],r.style&&(e[u]=i._data(r,"olddisplay"),f=r.style.display,t?(e[u]||"none"!==f||(r.style.display=""),""===r.style.display&&st(r)&&(e[u]=i._data(r,"olddisplay",yt(r.nodeName)))):(o=st(r),(f&&"none"!==f||!o)&&i._data(r,"olddisplay",o?f:i.css(r,"display"))));for(u=0;s>u;u++)r=n[u],r.style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?e[u]||"":"none"));return n}function sf(n,t,i){var r=lo.exec(t);return r?Math.max(0,r[1]-(i||0))+(r[2]||"px"):t}function hf(n,t,r,u,f){for(var e=r===(u?"border":"content")?4:"width"===t?1:0,o=0;4>e;e+=2)"margin"===r&&(o+=i.css(n,r+b[e],!0,f)),u?("content"===r&&(o-=i.css(n,"padding"+b[e],!0,f)),"margin"!==r&&(o-=i.css(n,"border"+b[e]+"Width",!0,f))):(o+=i.css(n,"padding"+b[e],!0,f),"padding"!==r&&(o+=i.css(n,"border"+b[e]+"Width",!0,f)));return o}function cf(n,t,u){var o=!0,f="width"===t?n.offsetWidth:n.offsetHeight,e=d(n),s=r.boxSizing&&"border-box"===i.css(n,"boxSizing",!1,e);if(0>=f||null==f){if(f=p(n,t,e),(0>f||null==f)&&(f=n.style[t]),pt.test(f))return f;o=s&&(r.boxSizingReliable()||f===n.style[t]);f=parseFloat(f)||0}return f+hf(n,t,u||(s?"border":"content"),o,e)+"px"}function e(n,t,i,r,u){return new e.prototype.init(n,t,i,r,u)}function vf(){return n.setTimeout(function(){ut=void 0}),ut=i.now()}function bt(n,t){var r,i={height:n},u=0;for(t=t?1:0;4>u;u+=2-t)r=b[u],i["margin"+r]=i["padding"+r]=n;return t&&(i.opacity=i.width=n),i}function yf(n,t,i){for(var u,f=(h.tweeners[t]||[]).concat(h.tweeners["*"]),r=0,e=f.length;e>r;r++)if(u=f[r].call(i,t,n))return u}function vo(n,t,u){var f,a,p,v,s,w,h,b,l=this,y={},o=n.style,c=n.nodeType&&st(n),e=i._data(n,"fxshow");u.queue||(s=i._queueHooks(n,"fx"),null==s.unqueued&&(s.unqueued=0,w=s.empty.fire,s.empty.fire=function(){s.unqueued||w()}),s.unqueued++,l.always(function(){l.always(function(){s.unqueued--;i.queue(n,"fx").length||s.empty.fire()})}));1===n.nodeType&&("height"in t||"width"in t)&&(u.overflow=[o.overflow,o.overflowX,o.overflowY],h=i.css(n,"display"),b="none"===h?i._data(n,"olddisplay")||yt(n.nodeName):h,"inline"===b&&"none"===i.css(n,"float")&&(r.inlineBlockNeedsLayout&&"inline"!==yt(n.nodeName)?o.zoom=1:o.display="inline-block"));u.overflow&&(o.overflow="hidden",r.shrinkWrapBlocks()||l.always(function(){o.overflow=u.overflow[0];o.overflowX=u.overflow[1];o.overflowY=u.overflow[2]}));for(f in t)if(a=t[f],lf.exec(a)){if(delete t[f],p=p||"toggle"===a,a===(c?"hide":"show")){if("show"!==a||!e||void 0===e[f])continue;c=!0}y[f]=e&&e[f]||i.style(n,f)}else h=void 0;if(i.isEmptyObject(y))"inline"===("none"===h?yt(n.nodeName):h)&&(o.display=h);else{e?"hidden"in e&&(c=e.hidden):e=i._data(n,"fxshow",{});p&&(e.hidden=!c);c?i(n).show():l.done(function(){i(n).hide()});l.done(function(){var t;i._removeData(n,"fxshow");for(t in y)i.style(n,t,y[t])});for(f in y)v=yf(c?e[f]:0,f,l),f in e||(e[f]=v.start,c&&(v.end=v.start,v.start="width"===f||"height"===f?1:0))}}function yo(n,t){var r,f,e,u,o;for(r in n)if(f=i.camelCase(r),e=t[f],u=n[r],i.isArray(u)&&(e=u[1],u=n[r]=u[0]),r!==f&&(n[f]=u,delete n[r]),o=i.cssHooks[f],o&&"expand"in o){u=o.expand(u);delete n[f];for(r in u)r in n||(n[r]=u[r],t[r]=e)}else t[f]=e}function h(n,t,r){var e,o,s=0,a=h.prefilters.length,f=i.Deferred().always(function(){delete l.elem}),l=function(){if(o)return!1;for(var s=ut||vf(),t=Math.max(0,u.startTime+u.duration-s),h=t/u.duration||0,i=1-h,r=0,e=u.tweens.length;e>r;r++)u.tweens[r].run(i);return f.notifyWith(n,[u,i,t]),1>i&&e?t:(f.resolveWith(n,[u]),!1)},u=f.promise({elem:n,props:i.extend({},t),opts:i.extend(!0,{specialEasing:{},easing:i.easing._default},r),originalProperties:t,originalOptions:r,startTime:ut||vf(),duration:r.duration,tweens:[],createTween:function(t,r){var f=i.Tween(n,u.opts,t,r,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(f),f},stop:function(t){var i=0,r=t?u.tweens.length:0;if(o)return this;for(o=!0;r>i;i++)u.tweens[i].run(1);return t?(f.notifyWith(n,[u,1,0]),f.resolveWith(n,[u,t])):f.rejectWith(n,[u,t]),this}}),c=u.props;for(yo(c,u.opts.specialEasing);a>s;s++)if(e=h.prefilters[s].call(u,n,c,u.opts))return i.isFunction(e.stop)&&(i._queueHooks(u.elem,u.opts.queue).stop=i.proxy(e.stop,e)),e;return i.map(c,yf,u),i.isFunction(u.opts.start)&&u.opts.start.call(n,u),i.fx.timer(i.extend(l,{elem:n,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function nt(n){return i.attr(n,"class")||""}function re(n){return function(t,r){"string"!=typeof t&&(r=t,t="*");var u,f=0,e=t.toLowerCase().match(s)||[];if(i.isFunction(r))while(u=e[f++])"+"===u.charAt(0)?(u=u.slice(1)||"*",(n[u]=n[u]||[]).unshift(r)):(n[u]=n[u]||[]).push(r)}}function ue(n,t,r,u){function e(s){var h;return f[s]=!0,i.each(n[s]||[],function(n,i){var s=i(t,r,u);return"string"!=typeof s||o||f[s]?o?!(h=s):void 0:(t.dataTypes.unshift(s),e(s),!1)}),h}var f={},o=n===tr;return e(t.dataTypes[0])||!f["*"]&&e("*")}function rr(n,t){var u,r,f=i.ajaxSettings.flatOptions||{};for(r in t)void 0!==t[r]&&((f[r]?n:u||(u={}))[r]=t[r]);return u&&i.extend(!0,n,u),n}function ts(n,t,i){for(var o,e,u,f,s=n.contents,r=n.dataTypes;"*"===r[0];)r.shift(),void 0===e&&(e=n.mimeType||t.getResponseHeader("Content-Type"));if(e)for(f in s)if(s[f]&&s[f].test(e)){r.unshift(f);break}if(r[0]in i)u=r[0];else{for(f in i){if(!r[0]||n.converters[f+" "+r[0]]){u=f;break}o||(o=f)}u=u||o}if(u)return(u!==r[0]&&r.unshift(u),i[u])}function is(n,t,i,r){var h,u,f,s,e,o={},c=n.dataTypes.slice();if(c[1])for(f in n.converters)o[f.toLowerCase()]=n.converters[f];for(u=c.shift();u;)if(n.responseFields[u]&&(i[n.responseFields[u]]=t),!e&&r&&n.dataFilter&&(t=n.dataFilter(t,n.dataType)),e=u,u=c.shift())if("*"===u)u=e;else if("*"!==e&&e!==u){if(f=o[e+" "+u]||o["* "+u],!f)for(h in o)if(s=h.split(" "),s[1]===u&&(f=o[e+" "+s[0]]||o["* "+s[0]])){f===!0?f=o[h]:o[h]!==!0&&(u=s[0],c.unshift(s[1]));break}if(f!==!0)if(f&&n.throws)t=f(t);else try{t=f(t)}catch(l){return{state:"parsererror",error:f?l:"No conversion from "+e+" to "+u}}}return{state:"success",data:t}}function rs(n){return n.style&&n.style.display||i.css(n,"display")}function us(n){if(!i.contains(n.ownerDocument||u,n))return!0;while(n&&1===n.nodeType){if("none"===rs(n)||"hidden"===n.type)return!0;n=n.parentNode}return!1}function ur(n,t,r,u){var f;if(i.isArray(t))i.each(t,function(t,i){r||es.test(n)?u(n,i):ur(n+"["+("object"==typeof i&&null!=i?t:"")+"]",i,r,u)});else if(r||"object"!==i.type(t))u(n,t);else for(f in t)ur(n+"["+f+"]",t[f],r,u)}function fr(){try{return new n.XMLHttpRequest}catch(t){}}function ee(){try{return new n.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function oe(n){return i.isWindow(n)?n:9===n.nodeType?n.defaultView||n.parentWindow:!1}var c=[],u=n.document,a=c.slice,sr=c.concat,ti=c.push,hr=c.indexOf,lt={},ce=lt.toString,tt=lt.hasOwnProperty,r={},cr="1.12.4",i=function(n,t){return new i.fn.init(n,t)},le=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ae=/^-ms-/,ve=/-([\da-z])/gi,ye=function(n,t){return t.toUpperCase()},w,ui,yr,pr,wr,br,s,at,gr,o,su,li,ht,pi,d,p,tf,ut,wt,lf,af,pf,wf,kf,df,dt,er,ni,or,se,he;i.fn=i.prototype={jquery:cr,constructor:i,selector:"",length:0,toArray:function(){return a.call(this)},get:function(n){return null!=n?0>n?this[n+this.length]:this[n]:a.call(this)},pushStack:function(n){var t=i.merge(this.constructor(),n);return t.prevObject=this,t.context=this.context,t},each:function(n){return i.each(this,n)},map:function(n){return this.pushStack(i.map(this,function(t,i){return n.call(t,i,t)}))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(n){var i=this.length,t=+n+(0>n?i:0);return this.pushStack(t>=0&&i>t?[this[t]]:[])},end:function(){return this.prevObject||this.constructor()},push:ti,sort:c.sort,splice:c.splice};i.extend=i.fn.extend=function(){var r,e,t,f,o,s,n=arguments[0]||{},u=1,c=arguments.length,h=!1;for("boolean"==typeof n&&(h=n,n=arguments[u]||{},u++),"object"==typeof n||i.isFunction(n)||(n={}),u===c&&(n=this,u--);c>u;u++)if(null!=(o=arguments[u]))for(f in o)r=n[f],t=o[f],n!==t&&(h&&t&&(i.isPlainObject(t)||(e=i.isArray(t)))?(e?(e=!1,s=r&&i.isArray(r)?r:[]):s=r&&i.isPlainObject(r)?r:{},n[f]=i.extend(h,s,t)):void 0!==t&&(n[f]=t));return n};i.extend({expando:"jQuery"+(cr+Math.random()).replace(/\D/g,""),isReady:!0,error:function(n){throw new Error(n);},noop:function(){},isFunction:function(n){return"function"===i.type(n)},isArray:Array.isArray||function(n){return"array"===i.type(n)},isWindow:function(n){return null!=n&&n==n.window},isNumeric:function(n){var t=n&&n.toString();return!i.isArray(n)&&t-parseFloat(t)+1>=0},isEmptyObject:function(n){for(var t in n)return!1;return!0},isPlainObject:function(n){var t;if(!n||"object"!==i.type(n)||n.nodeType||i.isWindow(n))return!1;try{if(n.constructor&&!tt.call(n,"constructor")&&!tt.call(n.constructor.prototype,"isPrototypeOf"))return!1}catch(u){return!1}if(!r.ownFirst)for(t in n)return tt.call(n,t);for(t in n);return void 0===t||tt.call(n,t)},type:function(n){return null==n?n+"":"object"==typeof n||"function"==typeof n?lt[ce.call(n)]||"object":typeof n},globalEval:function(t){t&&i.trim(t)&&(n.execScript||function(t){n.eval.call(n,t)})(t)},camelCase:function(n){return n.replace(ae,"ms-").replace(ve,ye)},nodeName:function(n,t){return n.nodeName&&n.nodeName.toLowerCase()===t.toLowerCase()},each:function(n,t){var r,i=0;if(ii(n)){for(r=n.length;r>i;i++)if(t.call(n[i],i,n[i])===!1)break}else for(i in n)if(t.call(n[i],i,n[i])===!1)break;return n},trim:function(n){return null==n?"":(n+"").replace(le,"")},makeArray:function(n,t){var r=t||[];return null!=n&&(ii(Object(n))?i.merge(r,"string"==typeof n?[n]:n):ti.call(r,n)),r},inArray:function(n,t,i){var r;if(t){if(hr)return hr.call(t,n,i);for(r=t.length,i=i?0>i?Math.max(0,r+i):i:0;r>i;i++)if(i in t&&t[i]===n)return i}return-1},merge:function(n,t){for(var r=+t.length,i=0,u=n.length;r>i;)n[u++]=t[i++];if(r!==r)while(void 0!==t[i])n[u++]=t[i++];return n.length=u,n},grep:function(n,t,i){for(var u,f=[],r=0,e=n.length,o=!i;e>r;r++)u=!t(n[r],r),u!==o&&f.push(n[r]);return f},map:function(n,t,i){var e,u,r=0,f=[];if(ii(n))for(e=n.length;e>r;r++)u=t(n[r],r,i),null!=u&&f.push(u);else for(r in n)u=t(n[r],r,i),null!=u&&f.push(u);return sr.apply([],f)},guid:1,proxy:function(n,t){var u,r,f;return"string"==typeof t&&(f=n[t],t=n,n=f),i.isFunction(n)?(u=a.call(arguments,2),r=function(){return n.apply(t||this,u.concat(a.call(arguments)))},r.guid=n.guid=n.guid||i.guid++,r):void 0},now:function(){return+new Date},support:r});"function"==typeof Symbol&&(i.fn[Symbol.iterator]=c[Symbol.iterator]);i.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(n,t){lt["[object "+t+"]"]=t.toLowerCase()});w=function(n){function u(n,t,r,u){var l,w,a,s,nt,d,y,g,p=t&&t.ownerDocument,v=t?t.nodeType:9;if(r=r||[],"string"!=typeof n||!n||1!==v&&9!==v&&11!==v)return r;if(!u&&((t?t.ownerDocument||t:c)!==i&&b(t),t=t||i,h)){if(11!==v&&(d=sr.exec(n)))if(l=d[1]){if(9===v){if(!(a=t.getElementById(l)))return r;if(a.id===l)return r.push(a),r}else if(p&&(a=p.getElementById(l))&&et(t,a)&&a.id===l)return r.push(a),r}else{if(d[2])return k.apply(r,t.getElementsByTagName(n)),r;if((l=d[3])&&f.getElementsByClassName&&t.getElementsByClassName)return k.apply(r,t.getElementsByClassName(l)),r}if(f.qsa&&!lt[n+" "]&&(!o||!o.test(n))){if(1!==v)p=t,g=n;else if("object"!==t.nodeName.toLowerCase()){for((s=t.getAttribute("id"))?s=s.replace(hr,"\\$&"):t.setAttribute("id",s=e),y=ft(n),w=y.length,nt=yi.test(s)?"#"+s:"[id='"+s+"']";w--;)y[w]=nt+" "+yt(y[w]);g=y.join(",");p=gt.test(n)&&ii(t.parentNode)||t}if(g)try{return k.apply(r,p.querySelectorAll(g)),r}catch(tt){}finally{s===e&&t.removeAttribute("id")}}}return si(n.replace(at,"$1"),t,r,u)}function ni(){function n(r,u){return i.push(r+" ")>t.cacheLength&&delete n[i.shift()],n[r+" "]=u}var i=[];return n}function l(n){return n[e]=!0,n}function a(n){var t=i.createElement("div");try{return!!n(t)}catch(r){return!1}finally{t.parentNode&&t.parentNode.removeChild(t);t=null}}function ti(n,i){for(var r=n.split("|"),u=r.length;u--;)t.attrHandle[r[u]]=i}function wi(n,t){var i=t&&n,r=i&&1===n.nodeType&&1===t.nodeType&&(~t.sourceIndex||li)-(~n.sourceIndex||li);if(r)return r;if(i)while(i=i.nextSibling)if(i===t)return-1;return n?1:-1}function cr(n){return function(t){var i=t.nodeName.toLowerCase();return"input"===i&&t.type===n}}function lr(n){return function(t){var i=t.nodeName.toLowerCase();return("input"===i||"button"===i)&&t.type===n}}function it(n){return l(function(t){return t=+t,l(function(i,r){for(var u,f=n([],i.length,t),e=f.length;e--;)i[u=f[e]]&&(i[u]=!(r[u]=i[u]))})})}function ii(n){return n&&"undefined"!=typeof n.getElementsByTagName&&n}function bi(){}function yt(n){for(var t=0,r=n.length,i="";r>t;t++)i+=n[t].value;return i}function ri(n,t,i){var r=t.dir,u=i&&"parentNode"===r,f=ki++;return t.first?function(t,i,f){while(t=t[r])if(1===t.nodeType||u)return n(t,i,f)}:function(t,i,o){var s,h,c,l=[v,f];if(o){while(t=t[r])if((1===t.nodeType||u)&&n(t,i,o))return!0}else while(t=t[r])if(1===t.nodeType||u){if(c=t[e]||(t[e]={}),h=c[t.uniqueID]||(c[t.uniqueID]={}),(s=h[r])&&s[0]===v&&s[1]===f)return l[2]=s[2];if(h[r]=l,l[2]=n(t,i,o))return!0}}}function ui(n){return n.length>1?function(t,i,r){for(var u=n.length;u--;)if(!n[u](t,i,r))return!1;return!0}:n[0]}function ar(n,t,i){for(var r=0,f=t.length;f>r;r++)u(n,t[r],i);return i}function pt(n,t,i,r,u){for(var e,o=[],f=0,s=n.length,h=null!=t;s>f;f++)(e=n[f])&&(i&&!i(e,r,u)||(o.push(e),h&&t.push(f)));return o}function fi(n,t,i,r,u,f){return r&&!r[e]&&(r=fi(r)),u&&!u[e]&&(u=fi(u,f)),l(function(f,e,o,s){var l,c,a,p=[],y=[],w=e.length,b=f||ar(t||"*",o.nodeType?[o]:o,[]),v=!n||!f&&t?b:pt(b,p,n,o,s),h=i?u||(f?n:w||r)?[]:e:v;if(i&&i(v,h,o,s),r)for(l=pt(h,y),r(l,[],o,s),c=l.length;c--;)(a=l[c])&&(h[y[c]]=!(v[y[c]]=a));if(f){if(u||n){if(u){for(l=[],c=h.length;c--;)(a=h[c])&&l.push(v[c]=a);u(null,h=[],l,s)}for(c=h.length;c--;)(a=h[c])&&(l=u?nt(f,a):p[c])>-1&&(f[l]=!(e[l]=a))}}else h=pt(h===e?h.splice(w,h.length):h),u?u(null,e,h,s):k.apply(e,h)})}function ei(n){for(var o,u,r,s=n.length,h=t.relative[n[0].type],c=h||t.relative[" "],i=h?1:0,l=ri(function(n){return n===o},c,!0),a=ri(function(n){return nt(o,n)>-1},c,!0),f=[function(n,t,i){var r=!h&&(i||t!==ht)||((o=t).nodeType?l(n,t,i):a(n,t,i));return o=null,r}];s>i;i++)if(u=t.relative[n[i].type])f=[ri(ui(f),u)];else{if(u=t.filter[n[i].type].apply(null,n[i].matches),u[e]){for(r=++i;s>r;r++)if(t.relative[n[r].type])break;return fi(i>1&&ui(f),i>1&&yt(n.slice(0,i-1).concat({value:" "===n[i-2].type?"*":""})).replace(at,"$1"),u,r>i&&ei(n.slice(i,r)),s>r&&ei(n=n.slice(r)),s>r&&yt(n))}f.push(u)}return ui(f)}function vr(n,r){var f=r.length>0,e=n.length>0,o=function(o,s,c,l,a){var y,nt,d,g=0,p="0",tt=o&&[],w=[],it=ht,rt=o||e&&t.find.TAG("*",a),ut=v+=null==it?1:Math.random()||.1,ft=rt.length;for(a&&(ht=s===i||s||a);p!==ft&&null!=(y=rt[p]);p++){if(e&&y){for(nt=0,s||y.ownerDocument===i||(b(y),c=!h);d=n[nt++];)if(d(y,s||i,c)){l.push(y);break}a&&(v=ut)}f&&((y=!d&&y)&&g--,o&&tt.push(y))}if(g+=p,f&&p!==g){for(nt=0;d=r[nt++];)d(tt,w,s,c);if(o){if(g>0)while(p--)tt[p]||w[p]||(w[p]=gi.call(l));w=pt(w)}k.apply(l,w);a&&!o&&w.length>0&&g+r.length>1&&u.uniqueSort(l)}return a&&(v=ut,ht=it),tt};return f?l(o):o}var rt,f,t,st,oi,ft,wt,si,ht,w,ut,b,i,s,h,o,d,ct,et,e="sizzle"+1*new Date,c=n.document,v=0,ki=0,hi=ni(),ci=ni(),lt=ni(),bt=function(n,t){return n===t&&(ut=!0),0},li=-2147483648,di={}.hasOwnProperty,g=[],gi=g.pop,nr=g.push,k=g.push,ai=g.slice,nt=function(n,t){for(var i=0,r=n.length;r>i;i++)if(n[i]===t)return i;return-1},kt="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",r="[\\x20\\t\\r\\n\\f]",tt="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",vi="\\["+r+"*("+tt+")(?:"+r+"*([*^$|!~]?=)"+r+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+tt+"))|)"+r+"*\\]",dt=":("+tt+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+vi+")*)|.*)\\)|)",tr=new RegExp(r+"+","g"),at=new RegExp("^"+r+"+|((?:^|[^\\\\])(?:\\\\.)*)"+r+"+$","g"),ir=new RegExp("^"+r+"*,"+r+"*"),rr=new RegExp("^"+r+"*([>+~]|"+r+")"+r+"*"),ur=new RegExp("="+r+"*([^\\]'\"]*?)"+r+"*\\]","g"),fr=new RegExp(dt),yi=new RegExp("^"+tt+"$"),vt={ID:new RegExp("^#("+tt+")"),CLASS:new RegExp("^\\.("+tt+")"),TAG:new RegExp("^("+tt+"|[*])"),ATTR:new RegExp("^"+vi),PSEUDO:new RegExp("^"+dt),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+r+"*(even|odd|(([+-]|)(\\d*)n|)"+r+"*(?:([+-]|)"+r+"*(\\d+)|))"+r+"*\\)|)","i"),bool:new RegExp("^(?:"+kt+")$","i"),needsContext:new RegExp("^"+r+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+r+"*((?:-\\d)?\\d*)"+r+"*\\)|)(?=[^-]|$)","i")},er=/^(?:input|select|textarea|button)$/i,or=/^h\d$/i,ot=/^[^{]+\{\s*\[native \w/,sr=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,gt=/[+~]/,hr=/'|\\/g,y=new RegExp("\\\\([\\da-f]{1,6}"+r+"?|("+r+")|.)","ig"),p=function(n,t,i){var r="0x"+t-65536;return r!==r||i?t:0>r?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},pi=function(){b()};try{k.apply(g=ai.call(c.childNodes),c.childNodes);g[c.childNodes.length].nodeType}catch(yr){k={apply:g.length?function(n,t){nr.apply(n,ai.call(t))}:function(n,t){for(var i=n.length,r=0;n[i++]=t[r++];);n.length=i-1}}}f=u.support={};oi=u.isXML=function(n){var t=n&&(n.ownerDocument||n).documentElement;return t?"HTML"!==t.nodeName:!1};b=u.setDocument=function(n){var v,u,l=n?n.ownerDocument||n:c;return l!==i&&9===l.nodeType&&l.documentElement?(i=l,s=i.documentElement,h=!oi(i),(u=i.defaultView)&&u.top!==u&&(u.addEventListener?u.addEventListener("unload",pi,!1):u.attachEvent&&u.attachEvent("onunload",pi)),f.attributes=a(function(n){return n.className="i",!n.getAttribute("className")}),f.getElementsByTagName=a(function(n){return n.appendChild(i.createComment("")),!n.getElementsByTagName("*").length}),f.getElementsByClassName=ot.test(i.getElementsByClassName),f.getById=a(function(n){return s.appendChild(n).id=e,!i.getElementsByName||!i.getElementsByName(e).length}),f.getById?(t.find.ID=function(n,t){if("undefined"!=typeof t.getElementById&&h){var i=t.getElementById(n);return i?[i]:[]}},t.filter.ID=function(n){var t=n.replace(y,p);return function(n){return n.getAttribute("id")===t}}):(delete t.find.ID,t.filter.ID=function(n){var t=n.replace(y,p);return function(n){var i="undefined"!=typeof n.getAttributeNode&&n.getAttributeNode("id");return i&&i.value===t}}),t.find.TAG=f.getElementsByTagName?function(n,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(n):f.qsa?t.querySelectorAll(n):void 0}:function(n,t){var i,r=[],f=0,u=t.getElementsByTagName(n);if("*"===n){while(i=u[f++])1===i.nodeType&&r.push(i);return r}return u},t.find.CLASS=f.getElementsByClassName&&function(n,t){if("undefined"!=typeof t.getElementsByClassName&&h)return t.getElementsByClassName(n)},d=[],o=[],(f.qsa=ot.test(i.querySelectorAll))&&(a(function(n){s.appendChild(n).innerHTML="<a id='"+e+"'><\/a><select id='"+e+"-\r\\' msallowcapture=''><option selected=''><\/option><\/select>";n.querySelectorAll("[msallowcapture^='']").length&&o.push("[*^$]="+r+"*(?:''|\"\")");n.querySelectorAll("[selected]").length||o.push("\\["+r+"*(?:value|"+kt+")");n.querySelectorAll("[id~="+e+"-]").length||o.push("~=");n.querySelectorAll(":checked").length||o.push(":checked");n.querySelectorAll("a#"+e+"+*").length||o.push(".#.+[+~]")}),a(function(n){var t=i.createElement("input");t.setAttribute("type","hidden");n.appendChild(t).setAttribute("name","D");n.querySelectorAll("[name=d]").length&&o.push("name"+r+"*[*^$|!~]?=");n.querySelectorAll(":enabled").length||o.push(":enabled",":disabled");n.querySelectorAll("*,:x");o.push(",.*:")})),(f.matchesSelector=ot.test(ct=s.matches||s.webkitMatchesSelector||s.mozMatchesSelector||s.oMatchesSelector||s.msMatchesSelector))&&a(function(n){f.disconnectedMatch=ct.call(n,"div");ct.call(n,"[s!='']:x");d.push("!=",dt)}),o=o.length&&new RegExp(o.join("|")),d=d.length&&new RegExp(d.join("|")),v=ot.test(s.compareDocumentPosition),et=v||ot.test(s.contains)?function(n,t){var r=9===n.nodeType?n.documentElement:n,i=t&&t.parentNode;return n===i||!(!i||1!==i.nodeType||!(r.contains?r.contains(i):n.compareDocumentPosition&&16&n.compareDocumentPosition(i)))}:function(n,t){if(t)while(t=t.parentNode)if(t===n)return!0;return!1},bt=v?function(n,t){if(n===t)return ut=!0,0;var r=!n.compareDocumentPosition-!t.compareDocumentPosition;return r?r:(r=(n.ownerDocument||n)===(t.ownerDocument||t)?n.compareDocumentPosition(t):1,1&r||!f.sortDetached&&t.compareDocumentPosition(n)===r?n===i||n.ownerDocument===c&&et(c,n)?-1:t===i||t.ownerDocument===c&&et(c,t)?1:w?nt(w,n)-nt(w,t):0:4&r?-1:1)}:function(n,t){if(n===t)return ut=!0,0;var r,u=0,o=n.parentNode,s=t.parentNode,f=[n],e=[t];if(!o||!s)return n===i?-1:t===i?1:o?-1:s?1:w?nt(w,n)-nt(w,t):0;if(o===s)return wi(n,t);for(r=n;r=r.parentNode;)f.unshift(r);for(r=t;r=r.parentNode;)e.unshift(r);while(f[u]===e[u])u++;return u?wi(f[u],e[u]):f[u]===c?-1:e[u]===c?1:0},i):i};u.matches=function(n,t){return u(n,null,null,t)};u.matchesSelector=function(n,t){if((n.ownerDocument||n)!==i&&b(n),t=t.replace(ur,"='$1']"),f.matchesSelector&&h&&!lt[t+" "]&&(!d||!d.test(t))&&(!o||!o.test(t)))try{var r=ct.call(n,t);if(r||f.disconnectedMatch||n.document&&11!==n.document.nodeType)return r}catch(e){}return u(t,i,null,[n]).length>0};u.contains=function(n,t){return(n.ownerDocument||n)!==i&&b(n),et(n,t)};u.attr=function(n,r){(n.ownerDocument||n)!==i&&b(n);var e=t.attrHandle[r.toLowerCase()],u=e&&di.call(t.attrHandle,r.toLowerCase())?e(n,r,!h):void 0;return void 0!==u?u:f.attributes||!h?n.getAttribute(r):(u=n.getAttributeNode(r))&&u.specified?u.value:null};u.error=function(n){throw new Error("Syntax error, unrecognized expression: "+n);};u.uniqueSort=function(n){var r,u=[],t=0,i=0;if(ut=!f.detectDuplicates,w=!f.sortStable&&n.slice(0),n.sort(bt),ut){while(r=n[i++])r===n[i]&&(t=u.push(i));while(t--)n.splice(u[t],1)}return w=null,n};st=u.getText=function(n){var r,i="",u=0,t=n.nodeType;if(t){if(1===t||9===t||11===t){if("string"==typeof n.textContent)return n.textContent;for(n=n.firstChild;n;n=n.nextSibling)i+=st(n)}else if(3===t||4===t)return n.nodeValue}else while(r=n[u++])i+=st(r);return i};t=u.selectors={cacheLength:50,createPseudo:l,match:vt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(n){return n[1]=n[1].replace(y,p),n[3]=(n[3]||n[4]||n[5]||"").replace(y,p),"~="===n[2]&&(n[3]=" "+n[3]+" "),n.slice(0,4)},CHILD:function(n){return n[1]=n[1].toLowerCase(),"nth"===n[1].slice(0,3)?(n[3]||u.error(n[0]),n[4]=+(n[4]?n[5]+(n[6]||1):2*("even"===n[3]||"odd"===n[3])),n[5]=+(n[7]+n[8]||"odd"===n[3])):n[3]&&u.error(n[0]),n},PSEUDO:function(n){var i,t=!n[6]&&n[2];return vt.CHILD.test(n[0])?null:(n[3]?n[2]=n[4]||n[5]||"":t&&fr.test(t)&&(i=ft(t,!0))&&(i=t.indexOf(")",t.length-i)-t.length)&&(n[0]=n[0].slice(0,i),n[2]=t.slice(0,i)),n.slice(0,3))}},filter:{TAG:function(n){var t=n.replace(y,p).toLowerCase();return"*"===n?function(){return!0}:function(n){return n.nodeName&&n.nodeName.toLowerCase()===t}},CLASS:function(n){var t=hi[n+" "];return t||(t=new RegExp("(^|"+r+")"+n+"("+r+"|$)"))&&hi(n,function(n){return t.test("string"==typeof n.className&&n.className||"undefined"!=typeof n.getAttribute&&n.getAttribute("class")||"")})},ATTR:function(n,t,i){return function(r){var f=u.attr(r,n);return null==f?"!="===t:t?(f+="","="===t?f===i:"!="===t?f!==i:"^="===t?i&&0===f.indexOf(i):"*="===t?i&&f.indexOf(i)>-1:"$="===t?i&&f.slice(-i.length)===i:"~="===t?(" "+f.replace(tr," ")+" ").indexOf(i)>-1:"|="===t?f===i||f.slice(0,i.length+1)===i+"-":!1):!0}},CHILD:function(n,t,i,r,u){var s="nth"!==n.slice(0,3),o="last"!==n.slice(-4),f="of-type"===t;return 1===r&&0===u?function(n){return!!n.parentNode}:function(t,i,h){var p,w,y,c,a,b,k=s!==o?"nextSibling":"previousSibling",d=t.parentNode,nt=f&&t.nodeName.toLowerCase(),g=!h&&!f,l=!1;if(d){if(s){while(k){for(c=t;c=c[k];)if(f?c.nodeName.toLowerCase()===nt:1===c.nodeType)return!1;b=k="only"===n&&!b&&"nextSibling"}return!0}if(b=[o?d.firstChild:d.lastChild],o&&g){for(c=d,y=c[e]||(c[e]={}),w=y[c.uniqueID]||(y[c.uniqueID]={}),p=w[n]||[],a=p[0]===v&&p[1],l=a&&p[2],c=a&&d.childNodes[a];c=++a&&c&&c[k]||(l=a=0)||b.pop();)if(1===c.nodeType&&++l&&c===t){w[n]=[v,a,l];break}}else if(g&&(c=t,y=c[e]||(c[e]={}),w=y[c.uniqueID]||(y[c.uniqueID]={}),p=w[n]||[],a=p[0]===v&&p[1],l=a),l===!1)while(c=++a&&c&&c[k]||(l=a=0)||b.pop())if((f?c.nodeName.toLowerCase()===nt:1===c.nodeType)&&++l&&(g&&(y=c[e]||(c[e]={}),w=y[c.uniqueID]||(y[c.uniqueID]={}),w[n]=[v,l]),c===t))break;return l-=u,l===r||l%r==0&&l/r>=0}}},PSEUDO:function(n,i){var f,r=t.pseudos[n]||t.setFilters[n.toLowerCase()]||u.error("unsupported pseudo: "+n);return r[e]?r(i):r.length>1?(f=[n,n,"",i],t.setFilters.hasOwnProperty(n.toLowerCase())?l(function(n,t){for(var u,f=r(n,i),e=f.length;e--;)u=nt(n,f[e]),n[u]=!(t[u]=f[e])}):function(n){return r(n,0,f)}):r}},pseudos:{not:l(function(n){var t=[],r=[],i=wt(n.replace(at,"$1"));return i[e]?l(function(n,t,r,u){for(var e,o=i(n,null,u,[]),f=n.length;f--;)(e=o[f])&&(n[f]=!(t[f]=e))}):function(n,u,f){return t[0]=n,i(t,null,f,r),t[0]=null,!r.pop()}}),has:l(function(n){return function(t){return u(n,t).length>0}}),contains:l(function(n){return n=n.replace(y,p),function(t){return(t.textContent||t.innerText||st(t)).indexOf(n)>-1}}),lang:l(function(n){return yi.test(n||"")||u.error("unsupported lang: "+n),n=n.replace(y,p).toLowerCase(),function(t){var i;do if(i=h?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return i=i.toLowerCase(),i===n||0===i.indexOf(n+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var i=n.location&&n.location.hash;return i&&i.slice(1)===t.id},root:function(n){return n===s},focus:function(n){return n===i.activeElement&&(!i.hasFocus||i.hasFocus())&&!!(n.type||n.href||~n.tabIndex)},enabled:function(n){return n.disabled===!1},disabled:function(n){return n.disabled===!0},checked:function(n){var t=n.nodeName.toLowerCase();return"input"===t&&!!n.checked||"option"===t&&!!n.selected},selected:function(n){return n.parentNode&&n.parentNode.selectedIndex,n.selected===!0},empty:function(n){for(n=n.firstChild;n;n=n.nextSibling)if(n.nodeType<6)return!1;return!0},parent:function(n){return!t.pseudos.empty(n)},header:function(n){return or.test(n.nodeName)},input:function(n){return er.test(n.nodeName)},button:function(n){var t=n.nodeName.toLowerCase();return"input"===t&&"button"===n.type||"button"===t},text:function(n){var t;return"input"===n.nodeName.toLowerCase()&&"text"===n.type&&(null==(t=n.getAttribute("type"))||"text"===t.toLowerCase())},first:it(function(){return[0]}),last:it(function(n,t){return[t-1]}),eq:it(function(n,t,i){return[0>i?i+t:i]}),even:it(function(n,t){for(var i=0;t>i;i+=2)n.push(i);return n}),odd:it(function(n,t){for(var i=1;t>i;i+=2)n.push(i);return n}),lt:it(function(n,t,i){for(var r=0>i?i+t:i;--r>=0;)n.push(r);return n}),gt:it(function(n,t,i){for(var r=0>i?i+t:i;++r<t;)n.push(r);return n})}};t.pseudos.nth=t.pseudos.eq;for(rt in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})t.pseudos[rt]=cr(rt);for(rt in{submit:!0,reset:!0})t.pseudos[rt]=lr(rt);return bi.prototype=t.filters=t.pseudos,t.setFilters=new bi,ft=u.tokenize=function(n,i){var e,f,s,o,r,h,c,l=ci[n+" "];if(l)return i?0:l.slice(0);for(r=n,h=[],c=t.preFilter;r;){(!e||(f=ir.exec(r)))&&(f&&(r=r.slice(f[0].length)||r),h.push(s=[]));e=!1;(f=rr.exec(r))&&(e=f.shift(),s.push({value:e,type:f[0].replace(at," ")}),r=r.slice(e.length));for(o in t.filter)(f=vt[o].exec(r))&&(!c[o]||(f=c[o](f)))&&(e=f.shift(),s.push({value:e,type:o,matches:f}),r=r.slice(e.length));if(!e)break}return i?r.length:r?u.error(n):ci(n,h).slice(0)},wt=u.compile=function(n,t){var r,u=[],f=[],i=lt[n+" "];if(!i){for(t||(t=ft(n)),r=t.length;r--;)i=ei(t[r]),i[e]?u.push(i):f.push(i);i=lt(n,vr(f,u));i.selector=n}return i},si=u.select=function(n,i,r,u){var s,e,o,a,v,l="function"==typeof n&&n,c=!u&&ft(n=l.selector||n);if(r=r||[],1===c.length){if(e=c[0]=c[0].slice(0),e.length>2&&"ID"===(o=e[0]).type&&f.getById&&9===i.nodeType&&h&&t.relative[e[1].type]){if(i=(t.find.ID(o.matches[0].replace(y,p),i)||[])[0],!i)return r;l&&(i=i.parentNode);n=n.slice(e.shift().value.length)}for(s=vt.needsContext.test(n)?0:e.length;s--;){if(o=e[s],t.relative[a=o.type])break;if((v=t.find[a])&&(u=v(o.matches[0].replace(y,p),gt.test(e[0].type)&&ii(i.parentNode)||i))){if(e.splice(s,1),n=u.length&&yt(e),!n)return k.apply(r,u),r;break}}}return(l||wt(n,c))(u,i,!h,r,!i||gt.test(n)&&ii(i.parentNode)||i),r},f.sortStable=e.split("").sort(bt).join("")===e,f.detectDuplicates=!!ut,b(),f.sortDetached=a(function(n){return 1&n.compareDocumentPosition(i.createElement("div"))}),a(function(n){return n.innerHTML="<a href='#'><\/a>","#"===n.firstChild.getAttribute("href")})||ti("type|href|height|width",function(n,t,i){if(!i)return n.getAttribute(t,"type"===t.toLowerCase()?1:2)}),f.attributes&&a(function(n){return n.innerHTML="<input/>",n.firstChild.setAttribute("value",""),""===n.firstChild.getAttribute("value")})||ti("value",function(n,t,i){if(!i&&"input"===n.nodeName.toLowerCase())return n.defaultValue}),a(function(n){return null==n.getAttribute("disabled")})||ti(kt,function(n,t,i){var r;if(!i)return n[t]===!0?t.toLowerCase():(r=n.getAttributeNode(t))&&r.specified?r.value:null}),u}(n);i.find=w;i.expr=w.selectors;i.expr[":"]=i.expr.pseudos;i.uniqueSort=i.unique=w.uniqueSort;i.text=w.getText;i.isXMLDoc=w.isXML;i.contains=w.contains;var it=function(n,t,r){for(var u=[],f=void 0!==r;(n=n[t])&&9!==n.nodeType;)if(1===n.nodeType){if(f&&i(n).is(r))break;u.push(n)}return u},lr=function(n,t){for(var i=[];n;n=n.nextSibling)1===n.nodeType&&n!==t&&i.push(n);return i},ar=i.expr.match.needsContext,vr=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,pe=/^.[^:#\[\.,]*$/;i.filter=function(n,t,r){var u=t[0];return r&&(n=":not("+n+")"),1===t.length&&1===u.nodeType?i.find.matchesSelector(u,n)?[u]:[]:i.find.matches(n,i.grep(t,function(n){return 1===n.nodeType}))};i.fn.extend({find:function(n){var t,r=[],u=this,f=u.length;if("string"!=typeof n)return this.pushStack(i(n).filter(function(){for(t=0;f>t;t++)if(i.contains(u[t],this))return!0}));for(t=0;f>t;t++)i.find(n,u[t],r);return r=this.pushStack(f>1?i.unique(r):r),r.selector=this.selector?this.selector+" "+n:n,r},filter:function(n){return this.pushStack(ri(this,n||[],!1))},not:function(n){return this.pushStack(ri(this,n||[],!0))},is:function(n){return!!ri(this,"string"==typeof n&&ar.test(n)?i(n):n||[],!1).length}});yr=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;pr=i.fn.init=function(n,t,r){var f,e;if(!n)return this;if(r=r||ui,"string"==typeof n){if(f="<"===n.charAt(0)&&">"===n.charAt(n.length-1)&&n.length>=3?[null,n,null]:yr.exec(n),!f||!f[1]&&t)return!t||t.jquery?(t||r).find(n):this.constructor(t).find(n);if(f[1]){if(t=t instanceof i?t[0]:t,i.merge(this,i.parseHTML(f[1],t&&t.nodeType?t.ownerDocument||t:u,!0)),vr.test(f[1])&&i.isPlainObject(t))for(f in t)i.isFunction(this[f])?this[f](t[f]):this.attr(f,t[f]);return this}if(e=u.getElementById(f[2]),e&&e.parentNode){if(e.id!==f[2])return ui.find(n);this.length=1;this[0]=e}return this.context=u,this.selector=n,this}return n.nodeType?(this.context=this[0]=n,this.length=1,this):i.isFunction(n)?"undefined"!=typeof r.ready?r.ready(n):n(i):(void 0!==n.selector&&(this.selector=n.selector,this.context=n.context),i.makeArray(n,this))};pr.prototype=i.fn;ui=i(u);wr=/^(?:parents|prev(?:Until|All))/;br={children:!0,contents:!0,next:!0,prev:!0};i.fn.extend({has:function(n){var t,r=i(n,this),u=r.length;return this.filter(function(){for(t=0;u>t;t++)if(i.contains(this,r[t]))return!0})},closest:function(n,t){for(var r,f=0,o=this.length,u=[],e=ar.test(n)||"string"!=typeof n?i(n,t||this.context):0;o>f;f++)for(r=this[f];r&&r!==t;r=r.parentNode)if(r.nodeType<11&&(e?e.index(r)>-1:1===r.nodeType&&i.find.matchesSelector(r,n))){u.push(r);break}return this.pushStack(u.length>1?i.uniqueSort(u):u)},index:function(n){return n?"string"==typeof n?i.inArray(this[0],i(n)):i.inArray(n.jquery?n[0]:n,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(n,t){return this.pushStack(i.uniqueSort(i.merge(this.get(),i(n,t))))},addBack:function(n){return this.add(null==n?this.prevObject:this.prevObject.filter(n))}});i.each({parent:function(n){var t=n.parentNode;return t&&11!==t.nodeType?t:null},parents:function(n){return it(n,"parentNode")},parentsUntil:function(n,t,i){return it(n,"parentNode",i)},next:function(n){return kr(n,"nextSibling")},prev:function(n){return kr(n,"previousSibling")},nextAll:function(n){return it(n,"nextSibling")},prevAll:function(n){return it(n,"previousSibling")},nextUntil:function(n,t,i){return it(n,"nextSibling",i)},prevUntil:function(n,t,i){return it(n,"previousSibling",i)},siblings:function(n){return lr((n.parentNode||{}).firstChild,n)},children:function(n){return lr(n.firstChild)},contents:function(n){return i.nodeName(n,"iframe")?n.contentDocument||n.contentWindow.document:i.merge([],n.childNodes)}},function(n,t){i.fn[n]=function(r,u){var f=i.map(this,t,r);return"Until"!==n.slice(-5)&&(u=r),u&&"string"==typeof u&&(f=i.filter(u,f)),this.length>1&&(br[n]||(f=i.uniqueSort(f)),wr.test(n)&&(f=f.reverse())),this.pushStack(f)}});s=/\S+/g;i.Callbacks=function(n){n="string"==typeof n?we(n):i.extend({},n);var e,r,h,f,t=[],o=[],u=-1,c=function(){for(f=n.once,h=e=!0;o.length;u=-1)for(r=o.shift();++u<t.length;)t[u].apply(r[0],r[1])===!1&&n.stopOnFalse&&(u=t.length,r=!1);n.memory||(r=!1);e=!1;f&&(t=r?[]:"")},s={add:function(){return t&&(r&&!e&&(u=t.length-1,o.push(r)),function f(r){i.each(r,function(r,u){i.isFunction(u)?n.unique&&s.has(u)||t.push(u):u&&u.length&&"string"!==i.type(u)&&f(u)})}(arguments),r&&!e&&c()),this},remove:function(){return i.each(arguments,function(n,r){for(var f;(f=i.inArray(r,t,f))>-1;)t.splice(f,1),u>=f&&u--}),this},has:function(n){return n?i.inArray(n,t)>-1:t.length>0},empty:function(){return t&&(t=[]),this},disable:function(){return f=o=[],t=r="",this},disabled:function(){return!t},lock:function(){return f=!0,r||s.disable(),this},locked:function(){return!!f},fireWith:function(n,t){return f||(t=t||[],t=[n,t.slice?t.slice():t],o.push(t),e||c()),this},fire:function(){return s.fireWith(this,arguments),this},fired:function(){return!!h}};return s};i.extend({Deferred:function(n){var u=[["resolve","done",i.Callbacks("once memory"),"resolved"],["reject","fail",i.Callbacks("once memory"),"rejected"],["notify","progress",i.Callbacks("memory")]],f="pending",r={state:function(){return f},always:function(){return t.done(arguments).fail(arguments),this},then:function(){var n=arguments;return i.Deferred(function(f){i.each(u,function(u,e){var o=i.isFunction(n[u])&&n[u];t[e[1]](function(){var n=o&&o.apply(this,arguments);n&&i.isFunction(n.promise)?n.promise().progress(f.notify).done(f.resolve).fail(f.reject):f[e[0]+"With"](this===r?f.promise():this,o?[n]:arguments)})});n=null}).promise()},promise:function(n){return null!=n?i.extend(n,r):r}},t={};return r.pipe=r.then,i.each(u,function(n,i){var e=i[2],o=i[3];r[i[1]]=e.add;o&&e.add(function(){f=o},u[1^n][2].disable,u[2][2].lock);t[i[0]]=function(){return t[i[0]+"With"](this===t?r:this,arguments),this};t[i[0]+"With"]=e.fireWith}),r.promise(t),n&&n.call(t,t),t},when:function(n){var t=0,u=a.call(arguments),r=u.length,e=1!==r||n&&i.isFunction(n.promise)?r:0,f=1===e?n:i.Deferred(),h=function(n,t,i){return function(r){t[n]=this;i[n]=arguments.length>1?a.call(arguments):r;i===o?f.notifyWith(t,i):--e||f.resolveWith(t,i)}},o,c,s;if(r>1)for(o=new Array(r),c=new Array(r),s=new Array(r);r>t;t++)u[t]&&i.isFunction(u[t].promise)?u[t].promise().progress(h(t,c,o)).done(h(t,s,u)).fail(f.reject):--e;return e||f.resolveWith(s,u),f.promise()}});i.fn.ready=function(n){return i.ready.promise().done(n),this};i.extend({isReady:!1,readyWait:1,holdReady:function(n){n?i.readyWait++:i.ready(!0)},ready:function(n){(n===!0?--i.readyWait:i.isReady)||(i.isReady=!0,n!==!0&&--i.readyWait>0||(at.resolveWith(u,[i]),i.fn.triggerHandler&&(i(u).triggerHandler("ready"),i(u).off("ready"))))}});i.ready.promise=function(t){if(!at)if(at=i.Deferred(),"complete"!==u.readyState&&("loading"===u.readyState||u.documentElement.doScroll))if(u.addEventListener)u.addEventListener("DOMContentLoaded",v),n.addEventListener("load",v);else{u.attachEvent("onreadystatechange",v);n.attachEvent("onload",v);var r=!1;try{r=null==n.frameElement&&u.documentElement}catch(e){}r&&r.doScroll&&!function f(){if(!i.isReady){try{r.doScroll("left")}catch(t){return n.setTimeout(f,50)}dr();i.ready()}}()}else n.setTimeout(i.ready);return at.promise(t)};i.ready.promise();for(gr in i(r))break;r.ownFirst="0"===gr;r.inlineBlockNeedsLayout=!1;i(function(){var f,t,n,i;n=u.getElementsByTagName("body")[0];n&&n.style&&(t=u.createElement("div"),i=u.createElement("div"),i.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(i).appendChild(t),"undefined"!=typeof t.style.zoom&&(t.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",r.inlineBlockNeedsLayout=f=3===t.offsetWidth,f&&(n.style.zoom=1)),n.removeChild(i))}),function(){var n=u.createElement("div");r.deleteExpando=!0;try{delete n.test}catch(t){r.deleteExpando=!1}n=null}();var ot=function(n){var t=i.noData[(n.nodeName+" ").toLowerCase()],r=+n.nodeType||1;return 1!==r&&9!==r?!1:!t||t!==!0&&n.getAttribute("classid")===t},be=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ke=/([A-Z])/g;i.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(n){return n=n.nodeType?i.cache[n[i.expando]]:n[i.expando],!!n&&!fi(n)},data:function(n,t,i){return tu(n,t,i)},removeData:function(n,t){return iu(n,t)},_data:function(n,t,i){return tu(n,t,i,!0)},_removeData:function(n,t){return iu(n,t,!0)}});i.fn.extend({data:function(n,t){var f,u,e,r=this[0],o=r&&r.attributes;if(void 0===n){if(this.length&&(e=i.data(r),1===r.nodeType&&!i._data(r,"parsedAttrs"))){for(f=o.length;f--;)o[f]&&(u=o[f].name,0===u.indexOf("data-")&&(u=i.camelCase(u.slice(5)),nu(r,u,e[u])));i._data(r,"parsedAttrs",!0)}return e}return"object"==typeof n?this.each(function(){i.data(this,n)}):arguments.length>1?this.each(function(){i.data(this,n,t)}):r?nu(r,n,i.data(r,n)):void 0},removeData:function(n){return this.each(function(){i.removeData(this,n)})}});i.extend({queue:function(n,t,r){var u;if(n)return(t=(t||"fx")+"queue",u=i._data(n,t),r&&(!u||i.isArray(r)?u=i._data(n,t,i.makeArray(r)):u.push(r)),u||[])},dequeue:function(n,t){t=t||"fx";var r=i.queue(n,t),e=r.length,u=r.shift(),f=i._queueHooks(n,t),o=function(){i.dequeue(n,t)};"inprogress"===u&&(u=r.shift(),e--);u&&("fx"===t&&r.unshift("inprogress"),delete f.stop,u.call(n,o,f));!e&&f&&f.empty.fire()},_queueHooks:function(n,t){var r=t+"queueHooks";return i._data(n,r)||i._data(n,r,{empty:i.Callbacks("once memory").add(function(){i._removeData(n,t+"queue");i._removeData(n,r)})})}});i.fn.extend({queue:function(n,t){var r=2;return"string"!=typeof n&&(t=n,n="fx",r--),arguments.length<r?i.queue(this[0],n):void 0===t?this:this.each(function(){var r=i.queue(this,n,t);i._queueHooks(this,n);"fx"===n&&"inprogress"!==r[0]&&i.dequeue(this,n)})},dequeue:function(n){return this.each(function(){i.dequeue(this,n)})},clearQueue:function(n){return this.queue(n||"fx",[])},promise:function(n,t){var r,f=1,e=i.Deferred(),u=this,o=this.length,s=function(){--f||e.resolveWith(u,[u])};for("string"!=typeof n&&(t=n,n=void 0),n=n||"fx";o--;)r=i._data(u[o],n+"queueHooks"),r&&r.empty&&(f++,r.empty.add(s));return s(),e.promise(t)}}),function(){var n;r.shrinkWrapBlocks=function(){if(null!=n)return n;n=!1;var t,i,r;return i=u.getElementsByTagName("body")[0],i&&i.style?(t=u.createElement("div"),r=u.createElement("div"),r.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",i.appendChild(r).appendChild(t),"undefined"!=typeof t.style.zoom&&(t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",t.appendChild(u.createElement("div")).style.width="5px",n=3!==t.offsetWidth),i.removeChild(r),n):void 0}}();var ei=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,oi=new RegExp("^(?:([+-])=|)("+ei+")([a-z%]*)$","i"),b=["Top","Right","Bottom","Left"],st=function(n,t){return n=t||n,"none"===i.css(n,"display")||!i.contains(n.ownerDocument,n)};var y=function(n,t,r,u,f,e,o){var s=0,c=n.length,h=null==r;if("object"===i.type(r)){f=!0;for(s in r)y(n,t,s,r[s],!0,e,o)}else if(void 0!==u&&(f=!0,i.isFunction(u)||(o=!0),h&&(o?(t.call(n,u),t=null):(h=t,t=function(n,t,r){return h.call(i(n),r)})),t))for(;c>s;s++)t(n[s],r,o?u:u.call(n[s],s,t(n[s],r)));return f?n:h?t.call(n):c?t(n[0],r):e},si=/^(?:checkbox|radio)$/i,uu=/<([\w:-]+)/,fu=/^$|\/(?:java|ecma)script/i,hi=/^\s+/,eu="abbr|article|aside|audio|bdi|canvas|data|datalist|details|dialog|figcaption|figure|footer|header|hgroup|main|mark|meter|nav|output|picture|progress|section|summary|template|time|video";!function(){var n=u.createElement("div"),f=u.createDocumentFragment(),t=u.createElement("input");n.innerHTML="  <link/><table><\/table><a href='/a'>a<\/a><input type='checkbox'/>";r.leadingWhitespace=3===n.firstChild.nodeType;r.tbody=!n.getElementsByTagName("tbody").length;r.htmlSerialize=!!n.getElementsByTagName("link").length;r.html5Clone="<:nav><\/:nav>"!==u.createElement("nav").cloneNode(!0).outerHTML;t.type="checkbox";t.checked=!0;f.appendChild(t);r.appendChecked=t.checked;n.innerHTML="<textarea>x<\/textarea>";r.noCloneChecked=!!n.cloneNode(!0).lastChild.defaultValue;f.appendChild(n);t=u.createElement("input");t.setAttribute("type","radio");t.setAttribute("checked","checked");t.setAttribute("name","t");n.appendChild(t);r.checkClone=n.cloneNode(!0).cloneNode(!0).lastChild.checked;r.noCloneEvent=!!n.addEventListener;n[i.expando]=1;r.attributes=!n.getAttribute(i.expando)}();o={option:[1,"<select multiple='multiple'>","<\/select>"],legend:[1,"<fieldset>","<\/fieldset>"],area:[1,"<map>","<\/map>"],param:[1,"<object>","<\/object>"],thead:[1,"<table>","<\/table>"],tr:[2,"<table><tbody>","<\/tbody><\/table>"],col:[2,"<table><tbody><\/tbody><colgroup>","<\/colgroup><\/table>"],td:[3,"<table><tbody><tr>","<\/tr><\/tbody><\/table>"],_default:r.htmlSerialize?[0,"",""]:[1,"X<div>","<\/div>"]};o.optgroup=o.option;o.tbody=o.tfoot=o.colgroup=o.caption=o.thead;o.th=o.td;su=/<|&#?\w+;/;li=/<tbody/i;!function(){var t,i,f=u.createElement("div");for(t in{submit:!0,change:!0,focusin:!0})i="on"+t,(r[t]=i in n)||(f.setAttribute(i,"t"),r[t]=f.attributes[i].expando===!1);f=null}();var ai=/^(?:input|select|textarea)$/i,ge=/^key/,no=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,cu=/^(?:focusinfocus|focusoutblur)$/,lu=/^([^.]*)(?:\.(.+)|)/;i.event={global:{},add:function(n,t,r,u,f){var p,v,w,y,o,h,c,l,e,b,k,a=i._data(n);if(a){for(r.handler&&(y=r,r=y.handler,f=y.selector),r.guid||(r.guid=i.guid++),(v=a.events)||(v=a.events={}),(h=a.handle)||(h=a.handle=function(n){if("undefined"!=typeof i&&(!n||i.event.triggered!==n.type))return i.event.dispatch.apply(h.elem,arguments)},h.elem=n),t=(t||"").match(s)||[""],w=t.length;w--;)p=lu.exec(t[w])||[],e=k=p[1],b=(p[2]||"").split(".").sort(),e&&(o=i.event.special[e]||{},e=(f?o.delegateType:o.bindType)||e,o=i.event.special[e]||{},c=i.extend({type:e,origType:k,data:u,handler:r,guid:r.guid,selector:f,needsContext:f&&i.expr.match.needsContext.test(f),namespace:b.join(".")},y),(l=v[e])||(l=v[e]=[],l.delegateCount=0,o.setup&&o.setup.call(n,u,b,h)!==!1||(n.addEventListener?n.addEventListener(e,h,!1):n.attachEvent&&n.attachEvent("on"+e,h))),o.add&&(o.add.call(n,c),c.handler.guid||(c.handler.guid=r.guid)),f?l.splice(l.delegateCount++,0,c):l.push(c),i.event.global[e]=!0);n=null}},remove:function(n,t,r,u,f){var y,o,h,b,p,a,c,l,e,w,k,v=i.hasData(n)&&i._data(n);if(v&&(a=v.events)){for(t=(t||"").match(s)||[""],p=t.length;p--;)if(h=lu.exec(t[p])||[],e=k=h[1],w=(h[2]||"").split(".").sort(),e){for(c=i.event.special[e]||{},e=(u?c.delegateType:c.bindType)||e,l=a[e]||[],h=h[2]&&new RegExp("(^|\\.)"+w.join("\\.(?:.*\\.|)")+"(\\.|$)"),b=y=l.length;y--;)o=l[y],!f&&k!==o.origType||r&&r.guid!==o.guid||h&&!h.test(o.namespace)||u&&u!==o.selector&&("**"!==u||!o.selector)||(l.splice(y,1),o.selector&&l.delegateCount--,c.remove&&c.remove.call(n,o));b&&!l.length&&(c.teardown&&c.teardown.call(n,w,v.handle)!==!1||i.removeEvent(n,e,v.handle),delete a[e])}else for(e in a)i.event.remove(n,e+t[p],r,u,!0);i.isEmptyObject(a)&&(delete v.handle,i._removeData(n,"events"))}},trigger:function(t,r,f,e){var l,a,o,p,c,h,w,y=[f||u],s=tt.call(t,"type")?t.type:t,v=tt.call(t,"namespace")?t.namespace.split("."):[];if(o=h=f=f||u,3!==f.nodeType&&8!==f.nodeType&&!cu.test(s+i.event.triggered)&&(s.indexOf(".")>-1&&(v=s.split("."),s=v.shift(),v.sort()),a=s.indexOf(":")<0&&"on"+s,t=t[i.expando]?t:new i.Event(s,"object"==typeof t&&t),t.isTrigger=e?2:3,t.namespace=v.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=f),r=null==r?[t]:i.makeArray(r,[t]),c=i.event.special[s]||{},e||!c.trigger||c.trigger.apply(f,r)!==!1)){if(!e&&!c.noBubble&&!i.isWindow(f)){for(p=c.delegateType||s,cu.test(p+s)||(o=o.parentNode);o;o=o.parentNode)y.push(o),h=o;h===(f.ownerDocument||u)&&y.push(h.defaultView||h.parentWindow||n)}for(w=0;(o=y[w++])&&!t.isPropagationStopped();)t.type=w>1?p:c.bindType||s,l=(i._data(o,"events")||{})[t.type]&&i._data(o,"handle"),l&&l.apply(o,r),l=a&&o[a],l&&l.apply&&ot(o)&&(t.result=l.apply(o,r),t.result===!1&&t.preventDefault());if(t.type=s,!e&&!t.isDefaultPrevented()&&(!c._default||c._default.apply(y.pop(),r)===!1)&&ot(f)&&a&&f[s]&&!i.isWindow(f)){h=f[a];h&&(f[a]=null);i.event.triggered=s;try{f[s]()}catch(b){}i.event.triggered=void 0;h&&(f[a]=h)}return t.result}},dispatch:function(n){n=i.event.fix(n);var e,o,f,r,t,s=[],h=a.call(arguments),c=(i._data(this,"events")||{})[n.type]||[],u=i.event.special[n.type]||{};if(h[0]=n,n.delegateTarget=this,!u.preDispatch||u.preDispatch.call(this,n)!==!1){for(s=i.event.handlers.call(this,n,c),e=0;(r=s[e++])&&!n.isPropagationStopped();)for(n.currentTarget=r.elem,o=0;(t=r.handlers[o++])&&!n.isImmediatePropagationStopped();)n.rnamespace&&!n.rnamespace.test(t.namespace)||(n.handleObj=t,n.data=t.data,f=((i.event.special[t.origType]||{}).handle||t.handler).apply(r.elem,h),void 0!==f&&(n.result=f)===!1&&(n.preventDefault(),n.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,n),n.result}},handlers:function(n,t){var e,u,f,o,h=[],s=t.delegateCount,r=n.target;if(s&&r.nodeType&&("click"!==n.type||isNaN(n.button)||n.button<1))for(;r!=this;r=r.parentNode||this)if(1===r.nodeType&&(r.disabled!==!0||"click"!==n.type)){for(u=[],e=0;s>e;e++)o=t[e],f=o.selector+" ",void 0===u[f]&&(u[f]=o.needsContext?i(f,this).index(r)>-1:i.find(f,this,null,[r]).length),u[f]&&u.push(o);u.length&&h.push({elem:r,handlers:u})}return s<t.length&&h.push({elem:this,handlers:t.slice(s)}),h},fix:function(n){if(n[i.expando])return n;var e,o,s,r=n.type,f=n,t=this.fixHooks[r];for(t||(this.fixHooks[r]=t=no.test(r)?this.mouseHooks:ge.test(r)?this.keyHooks:{}),s=t.props?this.props.concat(t.props):this.props,n=new i.Event(f),e=s.length;e--;)o=s[e],n[o]=f[o];return n.target||(n.target=f.srcElement||u),3===n.target.nodeType&&(n.target=n.target.parentNode),n.metaKey=!!n.metaKey,t.filter?t.filter(n,f):n},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(n,t){return null==n.which&&(n.which=null!=t.charCode?t.charCode:t.keyCode),n}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(n,t){var i,e,r,f=t.button,o=t.fromElement;return null==n.pageX&&null!=t.clientX&&(e=n.target.ownerDocument||u,r=e.documentElement,i=e.body,n.pageX=t.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),n.pageY=t.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),!n.relatedTarget&&o&&(n.relatedTarget=o===n.target?t.toElement:o),n.which||void 0===f||(n.which=1&f?1:2&f?3:4&f?2:0),n}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==au()&&this.focus)try{return this.focus(),!1}catch(n){}},delegateType:"focusin"},blur:{trigger:function(){if(this===au()&&this.blur)return(this.blur(),!1)},delegateType:"focusout"},click:{trigger:function(){if(i.nodeName(this,"input")&&"checkbox"===this.type&&this.click)return(this.click(),!1)},_default:function(n){return i.nodeName(n.target,"a")}},beforeunload:{postDispatch:function(n){void 0!==n.result&&n.originalEvent&&(n.originalEvent.returnValue=n.result)}}},simulate:function(n,t,r){var u=i.extend(new i.Event,r,{type:n,isSimulated:!0});i.event.trigger(u,null,t);u.isDefaultPrevented()&&r.preventDefault()}};i.removeEvent=u.removeEventListener?function(n,t,i){n.removeEventListener&&n.removeEventListener(t,i)}:function(n,t,i){var r="on"+t;n.detachEvent&&("undefined"==typeof n[r]&&(n[r]=null),n.detachEvent(r,i))};i.Event=function(n,t){return this instanceof i.Event?(n&&n.type?(this.originalEvent=n,this.type=n.type,this.isDefaultPrevented=n.defaultPrevented||void 0===n.defaultPrevented&&n.returnValue===!1?vt:rt):this.type=n,t&&i.extend(this,t),this.timeStamp=n&&n.timeStamp||i.now(),void(this[i.expando]=!0)):new i.Event(n,t)};i.Event.prototype={constructor:i.Event,isDefaultPrevented:rt,isPropagationStopped:rt,isImmediatePropagationStopped:rt,preventDefault:function(){var n=this.originalEvent;this.isDefaultPrevented=vt;n&&(n.preventDefault?n.preventDefault():n.returnValue=!1)},stopPropagation:function(){var n=this.originalEvent;this.isPropagationStopped=vt;n&&!this.isSimulated&&(n.stopPropagation&&n.stopPropagation(),n.cancelBubble=!0)},stopImmediatePropagation:function(){var n=this.originalEvent;this.isImmediatePropagationStopped=vt;n&&n.stopImmediatePropagation&&n.stopImmediatePropagation();this.stopPropagation()}};i.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(n,t){i.event.special[n]={delegateType:t,bindType:t,handle:function(n){var u,f=this,r=n.relatedTarget,e=n.handleObj;return r&&(r===f||i.contains(f,r))||(n.type=e.origType,u=e.handler.apply(this,arguments),n.type=t),u}}});r.submit||(i.event.special.submit={setup:function(){return i.nodeName(this,"form")?!1:void i.event.add(this,"click._submit keypress._submit",function(n){var r=n.target,t=i.nodeName(r,"input")||i.nodeName(r,"button")?i.prop(r,"form"):void 0;t&&!i._data(t,"submit")&&(i.event.add(t,"submit._submit",function(n){n._submitBubble=!0}),i._data(t,"submit",!0))})},postDispatch:function(n){n._submitBubble&&(delete n._submitBubble,this.parentNode&&!n.isTrigger&&i.event.simulate("submit",this.parentNode,n))},teardown:function(){return i.nodeName(this,"form")?!1:void i.event.remove(this,"._submit")}});r.change||(i.event.special.change={setup:function(){return ai.test(this.nodeName)?("checkbox"!==this.type&&"radio"!==this.type||(i.event.add(this,"propertychange._change",function(n){"checked"===n.originalEvent.propertyName&&(this._justChanged=!0)}),i.event.add(this,"click._change",function(n){this._justChanged&&!n.isTrigger&&(this._justChanged=!1);i.event.simulate("change",this,n)})),!1):void i.event.add(this,"beforeactivate._change",function(n){var t=n.target;ai.test(t.nodeName)&&!i._data(t,"change")&&(i.event.add(t,"change._change",function(n){!this.parentNode||n.isSimulated||n.isTrigger||i.event.simulate("change",this.parentNode,n)}),i._data(t,"change",!0))})},handle:function(n){var t=n.target;if(this!==t||n.isSimulated||n.isTrigger||"radio"!==t.type&&"checkbox"!==t.type)return n.handleObj.handler.apply(this,arguments)},teardown:function(){return i.event.remove(this,"._change"),!ai.test(this.nodeName)}});r.focusin||i.each({focus:"focusin",blur:"focusout"},function(n,t){var r=function(n){i.event.simulate(t,n.target,i.event.fix(n))};i.event.special[t]={setup:function(){var u=this.ownerDocument||this,f=i._data(u,t);f||u.addEventListener(n,r,!0);i._data(u,t,(f||0)+1)},teardown:function(){var u=this.ownerDocument||this,f=i._data(u,t)-1;f?i._data(u,t,f):(u.removeEventListener(n,r,!0),i._removeData(u,t))}}});i.fn.extend({on:function(n,t,i,r){return vi(this,n,t,i,r)},one:function(n,t,i,r){return vi(this,n,t,i,r,1)},off:function(n,t,r){var u,f;if(n&&n.preventDefault&&n.handleObj)return u=n.handleObj,i(n.delegateTarget).off(u.namespace?u.origType+"."+u.namespace:u.origType,u.selector,u.handler),this;if("object"==typeof n){for(f in n)this.off(f,t,n[f]);return this}return t!==!1&&"function"!=typeof t||(r=t,t=void 0),r===!1&&(r=rt),this.each(function(){i.event.remove(this,n,r,t)})},trigger:function(n,t){return this.each(function(){i.event.trigger(n,t,this)})},triggerHandler:function(n,t){var r=this[0];if(r)return i.event.trigger(n,t,r,!0)}});var to=/ jQuery\d+="(?:null|\d+)"/g,vu=new RegExp("<(?:"+eu+")[\\s/>]","i"),io=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,ro=/<script|<style|<link/i,uo=/checked\s*(?:[^=]|=\s*.checked.)/i,fo=/^true\/(.*)/,eo=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,oo=ou(u),yi=oo.appendChild(u.createElement("div"));i.extend({htmlPrefilter:function(n){return n.replace(io,"<$1><\/$2>")},clone:function(n,t,u){var e,c,s,o,h,l=i.contains(n.ownerDocument,n);if(r.html5Clone||i.isXMLDoc(n)||!vu.test("<"+n.nodeName+">")?s=n.cloneNode(!0):(yi.innerHTML=n.outerHTML,yi.removeChild(s=yi.firstChild)),!(r.noCloneEvent&&r.noCloneChecked||1!==n.nodeType&&11!==n.nodeType||i.isXMLDoc(n)))for(e=f(s),h=f(n),o=0;null!=(c=h[o]);++o)e[o]&&so(c,e[o]);if(t)if(u)for(h=h||f(n),e=e||f(s),o=0;null!=(c=h[o]);o++)bu(c,e[o]);else bu(n,s);return e=f(s,"script"),e.length>0&&ci(e,!l&&f(n,"script")),e=h=c=null,s},cleanData:function(n,t){for(var u,e,f,o,l=0,s=i.expando,h=i.cache,a=r.attributes,v=i.event.special;null!=(u=n[l]);l++)if((t||ot(u))&&(f=u[s],o=f&&h[f])){if(o.events)for(e in o.events)v[e]?i.event.remove(u,e):i.removeEvent(u,e,o.handle);h[f]&&(delete h[f],a||"undefined"==typeof u.removeAttribute?u[s]=void 0:u.removeAttribute(s),c.push(f))}}});i.fn.extend({domManip:k,detach:function(n){return ku(this,n,!0)},remove:function(n){return ku(this,n)},text:function(n){return y(this,function(n){return void 0===n?i.text(this):this.empty().append((this[0]&&this[0].ownerDocument||u).createTextNode(n))},null,n,arguments.length)},append:function(){return k(this,arguments,function(n){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=yu(this,n);t.appendChild(n)}})},prepend:function(){return k(this,arguments,function(n){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=yu(this,n);t.insertBefore(n,t.firstChild)}})},before:function(){return k(this,arguments,function(n){this.parentNode&&this.parentNode.insertBefore(n,this)})},after:function(){return k(this,arguments,function(n){this.parentNode&&this.parentNode.insertBefore(n,this.nextSibling)})},empty:function(){for(var n,t=0;null!=(n=this[t]);t++){for(1===n.nodeType&&i.cleanData(f(n,!1));n.firstChild;)n.removeChild(n.firstChild);n.options&&i.nodeName(n,"select")&&(n.options.length=0)}return this},clone:function(n,t){return n=null==n?!1:n,t=null==t?n:t,this.map(function(){return i.clone(this,n,t)})},html:function(n){return y(this,function(n){var t=this[0]||{},u=0,e=this.length;if(void 0===n)return 1===t.nodeType?t.innerHTML.replace(to,""):void 0;if("string"==typeof n&&!ro.test(n)&&(r.htmlSerialize||!vu.test(n))&&(r.leadingWhitespace||!hi.test(n))&&!o[(uu.exec(n)||["",""])[1].toLowerCase()]){n=i.htmlPrefilter(n);try{for(;e>u;u++)t=this[u]||{},1===t.nodeType&&(i.cleanData(f(t,!1)),t.innerHTML=n);t=0}catch(s){}}t&&this.empty().append(n)},null,n,arguments.length)},replaceWith:function(){var n=[];return k(this,arguments,function(t){var r=this.parentNode;i.inArray(this,n)<0&&(i.cleanData(f(this)),r&&r.replaceChild(t,this))},n)}});i.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(n,t){i.fn[n]=function(n){for(var u,r=0,f=[],e=i(n),o=e.length-1;o>=r;r++)u=r===o?this:this.clone(!0),i(e[r])[t](u),ti.apply(f,u.get());return this.pushStack(f)}});pi={HTML:"block",BODY:"block"};var gu=/^margin/,pt=new RegExp("^("+ei+")(?!px)[a-z%]+$","i"),wi=function(n,t,i,r){var f,u,e={};for(u in t)e[u]=n.style[u],n.style[u]=t[u];f=i.apply(n,r||[]);for(u in t)n.style[u]=e[u];return f},nf=u.documentElement;!function(){var f,h,c,e,l,a,s=u.createElement("div"),t=u.createElement("div");if(t.style){t.style.cssText="float:left;opacity:.5";r.opacity="0.5"===t.style.opacity;r.cssFloat=!!t.style.cssFloat;t.style.backgroundClip="content-box";t.cloneNode(!0).style.backgroundClip="";r.clearCloneStyle="content-box"===t.style.backgroundClip;s=u.createElement("div");s.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute";t.innerHTML="";s.appendChild(t);r.boxSizing=""===t.style.boxSizing||""===t.style.MozBoxSizing||""===t.style.WebkitBoxSizing;i.extend(r,{reliableHiddenOffsets:function(){return null==f&&o(),e},boxSizingReliable:function(){return null==f&&o(),c},pixelMarginRight:function(){return null==f&&o(),h},pixelPosition:function(){return null==f&&o(),f},reliableMarginRight:function(){return null==f&&o(),l},reliableMarginLeft:function(){return null==f&&o(),a}});function o(){var i,r,o=u.documentElement;o.appendChild(s);t.style.cssText="-webkit-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%";f=c=a=!1;h=l=!0;n.getComputedStyle&&(r=n.getComputedStyle(t),f="1%"!==(r||{}).top,a="2px"===(r||{}).marginLeft,c="4px"===(r||{width:"4px"}).width,t.style.marginRight="50%",h="4px"===(r||{marginRight:"4px"}).marginRight,i=t.appendChild(u.createElement("div")),i.style.cssText=t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",i.style.marginRight=i.style.width="0",t.style.width="1px",l=!parseFloat((n.getComputedStyle(i)||{}).marginRight),t.removeChild(i));t.style.display="none";e=0===t.getClientRects().length;e&&(t.style.display="",t.innerHTML="<table><tr><td><\/td><td>t<\/td><\/tr><\/table>",t.childNodes[0].style.borderCollapse="separate",i=t.getElementsByTagName("td"),i[0].style.cssText="margin:0;border:0;padding:0;display:none",e=0===i[0].offsetHeight,e&&(i[0].style.display="",i[1].style.display="none",e=0===i[0].offsetHeight));o.removeChild(s)}}}();tf=/^(top|right|bottom|left)$/;n.getComputedStyle?(d=function(t){var i=t.ownerDocument.defaultView;return i&&i.opener||(i=n),i.getComputedStyle(t)},p=function(n,t,u){var o,s,h,f,e=n.style;return u=u||d(n),f=u?u.getPropertyValue(t)||u[t]:void 0,""!==f&&void 0!==f||i.contains(n.ownerDocument,n)||(f=i.style(n,t)),u&&!r.pixelMarginRight()&&pt.test(f)&&gu.test(t)&&(o=e.width,s=e.minWidth,h=e.maxWidth,e.minWidth=e.maxWidth=e.width=f,f=u.width,e.width=o,e.minWidth=s,e.maxWidth=h),void 0===f?f:f+""}):nf.currentStyle&&(d=function(n){return n.currentStyle},p=function(n,t,i){var o,f,e,r,u=n.style;return i=i||d(n),r=i?i[t]:void 0,null==r&&u&&u[t]&&(r=u[t]),pt.test(r)&&!tf.test(t)&&(o=u.left,f=n.runtimeStyle,e=f&&f.left,e&&(f.left=n.currentStyle.left),u.left="fontSize"===t?"1em":r,r=u.pixelLeft+"px",u.left=o,e&&(f.left=e)),void 0===r?r:r+""||"auto"});var ki=/alpha\([^)]*\)/i,ho=/opacity\s*=\s*([^)]*)/i,co=/^(none|table(?!-c[ea]).+)/,lo=new RegExp("^("+ei+")(.*)$","i"),ao={position:"absolute",visibility:"hidden",display:"block"},rf={letterSpacing:"0",fontWeight:"400"},uf=["Webkit","O","Moz","ms"],ff=u.createElement("div").style;i.extend({cssHooks:{opacity:{get:function(n,t){if(t){var i=p(n,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:r.cssFloat?"cssFloat":"styleFloat"},style:function(n,t,u,f){if(n&&3!==n.nodeType&&8!==n.nodeType&&n.style){var e,h,o,s=i.camelCase(t),c=n.style;if(t=i.cssProps[s]||(i.cssProps[s]=ef(s)||s),o=i.cssHooks[t]||i.cssHooks[s],void 0===u)return o&&"get"in o&&void 0!==(e=o.get(n,!1,f))?e:c[t];if(h=typeof u,"string"===h&&(e=oi.exec(u))&&e[1]&&(u=ru(n,t,e),h="number"),null!=u&&u===u&&("number"===h&&(u+=e&&e[3]||(i.cssNumber[s]?"":"px")),r.clearCloneStyle||""!==u||0!==t.indexOf("background")||(c[t]="inherit"),!(o&&"set"in o&&void 0===(u=o.set(n,u,f)))))try{c[t]=u}catch(l){}}},css:function(n,t,r,u){var s,f,o,e=i.camelCase(t);return t=i.cssProps[e]||(i.cssProps[e]=ef(e)||e),o=i.cssHooks[t]||i.cssHooks[e],o&&"get"in o&&(f=o.get(n,!0,r)),void 0===f&&(f=p(n,t,u)),"normal"===f&&t in rf&&(f=rf[t]),""===r||r?(s=parseFloat(f),r===!0||isFinite(s)?s||0:f):f}});i.each(["height","width"],function(n,t){i.cssHooks[t]={get:function(n,r,u){if(r)return co.test(i.css(n,"display"))&&0===n.offsetWidth?wi(n,ao,function(){return cf(n,t,u)}):cf(n,t,u)},set:function(n,u,f){var e=f&&d(n);return sf(n,u,f?hf(n,t,f,r.boxSizing&&"border-box"===i.css(n,"boxSizing",!1,e),e):0)}}});r.opacity||(i.cssHooks.opacity={get:function(n,t){return ho.test((t&&n.currentStyle?n.currentStyle.filter:n.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(n,t){var r=n.style,u=n.currentStyle,e=i.isNumeric(t)?"alpha(opacity="+100*t+")":"",f=u&&u.filter||r.filter||"";r.zoom=1;(t>=1||""===t)&&""===i.trim(f.replace(ki,""))&&r.removeAttribute&&(r.removeAttribute("filter"),""===t||u&&!u.filter)||(r.filter=ki.test(f)?f.replace(ki,e):f+" "+e)}});i.cssHooks.marginRight=bi(r.reliableMarginRight,function(n,t){if(t)return wi(n,{display:"inline-block"},p,[n,"marginRight"])});i.cssHooks.marginLeft=bi(r.reliableMarginLeft,function(n,t){if(t)return(parseFloat(p(n,"marginLeft"))||(i.contains(n.ownerDocument,n)?n.getBoundingClientRect().left-wi(n,{marginLeft:0},function(){return n.getBoundingClientRect().left}):0))+"px"});i.each({margin:"",padding:"",border:"Width"},function(n,t){i.cssHooks[n+t]={expand:function(i){for(var r=0,f={},u="string"==typeof i?i.split(" "):[i];4>r;r++)f[n+b[r]+t]=u[r]||u[r-2]||u[0];return f}};gu.test(n)||(i.cssHooks[n+t].set=sf)});i.fn.extend({css:function(n,t){return y(this,function(n,t,r){var f,e,o={},u=0;if(i.isArray(t)){for(f=d(n),e=t.length;e>u;u++)o[t[u]]=i.css(n,t[u],!1,f);return o}return void 0!==r?i.style(n,t,r):i.css(n,t)},n,t,arguments.length>1)},show:function(){return of(this,!0)},hide:function(){return of(this)},toggle:function(n){return"boolean"==typeof n?n?this.show():this.hide():this.each(function(){st(this)?i(this).show():i(this).hide()})}});i.Tween=e;e.prototype={constructor:e,init:function(n,t,r,u,f,e){this.elem=n;this.prop=r;this.easing=f||i.easing._default;this.options=t;this.start=this.now=this.cur();this.end=u;this.unit=e||(i.cssNumber[r]?"":"px")},cur:function(){var n=e.propHooks[this.prop];return n&&n.get?n.get(this):e.propHooks._default.get(this)},run:function(n){var t,r=e.propHooks[this.prop];return this.pos=this.options.duration?t=i.easing[this.easing](n,this.options.duration*n,0,1,this.options.duration):t=n,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),r&&r.set?r.set(this):e.propHooks._default.set(this),this}};e.prototype.init.prototype=e.prototype;e.propHooks={_default:{get:function(n){var t;return 1!==n.elem.nodeType||null!=n.elem[n.prop]&&null==n.elem.style[n.prop]?n.elem[n.prop]:(t=i.css(n.elem,n.prop,""),t&&"auto"!==t?t:0)},set:function(n){i.fx.step[n.prop]?i.fx.step[n.prop](n):1!==n.elem.nodeType||null==n.elem.style[i.cssProps[n.prop]]&&!i.cssHooks[n.prop]?n.elem[n.prop]=n.now:i.style(n.elem,n.prop,n.now+n.unit)}}};e.propHooks.scrollTop=e.propHooks.scrollLeft={set:function(n){n.elem.nodeType&&n.elem.parentNode&&(n.elem[n.prop]=n.now)}};i.easing={linear:function(n){return n},swing:function(n){return.5-Math.cos(n*Math.PI)/2},_default:"swing"};i.fx=e.prototype.init;i.fx.step={};lf=/^(?:toggle|show|hide)$/;af=/queueHooks$/;i.Animation=i.extend(h,{tweeners:{"*":[function(n,t){var i=this.createTween(n,t);return ru(i.elem,n,oi.exec(t),i),i}]},tweener:function(n,t){i.isFunction(n)?(t=n,n=["*"]):n=n.match(s);for(var r,u=0,f=n.length;f>u;u++)r=n[u],h.tweeners[r]=h.tweeners[r]||[],h.tweeners[r].unshift(t)},prefilters:[vo],prefilter:function(n,t){t?h.prefilters.unshift(n):h.prefilters.push(n)}});i.speed=function(n,t,r){var u=n&&"object"==typeof n?i.extend({},n):{complete:r||!r&&t||i.isFunction(n)&&n,duration:n,easing:r&&t||t&&!i.isFunction(t)&&t};return u.duration=i.fx.off?0:"number"==typeof u.duration?u.duration:u.duration in i.fx.speeds?i.fx.speeds[u.duration]:i.fx.speeds._default,null!=u.queue&&u.queue!==!0||(u.queue="fx"),u.old=u.complete,u.complete=function(){i.isFunction(u.old)&&u.old.call(this);u.queue&&i.dequeue(this,u.queue)},u};i.fn.extend({fadeTo:function(n,t,i,r){return this.filter(st).css("opacity",0).show().end().animate({opacity:t},n,i,r)},animate:function(n,t,r,u){var o=i.isEmptyObject(n),e=i.speed(t,r,u),f=function(){var t=h(this,i.extend({},n),e);(o||i._data(this,"finish"))&&t.stop(!0)};return f.finish=f,o||e.queue===!1?this.each(f):this.queue(e.queue,f)},stop:function(n,t,r){var u=function(n){var t=n.stop;delete n.stop;t(r)};return"string"!=typeof n&&(r=t,t=n,n=void 0),t&&n!==!1&&this.queue(n||"fx",[]),this.each(function(){var o=!0,t=null!=n&&n+"queueHooks",e=i.timers,f=i._data(this);if(t)f[t]&&f[t].stop&&u(f[t]);else for(t in f)f[t]&&f[t].stop&&af.test(t)&&u(f[t]);for(t=e.length;t--;)e[t].elem!==this||null!=n&&e[t].queue!==n||(e[t].anim.stop(r),o=!1,e.splice(t,1));!o&&r||i.dequeue(this,n)})},finish:function(n){return n!==!1&&(n=n||"fx"),this.each(function(){var t,f=i._data(this),r=f[n+"queue"],e=f[n+"queueHooks"],u=i.timers,o=r?r.length:0;for(f.finish=!0,i.queue(this,n,[]),e&&e.stop&&e.stop.call(this,!0),t=u.length;t--;)u[t].elem===this&&u[t].queue===n&&(u[t].anim.stop(!0),u.splice(t,1));for(t=0;o>t;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete f.finish})}});i.each(["toggle","show","hide"],function(n,t){var r=i.fn[t];i.fn[t]=function(n,i,u){return null==n||"boolean"==typeof n?r.apply(this,arguments):this.animate(bt(t,!0),n,i,u)}});i.each({slideDown:bt("show"),slideUp:bt("hide"),slideToggle:bt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(n,t){i.fn[n]=function(n,i,r){return this.animate(t,n,i,r)}});i.timers=[];i.fx.tick=function(){var r,n=i.timers,t=0;for(ut=i.now();t<n.length;t++)r=n[t],r()||n[t]!==r||n.splice(t--,1);n.length||i.fx.stop();ut=void 0};i.fx.timer=function(n){i.timers.push(n);n()?i.fx.start():i.timers.pop()};i.fx.interval=13;i.fx.start=function(){wt||(wt=n.setInterval(i.fx.tick,i.fx.interval))};i.fx.stop=function(){n.clearInterval(wt);wt=null};i.fx.speeds={slow:600,fast:200,_default:400};i.fn.delay=function(t,r){return t=i.fx?i.fx.speeds[t]||t:t,r=r||"fx",this.queue(r,function(i,r){var u=n.setTimeout(i,t);r.stop=function(){n.clearTimeout(u)}})},function(){var i,n=u.createElement("input"),t=u.createElement("div"),f=u.createElement("select"),e=f.appendChild(u.createElement("option"));t=u.createElement("div");t.setAttribute("className","t");t.innerHTML="  <link/><table><\/table><a href='/a'>a<\/a><input type='checkbox'/>";i=t.getElementsByTagName("a")[0];n.setAttribute("type","checkbox");t.appendChild(n);i=t.getElementsByTagName("a")[0];i.style.cssText="top:1px";r.getSetAttribute="t"!==t.className;r.style=/top/.test(i.getAttribute("style"));r.hrefNormalized="/a"===i.getAttribute("href");r.checkOn=!!n.value;r.optSelected=e.selected;r.enctype=!!u.createElement("form").enctype;f.disabled=!0;r.optDisabled=!e.disabled;n=u.createElement("input");n.setAttribute("value","");r.input=""===n.getAttribute("value");n.value="t";n.setAttribute("type","radio");r.radioValue="t"===n.value}();pf=/\r/g;wf=/[\x20\t\r\n\f]+/g;i.fn.extend({val:function(n){var t,r,f,u=this[0];return arguments.length?(f=i.isFunction(n),this.each(function(r){var u;1===this.nodeType&&(u=f?n.call(this,r,i(this).val()):n,null==u?u="":"number"==typeof u?u+="":i.isArray(u)&&(u=i.map(u,function(n){return null==n?"":n+""})),t=i.valHooks[this.type]||i.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,u,"value")||(this.value=u))})):u?(t=i.valHooks[u.type]||i.valHooks[u.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(r=t.get(u,"value"))?r:(r=u.value,"string"==typeof r?r.replace(pf,""):null==r?"":r)):void 0}});i.extend({valHooks:{option:{get:function(n){var t=i.find.attr(n,"value");return null!=t?t:i.trim(i.text(n)).replace(wf," ")}},select:{get:function(n){for(var o,t,s=n.options,u=n.selectedIndex,f="select-one"===n.type||0>u,h=f?null:[],c=f?u+1:s.length,e=0>u?c:f?u:0;c>e;e++)if(t=s[e],(t.selected||e===u)&&(r.optDisabled?!t.disabled:null===t.getAttribute("disabled"))&&(!t.parentNode.disabled||!i.nodeName(t.parentNode,"optgroup"))){if(o=i(t).val(),f)return o;h.push(o)}return h},set:function(n,t){for(var f,r,u=n.options,o=i.makeArray(t),e=u.length;e--;)if(r=u[e],i.inArray(i.valHooks.option.get(r),o)>-1)try{r.selected=f=!0}catch(s){r.scrollHeight}else r.selected=!1;return f||(n.selectedIndex=-1),u}}}});i.each(["radio","checkbox"],function(){i.valHooks[this]={set:function(n,t){if(i.isArray(t))return n.checked=i.inArray(i(n).val(),t)>-1}};r.checkOn||(i.valHooks[this].get=function(n){return null===n.getAttribute("value")?"on":n.value})});var ft,bf,l=i.expr.attrHandle,di=/^(?:checked|selected)$/i,g=r.getSetAttribute,kt=r.input;i.fn.extend({attr:function(n,t){return y(this,i.attr,n,t,arguments.length>1)},removeAttr:function(n){return this.each(function(){i.removeAttr(this,n)})}});i.extend({attr:function(n,t,r){var u,f,e=n.nodeType;if(3!==e&&8!==e&&2!==e)return"undefined"==typeof n.getAttribute?i.prop(n,t,r):(1===e&&i.isXMLDoc(n)||(t=t.toLowerCase(),f=i.attrHooks[t]||(i.expr.match.bool.test(t)?bf:ft)),void 0!==r?null===r?void i.removeAttr(n,t):f&&"set"in f&&void 0!==(u=f.set(n,r,t))?u:(n.setAttribute(t,r+""),r):f&&"get"in f&&null!==(u=f.get(n,t))?u:(u=i.find.attr(n,t),null==u?void 0:u))},attrHooks:{type:{set:function(n,t){if(!r.radioValue&&"radio"===t&&i.nodeName(n,"input")){var u=n.value;return n.setAttribute("type",t),u&&(n.value=u),t}}}},removeAttr:function(n,t){var r,u,e=0,f=t&&t.match(s);if(f&&1===n.nodeType)while(r=f[e++])u=i.propFix[r]||r,i.expr.match.bool.test(r)?kt&&g||!di.test(r)?n[u]=!1:n[i.camelCase("default-"+r)]=n[u]=!1:i.attr(n,r,""),n.removeAttribute(g?r:u)}});bf={set:function(n,t,r){return t===!1?i.removeAttr(n,r):kt&&g||!di.test(r)?n.setAttribute(!g&&i.propFix[r]||r,r):n[i.camelCase("default-"+r)]=n[r]=!0,r}};i.each(i.expr.match.bool.source.match(/\w+/g),function(n,t){var r=l[t]||i.find.attr;l[t]=kt&&g||!di.test(t)?function(n,t,i){var u,f;return i||(f=l[t],l[t]=u,u=null!=r(n,t,i)?t.toLowerCase():null,l[t]=f),u}:function(n,t,r){if(!r)return n[i.camelCase("default-"+t)]?t.toLowerCase():null}});kt&&g||(i.attrHooks.value={set:function(n,t,r){return i.nodeName(n,"input")?void(n.defaultValue=t):ft&&ft.set(n,t,r)}});g||(ft={set:function(n,t,i){var r=n.getAttributeNode(i);return r||n.setAttributeNode(r=n.ownerDocument.createAttribute(i)),r.value=t+="","value"===i||t===n.getAttribute(i)?t:void 0}},l.id=l.name=l.coords=function(n,t,i){var r;if(!i)return(r=n.getAttributeNode(t))&&""!==r.value?r.value:null},i.valHooks.button={get:function(n,t){var i=n.getAttributeNode(t);if(i&&i.specified)return i.value},set:ft.set},i.attrHooks.contenteditable={set:function(n,t,i){ft.set(n,""===t?!1:t,i)}},i.each(["width","height"],function(n,t){i.attrHooks[t]={set:function(n,i){if(""===i)return(n.setAttribute(t,"auto"),i)}}}));r.style||(i.attrHooks.style={get:function(n){return n.style.cssText||void 0},set:function(n,t){return n.style.cssText=t+""}});kf=/^(?:input|select|textarea|button|object)$/i;df=/^(?:a|area)$/i;i.fn.extend({prop:function(n,t){return y(this,i.prop,n,t,arguments.length>1)},removeProp:function(n){return n=i.propFix[n]||n,this.each(function(){try{this[n]=void 0;delete this[n]}catch(t){}})}});i.extend({prop:function(n,t,r){var f,u,e=n.nodeType;if(3!==e&&8!==e&&2!==e)return 1===e&&i.isXMLDoc(n)||(t=i.propFix[t]||t,u=i.propHooks[t]),void 0!==r?u&&"set"in u&&void 0!==(f=u.set(n,r,t))?f:n[t]=r:u&&"get"in u&&null!==(f=u.get(n,t))?f:n[t]},propHooks:{tabIndex:{get:function(n){var t=i.find.attr(n,"tabindex");return t?parseInt(t,10):kf.test(n.nodeName)||df.test(n.nodeName)&&n.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}});r.hrefNormalized||i.each(["href","src"],function(n,t){i.propHooks[t]={get:function(n){return n.getAttribute(t,4)}}});r.optSelected||(i.propHooks.selected={get:function(n){var t=n.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null},set:function(n){var t=n.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}});i.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){i.propFix[this.toLowerCase()]=this});r.enctype||(i.propFix.enctype="encoding");dt=/[\t\r\n\f]/g;i.fn.extend({addClass:function(n){var o,t,r,u,f,h,e,c=0;if(i.isFunction(n))return this.each(function(t){i(this).addClass(n.call(this,t,nt(this)))});if("string"==typeof n&&n)for(o=n.match(s)||[];t=this[c++];)if(u=nt(t),r=1===t.nodeType&&(" "+u+" ").replace(dt," ")){for(h=0;f=o[h++];)r.indexOf(" "+f+" ")<0&&(r+=f+" ");e=i.trim(r);u!==e&&i.attr(t,"class",e)}return this},removeClass:function(n){var o,r,t,u,f,h,e,c=0;if(i.isFunction(n))return this.each(function(t){i(this).removeClass(n.call(this,t,nt(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof n&&n)for(o=n.match(s)||[];r=this[c++];)if(u=nt(r),t=1===r.nodeType&&(" "+u+" ").replace(dt," ")){for(h=0;f=o[h++];)while(t.indexOf(" "+f+" ")>-1)t=t.replace(" "+f+" "," ");e=i.trim(t);u!==e&&i.attr(r,"class",e)}return this},toggleClass:function(n,t){var r=typeof n;return"boolean"==typeof t&&"string"===r?t?this.addClass(n):this.removeClass(n):i.isFunction(n)?this.each(function(r){i(this).toggleClass(n.call(this,r,nt(this),t),t)}):this.each(function(){var t,f,u,e;if("string"===r)for(f=0,u=i(this),e=n.match(s)||[];t=e[f++];)u.hasClass(t)?u.removeClass(t):u.addClass(t);else void 0!==n&&"boolean"!==r||(t=nt(this),t&&i._data(this,"__className__",t),i.attr(this,"class",t||n===!1?"":i._data(this,"__className__")||""))})},hasClass:function(n){for(var t,r=0,i=" "+n+" ";t=this[r++];)if(1===t.nodeType&&(" "+nt(t)+" ").replace(dt," ").indexOf(i)>-1)return!0;return!1}});i.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(n,t){i.fn[t]=function(n,i){return arguments.length>0?this.on(t,null,n,i):this.trigger(t)}});i.fn.extend({hover:function(n,t){return this.mouseenter(n).mouseleave(t||n)}});var po=n.location,gi=i.now(),nr=/\?/,wo=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;i.parseJSON=function(t){if(n.JSON&&n.JSON.parse)return n.JSON.parse(t+"");var f,r=null,u=i.trim(t+"");return u&&!i.trim(u.replace(wo,function(n,t,i,u){return f&&t&&(r=0),0===r?n:(f=i||t,r+=!u-!i,"")}))?Function("return "+u)():i.error("Invalid JSON: "+t)};i.parseXML=function(t){var r,u;if(!t||"string"!=typeof t)return null;try{n.DOMParser?(u=new n.DOMParser,r=u.parseFromString(t,"text/xml")):(r=new n.ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(t))}catch(f){r=void 0}return r&&r.documentElement&&!r.getElementsByTagName("parsererror").length||i.error("Invalid XML: "+t),r};var bo=/#.*$/,gf=/([?&])_=[^&]*/,ko=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,go=/^(?:GET|HEAD)$/,ns=/^\/\//,ne=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,te={},tr={},ie="*/".concat("*"),ir=po.href,et=ne.exec(ir.toLowerCase())||[];i.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ir,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(et[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":ie,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":i.parseJSON,"text xml":i.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(n,t){return t?rr(rr(n,i.ajaxSettings),t):rr(i.ajaxSettings,n)},ajaxPrefilter:re(te),ajaxTransport:re(tr),ajax:function(t,r){function w(t,r,s,c){var y,rt,it,w,tt,l=r;2!==o&&(o=2,k&&n.clearTimeout(k),v=void 0,b=c||"",f.readyState=t>0?4:0,y=t>=200&&300>t||304===t,s&&(w=ts(u,f,s)),w=is(u,w,f,y),y?(u.ifModified&&(tt=f.getResponseHeader("Last-Modified"),tt&&(i.lastModified[e]=tt),tt=f.getResponseHeader("etag"),tt&&(i.etag[e]=tt)),204===t||"HEAD"===u.type?l="nocontent":304===t?l="notmodified":(l=w.state,rt=w.data,it=w.error,y=!it)):(it=l,!t&&l||(l="error",0>t&&(t=0))),f.status=t,f.statusText=(r||l)+"",y?g.resolveWith(h,[rt,l,f]):g.rejectWith(h,[f,l,it]),f.statusCode(p),p=void 0,a&&d.trigger(y?"ajaxSuccess":"ajaxError",[f,u,y?rt:it]),nt.fireWith(h,[f,l]),a&&(d.trigger("ajaxComplete",[f,u]),--i.active||i.event.trigger("ajaxStop")))}"object"==typeof t&&(r=t,t=void 0);r=r||{};var c,l,e,b,k,a,v,y,u=i.ajaxSetup({},r),h=u.context||u,d=u.context&&(h.nodeType||h.jquery)?i(h):i.event,g=i.Deferred(),nt=i.Callbacks("once memory"),p=u.statusCode||{},tt={},it={},o=0,rt="canceled",f={readyState:0,getResponseHeader:function(n){var t;if(2===o){if(!y)for(y={};t=ko.exec(b);)y[t[1].toLowerCase()]=t[2];t=y[n.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===o?b:null},setRequestHeader:function(n,t){var i=n.toLowerCase();return o||(n=it[i]=it[i]||n,tt[n]=t),this},overrideMimeType:function(n){return o||(u.mimeType=n),this},statusCode:function(n){var t;if(n)if(2>o)for(t in n)p[t]=[p[t],n[t]];else f.always(n[f.status]);return this},abort:function(n){var t=n||rt;return v&&v.abort(t),w(0,t),this}};if(g.promise(f).complete=nt.add,f.success=f.done,f.error=f.fail,u.url=((t||u.url||ir)+"").replace(bo,"").replace(ns,et[1]+"//"),u.type=r.method||r.type||u.method||u.type,u.dataTypes=i.trim(u.dataType||"*").toLowerCase().match(s)||[""],null==u.crossDomain&&(c=ne.exec(u.url.toLowerCase()),u.crossDomain=!(!c||c[1]===et[1]&&c[2]===et[2]&&(c[3]||("http:"===c[1]?"80":"443"))===(et[3]||("http:"===et[1]?"80":"443")))),u.data&&u.processData&&"string"!=typeof u.data&&(u.data=i.param(u.data,u.traditional)),ue(te,u,r,f),2===o)return f;a=i.event&&u.global;a&&0==i.active++&&i.event.trigger("ajaxStart");u.type=u.type.toUpperCase();u.hasContent=!go.test(u.type);e=u.url;u.hasContent||(u.data&&(e=u.url+=(nr.test(e)?"&":"?")+u.data,delete u.data),u.cache===!1&&(u.url=gf.test(e)?e.replace(gf,"$1_="+gi++):e+(nr.test(e)?"&":"?")+"_="+gi++));u.ifModified&&(i.lastModified[e]&&f.setRequestHeader("If-Modified-Since",i.lastModified[e]),i.etag[e]&&f.setRequestHeader("If-None-Match",i.etag[e]));(u.data&&u.hasContent&&u.contentType!==!1||r.contentType)&&f.setRequestHeader("Content-Type",u.contentType);f.setRequestHeader("Accept",u.dataTypes[0]&&u.accepts[u.dataTypes[0]]?u.accepts[u.dataTypes[0]]+("*"!==u.dataTypes[0]?", "+ie+"; q=0.01":""):u.accepts["*"]);for(l in u.headers)f.setRequestHeader(l,u.headers[l]);if(u.beforeSend&&(u.beforeSend.call(h,f,u)===!1||2===o))return f.abort();rt="abort";for(l in{success:1,error:1,complete:1})f[l](u[l]);if(v=ue(tr,u,r,f)){if(f.readyState=1,a&&d.trigger("ajaxSend",[f,u]),2===o)return f;u.async&&u.timeout>0&&(k=n.setTimeout(function(){f.abort("timeout")},u.timeout));try{o=1;v.send(tt,w)}catch(ut){if(!(2>o))throw ut;w(-1,ut)}}else w(-1,"No Transport");return f},getJSON:function(n,t,r){return i.get(n,t,r,"json")},getScript:function(n,t){return i.get(n,void 0,t,"script")}});i.each(["get","post"],function(n,t){i[t]=function(n,r,u,f){return i.isFunction(r)&&(f=f||u,u=r,r=void 0),i.ajax(i.extend({url:n,type:t,dataType:f,data:r,success:u},i.isPlainObject(n)&&n))}});i._evalUrl=function(n){return i.ajax({url:n,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})};i.fn.extend({wrapAll:function(n){if(i.isFunction(n))return this.each(function(t){i(this).wrapAll(n.call(this,t))});if(this[0]){var t=i(n,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]);t.map(function(){for(var n=this;n.firstChild&&1===n.firstChild.nodeType;)n=n.firstChild;return n}).append(this)}return this},wrapInner:function(n){return i.isFunction(n)?this.each(function(t){i(this).wrapInner(n.call(this,t))}):this.each(function(){var t=i(this),r=t.contents();r.length?r.wrapAll(n):t.append(n)})},wrap:function(n){var t=i.isFunction(n);return this.each(function(r){i(this).wrapAll(t?n.call(this,r):n)})},unwrap:function(){return this.parent().each(function(){i.nodeName(this,"body")||i(this).replaceWith(this.childNodes)}).end()}});i.expr.filters.hidden=function(n){return r.reliableHiddenOffsets()?n.offsetWidth<=0&&n.offsetHeight<=0&&!n.getClientRects().length:us(n)};i.expr.filters.visible=function(n){return!i.expr.filters.hidden(n)};var fs=/%20/g,es=/\[\]$/,fe=/\r?\n/g,os=/^(?:submit|button|image|reset|file)$/i,ss=/^(?:input|select|textarea|keygen)/i;i.param=function(n,t){var r,u=[],f=function(n,t){t=i.isFunction(t)?t():null==t?"":t;u[u.length]=encodeURIComponent(n)+"="+encodeURIComponent(t)};if(void 0===t&&(t=i.ajaxSettings&&i.ajaxSettings.traditional),i.isArray(n)||n.jquery&&!i.isPlainObject(n))i.each(n,function(){f(this.name,this.value)});else for(r in n)ur(r,n[r],t,f);return u.join("&").replace(fs,"+")};i.fn.extend({serialize:function(){return i.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var n=i.prop(this,"elements");return n?i.makeArray(n):this}).filter(function(){var n=this.type;return this.name&&!i(this).is(":disabled")&&ss.test(this.nodeName)&&!os.test(n)&&(this.checked||!si.test(n))}).map(function(n,t){var r=i(this).val();return null==r?null:i.isArray(r)?i.map(r,function(n){return{name:t.name,value:n.replace(fe,"\r\n")}}):{name:t.name,value:r.replace(fe,"\r\n")}}).get()}});i.ajaxSettings.xhr=void 0!==n.ActiveXObject?function(){return this.isLocal?ee():u.documentMode>8?fr():/^(get|post|head|put|delete|options)$/i.test(this.type)&&fr()||ee()}:fr;var hs=0,gt={},ct=i.ajaxSettings.xhr();return n.attachEvent&&n.attachEvent("onunload",function(){for(var n in gt)gt[n](void 0,!0)}),r.cors=!!ct&&"withCredentials"in ct,ct=r.ajax=!!ct,ct&&i.ajaxTransport(function(t){if(!t.crossDomain||r.cors){var u;return{send:function(r,f){var o,e=t.xhr(),s=++hs;if(e.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(o in t.xhrFields)e[o]=t.xhrFields[o];t.mimeType&&e.overrideMimeType&&e.overrideMimeType(t.mimeType);t.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest");for(o in r)void 0!==r[o]&&e.setRequestHeader(o,r[o]+"");e.send(t.hasContent&&t.data||null);u=function(n,r){var o,c,h;if(u&&(r||4===e.readyState))if(delete gt[s],u=void 0,e.onreadystatechange=i.noop,r)4!==e.readyState&&e.abort();else{h={};o=e.status;"string"==typeof e.responseText&&(h.text=e.responseText);try{c=e.statusText}catch(l){c=""}o||!t.isLocal||t.crossDomain?1223===o&&(o=204):o=h.text?200:404}h&&f(o,c,h,e.getAllResponseHeaders())};t.async?4===e.readyState?n.setTimeout(u):e.onreadystatechange=gt[s]=u:u()},abort:function(){u&&u(void 0,!0)}}}}),i.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(n){return i.globalEval(n),n}}}),i.ajaxPrefilter("script",function(n){void 0===n.cache&&(n.cache=!1);n.crossDomain&&(n.type="GET",n.global=!1)}),i.ajaxTransport("script",function(n){if(n.crossDomain){var t,r=u.head||i("head")[0]||u.documentElement;return{send:function(i,f){t=u.createElement("script");t.async=!0;n.scriptCharset&&(t.charset=n.scriptCharset);t.src=n.url;t.onload=t.onreadystatechange=function(n,i){(i||!t.readyState||/loaded|complete/.test(t.readyState))&&(t.onload=t.onreadystatechange=null,t.parentNode&&t.parentNode.removeChild(t),t=null,i||f(200,"success"))};r.insertBefore(t,r.firstChild)},abort:function(){t&&t.onload(void 0,!0)}}}}),er=[],ni=/(=)\?(?=&|$)|\?\?/,i.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var n=er.pop()||i.expando+"_"+gi++;return this[n]=!0,n}}),i.ajaxPrefilter("json jsonp",function(t,r,u){var f,e,o,s=t.jsonp!==!1&&(ni.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&ni.test(t.data)&&"data");if(s||"jsonp"===t.dataTypes[0])return(f=t.jsonpCallback=i.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(ni,"$1"+f):t.jsonp!==!1&&(t.url+=(nr.test(t.url)?"&":"?")+t.jsonp+"="+f),t.converters["script json"]=function(){return o||i.error(f+" was not called"),o[0]},t.dataTypes[0]="json",e=n[f],n[f]=function(){o=arguments},u.always(function(){void 0===e?i(n).removeProp(f):n[f]=e;t[f]&&(t.jsonpCallback=r.jsonpCallback,er.push(f));o&&i.isFunction(e)&&e(o[0]);o=e=void 0}),"script")}),i.parseHTML=function(n,t,r){if(!n||"string"!=typeof n)return null;"boolean"==typeof t&&(r=t,t=!1);t=t||u;var f=vr.exec(n),e=!r&&[];return f?[t.createElement(f[1])]:(f=hu([n],t,e),e&&e.length&&i(e).remove(),i.merge([],f.childNodes))},or=i.fn.load,i.fn.load=function(n,t,r){if("string"!=typeof n&&or)return or.apply(this,arguments);var u,o,s,f=this,e=n.indexOf(" ");return e>-1&&(u=i.trim(n.slice(e,n.length)),n=n.slice(0,e)),i.isFunction(t)?(r=t,t=void 0):t&&"object"==typeof t&&(o="POST"),f.length>0&&i.ajax({url:n,type:o||"GET",dataType:"html",data:t}).done(function(n){s=arguments;f.html(u?i("<div>").append(i.parseHTML(n)).find(u):n)}).always(r&&function(n,t){f.each(function(){r.apply(this,s||[n.responseText,t,n])})}),this},i.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(n,t){i.fn[t]=function(n){return this.on(t,n)}}),i.expr.filters.animated=function(n){return i.grep(i.timers,function(t){return n===t.elem}).length},i.offset={setOffset:function(n,t,r){var e,o,s,h,u,c,v,l=i.css(n,"position"),a=i(n),f={};"static"===l&&(n.style.position="relative");u=a.offset();s=i.css(n,"top");c=i.css(n,"left");v=("absolute"===l||"fixed"===l)&&i.inArray("auto",[s,c])>-1;v?(e=a.position(),h=e.top,o=e.left):(h=parseFloat(s)||0,o=parseFloat(c)||0);i.isFunction(t)&&(t=t.call(n,r,i.extend({},u)));null!=t.top&&(f.top=t.top-u.top+h);null!=t.left&&(f.left=t.left-u.left+o);"using"in t?t.using.call(n,f):a.css(f)}},i.fn.extend({offset:function(n){if(arguments.length)return void 0===n?this:this.each(function(t){i.offset.setOffset(this,n,t)});var t,f,u={top:0,left:0},r=this[0],e=r&&r.ownerDocument;if(e)return t=e.documentElement,i.contains(t,r)?("undefined"!=typeof r.getBoundingClientRect&&(u=r.getBoundingClientRect()),f=oe(e),{top:u.top+(f.pageYOffset||t.scrollTop)-(t.clientTop||0),left:u.left+(f.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}):u},position:function(){if(this[0]){var n,r,t={top:0,left:0},u=this[0];return"fixed"===i.css(u,"position")?r=u.getBoundingClientRect():(n=this.offsetParent(),r=this.offset(),i.nodeName(n[0],"html")||(t=n.offset()),t.top+=i.css(n[0],"borderTopWidth",!0),t.left+=i.css(n[0],"borderLeftWidth",!0)),{top:r.top-t.top-i.css(u,"marginTop",!0),left:r.left-t.left-i.css(u,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var n=this.offsetParent;n&&!i.nodeName(n,"html")&&"static"===i.css(n,"position");)n=n.offsetParent;return n||nf})}}),i.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(n,t){var r=/Y/.test(t);i.fn[n]=function(u){return y(this,function(n,u,f){var e=oe(n);return void 0===f?e?t in e?e[t]:e.document.documentElement[u]:n[u]:void(e?e.scrollTo(r?i(e).scrollLeft():f,r?f:i(e).scrollTop()):n[u]=f)},n,u,arguments.length,null)}}),i.each(["top","left"],function(n,t){i.cssHooks[t]=bi(r.pixelPosition,function(n,r){if(r)return(r=p(n,t),pt.test(r)?i(n).position()[t]+"px":r)})}),i.each({Height:"height",Width:"width"},function(n,t){i.each({padding:"inner"+n,content:t,"":"outer"+n},function(r,u){i.fn[u]=function(u,f){var e=arguments.length&&(r||"boolean"!=typeof u),o=r||(u===!0||f===!0?"margin":"border");return y(this,function(t,r,u){var f;return i.isWindow(t)?t.document.documentElement["client"+n]:9===t.nodeType?(f=t.documentElement,Math.max(t.body["scroll"+n],f["scroll"+n],t.body["offset"+n],f["offset"+n],f["client"+n])):void 0===u?i.css(t,r,o):i.style(t,r,u,o)},t,e?u:void 0,e,null)}})}),i.fn.extend({bind:function(n,t,i){return this.on(n,null,t,i)},unbind:function(n,t){return this.off(n,null,t)},delegate:function(n,t,i,r){return this.on(t,n,i,r)},undelegate:function(n,t,i){return 1===arguments.length?this.off(n,"**"):this.off(t,n||"**",i)}}),i.fn.size=function(){return this.length},i.fn.andSelf=i.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return i}),se=n.jQuery,he=n.$,i.noConflict=function(t){return n.$===i&&(n.$=he),t&&n.jQuery===i&&(n.jQuery=se),i},t||(n.jQuery=n.$=i),i});!function(n){"use strict";"function"==typeof define&&define.amd?define(["jquery"],n):n("undefined"!=typeof jQuery?jQuery:window.Zepto)}(function(n){"use strict";function r(t){var i=t.data;t.isDefaultPrevented()||(t.preventDefault(),n(t.target).ajaxSubmit(i))}function u(t){var r=t.target,u=n(r),f,i,e;if(!u.is("[type=submit],[type=image]")){if(f=u.closest("[type=submit]"),0===f.length)return;r=f[0]}i=this;(i.clk=r,"image"==r.type)&&(void 0!==t.offsetX?(i.clk_x=t.offsetX,i.clk_y=t.offsetY):"function"==typeof n.fn.offset?(e=u.offset(),i.clk_x=t.pageX-e.left,i.clk_y=t.pageY-e.top):(i.clk_x=t.pageX-r.offsetLeft,i.clk_y=t.pageY-r.offsetTop));setTimeout(function(){i.clk=i.clk_x=i.clk_y=null},100)}function t(){if(n.fn.ajaxSubmit.debug){var t="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(t):window.opera&&window.opera.postError&&window.opera.postError(t)}}var i={},f;i.fileapi=void 0!==n("<input type='file'/>").get(0).files;i.formdata=void 0!==window.FormData;f=!!n.fn.prop;n.fn.attr2=function(){if(!f)return this.attr.apply(this,arguments);var n=this.prop.apply(this,arguments);return n&&n.jquery||"string"==typeof n?n:this.attr.apply(this,arguments)};n.fn.ajaxSubmit=function(r){function et(t){for(var f,u=n.param(t,r.traditional).split("&"),o=u.length,e=[],i=0;o>i;i++)u[i]=u[i].replace(/\+/g," "),f=u[i].split("="),e.push([decodeURIComponent(f[0]),decodeURIComponent(f[1])]);return e}function ot(t){for(var f,u,s,o=new FormData,i=0;i<t.length;i++)o.append(t[i].name,t[i].value);if(r.extraData)for(f=et(r.extraData),i=0;i<f.length;i++)f[i]&&o.append(f[i][0],f[i][1]);return r.data=null,u=n.extend(!0,{},n.ajaxSettings,r,{contentType:!1,processData:!1,cache:!1,type:e||"POST"}),r.uploadProgress&&(u.xhr=function(){var t=n.ajaxSettings.xhr();return t.upload&&t.upload.addEventListener("progress",function(n){var t=0,i=n.loaded||n.position,u=n.total;n.lengthComputable&&(t=Math.ceil(i/u*100));r.uploadProgress(n,i,u,t)},!1),t}),u.data=null,s=u.beforeSend,u.beforeSend=function(n,t){t.data=r.formData?r.formData:o;s&&s.call(this,n,t)},n.ajax(u)}function d(i){function ut(n){var i=null;try{n.contentWindow&&(i=n.contentWindow.document)}catch(r){t("cannot get iframe.contentWindow document: "+r)}if(i)return i;try{i=n.contentDocument?n.contentDocument:n.document}catch(r){t("cannot get iframe.contentDocument: "+r);i=n.document}return i}function ft(){function f(){try{var n=ut(a).readyState;t("state = "+n);n&&"uninitialized"==n.toLowerCase()&&setTimeout(f,50)}catch(i){t("Server abort: ",i," (",i.name,")");b(rt);g&&clearTimeout(g);g=void 0}}var s=u.attr2("target"),h=u.attr2("action"),y=u.attr("enctype")||u.attr("encoding")||"multipart/form-data",r,i,c;l.setAttribute("target",d);(!e||/post/i.test(e))&&l.setAttribute("method","POST");h!=o.url&&l.setAttribute("action",o.url);o.skipEncodingOverride||e&&!/post/i.test(e)||u.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"});o.timeout&&(g=setTimeout(function(){it=!0;b(et)},o.timeout));r=[];try{if(o.extraData)for(i in o.extraData)o.extraData.hasOwnProperty(i)&&r.push(n.isPlainObject(o.extraData[i])&&o.extraData[i].hasOwnProperty("name")&&o.extraData[i].hasOwnProperty("value")?n('<input type="hidden" name="'+o.extraData[i].name+'">').val(o.extraData[i].value).appendTo(l)[0]:n('<input type="hidden" name="'+i+'">').val(o.extraData[i]).appendTo(l)[0]);o.iframeTarget||v.appendTo("body");a.attachEvent?a.attachEvent("onload",b):a.addEventListener("load",b,!1);setTimeout(f,15);try{l.submit()}catch(p){c=document.createElement("form").submit;c.apply(l)}}finally{l.setAttribute("action",h);l.setAttribute("enctype",y);s?l.setAttribute("target",s):u.removeAttr("target");n(r).remove()}}function b(i){var u,r,w,f,k,d,e,c,l;if(!s.aborted&&!ct){if(h=ut(a),h||(t("cannot access response document"),i=rt),i===et&&s)return s.abort("timeout"),void y.reject(s,"timeout");if(i==rt&&s)return s.abort("server abort"),void y.reject(s,"error","server abort");if(h&&h.location.href!=o.iframeSrc||it){a.detachEvent?a.detachEvent("onload",b):a.removeEventListener("load",b,!1);r="success";try{if(it)throw"timeout";if(w="xml"==o.dataType||h.XMLDocument||n.isXMLDoc(h),t("isXml="+w),!w&&window.opera&&(null===h.body||!h.body.innerHTML)&&--lt)return t("requeing onLoad callback, DOM not available"),void setTimeout(b,250);f=h.body?h.body:h.documentElement;s.responseText=f?f.innerHTML:null;s.responseXML=h.XMLDocument?h.XMLDocument:h;w&&(o.dataType="xml");s.getResponseHeader=function(n){var t={"content-type":o.dataType};return t[n.toLowerCase()]};f&&(s.status=Number(f.getAttribute("status"))||s.status,s.statusText=f.getAttribute("statusText")||s.statusText);k=(o.dataType||"").toLowerCase();d=/(json|script|text)/.test(k);d||o.textarea?(e=h.getElementsByTagName("textarea")[0],e?(s.responseText=e.value,s.status=Number(e.getAttribute("status"))||s.status,s.statusText=e.getAttribute("statusText")||s.statusText):d&&(c=h.getElementsByTagName("pre")[0],l=h.getElementsByTagName("body")[0],c?s.responseText=c.textContent?c.textContent:c.innerText:l&&(s.responseText=l.textContent?l.textContent:l.innerText))):"xml"==k&&!s.responseXML&&s.responseText&&(s.responseXML=at(s.responseText));try{ht=yt(s,k,o)}catch(nt){r="parsererror";s.error=u=nt||r}}catch(nt){t("error caught: ",nt);r="error";s.error=u=nt||r}s.aborted&&(t("upload aborted"),r=null);s.status&&(r=s.status>=200&&s.status<300||304===s.status?"success":"error");"success"===r?(o.success&&o.success.call(o.context,ht,"success",s),y.resolve(s.responseText,"success",s),p&&n.event.trigger("ajaxSuccess",[s,o])):r&&(void 0===u&&(u=s.statusText),o.error&&o.error.call(o.context,s,r,u),y.reject(s,"error",u),p&&n.event.trigger("ajaxError",[s,o,u]));p&&n.event.trigger("ajaxComplete",[s,o]);p&&!--n.active&&n.event.trigger("ajaxStop");o.complete&&o.complete.call(o.context,s,r);ct=!0;o.timeout&&clearTimeout(g);setTimeout(function(){o.iframeTarget?v.attr("src",o.iframeSrc):v.remove();s.responseXML=null},100)}}}var tt,nt,o,p,d,v,a,s,k,w,it,g,l=u[0],y=n.Deferred();if(y.abort=function(n){s.abort(n)},i)for(nt=0;nt<c.length;nt++)tt=n(c[nt]),f?tt.prop("disabled",!1):tt.removeAttr("disabled");if(o=n.extend(!0,{},n.ajaxSettings,r),o.context=o.context||o,d="jqFormIO"+(new Date).getTime(),o.iframeTarget?(v=n(o.iframeTarget),w=v.attr2("name"),w?d=w:v.attr2("name",d)):(v=n('<iframe name="'+d+'" src="'+o.iframeSrc+'" />'),v.css({position:"absolute",top:"-1000px",left:"-1000px"})),a=v[0],s={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(i){var r="timeout"===i?"timeout":"aborted";t("aborting upload... "+r);this.aborted=1;try{a.contentWindow.document.execCommand&&a.contentWindow.document.execCommand("Stop")}catch(u){}v.attr("src",o.iframeSrc);s.error=r;o.error&&o.error.call(o.context,s,r,i);p&&n.event.trigger("ajaxError",[s,o,r]);o.complete&&o.complete.call(o.context,s,r)}},p=o.global,p&&0==n.active++&&n.event.trigger("ajaxStart"),p&&n.event.trigger("ajaxSend",[s,o]),o.beforeSend&&o.beforeSend.call(o.context,s,o)===!1)return o.global&&n.active--,y.reject(),y;if(s.aborted)return y.reject(),y;k=l.clk;k&&(w=k.name,w&&!k.disabled&&(o.extraData=o.extraData||{},o.extraData[w]=k.value,"image"==k.type&&(o.extraData[w+".x"]=l.clk_x,o.extraData[w+".y"]=l.clk_y)));var et=1,rt=2,ot=n("meta[name=csrf-token]").attr("content"),st=n("meta[name=csrf-param]").attr("content");st&&ot&&(o.extraData=o.extraData||{},o.extraData[st]=ot);o.forceSync?ft():setTimeout(ft,10);var ht,h,ct,lt=50,at=n.parseXML||function(n,t){return window.ActiveXObject?(t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(n)):t=(new DOMParser).parseFromString(n,"text/xml"),t&&t.documentElement&&"parsererror"!=t.documentElement.nodeName?t:null},vt=n.parseJSON||function(e){return window.eval("("+e+")")},yt=function(t,i,r){var f=t.getResponseHeader("content-type")||"",e="xml"===i||!i&&f.indexOf("xml")>=0,u=e?t.responseXML:t.responseText;return e&&"parsererror"===u.documentElement.nodeName&&n.error&&n.error("parsererror"),r&&r.dataFilter&&(u=r.dataFilter(u,i)),"string"==typeof u&&("json"===i||!i&&f.indexOf("json")>=0?u=vt(u):("script"===i||!i&&f.indexOf("javascript")>=0)&&n.globalEval(u)),u};return y}var e,b,o,u,a,v,y,c,s,l,h,g,nt,tt,p,ft,w;if(!this.length)return t("ajaxSubmit: skipping submit process - no element selected"),this;if(u=this,"function"==typeof r?r={success:r}:void 0===r&&(r={}),e=r.type||this.attr2("method"),b=r.url||this.attr2("action"),o="string"==typeof b?n.trim(b):"",o=o||window.location.href||"",o&&(o=(o.match(/^([^#]+)/)||[])[1]),r=n.extend(!0,{url:o,success:n.ajaxSettings.success,type:e||n.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},r),a={},this.trigger("form-pre-serialize",[this,r,a]),a.veto)return t("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(r.beforeSerialize&&r.beforeSerialize(this,r)===!1)return t("ajaxSubmit: submit aborted via beforeSerialize callback"),this;if(v=r.traditional,void 0===v&&(v=n.ajaxSettings.traditional),c=[],s=this.formToArray(r.semantic,c),r.data&&(r.extraData=r.data,y=n.param(r.data,v)),r.beforeSubmit&&r.beforeSubmit(s,this,r)===!1)return t("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[s,this,r,a]),a.veto)return t("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;l=n.param(s,v);y&&(l=l?l+"&"+y:y);"GET"==r.type.toUpperCase()?(r.url+=(r.url.indexOf("?")>=0?"&":"?")+l,r.data=null):r.data=l;h=[];(r.resetForm&&h.push(function(){u.resetForm()}),r.clearForm&&h.push(function(){u.clearForm(r.includeHidden)}),!r.dataType&&r.target)?(g=r.success||function(){},h.push(function(t){var i=r.replaceTarget?"replaceWith":"html";n(r.target)[i](t).each(g,arguments)})):r.success&&h.push(r.success);(r.success=function(n,t,i){for(var e=r.context||this,f=0,o=h.length;o>f;f++)h[f].apply(e,[n,t,i||u,u])},r.error)&&(nt=r.error,r.error=function(n,t,i){var f=r.context||this;nt.apply(f,[n,t,i,u])});r.complete&&(tt=r.complete,r.complete=function(n,t){var i=r.context||this;tt.apply(i,[n,t,u])});var st=n("input[type=file]:enabled",this).filter(function(){return""!==n(this).val()}),it=st.length>0,rt="multipart/form-data",ut=u.attr("enctype")==rt||u.attr("encoding")==rt,k=i.fileapi&&i.formdata;for(t("fileAPI :"+k),ft=(it||ut)&&!k,r.iframe!==!1&&(r.iframe||ft)?r.closeKeepAlive?n.get(r.closeKeepAlive,function(){p=d(s)}):p=d(s):p=(it||ut)&&k?ot(s):n.ajax(r),u.removeData("jqxhr").data("jqxhr",p),w=0;w<c.length;w++)c[w]=null;return this.trigger("form-submit-notify",[this,r]),this};n.fn.ajaxForm=function(i){if(i=i||{},i.delegation=i.delegation&&n.isFunction(n.fn.on),!i.delegation&&0===this.length){var f={s:this.selector,c:this.context};return!n.isReady&&f.s?(t("DOM not ready, queuing ajaxForm"),n(function(){n(f.s,f.c).ajaxForm(i)}),this):(t("terminating; zero elements found by selector"+(n.isReady?"":" (DOM not ready)")),this)}return i.delegation?(n(document).off("submit.form-plugin",this.selector,r).off("click.form-plugin",this.selector,u).on("submit.form-plugin",this.selector,i,r).on("click.form-plugin",this.selector,i,u),this):this.ajaxFormUnbind().bind("submit.form-plugin",i,r).bind("click.form-plugin",i,u)};n.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};n.fn.formToArray=function(t,r){var e=[],l,h,f,c,u,b,k,a,p,v;if(0===this.length)return e;var y,o=this[0],w=this.attr("id"),s=t?o.getElementsByTagName("*"):o.elements;if(s&&!/MSIE [678]/.test(navigator.userAgent)&&(s=n(s).get()),w&&(y=n(':input[form="'+w+'"]').get(),y.length&&(s=(s||[]).concat(y))),!s||!s.length)return e;for(l=0,b=s.length;b>l;l++)if(u=s[l],f=u.name,f&&!u.disabled)if(t&&o.clk&&"image"==u.type)o.clk==u&&(e.push({name:f,value:n(u).val(),type:u.type}),e.push({name:f+".x",value:o.clk_x},{name:f+".y",value:o.clk_y}));else if(c=n.fieldValue(u,!0),c&&c.constructor==Array)for(r&&r.push(u),h=0,k=c.length;k>h;h++)e.push({name:f,value:c[h]});else if(i.fileapi&&"file"==u.type)if(r&&r.push(u),a=u.files,a.length)for(h=0;h<a.length;h++)e.push({name:f,value:a[h],type:u.type});else e.push({name:f,value:"",type:u.type});else null!==c&&"undefined"!=typeof c&&(r&&r.push(u),e.push({name:f,value:c,type:u.type,required:u.required}));return!t&&o.clk&&(p=n(o.clk),v=p[0],f=v.name,f&&!v.disabled&&"image"==v.type&&(e.push({name:f,value:p.val()}),e.push({name:f+".x",value:o.clk_x},{name:f+".y",value:o.clk_y}))),e};n.fn.formSerialize=function(t){return n.param(this.formToArray(t))};n.fn.fieldSerialize=function(t){var i=[];return this.each(function(){var f=this.name,r,u,e;if(f)if(r=n.fieldValue(this,t),r&&r.constructor==Array)for(u=0,e=r.length;e>u;u++)i.push({name:f,value:r[u]});else null!==r&&"undefined"!=typeof r&&i.push({name:this.name,value:r})}),n.param(i)};n.fn.fieldValue=function(t){for(var f,i,r=[],u=0,e=this.length;e>u;u++)f=this[u],i=n.fieldValue(f,t),null!==i&&"undefined"!=typeof i&&(i.constructor!=Array||i.length)&&(i.constructor==Array?n.merge(r,i):r.push(i));return r};n.fieldValue=function(t,i){var a=t.name,u=t.type,h=t.tagName.toLowerCase(),e,r,f;if(void 0===i&&(i=!0),i&&(!a||t.disabled||"reset"==u||"button"==u||("checkbox"==u||"radio"==u)&&!t.checked||("submit"==u||"image"==u)&&t.form&&t.form.clk!=t||"select"==h&&-1==t.selectedIndex))return null;if("select"==h){if(e=t.selectedIndex,0>e)return null;for(var c=[],l=t.options,o="select-one"==u,v=o?e+1:l.length,s=o?e:0;v>s;s++)if(r=l[s],r.selected){if(f=r.value,f||(f=r.attributes&&r.attributes.value&&!r.attributes.value.specified?r.text:r.value),o)return f;c.push(f)}return c}return n(t).val()};n.fn.clearForm=function(t){return this.each(function(){n("input,select,textarea",this).clearFields(t)})};n.fn.clearFields=n.fn.clearInputs=function(t){var i=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var r=this.type,u=this.tagName.toLowerCase();i.test(r)||"textarea"==u?this.value="":"checkbox"==r||"radio"==r?this.checked=!1:"select"==u?this.selectedIndex=-1:"file"==r?/MSIE/.test(navigator.userAgent)?n(this).replaceWith(n(this).clone(!0)):n(this).val(""):t&&(t===!0&&/hidden/.test(r)||"string"==typeof t&&n(this).is(t))&&(this.value="")})};n.fn.resetForm=function(){return this.each(function(){"function"!=typeof this.reset&&("object"!=typeof this.reset||this.reset.nodeType)||this.reset()})};n.fn.enable=function(n){return void 0===n&&(n=!0),this.each(function(){this.disabled=!n})};n.fn.selected=function(t){return void 0===t&&(t=!0),this.each(function(){var r=this.type,i;"checkbox"==r||"radio"==r?this.checked=t:"option"==this.tagName.toLowerCase()&&(i=n(this).parent("select"),t&&i[0]&&"select-one"==i[0].type&&i.find("option").selected(!1),this.selected=t)})};n.fn.ajaxSubmit.debug=!1}),function(n){if(typeof exports=="object"&&typeof module!="undefined")module.exports=n();else if(typeof define=="function"&&define.amd)define([],n);else{var t;t=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:this;t.mapboxgl=n()}}(function(){var n;return function t(n,i,r){function u(f,o){var h,c,s;if(!i[f]){if(!n[f]){if(h=typeof require=="function"&&require,!o&&h)return h(f,!0);if(e)return e(f,!0);c=new Error("Cannot find module '"+f+"'");throw c.code="MODULE_NOT_FOUND",c;}s=i[f]={exports:{}};n[f][0].call(s.exports,function(t){var i=n[f][1][t];return u(i?i:t)},s,s.exports,t,n,i,r)}return i[f].exports}for(var e=typeof require=="function"&&require,f=0;f<r.length;f++)u(r[f]);return u}({1:[function(t,i,r){!function(t,u){"object"==typeof r&&"undefined"!=typeof i?i.exports=u():"function"==typeof n&&n.amd?n(u):t.glMatrix=u()}(this,function(){"use strict";function n(){var n=new Float32Array(3);return n[0]=0,n[1]=0,n[2]=0,n}function t(n,t,i){var r=t[0],u=t[1],f=t[2];return n[0]=r*i[0]+u*i[3]+f*i[6],n[1]=r*i[1]+u*i[4]+f*i[7],n[2]=r*i[2]+u*i[5]+f*i[8],n}function i(){var n=new Float32Array(4);return n[0]=0,n[1]=0,n[2]=0,n[3]=0,n}function r(n,t,i){var r=t[0],u=t[1],f=t[2],e=t[3];return n[0]=i[0]*r+i[4]*u+i[8]*f+i[12]*e,n[1]=i[1]*r+i[5]*u+i[9]*f+i[13]*e,n[2]=i[2]*r+i[6]*u+i[10]*f+i[14]*e,n[3]=i[3]*r+i[7]*u+i[11]*f+i[15]*e,n}function u(){var n=new Float32Array(4);return n[0]=1,n[1]=0,n[2]=0,n[3]=1,n}function f(n,t,i){var f=t[0],e=t[1],o=t[2],s=t[3],r=Math.sin(i),u=Math.cos(i);return n[0]=f*u+o*r,n[1]=e*u+s*r,n[2]=f*-r+o*u,n[3]=e*-r+s*u,n}function e(n,t,i){var f=t[0],e=t[1],o=t[2],s=t[3],r=i[0],u=i[1];return n[0]=f*r,n[1]=e*r,n[2]=o*u,n[3]=s*u,n}function o(){var n=new Float32Array(9);return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=1,n[5]=0,n[6]=0,n[7]=0,n[8]=1,n}function s(n,t){var i=Math.sin(t),r=Math.cos(t);return n[0]=r,n[1]=i,n[2]=0,n[3]=-i,n[4]=r,n[5]=0,n[6]=0,n[7]=0,n[8]=1,n}function h(){var n=new Float32Array(16);return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function c(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function l(n,t){var r=t[0],u=t[1],f=t[2],e=t[3],o=t[4],s=t[5],h=t[6],c=t[7],l=t[8],a=t[9],v=t[10],y=t[11],p=t[12],w=t[13],b=t[14],k=t[15],d=r*s-u*o,g=r*h-f*o,nt=r*c-e*o,tt=u*h-f*s,it=u*c-e*s,rt=f*c-e*h,ut=l*w-a*p,ft=l*b-v*p,et=l*k-y*p,ot=a*b-v*w,st=a*k-y*w,ht=v*k-y*b,i=d*ht-g*st+nt*ot+tt*et-it*ft+rt*ut;return i?(i=1/i,n[0]=(s*ht-h*st+c*ot)*i,n[1]=(f*st-u*ht-e*ot)*i,n[2]=(w*rt-b*it+k*tt)*i,n[3]=(v*it-a*rt-y*tt)*i,n[4]=(h*et-o*ht-c*ft)*i,n[5]=(r*ht-f*et+e*ft)*i,n[6]=(b*nt-p*rt-k*g)*i,n[7]=(l*rt-v*nt+y*g)*i,n[8]=(o*st-s*et+c*ut)*i,n[9]=(u*et-r*st-e*ut)*i,n[10]=(p*it-w*nt+k*d)*i,n[11]=(a*nt-l*it-y*d)*i,n[12]=(s*ft-o*ot-h*ut)*i,n[13]=(r*ot-u*ft+f*ut)*i,n[14]=(w*g-p*tt-b*d)*i,n[15]=(l*tt-a*g+v*d)*i,n):null}function a(n,t,i){var o=t[0],s=t[1],h=t[2],c=t[3],l=t[4],a=t[5],v=t[6],y=t[7],p=t[8],w=t[9],b=t[10],k=t[11],d=t[12],g=t[13],nt=t[14],tt=t[15],r=i[0],u=i[1],f=i[2],e=i[3];return n[0]=r*o+u*l+f*p+e*d,n[1]=r*s+u*a+f*w+e*g,n[2]=r*h+u*v+f*b+e*nt,n[3]=r*c+u*y+f*k+e*tt,r=i[4],u=i[5],f=i[6],e=i[7],n[4]=r*o+u*l+f*p+e*d,n[5]=r*s+u*a+f*w+e*g,n[6]=r*h+u*v+f*b+e*nt,n[7]=r*c+u*y+f*k+e*tt,r=i[8],u=i[9],f=i[10],e=i[11],n[8]=r*o+u*l+f*p+e*d,n[9]=r*s+u*a+f*w+e*g,n[10]=r*h+u*v+f*b+e*nt,n[11]=r*c+u*y+f*k+e*tt,r=i[12],u=i[13],f=i[14],e=i[15],n[12]=r*o+u*l+f*p+e*d,n[13]=r*s+u*a+f*w+e*g,n[14]=r*h+u*v+f*b+e*nt,n[15]=r*c+u*y+f*k+e*tt,n}function v(n,t,i){var e,o,s,h,c,l,a,v,y,p,w,b,r=i[0],u=i[1],f=i[2];return t===n?(n[12]=t[0]*r+t[4]*u+t[8]*f+t[12],n[13]=t[1]*r+t[5]*u+t[9]*f+t[13],n[14]=t[2]*r+t[6]*u+t[10]*f+t[14],n[15]=t[3]*r+t[7]*u+t[11]*f+t[15]):(e=t[0],o=t[1],s=t[2],h=t[3],c=t[4],l=t[5],a=t[6],v=t[7],y=t[8],p=t[9],w=t[10],b=t[11],n[0]=e,n[1]=o,n[2]=s,n[3]=h,n[4]=c,n[5]=l,n[6]=a,n[7]=v,n[8]=y,n[9]=p,n[10]=w,n[11]=b,n[12]=e*r+c*u+y*f+t[12],n[13]=o*r+l*u+p*f+t[13],n[14]=s*r+a*u+w*f+t[14],n[15]=h*r+v*u+b*f+t[15]),n}function y(n,t,i){var r=i[0],u=i[1],f=i[2];return n[0]=t[0]*r,n[1]=t[1]*r,n[2]=t[2]*r,n[3]=t[3]*r,n[4]=t[4]*u,n[5]=t[5]*u,n[6]=t[6]*u,n[7]=t[7]*u,n[8]=t[8]*f,n[9]=t[9]*f,n[10]=t[10]*f,n[11]=t[11]*f,n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n}function p(n,t,i){var r=Math.sin(i),u=Math.cos(i),f=t[4],e=t[5],o=t[6],s=t[7],h=t[8],c=t[9],l=t[10],a=t[11];return t!==n&&(n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n[4]=f*u+h*r,n[5]=e*u+c*r,n[6]=o*u+l*r,n[7]=s*u+a*r,n[8]=h*u-f*r,n[9]=c*u-e*r,n[10]=l*u-o*r,n[11]=a*u-s*r,n}function w(n,t,i){var r=Math.sin(i),u=Math.cos(i),f=t[0],e=t[1],o=t[2],s=t[3],h=t[4],c=t[5],l=t[6],a=t[7];return t!==n&&(n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n[0]=f*u+h*r,n[1]=e*u+c*r,n[2]=o*u+l*r,n[3]=s*u+a*r,n[4]=h*u-f*r,n[5]=c*u-e*r,n[6]=l*u-o*r,n[7]=a*u-s*r,n}function b(n,t,i,r,u){var f=1/Math.tan(t/2),e=1/(r-u);return n[0]=f/i,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=f,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=(u+r)*e,n[11]=-1,n[12]=0,n[13]=0,n[14]=2*u*r*e,n[15]=0,n}function k(n,t,i,r,u,f,e){var o=1/(t-i),s=1/(r-u),h=1/(f-e);return n[0]=-2*o,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=-2*s,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=2*h,n[11]=0,n[12]=(t+i)*o,n[13]=(u+r)*s,n[14]=(e+f)*h,n[15]=1,n}return n(),i(),{vec3:{transformMat3:t},vec4:{transformMat4:r},mat2:{create:u,rotate:f,scale:e},mat3:{create:o,fromRotation:s},mat4:{create:h,identity:c,translate:v,scale:y,multiply:a,perspective:b,rotateX:p,rotateZ:w,invert:l,ortho:k}}})},{}],2:[function(t,i,r){!function(t,u){"object"==typeof r&&"undefined"!=typeof i?i.exports=u():"function"==typeof n&&n.amd?n(u):t.ShelfPack=u()}(this,function(){function n(n,t,i){i=i||{};this.w=n||64;this.h=t||64;this.autoResize=!!i.autoResize;this.shelves=[];this.freebins=[];this.stats={};this.bins={};this.maxId=0}function t(n,t,i){this.x=0;this.y=n;this.w=this.free=t;this.h=i}function i(n,t,i,r,u,f,e){this.id=n;this.x=t;this.y=i;this.w=r;this.h=u;this.maxw=f||r;this.maxh=e||u;this.refcount=0}return n.prototype.pack=function(n,t){var f,e,c,r,o,i,u;for(n=[].concat(n),t=t||{},o=[],i=0;i<n.length;i++)if(f=n[i].w||n[i].width,e=n[i].h||n[i].height,c=n[i].id,f&&e){if(r=this.packOne(f,e,c),!r)continue;t.inPlace&&(n[i].x=r.x,n[i].y=r.y,n[i].id=r.id);o.push(r)}if(this.shelves.length>0){for(var s=0,l=0,h=0;h<this.shelves.length;h++)u=this.shelves[h],l+=u.h,s=Math.max(u.w-u.free,s);this.resize(s,l)}return o},n.prototype.packOne=function(n,i,r){var u,o,s,f,e={freebin:-1,shelf:-1,waste:1/0},l=0,h,a,c,v;if("string"==typeof r||"number"==typeof r){if(u=this.getBin(r))return this.ref(u),u;"number"==typeof r&&(this.maxId=Math.max(r,this.maxId))}else r=++this.maxId;for(f=0;f<this.freebins.length;f++){if(u=this.freebins[f],i===u.maxh&&n===u.maxw)return this.allocFreebin(f,n,i,r);i>u.maxh||n>u.maxw||i<=u.maxh&&n<=u.maxw&&(s=u.maxw*u.maxh-n*i,s<e.waste&&(e.waste=s,e.freebin=f))}for(f=0;f<this.shelves.length;f++)if(o=this.shelves[f],l+=o.h,!(n>o.free)){if(i===o.h)return this.allocShelf(f,n,i,r);i>o.h||i<o.h&&(s=(o.h-i)*n,s<e.waste&&(e.freebin=-1,e.waste=s,e.shelf=f))}return e.freebin!==-1?this.allocFreebin(e.freebin,n,i,r):e.shelf!==-1?this.allocShelf(e.shelf,n,i,r):i<=this.h-l&&n<=this.w?(o=new t(l,this.w,i),this.allocShelf(this.shelves.push(o)-1,n,i,r)):this.autoResize?(h=a=this.h,c=v=this.w,(c<=h||n>c)&&(v=2*Math.max(n,c)),(h<c||i>h)&&(a=2*Math.max(i,h)),this.resize(v,a),this.packOne(n,i,r)):null},n.prototype.allocFreebin=function(n,t,i,r){var u=this.freebins.splice(n,1)[0];return u.id=r,u.w=t,u.h=i,u.refcount=0,this.bins[r]=u,this.ref(u),u},n.prototype.allocShelf=function(n,t,i,r){var f=this.shelves[n],u=f.alloc(t,i,r);return this.bins[r]=u,this.ref(u),u},n.prototype.getBin=function(n){return this.bins[n]},n.prototype.ref=function(n){if(1==++n.refcount){var t=n.h;this.stats[t]=(0|this.stats[t])+1}return n.refcount},n.prototype.unref=function(n){return 0===n.refcount?0:(0==--n.refcount&&(this.stats[n.h]--,delete this.bins[n.id],this.freebins.push(n)),n.refcount)},n.prototype.clear=function(){this.shelves=[];this.freebins=[];this.stats={};this.bins={};this.maxId=0},n.prototype.resize=function(n,t){this.w=n;this.h=t;for(var i=0;i<this.shelves.length;i++)this.shelves[i].resize(n);return!0},t.prototype.alloc=function(n,t,r){if(n>this.free||t>this.h)return null;var u=this.x;return this.x+=n,this.free-=n,new i(r,u,this.y,n,t,n,this.h)},t.prototype.resize=function(n){return this.free+=n-this.w,this.w=n,!0},n})},{}],3:[function(n,t){function i(n,t,i,r){this.cx=3*n;this.bx=3*(i-n)-this.cx;this.ax=1-this.cx-this.bx;this.cy=3*t;this.by=3*(r-t)-this.cy;this.ay=1-this.cy-this.by;this.p1x=n;this.p1y=r;this.p2x=i;this.p2y=r}t.exports=i;i.prototype.sampleCurveX=function(n){return((this.ax*n+this.bx)*n+this.cx)*n};i.prototype.sampleCurveY=function(n){return((this.ay*n+this.by)*n+this.cy)*n};i.prototype.sampleCurveDerivativeX=function(n){return(3*this.ax*n+2*this.bx)*n+this.cx};i.prototype.solveCurveX=function(n,t){var r,u,i,f,e,o;for("undefined"==typeof t&&(t=1e-6),i=n,e=0;e<8;e++){if(f=this.sampleCurveX(i)-n,Math.abs(f)<t)return i;if(o=this.sampleCurveDerivativeX(i),Math.abs(o)<1e-6)break;i-=f/o}if(r=0,u=1,i=n,i<r)return r;if(i>u)return u;for(;r<u;){if(f=this.sampleCurveX(i),Math.abs(f-n)<t)return i;n>f?r=i:u=i;i=.5*(u-r)+r}return i};i.prototype.solve=function(n,t){return this.sampleCurveY(this.solveCurveX(n,t))}},{}],4:[function(t,i,r){!function(t,u){"object"==typeof r&&"undefined"!=typeof i?u(r):"function"==typeof n&&n.amd?n(["exports"],u):u(t.WhooTS=t.WhooTS||{})}(this,function(n){function r(n,t,r,u,f,e){e=e||{};return n+"?"+["bbox="+i(r,u,f),"format="+(e.format||"image/png"),"service="+(e.service||"WMS"),"version="+(e.version||"1.1.1"),"request="+(e.request||"GetMap"),"srs="+(e.srs||"EPSG:3857"),"width="+(e.width||256),"height="+(e.height||256),"layers="+t].join("&")}function i(n,i,r){i=Math.pow(2,r)-i-1;var u=t(256*n,256*i,r),f=t(256*(n+1),256*(i+1),r);return u[0]+","+u[1]+","+f[0]+","+f[1]}function t(n,t,i){var r=12756274*Math.PI/256/Math.pow(2,i),u=n*r-6378137*Math.PI,f=t*r-6378137*Math.PI;return[u,f]}n.getURL=r;n.getTileBBox=i;n.getMercCoords=t;Object.defineProperty(n,"__esModule",{value:!0})})},{}],5:[function(n,t){"use strict";function h(n,t,i){var r,u,c,l,e,o,w,s;i=i||2;var y=t&&t.length,p=y?t[0]*i:n.length,h=v(n,0,p,i,!0),a=[];if(!h)return a;if(y&&(h=nt(n,t,h,i)),n.length>80*i){for(r=c=n[0],u=l=n[1],s=i;s<p;s+=i)e=n[s],o=n[s+1],e<r&&(r=e),o<u&&(u=o),e>c&&(c=e),o>l&&(l=o);w=Math.max(c-r,l-u)}return f(h,a,i,r,u,w),a}function v(n,t,i,u,f){var e,s;if(f===a(n,t,i,u)>0)for(e=t;e<i;e+=u)s=w(e,n[e],n[e+1],s);else for(e=i-u;e>=t;e-=u)s=w(e,n[e],n[e+1],s);return s&&r(s,s.next)&&(o(s),s=s.next),s}function u(n,t){if(!n)return n;t||(t=n);var f,u=n;do if(f=!1,u.steiner||!r(u,u.next)&&0!==i(u.prev,u,u.next))u=u.next;else{if(o(u),u=t=u.prev,u===u.next)return null;f=!0}while(f||u!==t);return t}function f(n,t,i,r,e,s,h){if(n){!h&&s&&ut(n,r,e,s);for(var l,c,a=n;n.prev!==n.next;)if(l=n.prev,c=n.next,s?k(n,r,e,s):b(n))t.push(l.i/i),t.push(n.i/i),t.push(c.i/i),o(n),n=c.next,a=c.next;else if(n=c,n===a){h?1===h?(n=d(n,t,i),f(n,t,i,r,e,s,2)):2===h&&g(n,t,i,r,e,s):f(u(n),t,i,r,e,s,1);break}}}function b(n){var r=n.prev,u=n,f=n.next,t;if(i(r,u,f)>=0)return!1;for(t=n.next.next;t!==n.prev;){if(s(r.x,r.y,u.x,u.y,f.x,f.y,t.x,t.y)&&i(t.prev,t,t.next)>=0)return!1;t=t.next}return!0}function k(n,t,r,u){var o=n.prev,h=n,e=n.next;if(i(o,h,e)>=0)return!1;for(var l=o.x<h.x?o.x<e.x?o.x:e.x:h.x<e.x?h.x:e.x,a=o.y<h.y?o.y<e.y?o.y:e.y:h.y<e.y?h.y:e.y,v=o.x>h.x?o.x>e.x?o.x:e.x:h.x>e.x?h.x:e.x,y=o.y>h.y?o.y>e.y?o.y:e.y:h.y>e.y?h.y:e.y,p=c(l,a,t,r,u),w=c(v,y,t,r,u),f=n.nextZ;f&&f.z<=w;){if(f!==n.prev&&f!==n.next&&s(o.x,o.y,h.x,h.y,e.x,e.y,f.x,f.y)&&i(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(f=n.prevZ;f&&f.z>=p;){if(f!==n.prev&&f!==n.next&&s(o.x,o.y,h.x,h.y,e.x,e.y,f.x,f.y)&&i(f.prev,f,f.next)>=0)return!1;f=f.prevZ}return!0}function d(n,t,i){var u=n,s,f;do s=u.prev,f=u.next.next,!r(s,f)&&y(s,u,u.next,f)&&e(s,f)&&e(f,s)&&(t.push(s.i/i),t.push(u.i/i),t.push(f.i/i),o(u),o(u.next),u=n=f),u=u.next;while(u!==n);return u}function g(n,t,i,r,e,o){var s=n,h,c;do{for(h=s.next.next;h!==s.prev;){if(s.i!==h.i&&ot(s,h))return c=p(s,h),s=u(s,s.next),c=u(c,c.next),f(s,t,i,r,e,o),void f(c,t,i,r,e,o);h=h.next}s=s.next}while(s!==n)}function nt(n,t,i,r){for(var h,c,e,o=[],f=0,s=t.length;f<s;f++)h=t[f]*r,c=f<s-1?t[f+1]*r:n.length,e=v(n,h,c,r,!1),e===e.next&&(e.steiner=!0),o.push(et(e));for(o.sort(tt),f=0;f<o.length;f++)it(o[f],i),i=u(i,i.next);return i}function tt(n,t){return n.x-t.x}function it(n,t){if(t=rt(n,t)){var i=p(t,n);u(i,i.next)}}function rt(n,t){var r,i=t,f=n.x,u=n.y,o=-(1/0),h;do{if(u<=i.y&&u>=i.next.y&&(h=i.x+(u-i.y)*(i.next.x-i.x)/(i.next.y-i.y),h<=f&&h>o)){if(o=h,h===f){if(u===i.y)return i;if(u===i.next.y)return i.next}r=i.x<i.next.x?i:i.next}i=i.next}while(i!==t);if(!r)return null;if(f===o)return r.prev;var c,y=r,v=r.x,l=r.y,a=1/0;for(i=r.next;i!==y;)f>=i.x&&i.x>=v&&s(u<l?f:o,u,v,l,u<l?o:f,u,i.x,i.y)&&(c=Math.abs(u-i.y)/(f-i.x),(c<a||c===a&&i.x>r.x)&&e(i,n)&&(r=i,a=c)),i=i.next;return r}function ut(n,t,i,r){var u=n;do null===u.z&&(u.z=c(u.x,u.y,t,i,r)),u.prevZ=u.prev,u.nextZ=u.next,u=u.next;while(u!==n);u.prevZ.nextZ=null;u.prevZ=null;ft(u)}function ft(n){var o,i,t,r,u,s,f,e,h=1;do{for(i=n,n=null,u=null,s=0;i;){for(s++,t=i,f=0,o=0;o<h&&(f++,t=t.nextZ,t);o++);for(e=h;f>0||e>0&&t;)0===f?(r=t,t=t.nextZ,e--):0!==e&&t?i.z<=t.z?(r=i,i=i.nextZ,f--):(r=t,t=t.nextZ,e--):(r=i,i=i.nextZ,f--),u?u.nextZ=r:n=r,r.prevZ=u,u=r;i=t}u.nextZ=null;h*=2}while(s>1);return n}function c(n,t,i,r,u){return n=32767*(n-i)/u,t=32767*(t-r)/u,n=16711935&(n|n<<8),n=252645135&(n|n<<4),n=858993459&(n|n<<2),n=1431655765&(n|n<<1),t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),n|t<<1}function et(n){var t=n,i=n;do t.x<i.x&&(i=t),t=t.next;while(t!==n);return i}function s(n,t,i,r,u,f,e,o){return(u-e)*(t-o)-(n-e)*(f-o)>=0&&(n-e)*(r-o)-(i-e)*(t-o)>=0&&(i-e)*(f-o)-(u-e)*(r-o)>=0}function ot(n,t){return n.next.i!==t.i&&n.prev.i!==t.i&&!st(n,t)&&e(n,t)&&e(t,n)&&ht(n,t)}function i(n,t,i){return(t.y-n.y)*(i.x-t.x)-(t.x-n.x)*(i.y-t.y)}function r(n,t){return n.x===t.x&&n.y===t.y}function y(n,t,u,f){return!!(r(n,t)&&r(u,f)||r(n,f)&&r(u,t))||i(n,t,u)>0!=i(n,t,f)>0&&i(u,f,n)>0!=i(u,f,t)>0}function st(n,t){var i=n;do{if(i.i!==n.i&&i.next.i!==n.i&&i.i!==t.i&&i.next.i!==t.i&&y(i,i.next,n,t))return!0;i=i.next}while(i!==n);return!1}function e(n,t){return i(n.prev,n,n.next)<0?i(n,t,n.next)>=0&&i(n,n.prev,t)>=0:i(n,t,n.prev)<0||i(n,n.next,t)<0}function ht(n,t){var i=n,r=!1,f=(n.x+t.x)/2,u=(n.y+t.y)/2;do i.y>u!=i.next.y>u&&f<(i.next.x-i.x)*(u-i.y)/(i.next.y-i.y)+i.x&&(r=!r),i=i.next;while(i!==n);return r}function p(n,t){var r=new l(n.i,n.x,n.y),i=new l(t.i,t.x,t.y),u=n.next,f=t.prev;return n.next=t,t.prev=n,r.next=u,u.prev=r,i.next=r,r.prev=i,f.next=i,i.prev=f,i}function w(n,t,i,r){var u=new l(n,t,i);return r?(u.next=r.next,u.prev=r,r.next.prev=u,r.next=u):(u.prev=u,u.next=u),u}function o(n){n.next.prev=n.prev;n.prev.next=n.next;n.prevZ&&(n.prevZ.nextZ=n.nextZ);n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function l(n,t,i){this.i=n;this.x=t;this.y=i;this.prev=null;this.next=null;this.z=null;this.prevZ=null;this.nextZ=null;this.steiner=!1}function a(n,t,i,r){for(var e=0,u=t,f=i-r;u<i;u+=r)e+=(n[f]-n[u])*(n[u+1]+n[f+1]),f=u;return e}t.exports=h;h.deviation=function(n,t,i,r){var h=t&&t.length,p=h?t[0]*i:n.length,f=Math.abs(a(n,0,p,i)),u,s,c,l,e;if(h)for(u=0,s=t.length;u<s;u++)c=t[u]*i,l=u<s-1?t[u+1]*i:n.length,f-=Math.abs(a(n,c,l,i));for(e=0,u=0;u<r.length;u+=3){var o=r[u]*i,v=r[u+1]*i,y=r[u+2]*i;e+=Math.abs((n[o]-n[y])*(n[v+1]-n[o+1])-(n[o]-n[v])*(n[y+1]-n[o+1]))}return 0===f&&0===e?0:Math.abs((e-f)/f)};h.flatten=function(n){for(var i,r,f=n[0][0].length,u={vertices:[],holes:[],dimensions:f},e=0,t=0;t<n.length;t++){for(i=0;i<n[t].length;i++)for(r=0;r<f;r++)u.vertices.push(n[t][i][r]);t>0&&(e+=n[t-1].length,u.holes.push(e))}return u}},{}],6:[function(n,t){function e(n){if("Polygon"===n.type)return u(n.coordinates);if("MultiPolygon"===n.type){for(var i=0,t=0;t<n.coordinates.length;t++)i+=u(n.coordinates[t]);return i}return null}function u(n){var r=0,t;if(n&&n.length>0)for(r+=Math.abs(i(n[0])),t=1;t<n.length;t++)r-=Math.abs(i(n[t]));return r}function i(n){var i=0,u,e,t;if(n.length>2){for(t=0;t<n.length-1;t++)u=n[t],e=n[t+1],i+=r(e[0]-u[0])*(2+Math.sin(r(u[1]))+Math.sin(r(e[1])));i=i*f.RADIUS*f.RADIUS/2}return i}function r(n){return n*Math.PI/180}var f=n("wgs84");t.exports.geometry=e;t.exports.ring=i},{wgs84:42}],7:[function(n,t){function i(n,t){switch(n&&n.type||null){case"FeatureCollection":return n.features=n.features.map(r(i,t)),n;case"Feature":return n.geometry=i(n.geometry,t),n;case"Polygon":case"MultiPolygon":return e(n,t);default:return n}}function r(n,t){return function(i){return n(i,t)}}function e(n,t){return"Polygon"===n.type?n.coordinates=u(n.coordinates,t):"MultiPolygon"===n.type&&(n.coordinates=n.coordinates.map(r(u,t))),n}function u(n,t){t=!!t;n[0]=f(n[0],!t);for(var i=1;i<n.length;i++)n[i]=f(n[i],t);return n}function f(n,t){return o(n)===t?n:n.reverse()}function o(n){return s.ring(n)>=0}var s=n("geojson-area");t.exports=i},{"geojson-area":6}],8:[function(n,t){"use strict";function r(n,t,i,r,o,s,h,c){var a,v,b;if(i/=t,r/=t,h>=i&&c<=r)return n;if(h>r||c<i)return null;for(a=[],v=0;v<n.length;v++){var y,p,l=n[v],k=l.geometry,w=l.type;(y=l.min[o],p=l.max[o],y>=i&&p<=r)?a.push(l):y>r||p<i||(b=1===w?u(k,i,r,o):f(k,i,r,o,s,3===w),b.length&&a.push(e(l.tags,w,b,l.id)))}return a.length?a:null}function u(n,t,i,r){for(var e,o,f=[],u=0;u<n.length;u++)e=n[u],o=e[r],o>=t&&o<=i&&f.push(e);return f}function f(n,t,r,u,f,e){for(var l=[],k=0;k<n.length;k++){for(var s,d,v=0,c=0,h=null,a=n[k],p=a.area,w=a.dist,b=a.outer,g=a.length,o=[],y=0;y<g-1;y++)s=h||a[y],h=a[y+1],v=c||s[u],c=h[u],v<t?c>r?(o.push(f(s,h,t),f(s,h,r)),e||(o=i(l,o,p,w,b))):c>=t&&o.push(f(s,h,t)):v>r?c<t?(o.push(f(s,h,r),f(s,h,t)),e||(o=i(l,o,p,w,b))):c<=r&&o.push(f(s,h,r)):(o.push(s),c<t?(o.push(f(s,h,t)),e||(o=i(l,o,p,w,b))):c>r&&(o.push(f(s,h,r)),e||(o=i(l,o,p,w,b))));s=a[g-1];v=s[u];v>=t&&v<=r&&o.push(s);d=o[o.length-1];e&&d&&(o[0][0]!==d[0]||o[0][1]!==d[1])&&o.push(o[0]);i(l,o,p,w,b)}return l}function i(n,t,i,r,u){return t.length&&(t.area=i,t.dist=r,void 0!==u&&(t.outer=u),n.push(t)),[]}t.exports=r;var e=n("./feature")},{"./feature":10}],9:[function(n,t){"use strict";function e(n,t){var i=[],u;if("FeatureCollection"===n.type)for(u=0;u<n.features.length;u++)r(i,n.features[u],t);else"Feature"===n.type?r(i,n,t):r(i,{geometry:n},t);return i}function r(n,t,e){if(null!==t.geometry){var o,v,c,l,p=t.geometry,s=p.type,h=p.coordinates,a=t.properties,y=t.id;if("Point"===s)n.push(i(a,1,[f(h)],y));else if("MultiPoint"===s)n.push(i(a,1,u(h),y));else if("LineString"===s)n.push(i(a,2,[u(h,e)],y));else if("MultiLineString"===s||"Polygon"===s){for(c=[],o=0;o<h.length;o++)l=u(h[o],e),"Polygon"===s&&(l.outer=0===o),c.push(l);n.push(i(a,"Polygon"===s?3:2,c,y))}else if("MultiPolygon"===s){for(c=[],o=0;o<h.length;o++)for(v=0;v<h[o].length;v++)l=u(h[o][v],e),l.outer=0===v,c.push(l);n.push(i(a,3,c,y))}else{if("GeometryCollection"!==s)throw new Error("Input data is not a valid GeoJSON object.");for(o=0;o<p.geometries.length;o++)r(n,{geometry:p.geometries[o],properties:a},e)}}}function u(n,t){for(var i=[],r=0;r<n.length;r++)i.push(f(n[r]));return t&&(s(i,t),o(i)),i}function f(n){var i=Math.sin(n[1]*Math.PI/180),r=n[0]/360+.5,t=.5-.25*Math.log((1+i)/(1-i))/Math.PI;return t=t<0?0:t>1?1:t,[r,t,0]}function o(n){for(var i,t,u=0,f=0,r=0;r<n.length-1;r++)i=t||n[r],t=n[r+1],u+=i[0]*t[1]-t[0]*i[1],f+=Math.abs(t[0]-i[0])+Math.abs(t[1]-i[1]);n.area=Math.abs(u/2);n.dist=f}t.exports=e;var s=n("./simplify"),i=n("./feature")},{"./feature":10,"./simplify":12}],10:[function(n,t){"use strict";function r(n,t,i,r){var f={id:r||null,type:t,geometry:i,tags:n||null,min:[1/0,1/0],max:[-(1/0),-(1/0)]};return u(f),f}function u(n){var r=n.geometry,u=n.min,f=n.max,t;if(1===n.type)i(u,f,r);else for(t=0;t<r.length;t++)i(u,f,r[t]);return n}function i(n,t,i){for(var r,u=0;u<i.length;u++)r=i[u],n[0]=Math.min(r[0],n[0]),t[0]=Math.max(r[0],t[0]),n[1]=Math.min(r[1],n[1]),t[1]=Math.max(r[1],t[1])}t.exports=r},{}],11:[function(n,t){"use strict";function h(n,t){return new r(n,t)}function r(n,t){var r,u,i;t=this.options=c(Object.create(this.options),t);r=t.debug;r&&console.time("preprocess data");u=1<<t.maxZoom;i=l(n,t.tolerance/(u*t.extent));this.tiles={};this.tileCoords=[];r&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",t.indexMaxZoom,t.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0);i=a(i,t.buffer/t.extent,o);i.length&&this.splitTile(i,0,0,0);r&&(i.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function u(n,t,i){return 32*((1<<n)*i+t)+n}function o(n,t,i){return[i,(i-n[0])*(t[1]-n[1])/(t[0]-n[0])+n[1],1]}function f(n,t,i){return[(i-n[1])*(t[0]-n[0])/(t[1]-n[1])+n[0],i,1]}function c(n,t){for(var i in t)n[i]=t[i];return n}function s(n,t,i){var s=n.source,r,o,f,u;if(1!==s.length||(r=s[0],3!==r.type||r.geometry.length>1)||(o=r.geometry[0].length,5!==o))return!1;for(f=0;f<o;f++)if(u=e.point(r.geometry[0][f],t,n.z2,n.x,n.y),u[0]!==-i&&u[0]!==t+i||u[1]!==-i&&u[1]!==t+i)return!1;return!0}t.exports=h;var l=n("./convert"),e=n("./transform"),i=n("./clip"),a=n("./wrap"),v=n("./tile");r.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,solidChildren:!1,tolerance:3,extent:4096,buffer:64,debug:0};r.prototype.splitTile=function(n,t,r,e,h,c,l){for(var nt,tt,p=[n,t,r,e],y=this.options,k=y.debug,ht=null;p.length;){e=p.pop();r=p.pop();t=p.pop();n=p.pop();var w=1<<t,ct=u(t,r,e),a=this.tiles[ct],lt=t===y.maxZoom?0:y.tolerance/(w*y.extent);if(!a&&(k>1&&console.time("creation"),a=this.tiles[ct]=v(n,w,r,e,lt,t===y.maxZoom),this.tileCoords.push({z:t,x:r,y:e}),k)&&(k>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",t,r,e,a.numFeatures,a.numPoints,a.numSimplified),console.timeEnd("creation")),nt="z"+t,this.stats[nt]=(this.stats[nt]||0)+1,this.total++),a.source=n,h){if(t===y.maxZoom||t===h)continue;if(tt=1<<h-t,r!==Math.floor(c/tt)||e!==Math.floor(l/tt))continue}else if(t===y.indexMaxZoom||a.numPoints<=y.indexMaxPoints)continue;if(y.solidChildren||!s(a,y.extent,y.buffer)){a.source=null;k>1&&console.time("clipping");var it,rt,ut,ft,d,g,b=.5*y.buffer/y.extent,et=.5-b,ot=.5+b,st=1+b;it=rt=ut=ft=null;d=i(n,w,r-b,r+ot,0,o,a.min[0],a.max[0]);g=i(n,w,r+et,r+st,0,o,a.min[0],a.max[0]);d&&(it=i(d,w,e-b,e+ot,1,f,a.min[1],a.max[1]),rt=i(d,w,e+et,e+st,1,f,a.min[1],a.max[1]));g&&(ut=i(g,w,e-b,e+ot,1,f,a.min[1],a.max[1]),ft=i(g,w,e+et,e+st,1,f,a.min[1],a.max[1]));k>1&&console.timeEnd("clipping");n.length&&(p.push(it||[],t+1,2*r,2*e),p.push(rt||[],t+1,2*r,2*e+1),p.push(ut||[],t+1,2*r+1,2*e),p.push(ft||[],t+1,2*r+1,2*e+1))}else h&&(ht=t)}return ht};r.prototype.getTile=function(n,t,i){var y=this.options,l=y.extent,a=y.debug,p=1<<n,f,v,w;if(t=(t%p+p)%p,f=u(n,t,i),this.tiles[f])return e.tile(this.tiles[f],l);a>1&&console.log("drilling down to z%d-%d-%d",n,t,i);for(var r,o=n,h=t,c=i;!r&&o>0;)o--,h=Math.floor(h/2),c=Math.floor(c/2),r=this.tiles[u(o,h,c)];return!r||!r.source?null:(a>1&&console.log("found parent tile z%d-%d-%d",o,h,c),s(r,l,y.buffer))?e.tile(r,l):(a>1&&console.time("drilling down"),v=this.splitTile(r.source,o,h,c,n,t,i),(a>1&&console.timeEnd("drilling down"),null!==v)&&(w=1<<n-v,f=u(v,Math.floor(t/w),Math.floor(i/w))),this.tiles[f]?e.tile(this.tiles[f],l):null)}},{"./clip":8,"./convert":9,"./tile":13,"./transform":14,"./wrap":15}],12:[function(n,t){"use strict";function i(n,t){var u,f,h,o,c=t*t,l=n.length,i=0,e=l-1,s=[];for(n[i][2]=1,n[e][2]=1;e;){for(f=0,u=i+1;u<e;u++)h=r(n[u],n[i],n[e]),h>f&&(o=u,f=h);f>c?(n[o][2]=f,s.push(i),s.push(o),i=o):(e=s.pop(),i=s.pop())}}function r(n,t,i){var f=t[0],e=t[1],s=i[0],h=i[1],c=n[0],l=n[1],r=s-f,u=h-e,o;return(0!==r||0!==u)&&(o=((c-f)*r+(l-e)*u)/(r*r+u*u),o>1?(f=s,e=h):o>0&&(f+=r*o,e+=u*o)),r=c-f,u=l-e,r*r+u*u}t.exports=i},{}],13:[function(n,t){"use strict";function i(n,t,i,u,f,e){for(var h,c,o={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:i,y:u,z2:t,transformed:!1,min:[2,1],max:[-1,0]},s=0;s<n.length;s++)o.numFeatures++,r(o,n[s],f,e),h=n[s].min,c=n[s].max,h[0]<o.min[0]&&(o.min[0]=h[0]),h[1]<o.min[1]&&(o.min[1]=h[1]),c[0]>o.max[0]&&(o.max[0]=c[0]),c[1]>o.max[1]&&(o.max[1]=c[1]);return o}function r(n,t,i,r){var f,s,e,a,h=t.geometry,o=t.type,c=[],y=i*i,l,v;if(1===o)for(f=0;f<h.length;f++)c.push(h[f]),n.numPoints++,n.numSimplified++;else for(f=0;f<h.length;f++)if(e=h[f],!r&&(2===o&&e.dist<i||3===o&&e.area<y))n.numPoints+=e.length;else{for(l=[],s=0;s<e.length;s++)a=e[s],(r||a[2]>y)&&(l.push(a),n.numSimplified++),n.numPoints++;3===o&&u(l,e.outer);c.push(l)}c.length&&(v={geometry:c,type:o,tags:t.tags||null},null!==t.id&&(v.id=t.id),n.features.push(v))}function u(n,t){var i=f(n);i<0===t&&n.reverse()}function f(n){for(var t,i,u=0,r=0,f=n.length,e=f-1;r<f;e=r++)t=n[r],i=n[e],u+=(i[0]-t[0])*(t[1]+i[1]);return u}t.exports=i},{}],14:[function(n,t,i){"use strict";function u(n,t){var o;if(n.transformed)return n;for(var i,u,s=n.z2,h=n.x,c=n.y,e=0;e<n.features.length;e++){var l=n.features[e],f=l.geometry,a=l.type;if(1===a)for(i=0;i<f.length;i++)f[i]=r(f[i],t,s,h,c);else for(i=0;i<f.length;i++)for(o=f[i],u=0;u<o.length;u++)o[u]=r(o[u],t,s,h,c)}return n.transformed=!0,n}function r(n,t,i,r,u){var f=Math.round(t*(n[0]*i-r)),e=Math.round(t*(n[1]*i-u));return[f,e]}i.tile=u;i.point=r},{}],15:[function(n,t){"use strict";function f(n,t,u){var f=n,e=i(n,1,-1-t,t,0,u,-1,2),o=i(n,1,1-t,2+t,0,u,-1,2);return(e||o)&&(f=i(n,1,-t,1+t,0,u,-1,2)||[],e&&(f=r(e,1).concat(f)),o&&(f=f.concat(r(o,-1)))),f}function r(n,t){for(var f,i,h,o,s=[],r=0;r<n.length;r++){if(i=n[r],h=i.type,1===h)f=u(i.geometry,t);else for(f=[],o=0;o<i.geometry.length;o++)f.push(u(i.geometry[o],t));s.push(e(i.tags,h,f,i.id))}return s}function u(n,t){var r=[],i;for(r.area=n.area,r.dist=n.dist,i=0;i<n.length;i++)r.push([n[i][0]+t,n[i][1],n[i][2]]);return r}var i=n("./clip"),e=n("./feature");t.exports=f},{"./clip":8,"./feature":10}],16:[function(n,t){"use strict";function i(n,t,i){var e=this.cells=[],u,f,o,s,a,h,c,l;if(n instanceof ArrayBuffer){for(this.arrayBuffer=n,u=new Int32Array(this.arrayBuffer),n=u[0],t=u[1],i=u[2],this.d=t+2*i,f=0;f<this.d*this.d;f++)o=u[r+f],s=u[r+f+1],e.push(o===s?null:u.subarray(o,s));a=u[r+e.length];h=u[r+e.length+1];this.keys=u.subarray(a,h);this.bboxes=u.subarray(h);this.insert=this._insertReadonly}else{for(this.d=t+2*i,c=0;c<this.d*this.d;c++)e.push([]);this.keys=[];this.bboxes=[]}this.n=t;this.extent=n;this.padding=i;this.scale=t/n;this.uid=0;l=i/t*n;this.min=-l;this.max=n+l}t.exports=i;var r=3;i.prototype.insert=function(n,t,i,r,u){this._forEachCell(t,i,r,u,this._insertCell,this.uid++);this.keys.push(n);this.bboxes.push(t);this.bboxes.push(i);this.bboxes.push(r);this.bboxes.push(u)};i.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer.";};i.prototype._insertCell=function(n,t,i,r,u,f){this.cells[u].push(f)};i.prototype.query=function(n,t,i,r){var f=this.min,e=this.max,u,o;return n<=f&&t<=f&&e<=i&&e<=r?Array.prototype.slice.call(this.keys):(u=[],o={},this._forEachCell(n,t,i,r,this._queryCell,u,o),u)};i.prototype._queryCell=function(n,t,i,r,u,f,e){var c=this.cells[u],o,s;if(null!==c)for(var a=this.keys,h=this.bboxes,l=0;l<c.length;l++)o=c[l],void 0===e[o]&&(s=4*o,n<=h[s+2]&&t<=h[s+3]&&i>=h[s+0]&&r>=h[s+1]?(e[o]=!0,f.push(a[o])):e[o]=!1)};i.prototype._forEachCell=function(n,t,i,r,u,f,e){for(var o,h,c=this._convertToCellCoord(n),l=this._convertToCellCoord(t),a=this._convertToCellCoord(i),v=this._convertToCellCoord(r),s=c;s<=a;s++)for(o=l;o<=v;o++)if(h=this.d*o+s,u.call(this,n,t,i,r,h,f,e))return};i.prototype._convertToCellCoord=function(n){return Math.max(0,Math.min(this.d-1,Math.floor(n*this.scale)+this.padding))};i.prototype.toArrayBuffer=function(){var n,t,i,e;if(this.arrayBuffer)return this.arrayBuffer;for(var u=this.cells,o=r+this.cells.length+1+1,s=0,f=0;f<this.cells.length;f++)s+=this.cells[f].length;for(n=new Int32Array(o+s+this.keys.length+this.bboxes.length),n[0]=this.extent,n[1]=this.n,n[2]=this.padding,t=o,i=0;i<u.length;i++)e=u[i],n[r+i]=t,n.set(e,t),t+=e.length;return n[r+u.length]=t,n.set(this.keys,t),t+=this.keys.length,n[r+u.length+1]=t,n.set(this.bboxes,t),t+=this.bboxes.length,n.buffer}},{}],17:[function(n,t,i){i.read=function(n,t,i,r,u){var f,o,l=8*u-r-1,a=(1<<l)-1,v=a>>1,e=-7,s=i?u-1:0,c=i?-1:1,h=n[t+s];for(s+=c,f=h&(1<<-e)-1,h>>=-e,e+=l;e>0;f=256*f+n[t+s],s+=c,e-=8);for(o=f&(1<<-e)-1,f>>=-e,e+=r;e>0;o=256*o+n[t+s],s+=c,e-=8);if(0===f)f=1-v;else{if(f===a)return o?NaN:(h?-1:1)*(1/0);o+=Math.pow(2,r);f-=v}return(h?-1:1)*o*Math.pow(2,f-r)};i.write=function(n,t,i,r,u,f){var e,o,s,l=8*f-u-1,a=(1<<l)-1,h=a>>1,y=23===u?Math.pow(2,-24)-Math.pow(2,-77):0,c=r?0:f-1,v=r?1:-1,p=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,e=a):(e=Math.floor(Math.log(t)/Math.LN2),t*(s=Math.pow(2,-e))<1&&(e--,s*=2),t+=e+h>=1?y/s:y*Math.pow(2,1-h),t*s>=2&&(e++,s/=2),e+h>=a?(o=0,e=a):e+h>=1?(o=(t*s-1)*Math.pow(2,u),e+=h):(o=t*Math.pow(2,h-1)*Math.pow(2,u),e=0));u>=8;n[i+c]=255&o,c+=v,o/=256,u-=8);for(e=e<<u|o,l+=u;l>0;n[i+c]=255&e,c+=v,e/=256,l-=8);n[i+c-v]|=128*p}},{}],18:[function(n,t){"use strict";function r(n,t,r,u,f){return new i(n,t,r,u,f)}function i(n,t,i,r,o){t=t||u;i=i||f;o=o||Array;this.nodeSize=r||64;this.points=n;this.ids=new o(n.length);this.coords=new o(2*n.length);for(var s=0;s<n.length;s++)this.ids[s]=s,this.coords[2*s]=t(n[s]),this.coords[2*s+1]=i(n[s]);e(this.ids,this.coords,this.nodeSize,0,this.ids.length-1,0)}function u(n){return n[0]}function f(n){return n[1]}var e=n("./sort"),o=n("./range"),s=n("./within");t.exports=r;i.prototype={range:function(n,t,i,r){return o(this.ids,this.coords,n,t,i,r,this.nodeSize)},within:function(n,t,i){return s(this.ids,this.coords,n,t,i,this.nodeSize)}}},{"./range":19,"./sort":20,"./within":21}],19:[function(n,t){"use strict";function i(n,t,i,r,u,f,e){for(var s,h,c,l,w,o=[0,n.length-1,0],a=[];o.length;){var p=o.pop(),v=o.pop(),y=o.pop();if(v-y<=e)for(c=y;c<=v;c++)s=t[2*c],h=t[2*c+1],s>=i&&s<=u&&h>=r&&h<=f&&a.push(n[c]);else l=Math.floor((y+v)/2),s=t[2*l],h=t[2*l+1],s>=i&&s<=u&&h>=r&&h<=f&&a.push(n[l]),w=(p+1)%2,(0===p?i<=s:r<=h)&&(o.push(y),o.push(l-1),o.push(w)),(0===p?u>=s:f>=h)&&(o.push(l+1),o.push(v),o.push(w))}return a}t.exports=i},{}],20:[function(n,t){"use strict";function r(n,t,i,u,e,o){if(!(e-u<=i)){var s=Math.floor((u+e)/2);f(n,t,s,u,e,o%2);r(n,t,i,u,s-1,o+1);r(n,t,i,s+1,e,o+1)}}function f(n,t,r,u,e,o){for(;e>u;){if(e-u>600){var h=e-u+1,v=r-u+1,y=Math.log(h),l=.5*Math.exp(2*y/3),p=.5*Math.sqrt(y*l*(h-l)/h)*(v-h/2<0?-1:1),w=Math.max(u,Math.floor(r-v*l/h+p)),b=Math.min(e,Math.floor(r+(h-v)*l/h+p));f(n,t,r,w,b,o)}var a=t[2*r+o],c=u,s=e;for(i(n,t,u,r),t[2*e+o]>a&&i(n,t,u,e);c<s;){for(i(n,t,c,s),c++,s--;t[2*c+o]<a;)c++;for(;t[2*s+o]>a;)s--}t[2*u+o]===a?i(n,t,u,s):(s++,i(n,t,s,e));s<=r&&(u=s+1);r<=s&&(e=s-1)}}function i(n,t,i,r){u(n,i,r);u(t,2*i,2*r);u(t,2*i+1,2*r+1)}function u(n,t,i){var r=n[t];n[t]=n[i];n[i]=r}t.exports=r},{}],21:[function(n,t){"use strict";function r(n,t,r,u,f,e){for(var s,w,o=[0,n.length-1,0],a=[],b=f*f;o.length;){var v=o.pop(),c=o.pop(),l=o.pop();if(c-l<=e)for(s=l;s<=c;s++)i(t[2*s],t[2*s+1],r,u)<=b&&a.push(n[s]);else{var h=Math.floor((l+c)/2),y=t[2*h],p=t[2*h+1];i(y,p,r,u)<=b&&a.push(n[h]);w=(v+1)%2;(0===v?r-f<=y:u-f<=p)&&(o.push(l),o.push(h-1),o.push(w));(0===v?r+f>=y:u+f>=p)&&(o.push(h+1),o.push(c),o.push(w))}}return a}function i(n,t,i,r){var u=n-i,f=t-r;return u*u+f*f}t.exports=r},{}],22:[function(n,t){"use strict";function i(n){return!!(u()&&f()&&e()&&o()&&s()&&h()&&c()&&l(n&&n.failIfMajorPerformanceCaveat))}function u(){return"undefined"!=typeof window&&"undefined"!=typeof document}function f(){return Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray}function e(){return Function.prototype&&Function.prototype.bind}function o(){return Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions}function s(){return"JSON"in window&&"parse"in JSON&&"stringify"in JSON}function h(){return"Worker"in window}function c(){return"Uint8ClampedArray"in window}function l(n){return void 0===r[n]&&(r[n]=a(n)),r[n]}function a(n){var t=document.createElement("canvas"),r=Object.create(i.webGLContextAttributes);return r.failIfMajorPerformanceCaveat=n,t.probablySupportsContext?t.probablySupportsContext("webgl",r)||t.probablySupportsContext("experimental-webgl",r):t.supportsContext?t.supportsContext("webgl",r)||t.supportsContext("experimental-webgl",r):t.getContext("webgl",r)||t.getContext("experimental-webgl",r)}"undefined"!=typeof t&&t.exports?t.exports=i:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=i);var r={};i.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}},{}],23:[function(n,t,i){(function(n){function u(n,t){for(var u,r=0,i=n.length-1;i>=0;i--)u=n[i],"."===u?n.splice(i,1):".."===u?(n.splice(i,1),r++):r&&(n.splice(i,1),r--);if(t)for(;r--;r)n.unshift("..");return n}function t(n,t){if(n.filter)return n.filter(t);for(var r=[],i=0;i<n.length;i++)t(n[i],i,n)&&r.push(n[i]);return r}var e=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,r=function(n){return e.exec(n).slice(1)},f;i.resolve=function(){for(var r,i="",f=!1,e=arguments.length-1;e>=-1&&!f;e--){if(r=e>=0?arguments[e]:n.cwd(),"string"!=typeof r)throw new TypeError("Arguments to path.resolve must be strings");r&&(i=r+"/"+i,f="/"===r.charAt(0))}return i=u(t(i.split("/"),function(n){return!!n}),!f).join("/"),(f?"/":"")+i||"."};i.normalize=function(n){var r=i.isAbsolute(n),e="/"===f(n,-1);return n=u(t(n.split("/"),function(n){return!!n}),!r).join("/"),n||r||(n="."),n&&e&&(n+="/"),(r?"/":"")+n};i.isAbsolute=function(n){return"/"===n.charAt(0)};i.join=function(){var n=Array.prototype.slice.call(arguments,0);return i.normalize(t(n,function(n){if("string"!=typeof n)throw new TypeError("Arguments to path.join must be strings");return n}).join("/"))};i.relative=function(n,t){function s(n){for(var i,t=0;t<n.length&&""===n[t];t++);for(i=n.length-1;i>=0&&""===n[i];i--);return t>i?[]:n.slice(t,i-t+1)}var u,r;n=i.resolve(n).substr(1);t=i.resolve(t).substr(1);for(var f=s(n.split("/")),e=s(t.split("/")),h=Math.min(f.length,e.length),o=h,r=0;r<h;r++)if(f[r]!==e[r]){o=r;break}for(u=[],r=o;r<f.length;r++)u.push("..");return u=u.concat(e.slice(o)),u.join("/")};i.sep="/";i.delimiter=":";i.dirname=function(n){var i=r(n),u=i[0],t=i[1];return u||t?(t&&(t=t.substr(0,t.length-1)),u+t):"."};i.basename=function(n,t){var i=r(n)[2];return t&&i.substr(-1*t.length)===t&&(i=i.substr(0,i.length-t.length)),i};i.extname=function(n){return r(n)[3]};f="b"==="ab".substr(-1)?function(n,t,i){return n.substr(t,i)}:function(n,t,i){return t<0&&(t=n.length+t),n.substr(t,i)}}).call(this,n("_process"))},{_process:27}],24:[function(n,t){"use strict";function u(n){var r,t;return n&&n.length&&(r=n,n=r.length),t=new Uint8Array(n||0),r&&t.set(r),t.readUInt32LE=i.readUInt32LE,t.writeUInt32LE=i.writeUInt32LE,t.readInt32LE=i.readInt32LE,t.writeInt32LE=i.writeInt32LE,t.readFloatLE=i.readFloatLE,t.writeFloatLE=i.writeFloatLE,t.readDoubleLE=i.readDoubleLE,t.writeDoubleLE=i.writeDoubleLE,t.toString=i.toString,t.write=i.write,t.slice=i.slice,t.copy=i.copy,t._isBuffer=!0,t}function e(n){for(var t,r,f=n.length,i=[],u=0;u<f;u++){if(t=n.charCodeAt(u),t>55295&&t<57344){if(!r){t>56319||u+1===f?i.push(239,191,189):r=t;continue}if(t<56320){i.push(239,191,189);r=t;continue}t=r-55296<<10|t-56320|65536;r=null}else r&&(i.push(239,191,189),r=null);t<128?i.push(t):t<2048?i.push(t>>6|192,63&t|128):t<65536?i.push(t>>12|224,t>>6&63|128,63&t|128):i.push(t>>18|240,t>>12&63|128,t>>6&63|128,63&t|128)}return i}t.exports=u;var r=n("ieee754"),i,o,f;i={readUInt32LE:function(n){return(this[n]|this[n+1]<<8|this[n+2]<<16)+16777216*this[n+3]},writeUInt32LE:function(n,t){this[t]=n;this[t+1]=n>>>8;this[t+2]=n>>>16;this[t+3]=n>>>24},readInt32LE:function(n){return(this[n]|this[n+1]<<8|this[n+2]<<16)+(this[n+3]<<24)},readFloatLE:function(n){return r.read(this,n,!0,23,4)},readDoubleLE:function(n){return r.read(this,n,!0,52,8)},writeFloatLE:function(n,t){return r.write(this,n,t,!0,23,4)},writeDoubleLE:function(n,t){return r.write(this,n,t,!0,52,8)},toString:function(n,t,i){var e="",r="",u,f;for(t=t||0,i=Math.min(this.length,i||this.length),u=t;u<i;u++)f=this[u],f<=127?(e+=decodeURIComponent(r)+String.fromCharCode(f),r=""):r+="%"+f.toString(16);return e+decodeURIComponent(r)},write:function(n,t){for(var r=n===o?f:e(n),i=0;i<r.length;i++)this[t+i]=r[i]},slice:function(n,t){return this.subarray(n,t)},copy:function(n,t){t=t||0;for(var i=0;i<this.length;i++)n[t+i]=this[i]}};i.writeInt32LE=i.writeUInt32LE;u.byteLength=function(n){return o=n,f=e(n),f.length};u.isBuffer=function(n){return!(!n||!n._isBuffer)}},{ieee754:17}],25:[function(n,t){(function(i){"use strict";function r(n){this.buf=u.isBuffer(n)?n:new u(n||0);this.pos=0;this.length=this.buf.length}function o(n,t){var i,r=t.buf;if((i=r[t.pos++],n+=268435456*(127&i),i<128)||(i=r[t.pos++],n+=34359738368*(127&i),i<128)||(i=r[t.pos++],n+=4398046511104*(127&i),i<128)||(i=r[t.pos++],n+=562949953421312*(127&i),i<128)||(i=r[t.pos++],n+=72057594037927940*(127&i),i<128)||(i=r[t.pos++],n+=0x8000000000000000*(127&i),i<128))return n;throw new Error("Expected varint not more than 10 bytes");}function s(n,t){var i,r;for(t.realloc(10),i=t.pos+10;n>=1;){if(t.pos>=i)throw new Error("Given varint doesn't fit into 10 bytes");r=255&n;t.buf[t.pos++]=r|(n>=128?128:0);n/=128}}function h(n,t,i){var u=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.ceil(Math.log(t)/(7*Math.LN2)),r;for(i.realloc(u),r=i.pos-1;r>=n;r--)i.buf[r+u]=i.buf[r]}function c(n,t){for(var i=0;i<n.length;i++)t.writeVarint(n[i])}function l(n,t){for(var i=0;i<n.length;i++)t.writeSVarint(n[i])}function a(n,t){for(var i=0;i<n.length;i++)t.writeFloat(n[i])}function v(n,t){for(var i=0;i<n.length;i++)t.writeDouble(n[i])}function y(n,t){for(var i=0;i<n.length;i++)t.writeBoolean(n[i])}function p(n,t){for(var i=0;i<n.length;i++)t.writeFixed32(n[i])}function w(n,t){for(var i=0;i<n.length;i++)t.writeSFixed32(n[i])}function b(n,t){for(var i=0;i<n.length;i++)t.writeFixed64(n[i])}function k(n,t){for(var i=0;i<n.length;i++)t.writeSFixed64(n[i])}var u;t.exports=r;u=i.Buffer||n("./buffer");r.Varint=0;r.Fixed64=1;r.Bytes=2;r.Fixed32=5;var f=4294967296,e=1/f,d=Math.pow(2,63);r.prototype={destroy:function(){this.buf=null},readFields:function(n,t,i){for(i=i||this.length;this.pos<i;){var r=this.readVarint(),u=r>>3,f=this.pos;n(u,t,this);this.pos===f&&this.skip(r)}return t},readMessage:function(n,t){return this.readFields(n,t,this.readVarint()+this.pos)},readFixed32:function(){var n=this.buf.readUInt32LE(this.pos);return this.pos+=4,n},readSFixed32:function(){var n=this.buf.readInt32LE(this.pos);return this.pos+=4,n},readFixed64:function(){var n=this.buf.readUInt32LE(this.pos)+this.buf.readUInt32LE(this.pos+4)*f;return this.pos+=8,n},readSFixed64:function(){var n=this.buf.readUInt32LE(this.pos)+this.buf.readInt32LE(this.pos+4)*f;return this.pos+=8,n},readFloat:function(){var n=this.buf.readFloatLE(this.pos);return this.pos+=4,n},readDouble:function(){var n=this.buf.readDoubleLE(this.pos);return this.pos+=8,n},readVarint:function(){var t,n,i=this.buf;return n=i[this.pos++],t=127&n,n<128?t:(n=i[this.pos++],t|=(127&n)<<7,n<128?t:(n=i[this.pos++],t|=(127&n)<<14,n<128?t:(n=i[this.pos++],t|=(127&n)<<21,n<128?t:o(t,this))))},readVarint64:function(){var r=this.pos,i=this.readVarint(),t,n,u;if(i<d)return i;for(t=this.pos-2;255===this.buf[t];)t--;for(t<r&&(t=r),i=0,n=0;n<t-r+1;n++)u=127&~this.buf[r+n],i+=n<4?u<<7*n:u*Math.pow(2,7*n);return-i-1},readSVarint:function(){var n=this.readVarint();return n%2==1?(n+1)/-2:n/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var n=this.readVarint()+this.pos,t=this.buf.toString("utf8",this.pos,n);return this.pos=n,t},readBytes:function(){var n=this.readVarint()+this.pos,t=this.buf.slice(this.pos,n);return this.pos=n,t},readPackedVarint:function(){for(var t=this.readVarint()+this.pos,n=[];this.pos<t;)n.push(this.readVarint());return n},readPackedSVarint:function(){for(var t=this.readVarint()+this.pos,n=[];this.pos<t;)n.push(this.readSVarint());return n},readPackedBoolean:function(){for(var t=this.readVarint()+this.pos,n=[];this.pos<t;)n.push(this.readBoolean());return n},readPackedFloat:function(){for(var t=this.readVarint()+this.pos,n=[];this.pos<t;)n.push(this.readFloat());return n},readPackedDouble:function(){for(var t=this.readVarint()+this.pos,n=[];this.pos<t;)n.push(this.readDouble());return n},readPackedFixed32:function(){for(var t=this.readVarint()+this.pos,n=[];this.pos<t;)n.push(this.readFixed32());return n},readPackedSFixed32:function(){for(var t=this.readVarint()+this.pos,n=[];this.pos<t;)n.push(this.readSFixed32());return n},readPackedFixed64:function(){for(var t=this.readVarint()+this.pos,n=[];this.pos<t;)n.push(this.readFixed64());return n},readPackedSFixed64:function(){for(var t=this.readVarint()+this.pos,n=[];this.pos<t;)n.push(this.readSFixed64());return n},skip:function(n){var t=7&n;if(t===r.Varint)for(;this.buf[this.pos++]>127;);else if(t===r.Bytes)this.pos=this.readVarint()+this.pos;else if(t===r.Fixed32)this.pos+=4;else{if(t!==r.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(n,t){this.writeVarint(n<<3|t)},realloc:function(n){for(var i,t=this.length||16;t<this.pos+n;)t*=2;t!==this.length&&(i=new u(t),this.buf.copy(i),this.buf=i,this.length=t)},finish:function(){return this.length=this.pos,this.pos=0,this.buf.slice(0,this.length)},writeFixed32:function(n){this.realloc(4);this.buf.writeUInt32LE(n,this.pos);this.pos+=4},writeSFixed32:function(n){this.realloc(4);this.buf.writeInt32LE(n,this.pos);this.pos+=4},writeFixed64:function(n){this.realloc(8);this.buf.writeInt32LE(n&-1,this.pos);this.buf.writeUInt32LE(Math.floor(n*e),this.pos+4);this.pos+=8},writeSFixed64:function(n){this.realloc(8);this.buf.writeInt32LE(n&-1,this.pos);this.buf.writeInt32LE(Math.floor(n*e),this.pos+4);this.pos+=8},writeVarint:function(n){return n=+n,n>268435455?void s(n,this):(this.realloc(4),this.buf[this.pos++]=127&n|(n>127?128:0),void(n<=127||(this.buf[this.pos++]=127&(n>>>=7)|(n>127?128:0),n<=127||(this.buf[this.pos++]=127&(n>>>=7)|(n>127?128:0),n<=127||(this.buf[this.pos++]=n>>>7&127)))))},writeSVarint:function(n){this.writeVarint(n<0?2*-n-1:2*n)},writeBoolean:function(n){this.writeVarint(Boolean(n))},writeString:function(n){n=String(n);var t=u.byteLength(n);this.writeVarint(t);this.realloc(t);this.buf.write(n,this.pos);this.pos+=t},writeFloat:function(n){this.realloc(4);this.buf.writeFloatLE(n,this.pos);this.pos+=4},writeDouble:function(n){this.realloc(8);this.buf.writeDoubleLE(n,this.pos);this.pos+=8},writeBytes:function(n){var i=n.length,t;for(this.writeVarint(i),this.realloc(i),t=0;t<i;t++)this.buf[this.pos++]=n[t]},writeRawMessage:function(n,t){var r,i;this.pos++;r=this.pos;n(t,this);i=this.pos-r;i>=128&&h(r,i,this);this.pos=r-1;this.writeVarint(i);this.pos+=i},writeMessage:function(n,t,i){this.writeTag(n,r.Bytes);this.writeRawMessage(t,i)},writePackedVarint:function(n,t){this.writeMessage(n,c,t)},writePackedSVarint:function(n,t){this.writeMessage(n,l,t)},writePackedBoolean:function(n,t){this.writeMessage(n,y,t)},writePackedFloat:function(n,t){this.writeMessage(n,a,t)},writePackedDouble:function(n,t){this.writeMessage(n,v,t)},writePackedFixed32:function(n,t){this.writeMessage(n,p,t)},writePackedSFixed32:function(n,t){this.writeMessage(n,w,t)},writePackedFixed64:function(n,t){this.writeMessage(n,b,t)},writePackedSFixed64:function(n,t){this.writeMessage(n,k,t)},writeBytesField:function(n,t){this.writeTag(n,r.Bytes);this.writeBytes(t)},writeFixed32Field:function(n,t){this.writeTag(n,r.Fixed32);this.writeFixed32(t)},writeSFixed32Field:function(n,t){this.writeTag(n,r.Fixed32);this.writeSFixed32(t)},writeFixed64Field:function(n,t){this.writeTag(n,r.Fixed64);this.writeFixed64(t)},writeSFixed64Field:function(n,t){this.writeTag(n,r.Fixed64);this.writeSFixed64(t)},writeVarintField:function(n,t){this.writeTag(n,r.Varint);this.writeVarint(t)},writeSVarintField:function(n,t){this.writeTag(n,r.Varint);this.writeSVarint(t)},writeStringField:function(n,t){this.writeTag(n,r.Bytes);this.writeString(t)},writeFloatField:function(n,t){this.writeTag(n,r.Fixed32);this.writeFloat(t)},writeDoubleField:function(n,t){this.writeTag(n,r.Fixed64);this.writeDouble(t)},writeBooleanField:function(n,t){this.writeVarintField(n,Boolean(t))}}}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"./buffer":24}],26:[function(n,t){"use strict";function i(n,t){this.x=n;this.y=t}t.exports=i;i.prototype={clone:function(){return new i(this.x,this.y)},add:function(n){return this.clone()._add(n)},sub:function(n){return this.clone()._sub(n)},mult:function(n){return this.clone()._mult(n)},div:function(n){return this.clone()._div(n)},rotate:function(n){return this.clone()._rotate(n)},matMult:function(n){return this.clone()._matMult(n)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(n){return this.x===n.x&&this.y===n.y},dist:function(n){return Math.sqrt(this.distSqr(n))},distSqr:function(n){var t=n.x-this.x,i=n.y-this.y;return t*t+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(n){return Math.atan2(this.y-n.y,this.x-n.x)},angleWith:function(n){return this.angleWithSep(n.x,n.y)},angleWithSep:function(n,t){return Math.atan2(this.x*t-this.y*n,this.x*n+this.y*t)},_matMult:function(n){var t=n[0]*this.x+n[1]*this.y,i=n[2]*this.x+n[3]*this.y;return this.x=t,this.y=i,this},_add:function(n){return this.x+=n.x,this.y+=n.y,this},_sub:function(n){return this.x-=n.x,this.y-=n.y,this},_mult:function(n){return this.x*=n,this.y*=n,this},_div:function(n){return this.x/=n,this.y/=n,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var n=this.y;return this.y=this.x,this.x=-n,this},_rotate:function(n){var t=Math.cos(n),i=Math.sin(n),r=t*this.x-i*this.y,u=i*this.x+t*this.y;return this.x=r,this.y=u,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}};i.convert=function(n){return n instanceof i?n:Array.isArray(n)?new i(n[0],n[1]):n}},{}],27:[function(n,t){function c(){throw new Error("setTimeout has not been defined");}function l(){throw new Error("clearTimeout has not been defined");}function a(n){if(r===setTimeout)return setTimeout(n,0);if((r===c||!r)&&setTimeout)return r=setTimeout,setTimeout(n,0);try{return r(n,0)}catch(t){try{return r.call(null,n,0)}catch(t){return r.call(this,n,0)}}}function p(n){if(u===clearTimeout)return clearTimeout(n);if((u===l||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(n);try{return u(n)}catch(t){try{return u.call(null,n)}catch(t){return u.call(this,n)}}}function w(){s&&o&&(s=!1,o.length?f=o.concat(f):h=-1,f.length&&v())}function v(){var t,n;if(!s){for(t=a(w),s=!0,n=f.length;n;){for(o=f,f=[];++h<n;)o&&o[h].run();h=-1;n=f.length}o=null;s=!1;p(t)}}function y(n,t){this.fun=n;this.array=t}function e(){}var i=t.exports={},r,u;!function(){try{r="function"==typeof setTimeout?setTimeout:c}catch(n){r=c}try{u="function"==typeof clearTimeout?clearTimeout:l}catch(n){u=l}}();var f=[],s=!1,o,h=-1;i.nextTick=function(n){var i=new Array(arguments.length-1),t;if(arguments.length>1)for(t=1;t<arguments.length;t++)i[t-1]=arguments[t];f.push(new y(n,i));1!==f.length||s||a(v)};y.prototype.run=function(){this.fun.apply(null,this.array)};i.title="browser";i.browser=!0;i.env={};i.argv=[];i.version="";i.versions={};i.on=e;i.addListener=e;i.once=e;i.off=e;i.removeListener=e;i.removeAllListeners=e;i.emit=e;i.binding=function(){throw new Error("process.binding is not supported");};i.cwd=function(){return"/"};i.chdir=function(){throw new Error("process.chdir is not supported");};i.umask=function(){return 0}},{}],28:[function(n,t){"use strict";function r(n,t,f,e,o){for(f=f||0,e=e||n.length-1,o=o||u;e>f;){if(e-f>600){var h=e-f+1,v=t-f+1,y=Math.log(h),l=.5*Math.exp(2*y/3),p=.5*Math.sqrt(y*l*(h-l)/h)*(v-h/2<0?-1:1),w=Math.max(f,Math.floor(t-v*l/h+p)),b=Math.min(e,Math.floor(t+(h-v)*l/h+p));r(n,t,w,b,o)}var a=n[t],c=f,s=e;for(i(n,f,t),o(n[e],a)>0&&i(n,f,e);c<s;){for(i(n,c,s),c++,s--;o(n[c],a)<0;)c++;for(;o(n[s],a)>0;)s--}0===o(n[f],a)?i(n,f,s):(s++,i(n,s,e));s<=t&&(f=s+1);t<=s&&(e=s-1)}}function i(n,t,i){var r=n[t];n[t]=n[i];n[i]=r}function u(n,t){return n<t?-1:n>t?1:0}t.exports=r},{}],29:[function(n,t){"use strict";function c(n){return new u(n)}function u(n){this.options=p(Object.create(this.options),n);this.trees=new Array(this.options.maxZoom+1)}function f(n,t,i,r){return{x:n,y:t,zoom:1/0,id:r,numPoints:i}}function l(n,t){var u=n.geometry.coordinates;return f(i(u[0]),r(u[1]),1,t)}function a(n){return{type:"Feature",properties:e(n),geometry:{type:"Point",coordinates:[v(n.x),y(n.y)]}}}function e(n){var t=n.numPoints,i=t>=1e4?Math.round(t/1e3)+"k":t>=1e3?Math.round(t/100)/10+"k":t;return{cluster:!0,point_count:t,point_count_abbreviated:i}}function i(n){return n/360+.5}function r(n){var i=Math.sin(n*Math.PI/180),t=.5-.25*Math.log((1+i)/(1-i))/Math.PI;return t<0?0:t>1?1:t}function v(n){return 360*(n-.5)}function y(n){var t=(180-360*n)*Math.PI/180;return 360*Math.atan(Math.exp(t))/Math.PI-90}function p(n,t){for(var i in t)n[i]=t[i];return n}function o(n){return n.x}function s(n){return n.y}var h=n("kdbush");t.exports=c;u.prototype={options:{minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1},load:function(n){var r=this.options.log,u,t,i,f;for(r&&console.time("total time"),u="prepare "+n.length+" points",r&&console.time(u),this.points=n,t=n.map(l),r&&console.timeEnd(u),i=this.options.maxZoom;i>=this.options.minZoom;i--)f=+Date.now(),this.trees[i+1]=h(t,o,s,this.options.nodeSize,Float32Array),t=this._cluster(t,i),r&&console.log("z%d: %d clusters in %dms",i,t.length,+Date.now()-f);return this.trees[this.options.minZoom]=h(t,o,s,this.options.nodeSize,Float32Array),r&&console.timeEnd("total time"),this},getClusters:function(n,t){for(var u,e=this.trees[this._limitZoom(t)],o=e.range(i(n[0]),r(n[3]),i(n[2]),r(n[1])),s=[],f=0;f<o.length;f++)u=e.points[o[f]],s.push(u.id!==-1?this.points[u.id]:a(u));return s},getTile:function(n,t,i){var u=this.trees[this._limitZoom(n)],r=Math.pow(2,n),h=this.options.extent,c=this.options.radius,f=c/h,o=(i-f)/r,s=(i+1+f)/r,e={features:[]};return this._addTileFeatures(u.range((t-f)/r,o,(t+1+f)/r,s),u.points,t,i,r,e),0===t&&this._addTileFeatures(u.range(1-f/r,o,1,s),u.points,r,i,r,e),t===r-1&&this._addTileFeatures(u.range(0,o,f/r,s),u.points,-1,i,r,e),e.features.length?e:null},_addTileFeatures:function(n,t,i,r,u,f){for(var o,s=0;s<n.length;s++)o=t[n[s]],f.features.push({type:1,geometry:[[Math.round(this.options.extent*(o.x*u-i)),Math.round(this.options.extent*(o.y*u-r))]],tags:o.id!==-1?this.points[o.id].properties:e(o)})},_limitZoom:function(n){return Math.max(this.options.minZoom,Math.min(n,this.options.maxZoom+1))},_cluster:function(n,t){for(var i,r,s=[],y=this.options.radius/(this.options.extent*Math.pow(2,t)),e=0;e<n.length;e++)if(i=n[e],!(i.zoom<=t)){i.zoom=t;for(var h=this.trees[t+1],c=h.within(i.x,i.y,y),l=!1,u=i.numPoints,a=i.x*u,v=i.y*u,o=0;o<c.length;o++)r=h.points[c[o]],t<r.zoom&&(l=!0,r.zoom=t,a+=r.x*r.numPoints,v+=r.y*r.numPoints,u+=r.numPoints);s.push(l?f(a/u,v/u,u,-1):i)}return s}}},{kdbush:18}],30:[function(n,t){"use strict";function i(n,t){if(!(this instanceof i))return new i(n,t);if(this.data=n||[],this.length=this.data.length,this.compare=t||u,n)for(var r=Math.floor(this.length/2);r>=0;r--)this._down(r)}function u(n,t){return n<t?-1:n>t?1:0}function r(n,t,i){var r=n[t];n[t]=n[i];n[i]=r}t.exports=i;i.prototype={push:function(n){this.data.push(n);this.length++;this._up(this.length-1)},pop:function(){var n=this.data[0];return this.data[0]=this.data[this.length-1],this.length--,this.data.pop(),this._down(0),n},peek:function(){return this.data[0]},_up:function(n){for(var i,t=this.data,u=this.compare;n>0;){if(i=Math.floor((n-1)/2),!(u(t[n],t[i])<0))break;r(t,i,n);n=i}},_down:function(n){for(var i=this.data,e=this.compare,o=this.length;;){var u=2*n+1,f=u+1,t=n;if(u<o&&e(i[u],i[t])<0&&(t=u),f<o&&e(i[f],i[t])<0&&(t=f),t===n)return;r(i,t,n);n=t}}}},{}],31:[function(n,t){t.exports="function"==typeof Object.create?function(n,t){n.super_=t;n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}})}:function(n,t){n.super_=t;var i=function(){};i.prototype=t.prototype;n.prototype=new i;n.prototype.constructor=n}},{}],32:[function(n,t){t.exports=function(n){return n&&"object"==typeof n&&"function"==typeof n.copy&&"function"==typeof n.fill&&"function"==typeof n.readUInt8}},{}],33:[function(n,t,i){(function(t,r){function f(n,t){var r={seen:[],stylize:ft};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),w(t)?r.showHidden=t:t&&i._extend(r,t),u(r.showHidden)&&(r.showHidden=!1),u(r.depth)&&(r.depth=2),u(r.colors)&&(r.colors=!1),u(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=ut),s(r,n,r.depth)}function ut(n,t){var i=f.styles[t];return i?"\x1b["+f.colors[i][0]+"m"+n+"\x1b["+f.colors[i][1]+"m":n}function ft(n){return n}function et(n){var t={};return n.forEach(function(n){t[n]=!0}),t}function s(n,t,r){var e,w,u,k,d,g,tt;if(n.customInspect&&t&&v(t.inspect)&&t.inspect!==i.inspect&&(!t.constructor||t.constructor.prototype!==t))return e=t.inspect(r,n),c(e)||(e=s(n,e,r)),e;if(w=ot(n,t),w)return w;if(u=Object.keys(t),k=et(u),n.showHidden&&(u=Object.getOwnPropertyNames(t)),a(t)&&(u.indexOf("message")>=0||u.indexOf("description")>=0))return y(t);if(0===u.length){if(v(t))return d=t.name?": "+t.name:"",n.stylize("[Function"+d+"]","special");if(l(t))return n.stylize(RegExp.prototype.toString.call(t),"regexp");if(b(t))return n.stylize(Date.prototype.toString.call(t),"date");if(a(t))return y(t)}var f="",o=!1,h=["{","}"];return((nt(t)&&(o=!0,h=["[","]"]),v(t))&&(g=t.name?": "+t.name:"",f=" [Function"+g+"]"),l(t)&&(f=" "+RegExp.prototype.toString.call(t)),b(t)&&(f=" "+Date.prototype.toUTCString.call(t)),a(t)&&(f=" "+y(t)),0===u.length&&(!o||0==t.length))?h[0]+f+h[1]:r<0?l(t)?n.stylize(RegExp.prototype.toString.call(t),"regexp"):n.stylize("[Object]","special"):(n.seen.push(t),tt=o?st(n,t,r,k,u):u.map(function(i){return p(n,t,r,k,i,o)}),n.seen.pop(),ht(tt,f,h))}function ot(n,t){if(u(t))return n.stylize("undefined","undefined");if(c(t)){var i="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return n.stylize(i,"string")}return tt(t)?n.stylize(""+t,"number"):w(t)?n.stylize(""+t,"boolean"):h(t)?n.stylize("null","null"):void 0}function y(n){return"["+Error.prototype.toString.call(n)+"]"}function st(n,t,i,r,u){for(var f=[],e=0,o=t.length;e<o;++e)it(t,String(e))?f.push(p(n,t,i,r,String(e),!0)):f.push("");return u.forEach(function(u){u.match(/^\d+$/)||f.push(p(n,t,i,r,u,!0))}),f}function p(n,t,i,r,f,e){var o,c,l;if(l=Object.getOwnPropertyDescriptor(t,f)||{value:t[f]},l.get?c=l.set?n.stylize("[Getter/Setter]","special"):n.stylize("[Getter]","special"):l.set&&(c=n.stylize("[Setter]","special")),it(r,f)||(o="["+f+"]"),c||(n.seen.indexOf(l.value)<0?(c=h(i)?s(n,l.value,null):s(n,l.value,i-1),c.indexOf("\n")>-1&&(c=e?c.split("\n").map(function(n){return"  "+n}).join("\n").substr(2):"\n"+c.split("\n").map(function(n){return"   "+n}).join("\n"))):c=n.stylize("[Circular]","special")),u(o)){if(e&&f.match(/^\d+$/))return c;o=JSON.stringify(""+f);o.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=n.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=n.stylize(o,"string"))}return o+": "+c}function ht(n,t,i){var r=0,u=n.reduce(function(n,t){return r++,t.indexOf("\n")>=0&&r++,n+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return u>60?i[0]+(""===t?"":t+"\n ")+" "+n.join(",\n  ")+" "+i[1]:i[0]+t+" "+n.join(", ")+" "+i[1]}function nt(n){return Array.isArray(n)}function w(n){return"boolean"==typeof n}function h(n){return null===n}function ct(n){return null==n}function tt(n){return"number"==typeof n}function c(n){return"string"==typeof n}function lt(n){return"symbol"==typeof n}function u(n){return void 0===n}function l(n){return e(n)&&"[object RegExp]"===k(n)}function e(n){return"object"==typeof n&&null!==n}function b(n){return e(n)&&"[object Date]"===k(n)}function a(n){return e(n)&&("[object Error]"===k(n)||n instanceof Error)}function v(n){return"function"==typeof n}function at(n){return null===n||"boolean"==typeof n||"number"==typeof n||"string"==typeof n||"symbol"==typeof n||"undefined"==typeof n}function k(n){return Object.prototype.toString.call(n)}function d(n){return n<10?"0"+n.toString(10):n.toString(10)}function vt(){var n=new Date,t=[d(n.getHours()),d(n.getMinutes()),d(n.getSeconds())].join(":");return[n.getDate(),rt[n.getMonth()],t].join(" ")}function it(n,t){return Object.prototype.hasOwnProperty.call(n,t)}var yt=/%[sdj%]/g,o,g,rt;i.format=function(n){var u,t;if(!c(n)){for(u=[],t=0;t<arguments.length;t++)u.push(f(arguments[t]));return u.join(" ")}for(var t=1,i=arguments,o=i.length,s=String(n).replace(yt,function(n){if("%%"===n)return"%";if(t>=o)return n;switch(n){case"%s":return String(i[t++]);case"%d":return Number(i[t++]);case"%j":try{return JSON.stringify(i[t++])}catch(n){return"[Circular]"}default:return n}}),r=i[t];t<o;r=i[++t])s+=h(r)||!e(r)?" "+r:" "+f(r);return s};i.deprecate=function(n,f){function o(){if(!e){if(t.throwDeprecation)throw new Error(f);t.traceDeprecation?console.trace(f):console.error(f);e=!0}return n.apply(this,arguments)}if(u(r.process))return function(){return i.deprecate(n,f).apply(this,arguments)};if(t.noDeprecation===!0)return n;var e=!1;return o};o={};i.debuglog=function(n){if(u(g)&&(g=t.env.NODE_DEBUG||""),n=n.toUpperCase(),!o[n])if(new RegExp("\\b"+n+"\\b","i").test(g)){var r=t.pid;o[n]=function(){var t=i.format.apply(i,arguments);console.error("%s %d: %s",n,r,t)}}else o[n]=function(){};return o[n]};i.inspect=f;f.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};f.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"};i.isArray=nt;i.isBoolean=w;i.isNull=h;i.isNullOrUndefined=ct;i.isNumber=tt;i.isString=c;i.isSymbol=lt;i.isUndefined=u;i.isRegExp=l;i.isObject=e;i.isDate=b;i.isError=a;i.isFunction=v;i.isPrimitive=at;i.isBuffer=n("./support/isBuffer");rt=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];i.log=function(){console.log("%s - %s",vt(),i.format.apply(i,arguments))};i.inherits=n("inherits");i._extend=function(n,t){if(!t||!e(t))return n;for(var i=Object.keys(t),r=i.length;r--;)n[i[r]]=t[i[r]];return n}}).call(this,n("_process"),typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"./support/isBuffer":32,_process:27,inherits:31}],34:[function(n,t){t.exports.VectorTile=n("./lib/vectortile.js");t.exports.VectorTileFeature=n("./lib/vectortilefeature.js");t.exports.VectorTileLayer=n("./lib/vectortilelayer.js")},{"./lib/vectortile.js":35,"./lib/vectortilefeature.js":36,"./lib/vectortilelayer.js":37}],35:[function(n,t){"use strict";function i(n,t){this.layers=n.readFields(r,{},t)}function r(n,t,i){if(3===n){var r=new u(i,i.readVarint()+i.pos);r.length&&(t[r.name]=r)}}var u=n("./vectortilelayer");t.exports=i},{"./vectortilelayer":37}],36:[function(n,t){"use strict";function i(n,t,i,u,f){this.properties={};this.extent=i;this.type=0;this._pbf=n;this._geometry=-1;this._keys=u;this._values=f;n.readFields(r,this,t)}function r(n,t,i){1==n?t.id=i.readVarint():2==n?u(i,t):3==n?t.type=i.readVarint():4==n&&(t._geometry=i.pos)}function u(n,t){for(var r,u,i=n.readVarint()+n.pos;n.pos<i;)r=t._keys[n.readVarint()],u=t._values[n.readVarint()],t.properties[r]=u}function f(n){var o=n.length,t,f,r,i,u;if(o<=1)return[n];for(r=[],i=0;i<o;i++)u=e(n[i]),0!==u&&(void 0===f&&(f=u<0),f===u<0?(t&&r.push(t),t=[n[i]]):t.push(n[i]));return t&&r.push(t),r}function e(n){for(var t,i,u=0,r=0,f=n.length,e=f-1;r<f;e=r++)t=n[r],i=n[e],u+=(i.x-t.x)*(t.y+i.y);return u}var o=n("point-geometry");t.exports=i;i.types=["Unknown","Point","LineString","Polygon"];i.prototype.loadGeometry=function(){var t=this._pbf,f;t.pos=this._geometry;for(var n,h=t.readVarint()+t.pos,i=1,r=0,e=0,s=0,u=[];t.pos<h;)if(r||(f=t.readVarint(),i=7&f,r=f>>3),r--,1===i||2===i)e+=t.readSVarint(),s+=t.readSVarint(),1===i&&(n&&u.push(n),n=[]),n.push(new o(e,s));else{if(7!==i)throw new Error("unknown command "+i);n&&n.push(n[0].clone())}return n&&u.push(n),u};i.prototype.bbox=function(){var n=this._pbf,h;n.pos=this._geometry;for(var c=n.readVarint()+n.pos,t=1,u=0,i=0,r=0,f=1/0,e=-(1/0),o=1/0,s=-(1/0);n.pos<c;)if(u||(h=n.readVarint(),t=7&h,u=h>>3),u--,1===t||2===t)i+=n.readSVarint(),r+=n.readSVarint(),i<f&&(f=i),i>e&&(e=i),r<o&&(o=r),r>s&&(s=r);else if(7!==t)throw new Error("unknown command "+t);return[f,o,e,s]};i.prototype.toGeoJSON=function(n,t,r){function s(n){for(var i,r,t=0;t<n.length;t++)i=n[t],r=180-360*(i.y+y)/a,n[t]=[360*(i.x+v)/a-180,360/Math.PI*Math.atan(Math.exp(r*Math.PI/180))-90]}var e,o,a=this.extent*Math.pow(2,r),v=this.extent*n,y=this.extent*t,u=this.loadGeometry(),h=i.types[this.type],c,l;switch(this.type){case 1:for(c=[],e=0;e<u.length;e++)c[e]=u[e][0];u=c;s(u);break;case 2:for(e=0;e<u.length;e++)s(u[e]);break;case 3:for(u=f(u),e=0;e<u.length;e++)for(o=0;o<u[e].length;o++)s(u[e][o])}return 1===u.length?u=u[0]:h="Multi"+h,l={type:"Feature",geometry:{type:h,coordinates:u},properties:this.properties},"id"in this&&(l.id=this.id),l}},{"point-geometry":26}],37:[function(n,t){"use strict";function i(n,t){this.version=1;this.name=null;this.extent=4096;this.length=0;this._pbf=n;this._keys=[];this._values=[];this._features=[];n.readFields(r,this,t);this.length=this._features.length}function r(n,t,i){15===n?t.version=i.readVarint():1===n?t.name=i.readString():5===n?t.extent=i.readVarint():2===n?t._features.push(i.pos):3===n?t._keys.push(i.readString()):4===n&&t._values.push(u(i))}function u(n){for(var t,i=null,r=n.readVarint()+n.pos;n.pos<r;)t=n.readVarint()>>3,i=1===t?n.readString():2===t?n.readFloat():3===t?n.readDouble():4===t?n.readVarint64():5===t?n.readVarint():6===t?n.readSVarint():7===t?n.readBoolean():null;return i}var f=n("./vectortilefeature.js");t.exports=i;i.prototype.feature=function(n){if(n<0||n>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[n];var t=this._pbf.readVarint()+this._pbf.pos;return new f(this._pbf,t,this.extent,this._keys,this._values)}},{"./vectortilefeature.js":36}],38:[function(n,t){function i(n){var i=[],r,t;for(r in n.layers)i.push(o(n.layers[r]));return t=new c,l.tile.write({layers:i},t),t.finish()}function e(n){var r={};for(var t in n)r[t]=new f(n[t].features),r[t].name=t;return i({layers:r})}function o(n){for(var t,e,r,u,o,f,i={name:n.name||"",version:n.version||1,extent:n.extent||4096,keys:[],values:[],features:[]},l={},a={},c=0;c<n.length;c++){t=n.feature(c);t.geometry=s(t.loadGeometry());e=[];for(r in t.properties)u=l[r],"undefined"==typeof u&&(i.keys.push(r),u=i.keys.length-1,l[r]=u),o=h(t.properties[r]),f=a[o.key],"undefined"==typeof f&&(i.values.push(o),f=i.values.length-1,a[o.key]=f),e.push(u),e.push(f);t.tags=e;i.features.push(t)}return i}function r(n,t){return(t<<3)+(7&n)}function u(n){return n<<1^n>>31}function s(n){for(var i,t,o,s,f=[],h=0,c=0,l=n.length,e=0;e<l;e++)for(i=n[e],f.push(r(1,1)),t=0;t<i.length;t++)1===t&&f.push(r(2,i.length-1)),o=i[t].x-h,s=i[t].y-c,f.push(u(o),u(s)),h+=o,c+=s;return f}function h(n){var t,i=typeof n;return"string"===i?t={string_value:n}:"boolean"===i?t={bool_value:n}:"number"===i?t=n%1!=0?{double_value:n}:n<0?{sint_value:n}:{uint_value:n}:(n=JSON.stringify(n),t={string_value:n}),t.key=i+":"+n,t}var c=n("pbf"),l=n("./vector-tile-pb"),f=n("./lib/geojson_wrapper");t.exports=i;t.exports.fromVectorTileJs=i;t.exports.fromGeojsonVt=e;t.exports.GeoJSONWrapper=f},{"./lib/geojson_wrapper":39,"./vector-tile-pb":40,pbf:25}],39:[function(n,t){"use strict";function r(n){this.features=n;this.length=n.length}function i(n){this.id="number"==typeof n.id?n.id:void 0;this.type=n.type;this.rawGeometry=1===n.type?[n.geometry]:n.geometry;this.properties=n.tags;this.extent=4096}var u=n("point-geometry"),f=n("vector-tile").VectorTileFeature;t.exports=r;r.prototype.feature=function(n){return new i(this.features[n])};i.prototype.loadGeometry=function(){var r=this.rawGeometry,n;for(this.geometry=[],n=0;n<r.length;n++){for(var i=r[n],f=[],t=0;t<i.length;t++)f.push(new u(i[t][0],i[t][1]));this.geometry.push(f)}return this.geometry};i.prototype.bbox=function(){var o,t,n;this.geometry||this.loadGeometry();for(var s=this.geometry,i=1/0,r=-(1/0),u=1/0,f=-(1/0),e=0;e<s.length;e++)for(o=s[e],t=0;t<o.length;t++)n=o[t],i=Math.min(i,n.x),r=Math.max(r,n.x),u=Math.min(u,n.y),f=Math.max(f,n.y);return[i,u,r,f]};i.prototype.toGeoJSON=f.prototype.toGeoJSON},{"point-geometry":26,"vector-tile":34}],40:[function(n,t,i){"use strict";function c(n,t){return n.readFields(l,{layers:[]},t)}function l(n,t,i){3===n&&t.layers.push(s(i,i.readVarint()+i.pos))}function a(n,t){var i;if(void 0!==n.layers)for(i=0;i<n.layers.length;i++)t.writeMessage(3,h,n.layers[i])}function u(n,t){return n.readFields(v,{},t)}function v(n,t,i){1===n?t.string_value=i.readString():2===n?t.float_value=i.readFloat():3===n?t.double_value=i.readDouble():4===n?t.int_value=i.readVarint():5===n?t.uint_value=i.readVarint():6===n?t.sint_value=i.readSVarint():7===n&&(t.bool_value=i.readBoolean())}function f(n,t){void 0!==n.string_value&&t.writeStringField(1,n.string_value);void 0!==n.float_value&&t.writeFloatField(2,n.float_value);void 0!==n.double_value&&t.writeDoubleField(3,n.double_value);void 0!==n.int_value&&t.writeVarintField(4,n.int_value);void 0!==n.uint_value&&t.writeVarintField(5,n.uint_value);void 0!==n.sint_value&&t.writeSVarintField(6,n.sint_value);void 0!==n.bool_value&&t.writeBooleanField(7,n.bool_value)}function e(n,t){var i=n.readFields(y,{},t);return void 0===i.type&&(i.type="Unknown"),i}function y(n,t,i){1===n?t.id=i.readVarint():2===n?t.tags=i.readPackedVarint():3===n?t.type=i.readVarint():4===n&&(t.geometry=i.readPackedVarint())}function o(n,t){void 0!==n.id&&t.writeVarintField(1,n.id);void 0!==n.tags&&t.writePackedVarint(2,n.tags);void 0!==n.type&&t.writeVarintField(3,n.type);void 0!==n.geometry&&t.writePackedVarint(4,n.geometry)}function s(n,t){return n.readFields(p,{features:[],keys:[],values:[]},t)}function p(n,t,i){15===n?t.version=i.readVarint():1===n?t.name=i.readString():2===n?t.features.push(e(i,i.readVarint()+i.pos)):3===n?t.keys.push(i.readString()):4===n?t.values.push(u(i,i.readVarint()+i.pos)):5===n&&(t.extent=i.readVarint())}function h(n,t){void 0!==n.version&&t.writeVarintField(15,n.version);void 0!==n.name&&t.writeStringField(1,n.name);var i;if(void 0!==n.features)for(i=0;i<n.features.length;i++)t.writeMessage(2,o,n.features[i]);if(void 0!==n.keys)for(i=0;i<n.keys.length;i++)t.writeStringField(3,n.keys[i]);if(void 0!==n.values)for(i=0;i<n.values.length;i++)t.writeMessage(4,f,n.values[i]);void 0!==n.extent&&t.writeVarintField(5,n.extent)}var r=i.tile={read:c,write:a};r.GeomType={Unknown:0,Point:1,LineString:2,Polygon:3};r.value={read:u,write:f};r.feature={read:e,write:o};r.layer={read:s,write:h}},{}],41:[function(n,t){var f=arguments[3],i=arguments[4],u=arguments[5],r=JSON.stringify;t.exports=function(n,t){function w(n){var r,t;a[n]=!0;for(r in i[n][1])t=i[n][1][r],a[t]||w(t)}for(var c,s,l,v,a,y,p,e,h=Object.keys(u),o=0,b=h.length;o<b;o++)if(s=h[o],c=u[s].exports,c===n||c&&c.default===n){e=s;break}if(!e){e=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var k={},o=0,b=h.length;o<b;o++)s=h[o],k[s]=s;i[e]=[Function(["require","module","exports"],"("+n+")(self)"),k]}l=Math.floor(Math.pow(16,8)*Math.random()).toString(16);v={};v[e]=e;i[l]=[Function(["require"],"var f = require("+r(e)+");(f.default ? f.default : f)(self);"),v];a={};w(l);var g="("+f+")({"+Object.keys(a).map(function(n){return r(n)+":["+i[n][0]+","+r(i[n][1])+"]"}).join(",")+"},{},["+r(l)+"])",nt=window.URL||window.webkitURL||window.mozURL||window.msURL,d=new Blob([g],{type:"text/javascript"});return t&&t.bare?d:(y=nt.createObjectURL(d),p=new Worker(y),p.objectURL=y,p)}},{}],42:[function(n,t){t.exports.RADIUS=6378137;t.exports.FLATTENING=1/298.257223563;t.exports.POLAR_RADIUS=6356752.3142},{}],43:[function(n,t){t.exports={version:"0.34.0"}},{}],44:[function(n,t){"use strict";function u(n,t){var u={},r,i,f,e;for(r in n)i=n[r].paintVertexArray,0!==i.length&&(f=i.serialize(t),e=i.constructor.serialize(),u[r]={array:f,type:e});return u}var f=n("./program_configuration"),r=function(n,t){this.vertexOffset=n;this.primitiveOffset=t;this.vertexLength=0;this.primitiveLength=0},i=function(n,t,i){var l=this,c,o,s,r,h,u,e;for(this.globalProperties={zoom:i},c=n.layoutVertexArrayType,this.layoutVertexArray=new c,o=n.elementArrayType,o&&(this.elementArray=new o),s=n.elementArrayType2,s&&(this.elementArray2=new s),this.layerData={},r=0,h=t;r<h.length;r+=1)u=h[r],e=f.createDynamic(n.paintAttributes||[],u,i),l.layerData[u.id]={layer:u,programConfiguration:e,paintVertexArray:new e.PaintVertexArray,paintPropertyStatistics:e.createPaintPropertyStatistics()};this.segments=[];this.segments2=[]};i.prototype.prepareSegment=function(n){var t=this.segments[this.segments.length-1];return(!t||t.vertexLength+n>i.MAX_VERTEX_ARRAY_LENGTH)&&(t=new r(this.layoutVertexArray.length,this.elementArray.length),this.segments.push(t)),t};i.prototype.prepareSegment2=function(n){var t=this.segments2[this.segments2.length-1];return(!t||t.vertexLength+n>i.MAX_VERTEX_ARRAY_LENGTH)&&(t=new r(this.layoutVertexArray.length,this.elementArray2.length),this.segments2.push(t)),t};i.prototype.populatePaintArrays=function(n){var i=this,r,t;for(r in i.layerData)t=i.layerData[r],0!==t.paintVertexArray.bytesPerElement&&t.programConfiguration.populatePaintArray(t.layer,t.paintVertexArray,t.paintPropertyStatistics,i.layoutVertexArray.length,i.globalProperties,n)};i.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length};i.prototype.serialize=function(n){return{layoutVertexArray:this.layoutVertexArray.serialize(n),elementArray:this.elementArray&&this.elementArray.serialize(n),elementArray2:this.elementArray2&&this.elementArray2.serialize(n),paintVertexArrays:u(this.layerData,n),segments:this.segments,segments2:this.segments2}};i.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1;t.exports=i},{"./program_configuration":58}],45:[function(n,t){"use strict";var u=n("./array_group"),f=n("./buffer_group"),r=n("../util/util"),i=function(n,t){this.zoom=n.zoom;this.overscaling=n.overscaling;this.layers=n.layers;this.index=n.index;n.arrays?this.buffers=new f(t,n.layers,n.zoom,n.arrays):this.arrays=new u(t,n.layers,n.zoom)};i.prototype.populate=function(n,t){for(var i,r=this,u=0,f=n;u<f.length;u+=1)i=f[u],r.layers[0].filter(i)&&(r.addFeature(i),t.featureIndex.insert(i,r.index))};i.prototype.getPaintPropertyStatistics=function(){return r.mapObject(this.arrays.layerData,function(n){return n.paintPropertyStatistics})};i.prototype.isEmpty=function(){return this.arrays.isEmpty()};i.prototype.serialize=function(n){return{zoom:this.zoom,layerIds:this.layers.map(function(n){return n.id}),arrays:this.arrays.serialize(n)}};i.prototype.destroy=function(){this.buffers&&(this.buffers.destroy(),this.buffers=null)};t.exports=i;i.deserialize=function(n,t){var f,i,c;if(t){for(var o={},u=0,s=n;u<s.length;u+=1)if(f=s[u],i=f.layerIds.map(function(n){return t.getLayer(n)}).filter(Boolean),0!==i.length)for(var l=i[0].createBucket(r.extend({layers:i},f)),e=0,h=i;e<h.length;e+=1)c=h[e],o[c.id]=l;return o}}},{"../util/util":212,"./array_group":44,"./buffer_group":52}],46:[function(n,t){"use strict";function i(n,t,i,r,u){n.emplaceBack(2*t+(r+1)/2,2*i+(u+1)/2)}var e=n("../bucket"),o=n("../vertex_array_type"),s=n("../element_array_type"),h=n("../load_geometry"),r=n("../extent"),u={layoutVertexArrayType:o([{name:"a_pos",components:2,type:"Int16"}]),elementArrayType:s(),paintAttributes:[{property:"circle-color",type:"Uint8"},{property:"circle-radius",type:"Uint16",multiplier:10},{property:"circle-blur",type:"Uint16",multiplier:10},{property:"circle-opacity",type:"Uint8",multiplier:255},{property:"circle-stroke-color",type:"Uint8"},{property:"circle-stroke-width",type:"Uint16",multiplier:10},{property:"circle-stroke-opacity",type:"Uint8",multiplier:255}]},f=function(n){function t(t){n.call(this,t,u)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.addFeature=function(n){for(var o,u,t=this.arrays,s=0,l=h(n);s<l.length;s+=1)for(var y=l[s],c=0,a=y;c<a.length;c+=1){var v=a[c],f=v.x,e=v.y;f<0||f>=r||e<0||e>=r||(o=t.prepareSegment(4),u=o.vertexLength,i(t.layoutVertexArray,f,e,-1,-1),i(t.layoutVertexArray,f,e,1,-1),i(t.layoutVertexArray,f,e,1,1),i(t.layoutVertexArray,f,e,-1,1),t.elementArray.emplaceBack(u,u+1,u+2),t.elementArray.emplaceBack(u,u+3,u+2),o.vertexLength+=4,o.primitiveLength+=2)}t.populatePaintArrays(n.properties)},t}(e);f.programInterface=u;t.exports=f},{"../bucket":45,"../element_array_type":53,"../extent":54,"../load_geometry":56,"../vertex_array_type":60}],47:[function(n,t){"use strict";var f=n("../bucket"),e=n("../vertex_array_type"),i=n("../element_array_type"),o=n("../load_geometry"),s=n("earcut"),h=n("../../util/classify_rings"),c=500,r={layoutVertexArrayType:e([{name:"a_pos",components:2,type:"Int16"}]),elementArrayType:i(3),elementArrayType2:i(2),paintAttributes:[{property:"fill-color",type:"Uint8"},{property:"fill-outline-color",type:"Uint8"},{property:"fill-opacity",type:"Uint8",multiplier:255}]},u=function(n){function t(t){n.call(this,t,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.addFeature=function(n){for(var tt,t,a,l,i,f,e,r=this.arrays,v=0,g=h(o(n),c);v<g.length;v+=1){for(var y=g[v],p=0,w=0,nt=y;w<nt.length;w+=1)tt=nt[w],p+=tt.length;for(var b=r.prepareSegment(p),k=b.vertexLength,u=[],it=[],d=0,rt=y;d<rt.length;d+=1)if(t=rt[d],0!==t.length){for(t!==y[0]&&it.push(u.length/2),a=r.prepareSegment2(t.length),l=a.vertexLength,r.layoutVertexArray.emplaceBack(t[0].x,t[0].y),r.elementArray2.emplaceBack(l+t.length-1,l),u.push(t[0].x),u.push(t[0].y),i=1;i<t.length;i++)r.layoutVertexArray.emplaceBack(t[i].x,t[i].y),r.elementArray2.emplaceBack(l+i-1,l+i),u.push(t[i].x),u.push(t[i].y);a.vertexLength+=t.length;a.primitiveLength+=t.length}for(f=s(u,it),e=0;e<f.length;e+=3)r.elementArray.emplaceBack(k+f[e],k+f[e+1],k+f[e+2]);b.vertexLength+=p;b.primitiveLength+=f.length/3}r.populatePaintArrays(n.properties)},t}(f);u.programInterface=r;t.exports=u},{"../../util/classify_rings":195,"../bucket":45,"../element_array_type":53,"../load_geometry":56,"../vertex_array_type":60,earcut:5}],48:[function(n,t){"use strict";function i(n,t,i,u,f,e,o,s){n.emplaceBack(t,i,2*Math.floor(u*r)+o,f*r*2,e*r*2,Math.round(s))}function o(n,t){return n.x===t.x&&(n.x<0||n.x>u)||n.y===t.y&&(n.y<0||n.y>u)}var s=n("../bucket"),h=n("../vertex_array_type"),c=n("../element_array_type"),l=n("../load_geometry"),u=n("../extent"),a=n("earcut"),v=n("../../util/classify_rings"),y=500,f={layoutVertexArrayType:h([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal",components:3,type:"Int16"},{name:"a_edgedistance",components:1,type:"Int16"}]),elementArrayType:c(3),paintAttributes:[{property:"fill-extrusion-base",type:"Uint16"},{property:"fill-extrusion-height",type:"Uint16"},{property:"fill-extrusion-color",type:"Uint8"}]},r=Math.pow(2,13),e=function(n){function t(t){n.call(this,t,f)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.addFeature=function(n){for(var et,s,h,c,t,f,u,e,p,w,r=this.arrays,g=0,rt=v(l(n),y);g<rt.length;g+=1){for(var nt=rt[g],ut=0,tt=0,ft=nt;tt<ft.length;tt+=1)et=ft[tt],ut+=et.length;for(var b=r.prepareSegment(5*ut),k=[],ot=[],d=[],it=0,st=nt;it<st.length;it+=1)if(s=st[it],0!==s.length)for(s!==nt[0]&&ot.push(k.length/2),h=0,c=0;c<s.length;c++)t=s[c],(i(r.layoutVertexArray,t.x,t.y,0,0,1,1,0),d.push(b.vertexLength++),c>=1)&&(f=s[c-1],o(t,f)||(u=t.sub(f)._perp()._unit(),i(r.layoutVertexArray,t.x,t.y,u.x,u.y,0,0,h),i(r.layoutVertexArray,t.x,t.y,u.x,u.y,0,1,h),h+=f.dist(t),i(r.layoutVertexArray,f.x,f.y,u.x,u.y,0,0,h),i(r.layoutVertexArray,f.x,f.y,u.x,u.y,0,1,h),e=b.vertexLength,r.elementArray.emplaceBack(e,e+1,e+2),r.elementArray.emplaceBack(e+1,e+2,e+3),b.vertexLength+=4,b.primitiveLength+=2)),k.push(t.x),k.push(t.y);for(p=a(k,ot),w=0;w<p.length;w+=3)r.elementArray.emplaceBack(d[p[w]],d[p[w+1]],d[p[w+2]]);b.primitiveLength+=p.length/3}r.populatePaintArrays(n.properties)},t}(s);e.programInterface=f;t.exports=e},{"../../util/classify_rings":195,"../bucket":45,"../element_array_type":53,"../extent":54,"../load_geometry":56,"../vertex_array_type":60,earcut:5}],49:[function(n,t){"use strict";function i(n,t,i,f,e,o,s){n.emplaceBack(t.x<<1|f,t.y<<1|e,Math.round(u*i.x)+128,Math.round(u*i.y)+128,(0===o?0:o<0?-1:1)+1|(s*r&63)<<2,s*r>>6)}var s=n("../bucket"),h=n("../vertex_array_type"),c=n("../element_array_type"),l=n("../load_geometry"),a=n("../extent"),v=n("vector-tile").VectorTileFeature,u=63,y=Math.cos(37.5*(Math.PI/180)),p=15,f=15,r=.5,w=Math.pow(2,f-1)/r,e={layoutVertexArrayType:h([{name:"a_pos",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}]),paintAttributes:[{property:"line-color",type:"Uint8"},{property:"line-blur",multiplier:10,type:"Uint8"},{property:"line-opacity",multiplier:10,type:"Uint8"},{property:"line-gap-width",multiplier:10,type:"Uint8",name:"a_gapwidth"},{property:"line-offset",multiplier:1,type:"Int8"}],elementArrayType:c()},o=function(n){function t(t){n.call(this,t,e)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.addFeature=function(n){for(var u,e=this,t=this.layers[0].layout,o=t["line-join"],s=t["line-cap"],h=t["line-miter-limit"],c=t["line-round-limit"],i=0,r=l(n,f);i<r.length;i+=1)u=r[i],e.addLine(u,n,o,s,h,c)},t.prototype.addLine=function(n,t,i,r,u,f){for(var nt,b,vt,st,yt,l,gt,ni,it,pt,lt,bt,at,e=this,ti=t.properties,rt="Polygon"===v.types[t.type],k=n.length;k>=2&&n[k-1].equals(n[k-2]);)k--;if(!(k<(rt?3:2))){"bevel"===i&&(u=1.05);var ut=p*(a/(512*this.overscaling)),ii=n[0],kt=this.arrays,c=kt.prepareSegment(10*k);this.distance=0;var o,g,w,h,s,ft,et,ri=r,ui=rt?"butt":r,tt=!0;for(this.e1=this.e2=this.e3=-1,rt&&(o=n[k-2],s=ii.sub(o)._unit()._perp()),nt=0;nt<k;nt++)if(w=rt&&nt===k-1?n[1]:n[nt+1],!w||!n[nt].equals(w)){s&&(h=s);o&&(g=o);o=n[nt];s=w?w.sub(o)._unit()._perp():h;h=h||s;b=h.add(s);0===b.x&&0===b.y||b._unit();var ot=b.x*s.x+b.y*s.y,d=0!==ot?1/ot:1/0,dt=ot<y&&g&&w;if(dt&&nt>0&&(vt=o.dist(g),vt>2*ut&&(st=o.sub(o.sub(g)._mult(ut/vt)._round()),e.distance+=st.dist(g),e.addCurrentVertex(st,e.distance,h.mult(1),0,0,!1,c),g=st)),yt=g&&w,l=yt?i:w?ri:ui,yt&&"round"===l&&(d<f?l="miter":d<=2&&(l="fakeround")),"miter"===l&&d>u&&(l="bevel"),"bevel"===l&&(d>2&&(l="flipbevel"),d<u&&(l="miter")),g&&(e.distance+=o.dist(g)),"miter"===l)b._mult(d),e.addCurrentVertex(o,e.distance,b,0,0,!1,c);else if("flipbevel"===l)d>100?b=s.clone().mult(-1):(gt=h.x*s.y-h.y*s.x>0?-1:1,ni=d*h.add(s).mag()/h.sub(s).mag(),b._perp()._mult(ni*gt)),e.addCurrentVertex(o,e.distance,b,0,0,!1,c),e.addCurrentVertex(o,e.distance,b.mult(-1),0,0,!1,c);else if("bevel"===l||"fakeround"===l){if(it=h.x*s.y-h.y*s.x>0,pt=-Math.sqrt(d*d-1),it?(et=0,ft=pt):(ft=0,et=pt),tt||e.addCurrentVertex(o,e.distance,h,ft,et,!1,c),"fakeround"===l){for(var ht=Math.floor(8*(.5-(ot-.5))),ct=void 0,wt=0;wt<ht;wt++)ct=s.mult((wt+1)/(ht+1))._add(h)._unit(),e.addPieSliceVertex(o,e.distance,ct,it,c);for(e.addPieSliceVertex(o,e.distance,b,it,c),lt=ht-1;lt>=0;lt--)ct=h.mult((lt+1)/(ht+1))._add(s)._unit(),e.addPieSliceVertex(o,e.distance,ct,it,c)}w&&e.addCurrentVertex(o,e.distance,s,-ft,-et,!1,c)}else"butt"===l?(tt||e.addCurrentVertex(o,e.distance,h,0,0,!1,c),w&&e.addCurrentVertex(o,e.distance,s,0,0,!1,c)):"square"===l?(tt||(e.addCurrentVertex(o,e.distance,h,1,1,!1,c),e.e1=e.e2=-1),w&&e.addCurrentVertex(o,e.distance,s,-1,-1,!1,c)):"round"===l&&(tt||(e.addCurrentVertex(o,e.distance,h,0,0,!1,c),e.addCurrentVertex(o,e.distance,h,1,1,!0,c),e.e1=e.e2=-1),w&&(e.addCurrentVertex(o,e.distance,s,-1,-1,!0,c),e.addCurrentVertex(o,e.distance,s,0,0,!1,c)));dt&&nt<k-1&&(bt=o.dist(w),bt>2*ut&&(at=o.add(w.sub(o)._mult(ut/bt)._round()),e.distance+=at.dist(o),e.addCurrentVertex(at,e.distance,s.mult(1),0,0,!1,c),o=at));tt=!1}kt.populatePaintArrays(ti)}},t.prototype.addCurrentVertex=function(n,t,r,u,f,e,o){var s,h=e?1:0,c=this.arrays,l=c.layoutVertexArray,a=c.elementArray;s=r.clone();u&&s._sub(r.perp()._mult(u));i(l,n,s,h,0,u,t);this.e3=o.vertexLength++;this.e1>=0&&this.e2>=0&&(a.emplaceBack(this.e1,this.e2,this.e3),o.primitiveLength++);this.e1=this.e2;this.e2=this.e3;s=r.mult(-1);f&&s._sub(r.perp()._mult(f));i(l,n,s,h,1,-f,t);this.e3=o.vertexLength++;this.e1>=0&&this.e2>=0&&(a.emplaceBack(this.e1,this.e2,this.e3),o.primitiveLength++);this.e1=this.e2;this.e2=this.e3;t>w/2&&(this.distance=0,this.addCurrentVertex(n,this.distance,r,u,f,e,o))},t.prototype.addPieSliceVertex=function(n,t,r,u,f){var o=u?1:0;r=r.mult(u?-1:1);var e=this.arrays,s=e.layoutVertexArray,h=e.elementArray;i(s,n,r,0,o,0,t);this.e3=f.vertexLength++;this.e1>=0&&this.e2>=0&&(h.emplaceBack(this.e1,this.e2,this.e3),f.primitiveLength++);u?this.e2=this.e3:this.e1=this.e3},t}(s);o.programInterface=e;t.exports=o},{"../bucket":45,"../element_array_type":53,"../extent":54,"../load_geometry":56,"../vertex_array_type":60,"vector-tile":34}],50:[function(n,t){"use strict";function e(n,t,i,r,u,f,e,o,s,h,c){n.emplaceBack(t,i,Math.round(64*r),Math.round(64*u),f/4,e/4,10*(h||0),c,10*(o||0),10*Math.min(s||25,25))}function o(n,t,i,r,u){return n.emplaceBack(t.x,t.y,Math.round(i.x),Math.round(i.y),10*r,10*u)}var s=n("point-geometry"),g=n("../array_group"),nt=n("../buffer_group"),a=n("../vertex_array_type"),v=n("../element_array_type"),u=n("../extent"),h=n("../../symbol/anchor"),tt=n("../../symbol/get_anchors"),it=n("../../util/token"),y=n("../../symbol/quads"),c=n("../../symbol/shaping"),rt=n("../../symbol/resolve_text"),ut=n("../../symbol/mergelines"),ft=n("../../symbol/clip_line"),f=n("../../util/util"),et=n("../../util/script_detection"),ot=n("../load_geometry"),p=n("../../symbol/collision_feature"),st=n("../../util/find_pole_of_inaccessibility"),ht=n("../../util/classify_rings"),ct=n("vector-tile").VectorTileFeature,w=n("../../source/rtl_text_plugin"),b=c.shapeText,lt=c.shapeIcon,r=c.WritingMode,at=y.getGlyphQuads,vt=y.getIconQuads,k=v(),d=a([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_texture_pos",components:2,type:"Uint16"},{name:"a_data",components:4,type:"Uint8"}]),l={glyph:{layoutVertexArrayType:d,elementArrayType:k,paintAttributes:[{name:"a_fill_color",property:"text-color",type:"Uint8"},{name:"a_halo_color",property:"text-halo-color",type:"Uint8"},{name:"a_halo_width",property:"text-halo-width",type:"Uint16",multiplier:10},{name:"a_halo_blur",property:"text-halo-blur",type:"Uint16",multiplier:10},{name:"a_opacity",property:"text-opacity",type:"Uint8",multiplier:255}]},icon:{layoutVertexArrayType:d,elementArrayType:k,paintAttributes:[{name:"a_fill_color",property:"icon-color",type:"Uint8"},{name:"a_halo_color",property:"icon-halo-color",type:"Uint8"},{name:"a_halo_width",property:"icon-halo-width",type:"Uint16",multiplier:10},{name:"a_halo_blur",property:"icon-halo-blur",type:"Uint16",multiplier:10},{name:"a_opacity",property:"icon-opacity",type:"Uint8",multiplier:255}]},collisionBox:{layoutVertexArrayType:a([{name:"a_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"},{name:"a_data",components:2,type:"Uint8"}]),elementArrayType:v(2)}},i=function(n){var i=this,t;if(this.collisionBoxArray=n.collisionBoxArray,this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.index=n.index,this.sdfIcons=n.sdfIcons,this.iconsNeedLinear=n.iconsNeedLinear,this.adjustedTextSize=n.adjustedTextSize,this.adjustedIconSize=n.adjustedIconSize,this.fontstack=n.fontstack,n.arrays){this.buffers={};for(t in n.arrays)n.arrays[t]&&(i.buffers[t]=new nt(l[t],n.layers,n.zoom,n.arrays[t]))}};i.prototype.populate=function(n,t){var c=this,f=this.layers[0],e=f.layout,h=e["text-font"],l=e["icon-image"],a=h&&(!f.isLayoutValueFeatureConstant("text-field")||e["text-field"]),v=l,r,i,u,s;if(this.features=[],a||v){for(var p=t.iconDependencies,y=t.glyphDependencies,b=y[h]=y[h]||{},o=0;o<n.length;o++)if(r=n[o],f.filter(r)&&(i=void 0,a&&(i=rt(f,{zoom:c.zoom},r.properties),w.applyArabicShaping&&(i=w.applyArabicShaping(i))),u=void 0,v&&(u=it(r.properties,l)),(i||u)&&(c.features.push({text:i,icon:u,index:o,sourceLayerIndex:r.sourceLayerIndex,geometry:ot(r),properties:r.properties,type:ct.types[r.type]}),u&&(p[u]=!0),i)))for(s=0;s<i.length;s++)b[i.charCodeAt(s)]=!0;"line"===e["symbol-placement"]&&(this.features=ut(this.features))}};i.prototype.isEmpty=function(){return this.arrays.icon.isEmpty()&&this.arrays.glyph.isEmpty()&&this.arrays.collisionBox.isEmpty()};i.prototype.getPaintPropertyStatistics=function(){for(var n,t=this,r={},i=0,u=t.layers;i<u.length;i+=1)n=u[i],r[n.id]=f.extend({},t.arrays.icon.layerData[n.id].paintPropertyStatistics,t.arrays.glyph.layerData[n.id].paintPropertyStatistics);return r};i.prototype.serialize=function(n){return{zoom:this.zoom,layerIds:this.layers.map(function(n){return n.id}),sdfIcons:this.sdfIcons,iconsNeedLinear:this.iconsNeedLinear,adjustedTextSize:this.adjustedTextSize,adjustedIconSize:this.adjustedIconSize,fontstack:this.fontstack,arrays:f.mapObject(this.arrays,function(t){return t.isEmpty()?null:t.serialize(n)})}};i.prototype.destroy=function(){this.buffers&&(this.buffers.icon&&this.buffers.icon.destroy(),this.buffers.glyph&&this.buffers.glyph.destroy(),this.buffers.collisionBox&&this.buffers.collisionBox.destroy(),this.buffers=null)};i.prototype.createArrays=function(){var n=this;this.arrays=f.mapObject(l,function(t){return new g(t,n.layers,n.zoom)})};i.prototype.prepare=function(n,t){var e=this,p,o,h,rt,v,c,ut;this.symbolInstances=[];this.adjustedTextMaxSize=this.layers[0].getLayoutValue("text-size",{zoom:18});this.adjustedTextSize=this.layers[0].getLayoutValue("text-size",{zoom:this.zoom+1});this.adjustedIconMaxSize=this.layers[0].getLayoutValue("icon-size",{zoom:18});this.adjustedIconSize=this.layers[0].getLayoutValue("icon-size",{zoom:this.zoom+1});p=512*this.overscaling;this.tilePixelRatio=u/p;this.compareText={};this.iconsNeedLinear=!1;var i=this.layers[0].layout,l=.5,a=.5;switch(i["text-anchor"]){case"right":case"top-right":case"bottom-right":l=1;break;case"left":case"top-left":case"bottom-left":l=0}switch(i["text-anchor"]){case"bottom":case"bottom-right":case"bottom-left":a=1;break;case"top":case"top-right":case"top-left":a=0}for(var w="right"===i["text-justify"]?1:"left"===i["text-justify"]?0:.5,s=24,k=i["text-line-height"]*s,d="line"!==i["symbol-placement"]?i["text-max-width"]*s:0,g=i["text-letter-spacing"]*s,nt=[i["text-offset"][0]*s,i["text-offset"][1]*s],tt=this.fontstack=i["text-font"].join(","),ft="map"===i["text-rotation-alignment"]&&"line"===i["symbol-placement"],y=0,it=e.features;y<it.length;y+=1)o=it[y],h=void 0,o.text?(rt=et.allowsVerticalWritingMode(o.text),h={},h[r.horizontal]=b(o.text,n[tt],d,k,l,a,w,g,nt,s,r.horizontal),h[r.vertical]=rt&&ft&&b(o.text,n[tt],d,k,l,a,w,g,nt,s,r.vertical)):h={},v=void 0,o.icon&&(c=t[o.icon],ut=e.layers[0].getLayoutValue("icon-offset",{zoom:e.zoom},o.properties),v=lt(c,ut),c&&(void 0===e.sdfIcons?e.sdfIcons=c.sdf:e.sdfIcons!==c.sdf&&f.warnOnce("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),1!==c.pixelRatio?e.iconsNeedLinear=!0:0===i["icon-rotate"]&&e.layers[0].isLayoutValueFeatureConstant("icon-rotate")||(e.iconsNeedLinear=!0))),(h[r.horizontal]||v)&&e.addFeature(o,h,v)};i.prototype.addFeature=function(n,t,i){var e=this,f=this.layers[0].layout,p=24,vt=this.adjustedTextSize/p,yt=void 0!==this.adjustedTextMaxSize?this.adjustedTextMaxSize:this.adjustedTextSize,pt=this.tilePixelRatio*vt,wt=this.tilePixelRatio*yt/p,bt=this.tilePixelRatio*this.adjustedIconSize,ot=this.tilePixelRatio*f["symbol-spacing"],kt=f["symbol-avoid-edges"],dt=f["text-padding"]*this.tilePixelRatio,gt=f["icon-padding"]*this.tilePixelRatio,ni=f["text-max-angle"]/180*Math.PI,ti="map"===f["text-rotation-alignment"]&&"line"===f["symbol-placement"],ii="map"===f["icon-rotation-alignment"]&&"line"===f["symbol-placement"],ri=f["text-allow-overlap"]||f["icon-allow-overlap"]||f["text-ignore-placement"]||f["icon-ignore-placement"],ui=f["symbol-placement"],fi=ot/2,o=function(r,f){var o=!(f.x<0||f.x>u||f.y<0||f.y>u),s;(!kt||o)&&(s=o||ri,e.addSymbolInstance(f,r,t,i,e.layers[0],s,e.collisionBoxArray,n.index,n.sourceLayerIndex,e.index,pt,dt,ti,bt,gt,ii,{zoom:e.zoom},n.properties))},s,w,k,d,c,g,nt,it,l,rt,a,v,ut,y;if("line"===ui)for(s=0,w=ft(n.geometry,0,0,u,u);s<w.length;s+=1)for(var ct=w[s],ei=tt(ct,ot,ni,t[r.vertical]||t[r.horizontal],i,p,wt,e.overscaling,u),b=0,lt=ei;b<lt.length;b+=1)k=lt[b],d=t[r.horizontal],d&&e.anchorIsTooClose(d.text,fi,k)||o(ct,k);else if("Polygon"===n.type)for(c=0,g=ht(n.geometry,0);c<g.length;c+=1)nt=g[c],it=st(nt,16),o(nt[0],new h(it.x,it.y,0));else if("LineString"===n.type)for(l=0,rt=n.geometry;l<rt.length;l+=1)a=rt[l],o(a,new h(a[0].x,a[0].y,0));else if("Point"===n.type)for(v=0,ut=n.geometry;v<ut.length;v+=1)for(var oi=ut[v],et=0,at=oi;et<at.length;et+=1)y=at[et],o([y],new h(y.x,y.y,0))};i.prototype.anchorIsTooClose=function(n,t,i){var r=this.compareText,f,u;if(n in r){for(f=r[n],u=f.length-1;u>=0;u--)if(i.dist(f[u])<t)return!0}else r[n]=[];return r[n].push(i),!1};i.prototype.place=function(n,t){var e=this,o,s;this.createArrays();var i=this.layers[0].layout,l=n.maxScale,d="map"===i["text-rotation-alignment"]&&"line"===i["symbol-placement"],g="map"===i["icon-rotation-alignment"]&&"line"===i["symbol-placement"],nt=i["text-allow-overlap"]||i["icon-allow-overlap"]||i["text-ignore-placement"]||i["icon-ignore-placement"];if(nt){var a=n.angle,v=Math.sin(a),y=Math.cos(a);this.symbolInstances.sort(function(n,t){var i=v*n.anchor.x+y*n.anchor.y|0,r=v*t.anchor.x+y*t.anchor.y|0;return i-r||t.featureIndex-n.featureIndex})}for(o=0,s=e.symbolInstances;o<s.length;o+=1){var r=s[o],p={boxStartIndex:r.textBoxStartIndex,boxEndIndex:r.textBoxEndIndex},w={boxStartIndex:r.iconBoxStartIndex,boxEndIndex:r.iconBoxEndIndex},h=!(r.textBoxStartIndex===r.textBoxEndIndex),c=!(r.iconBoxStartIndex===r.iconBoxEndIndex),b=i["text-optional"]||!h,k=i["icon-optional"]||!c,u=h?n.placeCollisionFeature(p,i["text-allow-overlap"],i["symbol-avoid-edges"]):n.minScale,f=c?n.placeCollisionFeature(w,i["icon-allow-overlap"],i["symbol-avoid-edges"]):n.minScale;b||k?!k&&u?u=Math.max(f,u):!b&&f&&(f=Math.max(f,u)):f=u=Math.max(f,u);h&&(n.insertCollisionFeature(p,u,i["text-ignore-placement"]),u<=l&&e.addSymbols(e.arrays.glyph,r.glyphQuads,u,i["text-keep-upright"],d,n.angle,r.featureProperties,r.writingModes));c&&(n.insertCollisionFeature(w,f,i["icon-ignore-placement"]),f<=l&&e.addSymbols(e.arrays.icon,r.iconQuads,f,i["icon-keep-upright"],g,n.angle,r.featureProperties))}t&&this.addToDebugBuffers(n)};i.prototype.addSymbols=function(n,t,i,u,f,o,s,h){for(var c,v,it=n.elementArray,k=n.layoutVertexArray,g=this.zoom,p=Math.max(Math.log(i)/Math.LN2+g,0),nt=0,rt=t;nt<rt.length;nt+=1){if(c=rt[nt],v=(c.anchorAngle+o+Math.PI)%(2*Math.PI),h&r.vertical){if(f&&c.writingMode===r.vertical){if(u&&f&&v<=5*Math.PI/4||v>7*Math.PI/4)continue}else if(u&&f&&v<=3*Math.PI/4||v>5*Math.PI/4)continue}else if(u&&f&&(v<=Math.PI/2||v>3*Math.PI/2))continue;var ut=c.tl,ft=c.tr,et=c.bl,ot=c.br,l=c.tex,a=c.anchorPoint,y=Math.max(g+Math.log(c.minScale)/Math.LN2,p),b=Math.min(g+Math.log(c.maxScale)/Math.LN2,25);if(!(b<=y)){y===p&&(y=0);var d=Math.round(c.glyphAngle/(2*Math.PI)*256),tt=n.prepareSegment(4),w=tt.vertexLength;e(k,a.x,a.y,ut.x,ut.y,l.x,l.y,y,b,p,d);e(k,a.x,a.y,ft.x,ft.y,l.x+l.w,l.y,y,b,p,d);e(k,a.x,a.y,et.x,et.y,l.x,l.y+l.h,y,b,p,d);e(k,a.x,a.y,ot.x,ot.y,l.x+l.w,l.y+l.h,y,b,p,d);it.emplaceBack(w,w+1,w+2);it.emplaceBack(w+1,w+2,w+3);tt.vertexLength+=4;tt.primitiveLength+=2}}n.populatePaintArrays(s)};i.prototype.addToDebugBuffers=function(n){for(var i,l,a,v,u=this,b=this.arrays.collisionBox,f=b.layoutVertexArray,e=b.elementArray,h=-n.angle,c=n.yStretch,k=0,g=u.symbolInstances;k<g.length;k+=1)for(i=g[k],i.textCollisionFeature={boxStartIndex:i.textBoxStartIndex,boxEndIndex:i.textBoxEndIndex},i.iconCollisionFeature={boxStartIndex:i.iconBoxStartIndex,boxEndIndex:i.iconBoxEndIndex},l=0;l<2;l++)if(a=i[0===l?"textCollisionFeature":"iconCollisionFeature"],a)for(v=a.boxStartIndex;v<a.boxEndIndex;v++){var t=u.collisionBoxArray.get(v),y=t.anchorPoint,nt=new s(t.x1,t.y1*c)._rotate(h),tt=new s(t.x2,t.y1*c)._rotate(h),it=new s(t.x1,t.y2*c)._rotate(h),rt=new s(t.x2,t.y2*c)._rotate(h),p=Math.max(0,Math.min(25,u.zoom+Math.log(t.maxScale)/Math.LN2)),w=Math.max(0,Math.min(25,u.zoom+Math.log(t.placementScale)/Math.LN2)),d=b.prepareSegment(4),r=d.vertexLength;o(f,y,nt,p,w);o(f,y,tt,p,w);o(f,y,rt,p,w);o(f,y,it,p,w);e.emplaceBack(r,r+1);e.emplaceBack(r+1,r+2);e.emplaceBack(r+2,r+3);e.emplaceBack(r+3,r);d.vertexLength+=4;d.primitiveLength+=4}};i.prototype.addSymbolInstance=function(n,t,u,e,o,s,h,c,l,a,v,y,w,b,k,d,g,nt){var tt,it,ot=[],ut=[],st,rt,ht,ft,ct,et,lt;for(st in u)rt=parseInt(st,10),u[rt]&&(ut=ut.concat(s?at(n,u[rt],v,t,o,w):[]),tt=new p(h,t,n,c,l,a,u[rt],v,y,w,!1));ht=tt?tt.boxStartIndex:this.collisionBoxArray.length;ft=tt?tt.boxEndIndex:this.collisionBoxArray.length;e&&(ot=s?vt(n,e,b,t,o,d,u[r.horizontal],g,nt):[],it=new p(h,t,n,c,l,a,e,b,k,d,!0));ct=it?it.boxStartIndex:this.collisionBoxArray.length;et=it?it.boxEndIndex:this.collisionBoxArray.length;ft>i.MAX_INSTANCES&&f.warnOnce("Too many symbols being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907");et>i.MAX_INSTANCES&&f.warnOnce("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907");lt=(u[r.vertical]?r.vertical:0)|(u[r.horizontal]?r.horizontal:0);this.symbolInstances.push({textBoxStartIndex:ht,textBoxEndIndex:ft,iconBoxStartIndex:ct,iconBoxEndIndex:et,glyphQuads:ut,iconQuads:ot,anchor:n,featureIndex:c,featureProperties:nt,writingModes:lt})};i.programInterfaces=l;i.MAX_INSTANCES=65535;t.exports=i},{"../../source/rtl_text_plugin":90,"../../symbol/anchor":157,"../../symbol/clip_line":159,"../../symbol/collision_feature":161,"../../symbol/get_anchors":163,"../../symbol/mergelines":166,"../../symbol/quads":167,"../../symbol/resolve_text":168,"../../symbol/shaping":169,"../../util/classify_rings":195,"../../util/find_pole_of_inaccessibility":201,"../../util/script_detection":209,"../../util/token":211,"../../util/util":212,"../array_group":44,"../buffer_group":52,"../element_array_type":53,"../extent":54,"../load_geometry":56,"../vertex_array_type":60,"point-geometry":26,"vector-tile":34}],51:[function(n,t){"use strict";var r={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT"},i=function(n,t,i){this.arrayBuffer=n.arrayBuffer;this.length=n.length;this.attributes=t.members;this.itemSize=t.bytesPerElement;this.type=i;this.arrayType=t};i.fromStructArray=function(n,t){return new i(n.serialize(),n.constructor.serialize(),t)};i.prototype.bind=function(n){var t=n[this.type];this.buffer?n.bindBuffer(t,this.buffer):(this.gl=n,this.buffer=n.createBuffer(),n.bindBuffer(t,this.buffer),n.bufferData(t,this.arrayBuffer,n.STATIC_DRAW),this.arrayBuffer=null)};i.prototype.setVertexAttribPointers=function(n,t,i){for(var u,o,f=this,e=0;e<this.attributes.length;e++)u=f.attributes[e],o=t[u.name],void 0!==o&&n.vertexAttribPointer(o,u.components,n[r[u.type]],!1,f.arrayType.bytesPerElement,u.offset+(f.arrayType.bytesPerElement*i||0))};i.prototype.destroy=function(){this.buffer&&this.gl.deleteBuffer(this.buffer)};i.BufferType={VERTEX:"ARRAY_BUFFER",ELEMENT:"ELEMENT_ARRAY_BUFFER"};t.exports=i},{}],52:[function(n,t){"use strict";var u=n("../util/util"),i=n("./buffer"),f=n("./program_configuration"),e=n("../render/vertex_array_object"),r=function(n,t,r,o){var s=this,h,l,c,y,b;for(this.layoutVertexBuffer=new i(o.layoutVertexArray,n.layoutVertexArrayType.serialize(),i.BufferType.VERTEX),o.elementArray&&(this.elementBuffer=new i(o.elementArray,n.elementArrayType.serialize(),i.BufferType.ELEMENT)),o.elementArray2&&(this.elementBuffer2=new i(o.elementArray2,n.elementArrayType2.serialize(),i.BufferType.ELEMENT)),this.layerData={},h=0,l=t;h<l.length;h+=1){var a=l[h],v=o.paintVertexArrays&&o.paintVertexArrays[a.id],k=f.createDynamic(n.paintAttributes||[],a,r),d=v?new i(v.array,v.type,i.BufferType.VERTEX):null;s.layerData[a.id]={programConfiguration:k,paintVertexBuffer:d}}for(this.segments=o.segments,this.segments2=o.segments2,c=0,y=[s.segments,s.segments2];c<y.length;c+=1)for(var g=y[c],p=0,w=g||[];p<w.length;p+=1)b=w[p],b.vaos=u.mapObject(s.layerData,function(){return new e})};r.prototype.destroy=function(){var n=this,e,i,t,r,f,s;this.layoutVertexBuffer.destroy();this.elementBuffer&&this.elementBuffer.destroy();this.elementBuffer2&&this.elementBuffer2.destroy();for(e in n.layerData)i=n.layerData[e].paintVertexBuffer,i&&i.destroy();for(t=0,r=[n.segments,n.segments2];t<r.length;t+=1)for(var h=r[t],u=0,o=h||[];u<o.length;u+=1){f=o[u];for(s in f.vaos)f.vaos[s].destroy()}};t.exports=r},{"../render/vertex_array_object":80,"../util/util":212,"./buffer":51,"./program_configuration":58}],53:[function(n,t){"use strict";function i(n){return r({members:[{type:"Uint16",name:"vertices",components:n||3}]})}var r=n("../util/struct_array");t.exports=i},{"../util/struct_array":210}],54:[function(n,t){"use strict";t.exports=8192},{}],55:[function(n,t){"use strict";function r(n){return Math.sqrt(n[0]*n[0]+n[1]*n[1])}function a(n,t){return t-n}function o(n,t){return t>0?t+2*n:n}function u(n,t,i,r,u){var o,e;if(!t[0]&&!t[1])return n;for(t=f.convert(t),"viewport"===i&&t._rotate(-r),o=[],e=0;e<n.length;e++){for(var h=n[e],c=[],s=0;s<h.length;s++)c.push(h[s].sub(t._mult(u)));o.push(c)}return o}function v(n,t){for(var h=[],c=new f(0,0),e=0;e<n.length;e++){for(var r=n[e],l=[],i=0;i<r.length;i++){var a=r[i-1],o=r[i],v=r[i+1],y=0===i?c:o.sub(a)._unit()._perp(),s=i===r.length-1?c:v.sub(o)._unit()._perp(),u=y._add(s)._unit(),p=u.x*s.x+u.y*s.y;u._mult(1/p);l.push(u._mult(t)._add(o))}h.push(l)}return h}var f=n("point-geometry"),s=n("./load_geometry"),h=n("./extent"),y=n("../style-spec/feature_filter"),p=n("../util/struct_array"),c=n("grid-index"),w=n("../util/dictionary_coder"),b=n("vector-tile"),k=n("pbf"),d=n("../util/vectortile_to_geojson"),g=n("../util/util").arraysIntersect,e=n("../util/intersection_tests"),nt=e.multiPolygonIntersectsBufferedMultiPoint,tt=e.multiPolygonIntersectsMultiPolygon,it=e.multiPolygonIntersectsBufferedMultiLine,l=p({members:[{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]}),i=function(n,t,i){if(n.grid){var r=n,u=t;n=r.coord;t=r.overscaling;this.grid=new c(r.grid);this.featureIndexArray=new l(r.featureIndexArray);this.rawTileData=u;this.bucketLayerIDs=r.bucketLayerIDs;this.paintPropertyStatistics=r.paintPropertyStatistics}else this.grid=new c(h,16,0),this.featureIndexArray=new l;this.coord=n;this.overscaling=t;this.x=n.x;this.y=n.y;this.z=n.z-Math.log(t)/Math.LN2;this.setCollisionTile(i)};i.prototype.insert=function(n,t){var h=this,c=this.featureIndexArray.length,f,u,r;for(this.featureIndexArray.emplaceBack(n.index,n.sourceLayerIndex,t),f=s(n),u=0;u<f.length;u++){for(var o=f[u],i=[1/0,1/0,-(1/0),-(1/0)],e=0;e<o.length;e++)r=o[e],i[0]=Math.min(i[0],r.x),i[1]=Math.min(i[1],r.y),i[2]=Math.max(i[2],r.x),i[3]=Math.max(i[3],r.y);h.grid.insert(c,i[0],i[1],i[2],i[3])}};i.prototype.setCollisionTile=function(n){this.collisionTile=n};i.prototype.serialize=function(n){var t=this.grid.toArrayBuffer();return n&&n.push(t),{coord:this.coord,overscaling:this.overscaling,grid:t,featureIndexArray:this.featureIndexArray.serialize(n),bucketLayerIDs:this.bucketLayerIDs,paintPropertyStatistics:this.paintPropertyStatistics}};i.prototype.query=function(n,t){var u=this,nt,i,s,et,v,l,ot,st;this.vtLayers||(this.vtLayers=new b.VectorTile(new k(this.rawTileData)).layers,this.sourceLayerCoder=new w(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]));var p={},d=n.params||{},g=h/n.tileSize/n.scale,ht=y(d.filter),e=0;for(nt in t)if(u.hasLayer(nt)){if(i=t[nt],s=0,"line"===i.type){var ct=o(u.getPaintValue("line-width",i),u.getPaintValue("line-gap-width",i)),lt=u.getPaintValue("line-offset",i),at=u.getPaintValue("line-translate",i);s=ct/2+Math.abs(lt)+r(at)}else"fill"===i.type?s=r(u.getPaintValue("fill-translate",i)):"fill-extrusion"===i.type?s=r(u.getPaintValue("fill-extrusion-translate",i)):"circle"===i.type&&(s=u.getPaintValue("circle-radius",i)+r(u.getPaintValue("circle-translate",i)));e=Math.max(e,s*g)}for(var c=n.queryGeometry.map(function(n){return n.map(function(n){return new f(n.x,n.y)})}),tt=1/0,it=1/0,rt=-(1/0),ut=-(1/0),ft=0;ft<c.length;ft++)for(et=c[ft],v=0;v<et.length;v++)l=et[v],tt=Math.min(tt,l.x),it=Math.min(it,l.y),rt=Math.max(rt,l.x),ut=Math.max(ut,l.y);return ot=this.grid.query(tt-e,it-e,rt+e,ut+e),ot.sort(a),this.filterMatching(p,ot,this.featureIndexArray,c,ht,d.layers,t,n.bearing,g),st=this.collisionTile.queryRenderedSymbols(c,n.scale),st.sort(),this.filterMatching(p,st,this.collisionTile.collisionBoxArray,c,ht,d.layers,t,n.bearing,g),p};i.prototype.filterMatching=function(n,t,i,r,f,e,h,c,l){for(var at,ut,ft,et,w,ot,k,a,b,vt,ht,ct,yt,lt,st,y=this,rt=0;rt<t.length;rt++)if(ut=t[rt],ut!==at&&(at=ut,ft=i.get(ut),et=y.bucketLayerIDs[ft.bucketIndex],!e||g(e,et))){var pt=y.sourceLayerCoder.decode(ft.sourceLayerIndex),wt=y.vtLayers[pt],p=wt.feature(ft.featureIndex);if(f(p))for(w=null,ot=0;ot<et.length;ot++)if(k=et[ot],!(e&&e.indexOf(k)<0)&&(a=h[k],a)){if(b=void 0,"symbol"!==a.type)if(w||(w=s(p)),"line"===a.type){if(b=u(r,y.getPaintValue("line-translate",a,p),y.getPaintValue("line-translate-anchor",a,p),c,l),vt=l/2*o(y.getPaintValue("line-width",a,p),y.getPaintValue("line-gap-width",a,p)),ht=y.getPaintValue("line-offset",a,p),ht&&(w=v(w,ht*l)),!it(b,w,vt))continue}else if("fill"===a.type||"fill-extrusion"===a.type){if(ct=a.type,b=u(r,y.getPaintValue(ct+"-translate",a,p),y.getPaintValue(ct+"-translate-anchor",a,p),c,l),!tt(b,w))continue}else if("circle"===a.type&&(b=u(r,y.getPaintValue("circle-translate",a,p),y.getPaintValue("circle-translate-anchor",a,p),c,l),yt=y.getPaintValue("circle-radius",a,p)*l,!nt(b,w,yt)))continue;lt=new d(p,y.z,y.x,y.y);lt.layer=a.serialize();st=n[k];void 0===st&&(st=n[k]=[]);st.push(lt)}}};i.prototype.hasLayer=function(n){var r=this,u,t,i,f;for(u in r.bucketLayerIDs)for(t=0,i=r.bucketLayerIDs[u];t<i.length;t+=1)if(f=i[t],n===f)return!0;return!1};i.prototype.getPaintValue=function(n,t,i){var u=t.isPaintValueFeatureConstant(n),r;return u||i?(r=i?i.properties:{},t.getPaintValue(n,{zoom:this.z},r)):this.paintPropertyStatistics[t.id][n].max};t.exports=i},{"../style-spec/feature_filter":103,"../util/dictionary_coder":197,"../util/intersection_tests":205,"../util/struct_array":210,"../util/util":212,"../util/vectortile_to_geojson":213,"./extent":54,"./load_geometry":56,"grid-index":16,pbf:25,"point-geometry":26,"vector-tile":34}],56:[function(n,t){"use strict";function i(n){return{min:-1*Math.pow(2,n-1),max:Math.pow(2,n-1)-1}}var r=n("../util/util"),u=n("./extent"),f={15:i(15),16:i(16)};t.exports=function(n,t){for(var c,o,i,e=f[t||16],l=u/n.extent,s=n.loadGeometry(),h=0;h<s.length;h++)for(c=s[h],o=0;o<c.length;o++)i=c[o],i.x=Math.round(i.x*l),i.y=Math.round(i.y*l),(i.x<e.min||i.x>e.max||i.y<e.min||i.y>e.max)&&r.warnOnce("Geometry exceeds allowed extent, reduce your vector tile buffer size");return s}},{"../util/util":212,"./extent":54}],57:[function(n,t){"use strict";var i=n("../util/struct_array"),r=i({members:[{name:"a_pos",type:"Int16",components:2}]});t.exports=r},{"../util/struct_array":210}],58:[function(n,t){"use strict";function u(n,t,i,u){if(!n.zoomStops)return t.getPaintValue(n.property,i,u);var f=n.zoomStops.map(function(f){return t.getPaintValue(n.property,r.extend({},i,{zoom:f}),u)});return 1===f.length?f[0]:f}function f(n,t){var u=n.name,i;return u||(u=n.property.replace(t.type+"-","").replace(/-/g,"_")),i="color"===t._paintSpecifications[n.property].type,r.extend({name:"a_"+u,components:i?4:1,multiplier:i?255:1,dimensions:i?4:1},n)}var e=n("./vertex_array_type"),r=n("../util/util"),i=function(){this.attributes=[];this.uniforms=[];this.interpolationUniforms=[];this.pragmas={vertex:{},fragment:{}};this.cacheKey=""};i.createDynamic=function(n,t,r){for(var u=new i,s=0,c=n;s<c.length;s+=1){var l=c[s],o=f(l,t),h=o.name.slice(2);t.isPaintValueFeatureConstant(o.property)?u.addZoomAttribute(h,o):t.isPaintValueZoomConstant(o.property)?u.addPropertyAttribute(h,o):u.addZoomAndPropertyAttribute(h,o,t,r)}return u.PaintVertexArray=e(u.attributes),u};i.createStatic=function(n){for(var r,u=new i,t=0,f=n;t<f.length;t+=1)r=f[t],u.addUniform(r,"u_"+r);return u};i.prototype.addUniform=function(n,t){var i=this.getPragmas(n);i.define.push("uniform {precision} {type} "+t+";");i.initialize.push("{precision} {type} "+n+" = "+t+";");this.cacheKey+="/u_"+n};i.prototype.addZoomAttribute=function(n,t){this.uniforms.push(t);this.addUniform(n,t.name)};i.prototype.addPropertyAttribute=function(n,t){var i=this.getPragmas(n);this.attributes.push(t);i.define.push("varying {precision} {type} "+n+";");i.vertex.define.push("attribute {precision} {type} "+t.name+";");i.vertex.initialize.push(n+" = "+t.name+" / "+t.multiplier+".0;");this.cacheKey+="/a_"+n};i.prototype.addZoomAndPropertyAttribute=function(n,t,i,u){var p=this,e=this.getPragmas(n),o,f,y,h,c,l,a,s,v;for(e.define.push("varying {precision} {type} "+n+";"),o=0,f=i.getPaintValueStopZoomLevels(t.property);o<f.length&&f[o]<u;)o++;for(y=Math.max(0,Math.min(f.length-4,o-2)),h="u_"+n+"_t",e.vertex.define.push("uniform lowp float "+h+";"),this.interpolationUniforms.push({name:h,property:t.property,stopOffset:y}),c=[],l=0;l<4;l++)c.push(f[Math.min(y+l,f.length-1)]);if(a=[],1===t.components)this.attributes.push(r.extend({},t,{components:4,zoomStops:c})),e.vertex.define.push("attribute {precision} vec4 "+t.name+";"),a.push(t.name);else for(s=0;s<4;s++)v=t.name+s,a.push(v),p.attributes.push(r.extend({},t,{name:v,zoomStops:[c[s]]})),e.vertex.define.push("attribute {precision} {type} "+v+";");e.vertex.initialize.push(n+" = evaluate_zoom_function_"+t.components+"(            "+a.join(", ")+", "+h+") / "+t.multiplier+".0;");this.cacheKey+="/z_"+n};i.prototype.getPragmas=function(n){return this.pragmas[n]||(this.pragmas[n]={define:[],initialize:[]},this.pragmas[n].fragment={define:[],initialize:[]},this.pragmas[n].vertex={define:[],initialize:[]}),this.pragmas[n]};i.prototype.applyPragmas=function(n,t){var i=this;return n.replace(/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,function(n,r,u,f,e){return i.pragmas[e][r].concat(i.pragmas[e][t][r]).join("\n").replace(/{type}/g,f).replace(/{precision}/g,u)})};i.prototype.createPaintPropertyStatistics=function(){for(var t,u=this,i={},n=0,r=u.attributes;n<r.length;n+=1)t=r[n],1===t.dimensions&&(i[t.property]={max:-(1/0)});return i};i.prototype.populatePaintArray=function(n,t,i,r,f,e){var p=this,w=t.length,h,l,v,s,y;for(t.resize(r),h=0,l=p.attributes;h<l.length;h+=1)for(var o=l[h],c=u(o,n,f,e),a=w;a<r;a++){if(v=t.get(a),4===o.components)for(s=0;s<4;s++)v[o.name+s]=c[s]*o.multiplier;else v[o.name]=c*o.multiplier;1===o.dimensions&&(y=i[o.property],y.max=Math.max(y.max,1===o.components?c:Math.max.apply(Math,c)))}};i.prototype.setUniforms=function(n,t,i,r){for(var u,s,f,h,e,a,c=this,o=0,l=c.uniforms;o<l.length;o+=1)u=l[o],s=i.getPaintValue(u.property,r),4===u.components?n.uniform4fv(t[u.name],s):n.uniform1f(t[u.name],s);for(f=0,h=c.interpolationUniforms;f<h.length;f+=1)e=h[f],a=i.getPaintInterpolationT(e.property,r),n.uniform1f(t[e.name],Math.max(0,Math.min(4,a-e.stopOffset)))};t.exports=i},{"../util/util":212,"./vertex_array_type":60}],59:[function(n,t){"use strict";var i=n("../util/struct_array"),r=i({members:[{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]});t.exports=r},{"../util/struct_array":210}],60:[function(n,t){"use strict";function i(n){return r({members:n,alignment:4})}var r=n("../util/struct_array");t.exports=i},{"../util/struct_array":210}],61:[function(n,t){"use strict";var i=function(n,t,i){this.column=n;this.row=t;this.zoom=i};i.prototype.clone=function(){return new i(this.column,this.row,this.zoom)};i.prototype.zoomTo=function(n){return this.clone()._zoomTo(n)};i.prototype.sub=function(n){return this.clone()._sub(n)};i.prototype._zoomTo=function(n){var t=Math.pow(2,n-this.zoom);return this.column*=t,this.row*=t,this.zoom=n,this};i.prototype._sub=function(n){return n=n.zoomTo(this.zoom),this.column-=n.column,this.row-=n.row,this};t.exports=i},{}],62:[function(n,t){"use strict";var r=n("../util/util").wrap,i=function(n,t){if(isNaN(n)||isNaN(t))throw new Error("Invalid LngLat object: ("+n+", "+t+")");if(this.lng=+n,this.lat=+t,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90");};i.prototype.wrap=function(){return new i(r(this.lng,-180,180),this.lat)};i.prototype.toArray=function(){return[this.lng,this.lat]};i.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"};i.convert=function(n){if(n instanceof i)return n;if(n&&n.hasOwnProperty("lng")&&n.hasOwnProperty("lat"))return new i(n.lng,n.lat);if(Array.isArray(n)&&2===n.length)return new i(n[0],n[1]);throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]");};t.exports=i},{"../util/util":212}],63:[function(n,t){"use strict";var r=n("./lng_lat"),i=function(n,t){n&&(t?this.setSouthWest(n).setNorthEast(t):4===n.length?this.setSouthWest([n[0],n[1]]).setNorthEast([n[2],n[3]]):this.setSouthWest(n[0]).setNorthEast(n[1]))};i.prototype.setNorthEast=function(n){return this._ne=r.convert(n),this};i.prototype.setSouthWest=function(n){return this._sw=r.convert(n),this};i.prototype.extend=function(n){var t,u,f=this._sw,e=this._ne;if(n instanceof r)t=n,u=n;else{if(!(n instanceof i))return Array.isArray(n)?n.every(Array.isArray)?this.extend(i.convert(n)):this.extend(r.convert(n)):this;if(t=n._sw,u=n._ne,!t||!u)return this}return f||e?(f.lng=Math.min(t.lng,f.lng),f.lat=Math.min(t.lat,f.lat),e.lng=Math.max(u.lng,e.lng),e.lat=Math.max(u.lat,e.lat)):(this._sw=new r(t.lng,t.lat),this._ne=new r(u.lng,u.lat)),this};i.prototype.getCenter=function(){return new r((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)};i.prototype.getSouthWest=function(){return this._sw};i.prototype.getNorthEast=function(){return this._ne};i.prototype.getNorthWest=function(){return new r(this.getWest(),this.getNorth())};i.prototype.getSouthEast=function(){return new r(this.getEast(),this.getSouth())};i.prototype.getWest=function(){return this._sw.lng};i.prototype.getSouth=function(){return this._sw.lat};i.prototype.getEast=function(){return this._ne.lng};i.prototype.getNorth=function(){return this._ne.lat};i.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]};i.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"};i.convert=function(n){return!n||n instanceof i?n:new i(n)};t.exports=i},{"./lng_lat":62}],64:[function(n,t){"use strict";var e=n("./lng_lat"),f=n("point-geometry"),h=n("./coordinate"),c=n("../util/util"),l=n("../util/interpolate"),y=n("../source/tile_coord"),a=n("../data/extent"),o=n("@mapbox/gl-matrix"),s=o.vec4,u=o.mat4,v=o.mat2,i=function(n,t,i){this.tileSize=512;this._renderWorldCopies=void 0===i||i;this._minZoom=n||0;this._maxZoom=t||22;this.latRange=[-85.05113,85.05113];this.width=0;this.height=0;this._center=new e(0,0);this.zoom=0;this.angle=0;this._fov=.64350110879328437;this._pitch=0;this._unmodified=!0},r={minZoom:{},maxZoom:{},worldSize:{},centerPoint:{},size:{},bearing:{},pitch:{},fov:{},zoom:{},center:{},unmodified:{},x:{},y:{},point:{}};r.minZoom.get=function(){return this._minZoom};r.minZoom.set=function(n){this._minZoom!==n&&(this._minZoom=n,this.zoom=Math.max(this.zoom,n))};r.maxZoom.get=function(){return this._maxZoom};r.maxZoom.set=function(n){this._maxZoom!==n&&(this._maxZoom=n,this.zoom=Math.min(this.zoom,n))};r.worldSize.get=function(){return this.tileSize*this.scale};r.centerPoint.get=function(){return this.size._div(2)};r.size.get=function(){return new f(this.width,this.height)};r.bearing.get=function(){return-this.angle/Math.PI*180};r.bearing.set=function(n){var t=-c.wrap(n,-180,180)*Math.PI/180;this.angle!==t&&(this._unmodified=!1,this.angle=t,this._calcMatrices(),this.rotationMatrix=v.create(),v.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))};r.pitch.get=function(){return this._pitch/Math.PI*180};r.pitch.set=function(n){var t=c.clamp(n,0,60)/180*Math.PI;this._pitch!==t&&(this._unmodified=!1,this._pitch=t,this._calcMatrices())};r.fov.get=function(){return this._fov/Math.PI*180};r.fov.set=function(n){n=Math.max(.01,Math.min(60,n));this._fov!==n&&(this._unmodified=!1,this._fov=n/180*Math.PI,this._calcMatrices())};r.zoom.get=function(){return this._zoom};r.zoom.set=function(n){var t=Math.min(Math.max(n,this.minZoom),this.maxZoom);this._zoom!==t&&(this._unmodified=!1,this._zoom=t,this.scale=this.zoomScale(t),this.tileZoom=Math.floor(t),this.zoomFraction=t-this.tileZoom,this._constrain(),this._calcMatrices())};r.center.get=function(){return this._center};r.center.set=function(n){n.lat===this._center.lat&&n.lng===this._center.lng||(this._unmodified=!1,this._center=n,this._constrain(),this._calcMatrices())};i.prototype.coveringZoomLevel=function(n){return(n.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/n.tileSize))};i.prototype.coveringTiles=function(n){var t=this.coveringZoomLevel(n),u=t;if(t<n.minzoom)return[];t>n.maxzoom&&(t=n.maxzoom);var i=this.pointCoordinate(this.centerPoint,t),r=new f(i.column-.5,i.row-.5),e=[this.pointCoordinate(new f(0,0),t),this.pointCoordinate(new f(this.width,0),t),this.pointCoordinate(new f(this.width,this.height),t),this.pointCoordinate(new f(0,this.height),t)];return y.cover(t,e,n.reparseOverscaled?u:t,this._renderWorldCopies).sort(function(n,t){return r.dist(n)-r.dist(t)})};i.prototype.resize=function(n,t){this.width=n;this.height=t;this.pixelsToGLUnits=[2/n,-2/t];this._constrain();this._calcMatrices()};r.unmodified.get=function(){return this._unmodified};i.prototype.zoomScale=function(n){return Math.pow(2,n)};i.prototype.scaleZoom=function(n){return Math.log(n)/Math.LN2};i.prototype.project=function(n){return new f(this.lngX(n.lng),this.latY(n.lat))};i.prototype.unproject=function(n){return new e(this.xLng(n.x),this.yLat(n.y))};r.x.get=function(){return this.lngX(this.center.lng)};r.y.get=function(){return this.latY(this.center.lat)};r.point.get=function(){return new f(this.x,this.y)};i.prototype.lngX=function(n){return(180+n)*this.worldSize/360};i.prototype.latY=function(n){var t=180/Math.PI*Math.log(Math.tan(Math.PI/4+n*Math.PI/360));return(180-t)*this.worldSize/360};i.prototype.xLng=function(n){return 360*n/this.worldSize-180};i.prototype.yLat=function(n){var t=180-360*n/this.worldSize;return 360/Math.PI*Math.atan(Math.exp(t*Math.PI/180))-90};i.prototype.setLocationAtPoint=function(n,t){var i=this.pointCoordinate(t)._sub(this.pointCoordinate(this.centerPoint));this.center=this.coordinateLocation(this.locationCoordinate(n)._sub(i))};i.prototype.locationPoint=function(n){return this.coordinatePoint(this.locationCoordinate(n))};i.prototype.pointLocation=function(n){return this.coordinateLocation(this.pointCoordinate(n))};i.prototype.locationCoordinate=function(n){return new h(this.lngX(n.lng)/this.tileSize,this.latY(n.lat)/this.tileSize,this.zoom).zoomTo(this.tileZoom)};i.prototype.coordinateLocation=function(n){var t=n.zoomTo(this.zoom);return new e(this.xLng(t.column*this.tileSize),this.yLat(t.row*this.tileSize))};i.prototype.pointCoordinate=function(n,t){void 0===t&&(t=this.tileZoom);var i=[n.x,n.y,0,1],r=[n.x,n.y,1,1];s.transformMat4(i,i,this.pixelMatrixInverse);s.transformMat4(r,r,this.pixelMatrixInverse);var u=i[3],f=r[3],a=i[0]/u,v=r[0]/f,y=i[1]/u,p=r[1]/f,e=i[2]/u,o=r[2]/f,c=e===o?0:(0-e)/(o-e);return new h(l(a,v,c)/this.tileSize,l(y,p,c)/this.tileSize,this.zoom)._zoomTo(t)};i.prototype.coordinatePoint=function(n){var i=n.zoomTo(this.zoom),t=[i.column*this.tileSize,i.row*this.tileSize,0,1];return s.transformMat4(t,t,this.pixelMatrix),new f(t[0]/t[3],t[1]/t[3])};i.prototype.calculatePosMatrix=function(n,t){var f=n.toCoordinate(t),r=this.worldSize/this.zoomScale(f.zoom),i=u.identity(new Float64Array(16));return u.translate(i,i,[f.column*r,f.row*r,0]),u.scale(i,i,[r/a,r/a,1]),u.multiply(i,this.projMatrix,i),new Float32Array(i)};i.prototype._constrain=function(){var t,i,r,u,c,l,e,o,n,a,v,y,s,p,h;if(this.center&&this.width&&this.height&&!this._constraining){if(this._constraining=!0,n=this.size,a=this._unmodified,this.latRange&&(t=this.latY(this.latRange[1]),i=this.latY(this.latRange[0]),c=i-t<n.y?n.y/(i-t):0),this.lngRange&&(r=this.lngX(this.lngRange[0]),u=this.lngX(this.lngRange[1]),l=u-r<n.x?n.x/(u-r):0),v=Math.max(l||0,c||0),v)return this.center=this.unproject(new f(l?(u+r)/2:this.x,c?(i+t)/2:this.y)),this.zoom+=this.scaleZoom(v),this._unmodified=a,void(this._constraining=!1);this.latRange&&(y=this.y,s=n.y/2,y-s<t&&(o=t+s),y+s>i&&(o=i-s));this.lngRange&&(p=this.x,h=n.x/2,p-h<r&&(e=r+h),p+h>u&&(e=u-h));void 0===e&&void 0===o||(this.center=this.unproject(new f(void 0!==e?e:this.x,void 0!==o?o:this.y)));this._unmodified=a;this._constraining=!1}};i.prototype._calcMatrices=function(){var i;if(this.height){this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var t=this._fov/2,r=Math.PI/2+this._pitch,f=Math.sin(t)*this.cameraToCenterDistance/Math.sin(Math.PI-r-t),e=Math.cos(Math.PI/2-this._pitch)*f+this.cameraToCenterDistance,o=1.01*e,n=new Float64Array(16);if(u.perspective(n,this._fov,this.width/this.height,1,o),u.scale(n,n,[1,-1,1]),u.translate(n,n,[0,0,-this.cameraToCenterDistance]),u.rotateX(n,n,this._pitch),u.rotateZ(n,n,this.angle),u.translate(n,n,[-this.x,-this.y,0]),i=this.worldSize/(12756274*Math.PI*Math.abs(Math.cos(this.center.lat*(Math.PI/180)))),u.scale(n,n,[1,1,i,1]),this.projMatrix=n,n=u.create(),u.scale(n,n,[this.width/2,-this.height/2,1]),u.translate(n,n,[1,-1,0]),this.pixelMatrix=u.multiply(new Float64Array(16),n,this.projMatrix),n=u.invert(new Float64Array(16),this.pixelMatrix),!n)throw new Error("failed to invert matrix");this.pixelMatrixInverse=n}};Object.defineProperties(i.prototype,r);t.exports=i},{"../data/extent":54,"../source/tile_coord":94,"../util/interpolate":204,"../util/util":212,"./coordinate":61,"./lng_lat":62,"@mapbox/gl-matrix":1,"point-geometry":26}],65:[function(n,t){"use strict";var f=n("./util/browser"),i=t.exports={},r,u;i.version=n("../package.json").version;i.workerCount=Math.max(Math.floor(f.hardwareConcurrency/2),1);i.Map=n("./ui/map");i.NavigationControl=n("./ui/control/navigation_control");i.GeolocateControl=n("./ui/control/geolocate_control");i.AttributionControl=n("./ui/control/attribution_control");i.ScaleControl=n("./ui/control/scale_control");i.FullscreenControl=n("./ui/control/fullscreen_control");i.Popup=n("./ui/popup");i.Marker=n("./ui/marker");i.Style=n("./style/style");i.LngLat=n("./geo/lng_lat");i.LngLatBounds=n("./geo/lng_lat_bounds");i.Point=n("point-geometry");i.Evented=n("./util/evented");i.supported=n("./util/browser").supported;r=n("./util/config");i.config=r;u=n("./source/rtl_text_plugin");i.setRTLTextPlugin=u.setRTLTextPlugin;Object.defineProperty(i,"accessToken",{get:function(){return r.ACCESS_TOKEN},set:function(n){r.ACCESS_TOKEN=n}})},{"../package.json":43,"./geo/lng_lat":62,"./geo/lng_lat_bounds":63,"./source/rtl_text_plugin":90,"./style/style":146,"./ui/control/attribution_control":173,"./ui/control/fullscreen_control":174,"./ui/control/geolocate_control":175,"./ui/control/navigation_control":177,"./ui/control/scale_control":178,"./ui/map":187,"./ui/marker":188,"./ui/popup":189,"./util/browser":192,"./util/config":196,"./util/evented":200,"point-geometry":26}],66:[function(n,t){"use strict";function r(n,t,r){var u=n.gl,h=n.transform,c=h.tileSize,l=r.paint["background-color"],e=r.paint["background-pattern"],a=r.paint["background-opacity"],y=!e&&1===l[3]&&1===a,f,s;if(n.isOpaquePass===y){u.disable(u.STENCIL_TEST);n.setDepthSublayer(0);e?(f=n.useProgram("fillPattern",n.basicFillProgramConfiguration),i.prepare(e,n,f),n.tileExtentPatternVAO.bind(u,f,n.tileExtentBuffer)):(f=n.useProgram("fill",n.basicFillProgramConfiguration),u.uniform4fv(f.u_color,l),n.tileExtentVAO.bind(u,f,n.tileExtentBuffer));u.uniform1f(f.u_opacity,a);for(var p=h.coveringTiles({tileSize:c}),o=0,v=p;o<v.length;o+=1)s=v[o],e&&i.setTile({coord:s,tileSize:c},n,f),u.uniformMatrix4fv(f.u_matrix,!1,n.transform.calculatePosMatrix(s)),u.drawArrays(u.TRIANGLE_STRIP,0,n.tileExtentBuffer.length)}}var i=n("./pattern");t.exports=r},{"./pattern":78}],67:[function(n,t){"use strict";function i(n,t,i,u){var f,s,c,l,o;if(!n.isOpaquePass)for(f=n.gl,n.setDepthSublayer(0),n.depthMask(!1),f.disable(f.STENCIL_TEST),s=0;s<u.length;s++){var a=u[s],v=t.getTile(a),y=v.getBucket(i);if(y){var h=y.buffers,p=h.layerData[i.id],w=p.programConfiguration,e=n.useProgram("circle",w);for(w.setUniforms(f,e,i,{zoom:n.transform.zoom}),"map"===i.paint["circle-pitch-scale"]?(f.uniform1i(e.u_scale_with_map,!0),f.uniform2f(e.u_extrude_scale,n.transform.pixelsToGLUnits[0]*n.transform.cameraToCenterDistance,n.transform.pixelsToGLUnits[1]*n.transform.cameraToCenterDistance)):(f.uniform1i(e.u_scale_with_map,!1),f.uniform2fv(e.u_extrude_scale,n.transform.pixelsToGLUnits)),f.uniform1f(e.u_devicepixelratio,r.devicePixelRatio),f.uniformMatrix4fv(e.u_matrix,!1,n.translatePosMatrix(a.posMatrix,v,i.paint["circle-translate"],i.paint["circle-translate-anchor"])),c=0,l=h.segments;c<l.length;c+=1)o=l[c],o.vaos[i.id].bind(f,e,h.layoutVertexBuffer,h.elementBuffer,p.paintVertexBuffer,o.vertexOffset),f.drawElements(f.TRIANGLES,3*o.primitiveLength,f.UNSIGNED_SHORT,6*o.primitiveOffset)}}}var r=n("../util/browser");t.exports=i},{"../util/browser":192}],68:[function(n,t){"use strict";function i(n,t,i,r){var u=n.gl,f,s,e,h,a,o;for(u.enable(u.STENCIL_TEST),f=n.useProgram("collisionBox"),s=0;s<r.length;s++){var c=r[s],l=t.getTile(c),v=l.getBucket(i);if(v&&(e=v.buffers.collisionBox,e))for(u.uniformMatrix4fv(f.u_matrix,!1,c.posMatrix),n.enableTileClippingMask(c),n.lineWidth(1),u.uniform1f(f.u_scale,Math.pow(2,n.transform.zoom-l.coord.z)),u.uniform1f(f.u_zoom,10*n.transform.zoom),u.uniform1f(f.u_maxzoom,10*(l.coord.z+1)),h=0,a=e.segments;h<a.length;h+=1)o=a[h],o.vaos[i.id].bind(u,f,e.layoutVertexBuffer,e.elementBuffer,null,o.vertexOffset),u.drawElements(u.LINES,2*o.primitiveLength,u.UNSIGNED_SHORT,4*o.primitiveOffset)}}t.exports=i},{}],69:[function(n,t){"use strict";function u(n,t,i){for(var r=0;r<i.length;r++)f(n,t,i[r])}function f(n,t,r){var u=n.gl,a,f,y,d,b;u.disable(u.STENCIL_TEST);n.lineWidth(1*o.devicePixelRatio);a=r.posMatrix;f=n.useProgram("debug");u.uniformMatrix4fv(f.u_matrix,!1,a);u.uniform4f(f.u_color,1,0,0,1);n.debugVAO.bind(u,f,n.debugBuffer);u.drawArrays(u.LINE_STRIP,0,n.debugBuffer.length);for(var p=e(r.toString(),50,200,5),k=new l,v=0;v<p.length;v+=2)k.emplaceBack(p[v],p[v+1]);y=i.fromStructArray(k,i.BufferType.VERTEX);d=new c;d.bind(u,f,y);u.uniform4f(f.u_color,1,1,1,1);for(var tt=t.getTile(r).tileSize,g=h/(Math.pow(2,n.transform.zoom-r.z)*tt),nt=[[-1,-1],[-1,1],[1,-1],[1,1]],w=0;w<nt.length;w++)b=nt[w],u.uniformMatrix4fv(f.u_matrix,!1,s.translate([],a,[g*b[0],g*b[1],0])),u.drawArrays(u.LINES,0,y.length);u.uniform4f(f.u_color,0,0,0,1);u.uniformMatrix4fv(f.u_matrix,!1,a);u.drawArrays(u.LINES,0,y.length)}function e(n,t,i,u){u=u||1;for(var f,a,e,h,c,o,v=[],s=0,l=n.length;s<l;s++)if(e=r[n[s]]){for(o=null,f=0,a=e[1].length;f<a;f+=2)e[1][f]===-1&&e[1][f+1]===-1?o=null:(h=t+e[1][f]*u,c=i-e[1][f+1]*u,o&&v.push(o.x,o.y,h,c),o={x:h,y:c});t+=e[0]*u}return v}var o=n("../util/browser"),s=n("@mapbox/gl-matrix").mat4,h=n("../data/extent"),i=n("../data/buffer"),c=n("./vertex_array_object"),l=n("../data/pos_array"),r;t.exports=u;r={" ":[16,[]],"!":[10,[5,21,5,7,-1,-1,5,2,4,1,5,0,6,1,5,2]],'"':[16,[4,21,4,14,-1,-1,12,21,12,14]],"#":[21,[11,25,4,-7,-1,-1,17,25,10,-7,-1,-1,4,12,18,12,-1,-1,3,6,17,6]],$:[20,[8,25,8,-4,-1,-1,12,25,12,-4,-1,-1,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],"%":[24,[21,21,3,0,-1,-1,8,21,10,19,10,17,9,15,7,14,5,14,3,16,3,18,4,20,6,21,8,21,10,20,13,19,16,19,19,20,21,21,-1,-1,17,7,15,6,14,4,14,2,16,0,18,0,20,1,21,3,21,5,19,7,17,7]],"&":[26,[23,12,23,13,22,14,21,14,20,13,19,11,17,6,15,3,13,1,11,0,7,0,5,1,4,2,3,4,3,6,4,8,5,9,12,13,13,14,14,16,14,18,13,20,11,21,9,20,8,18,8,16,9,13,11,10,16,3,18,1,20,0,22,0,23,1,23,2]],"'":[10,[5,19,4,20,5,21,6,20,6,18,5,16,4,15]],"(":[14,[11,25,9,23,7,20,5,16,4,11,4,7,5,2,7,-2,9,-5,11,-7]],")":[14,[3,25,5,23,7,20,9,16,10,11,10,7,9,2,7,-2,5,-5,3,-7]],"*":[16,[8,21,8,9,-1,-1,3,18,13,12,-1,-1,13,18,3,12]],"+":[26,[13,18,13,0,-1,-1,4,9,22,9]],",":[10,[6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"-":[26,[4,9,22,9]],".":[10,[5,2,4,1,5,0,6,1,5,2]],"/":[22,[20,25,2,-7]],0:[20,[9,21,6,20,4,17,3,12,3,9,4,4,6,1,9,0,11,0,14,1,16,4,17,9,17,12,16,17,14,20,11,21,9,21]],1:[20,[6,17,8,18,11,21,11,0]],2:[20,[4,16,4,17,5,19,6,20,8,21,12,21,14,20,15,19,16,17,16,15,15,13,13,10,3,0,17,0]],3:[20,[5,21,16,21,10,13,13,13,15,12,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],4:[20,[13,21,3,7,18,7,-1,-1,13,21,13,0]],5:[20,[15,21,5,21,4,12,5,13,8,14,11,14,14,13,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],6:[20,[16,18,15,20,12,21,10,21,7,20,5,17,4,12,4,7,5,3,7,1,10,0,11,0,14,1,16,3,17,6,17,7,16,10,14,12,11,13,10,13,7,12,5,10,4,7]],7:[20,[17,21,7,0,-1,-1,3,21,17,21]],8:[20,[8,21,5,20,4,18,4,16,5,14,7,13,11,12,14,11,16,9,17,7,17,4,16,2,15,1,12,0,8,0,5,1,4,2,3,4,3,7,4,9,6,11,9,12,13,13,15,14,16,16,16,18,15,20,12,21,8,21]],9:[20,[16,14,15,11,13,9,10,8,9,8,6,9,4,11,3,14,3,15,4,18,6,20,9,21,10,21,13,20,15,18,16,14,16,9,15,4,13,1,10,0,8,0,5,1,4,3]],":":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,5,2,4,1,5,0,6,1,5,2]],";":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"<":[24,[20,18,4,9,20,0]],"=":[26,[4,12,22,12,-1,-1,4,6,22,6]],">":[24,[4,18,20,9,4,0]],"?":[18,[3,16,3,17,4,19,5,20,7,21,11,21,13,20,14,19,15,17,15,15,14,13,13,12,9,10,9,7,-1,-1,9,2,8,1,9,0,10,1,9,2]],"@":[27,[18,13,17,15,15,16,12,16,10,15,9,14,8,11,8,8,9,6,11,5,14,5,16,6,17,8,-1,-1,12,16,10,14,9,11,9,8,10,6,11,5,-1,-1,18,16,17,8,17,6,19,5,21,5,23,7,24,10,24,12,23,15,22,17,20,19,18,20,15,21,12,21,9,20,7,19,5,17,4,15,3,12,3,9,4,6,5,4,7,2,9,1,12,0,15,0,18,1,20,2,21,3,-1,-1,19,16,18,8,18,6,19,5]],A:[18,[9,21,1,0,-1,-1,9,21,17,0,-1,-1,4,7,14,7]],B:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,-1,-1,4,11,13,11,16,10,17,9,18,7,18,4,17,2,16,1,13,0,4,0]],C:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5]],D:[21,[4,21,4,0,-1,-1,4,21,11,21,14,20,16,18,17,16,18,13,18,8,17,5,16,3,14,1,11,0,4,0]],E:[19,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11,-1,-1,4,0,17,0]],F:[18,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11]],G:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,18,8,-1,-1,13,8,18,8]],H:[22,[4,21,4,0,-1,-1,18,21,18,0,-1,-1,4,11,18,11]],I:[8,[4,21,4,0]],J:[16,[12,21,12,5,11,2,10,1,8,0,6,0,4,1,3,2,2,5,2,7]],K:[21,[4,21,4,0,-1,-1,18,21,4,7,-1,-1,9,12,18,0]],L:[17,[4,21,4,0,-1,-1,4,0,16,0]],M:[24,[4,21,4,0,-1,-1,4,21,12,0,-1,-1,20,21,12,0,-1,-1,20,21,20,0]],N:[22,[4,21,4,0,-1,-1,4,21,18,0,-1,-1,18,21,18,0]],O:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21]],P:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,14,17,12,16,11,13,10,4,10]],Q:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21,-1,-1,12,4,18,-2]],R:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,4,11,-1,-1,11,11,18,0]],S:[20,[17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],T:[16,[8,21,8,0,-1,-1,1,21,15,21]],U:[22,[4,21,4,6,5,3,7,1,10,0,12,0,15,1,17,3,18,6,18,21]],V:[18,[1,21,9,0,-1,-1,17,21,9,0]],W:[24,[2,21,7,0,-1,-1,12,21,7,0,-1,-1,12,21,17,0,-1,-1,22,21,17,0]],X:[20,[3,21,17,0,-1,-1,17,21,3,0]],Y:[18,[1,21,9,11,9,0,-1,-1,17,21,9,11]],Z:[20,[17,21,3,0,-1,-1,3,21,17,21,-1,-1,3,0,17,0]],"[":[14,[4,25,4,-7,-1,-1,5,25,5,-7,-1,-1,4,25,11,25,-1,-1,4,-7,11,-7]],"\\":[14,[0,21,14,-3]],"]":[14,[9,25,9,-7,-1,-1,10,25,10,-7,-1,-1,3,25,10,25,-1,-1,3,-7,10,-7]],"^":[16,[6,15,8,18,10,15,-1,-1,3,12,8,17,13,12,-1,-1,8,17,8,0]],_:[16,[0,-2,16,-2]],"`":[10,[6,21,5,20,4,18,4,16,5,15,6,16,5,17]],a:[19,[15,14,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],b:[19,[4,21,4,0,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],c:[18,[15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],d:[19,[15,21,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],e:[18,[3,8,15,8,15,10,14,12,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],f:[12,[10,21,8,21,6,20,5,17,5,0,-1,-1,2,14,9,14]],g:[19,[15,14,15,-2,14,-5,13,-6,11,-7,8,-7,6,-6,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],h:[19,[4,21,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],i:[8,[3,21,4,20,5,21,4,22,3,21,-1,-1,4,14,4,0]],j:[10,[5,21,6,20,7,21,6,22,5,21,-1,-1,6,14,6,-3,5,-6,3,-7,1,-7]],k:[17,[4,21,4,0,-1,-1,14,14,4,4,-1,-1,8,8,15,0]],l:[8,[4,21,4,0]],m:[30,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0,-1,-1,15,10,18,13,20,14,23,14,25,13,26,10,26,0]],n:[19,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],o:[19,[8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3,16,6,16,8,15,11,13,13,11,14,8,14]],p:[19,[4,14,4,-7,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],q:[19,[15,14,15,-7,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],r:[13,[4,14,4,0,-1,-1,4,8,5,11,7,13,9,14,12,14]],s:[17,[14,11,13,13,10,14,7,14,4,13,3,11,4,9,6,8,11,7,13,6,14,4,14,3,13,1,10,0,7,0,4,1,3,3]],t:[12,[5,21,5,4,6,1,8,0,10,0,-1,-1,2,14,9,14]],u:[19,[4,14,4,4,5,1,7,0,10,0,12,1,15,4,-1,-1,15,14,15,0]],v:[16,[2,14,8,0,-1,-1,14,14,8,0]],w:[22,[3,14,7,0,-1,-1,11,14,7,0,-1,-1,11,14,15,0,-1,-1,19,14,15,0]],x:[17,[3,14,14,0,-1,-1,14,14,3,0]],y:[16,[2,14,8,0,-1,-1,14,14,8,0,6,-4,4,-6,2,-7,1,-7]],z:[17,[14,14,3,0,-1,-1,3,14,14,14,-1,-1,3,0,14,0]],"{":[14,[9,25,7,24,6,23,5,21,5,19,6,17,7,16,8,14,8,12,6,10,-1,-1,7,24,6,22,6,20,7,18,8,17,9,15,9,13,8,11,4,9,8,7,9,5,9,3,8,1,7,0,6,-2,6,-4,7,-6,-1,-1,6,8,8,6,8,4,7,2,6,1,5,-1,5,-3,6,-5,7,-6,9,-7]],"|":[8,[4,25,4,-7]],"}":[14,[5,25,7,24,8,23,9,21,9,19,8,17,7,16,6,14,6,12,8,10,-1,-1,7,24,8,22,8,20,7,18,6,17,5,15,5,13,6,11,10,9,6,7,5,5,5,3,6,1,7,0,8,-2,8,-4,7,-6,-1,-1,8,8,6,6,6,4,7,2,8,1,9,-1,9,-3,8,-5,7,-6,5,-7]],"~":[24,[3,6,3,8,4,11,6,12,8,12,10,11,14,8,16,7,18,7,20,8,21,10,-1,-1,3,8,4,10,6,11,8,11,10,10,14,7,16,6,18,6,20,7,21,10,21,12]]}},{"../data/buffer":51,"../data/extent":54,"../data/pos_array":57,"../util/browser":192,"./vertex_array_object":80,"@mapbox/gl-matrix":1}],70:[function(n,t){"use strict";function f(n,t,r,u){var f=n.gl,s;f.enable(f.STENCIL_TEST);s=!r.paint["fill-pattern"]&&r.isPaintValueFeatureConstant("fill-color")&&r.isPaintValueFeatureConstant("fill-opacity")&&1===r.paint["fill-color"][3]&&1===r.paint["fill-opacity"];n.isOpaquePass===s&&(n.setDepthSublayer(1),i(n,t,r,u,e));!n.isOpaquePass&&r.paint["fill-antialias"]&&(n.lineWidth(2),n.depthMask(!1),n.setDepthSublayer(r.getPaintProperty("fill-outline-color")?2:0),i(n,t,r,u,o))}function i(n,t,i,r,u){for(var o=!0,f=0,s=r;f<s.length;f+=1){var e=s[f],h=t.getTile(e),c=h.getBucket(i);c&&(n.enableTileClippingMask(e),u(n,t,i,h,e,c.buffers,o),o=!1)}}function e(n,t,i,u,f,e,o){for(var s,h=n.gl,l=e.layerData[i.id],v=r("fill",i.paint["fill-pattern"],n,l,i,u,f,o),c=0,a=e.segments;c<a.length;c+=1)s=a[c],s.vaos[i.id].bind(h,v,e.layoutVertexBuffer,e.elementBuffer,l.paintVertexBuffer,s.vertexOffset),h.drawElements(h.TRIANGLES,3*s.primitiveLength,h.UNSIGNED_SHORT,6*s.primitiveOffset)}function o(n,t,i,u,f,e,o){var s=n.gl,a=e.layerData[i.id],y=i.paint["fill-pattern"]&&!i.getPaintProperty("fill-outline-color"),v=r("fillOutline",y,n,a,i,u,f,o),c,l,h;for(s.uniform2f(v.u_world,s.drawingBufferWidth,s.drawingBufferHeight),c=0,l=e.segments2;c<l.length;c+=1)h=l[c],h.vaos[i.id].bind(s,v,e.layoutVertexBuffer,e.elementBuffer2,a.paintVertexBuffer,h.vertexOffset),s.drawElements(s.LINES,2*h.primitiveLength,s.UNSIGNED_SHORT,4*h.primitiveOffset)}function r(n,t,i,r,f,e,o,s){var h,c=i.currentProgram;return t?(h=i.useProgram(n+"Pattern",r.programConfiguration),(s||h!==c)&&(r.programConfiguration.setUniforms(i.gl,h,f,{zoom:i.transform.zoom}),u.prepare(f.paint["fill-pattern"],i,h)),u.setTile(e,i,h)):(h=i.useProgram(n,r.programConfiguration),(s||h!==c)&&r.programConfiguration.setUniforms(i.gl,h,f,{zoom:i.transform.zoom})),i.gl.uniformMatrix4fv(h.u_matrix,!1,i.translatePosMatrix(o.posMatrix,e,f.paint["fill-translate"],f.paint["fill-translate-anchor"])),h}var u=n("./pattern");t.exports=f},{"./pattern":78}],71:[function(n,t){"use strict";function s(n,t,r,u){var f,e,o;if(0!==r.paint["fill-extrusion-opacity"]){for(f=n.gl,f.disable(f.STENCIL_TEST),f.enable(f.DEPTH_TEST),n.depthMask(!0),e=new i(f,n,r),e.bindFramebuffer(),f.clearColor(0,0,0,0),f.clear(f.COLOR_BUFFER_BIT|f.DEPTH_BUFFER_BIT),o=0;o<u.length;o++)h(n,t,r,u[o]);e.unbindFramebuffer();e.renderToMap()}}function i(n,t,i){this.gl=n;this.width=t.width;this.height=t.height;this.painter=t;this.layer=i;this.texture=null;this.fbo=null;this.fbos=this.painter.preFbos[this.width]&&this.painter.preFbos[this.width][this.height]}function h(n,t,i,r){var o,a,l,y,s;if(!n.isOpaquePass&&(o=t.getTile(r),a=o.getBucket(i),a)){var h=a.buffers,e=n.gl,v=i.paint["fill-extrusion-pattern"],p=h.layerData[i.id],w=p.programConfiguration,u=n.useProgram(v?"fillExtrusionPattern":"fillExtrusion",w);for(w.setUniforms(e,u,i,{zoom:n.transform.zoom}),v&&(f.prepare(v,n,u),f.setTile(o,n,u),e.uniform1f(u.u_height_factor,-Math.pow(2,r.z)/o.tileSize/8)),n.gl.uniformMatrix4fv(u.u_matrix,!1,n.translatePosMatrix(r.posMatrix,o,i.paint["fill-extrusion-translate"],i.paint["fill-extrusion-translate-anchor"])),c(u,n),l=0,y=h.segments;l<y.length;l+=1)s=y[l],s.vaos[i.id].bind(e,u,h.layoutVertexBuffer,h.elementBuffer,p.paintVertexBuffer,s.vertexOffset),e.drawElements(e.TRIANGLES,3*s.primitiveLength,e.UNSIGNED_SHORT,6*s.primitiveOffset)}}function c(n,t){var r=t.gl,i=t.style.light,u=i.calculated.position,f=[u.x,u.y,u.z],o=e.create();"viewport"===i.calculated.anchor&&e.fromRotation(o,-t.transform.angle);v.transformMat3(f,f,o);r.uniform3fv(n.u_lightpos,f);r.uniform1f(n.u_lightintensity,i.calculated.intensity);r.uniform3fv(n.u_lightcolor,i.calculated.color.slice(0,3))}var r=n("@mapbox/gl-matrix"),u=n("../data/buffer"),l=n("./vertex_array_object"),a=n("../data/pos_array"),f=n("./pattern"),e=r.mat3,o=r.mat4,v=r.vec3;t.exports=s;i.prototype.bindFramebuffer=function(){var n=this.gl,t,i;(this.texture=this.painter.getViewportTexture(this.width,this.height),n.activeTexture(n.TEXTURE1),this.texture?n.bindTexture(n.TEXTURE_2D,this.texture):(this.texture=n.createTexture(),n.bindTexture(n.TEXTURE_2D,this.texture),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,this.width,this.height,0,n.RGBA,n.UNSIGNED_BYTE,null),this.texture.width=this.width,this.texture.height=this.height),this.fbos)?(this.fbo=this.fbos.pop(),n.bindFramebuffer(n.FRAMEBUFFER,this.fbo),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,this.texture,0)):(this.fbo=n.createFramebuffer(),t=n.createRenderbuffer(),i=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,t),n.bindRenderbuffer(n.RENDERBUFFER,i),n.renderbufferStorage(n.RENDERBUFFER,n.RGBA4,this.width,this.height),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_COMPONENT16,this.width,this.height),n.bindFramebuffer(n.FRAMEBUFFER,this.fbo),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,t),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,i),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,this.texture,0))};i.prototype.unbindFramebuffer=function(){this.painter.bindDefaultFramebuffer();this.fbos?this.fbos.push(this.fbo):(this.painter.preFbos[this.width]||(this.painter.preFbos[this.width]={}),this.painter.preFbos[this.width][this.height]=[this.fbo]);this.painter.saveViewportTexture(this.texture)};i.prototype.renderToMap=function(){var n=this.gl,t=this.painter,i=t.useProgram("extrusionTexture"),r,f,e;n.activeTexture(n.TEXTURE0);n.bindTexture(n.TEXTURE_2D,this.texture);n.uniform1f(i.u_opacity,this.layer.paint["fill-extrusion-opacity"]);n.uniform1i(i.u_texture,1);n.uniformMatrix4fv(i.u_matrix,!1,o.ortho(o.create(),0,t.width,t.height,0,0,1));n.disable(n.DEPTH_TEST);n.uniform1i(i.u_xdim,t.width);n.uniform1i(i.u_ydim,t.height);r=new a;r.emplaceBack(0,0);r.emplaceBack(t.width,0);r.emplaceBack(0,t.height);r.emplaceBack(t.width,t.height);f=u.fromStructArray(r,u.BufferType.VERTEX);e=new l;e.bind(n,i,f);n.drawArrays(n.TRIANGLE_STRIP,0,4);n.enable(n.DEPTH_TEST)}},{"../data/buffer":51,"../data/pos_array":57,"./pattern":78,"./vertex_array_object":80,"@mapbox/gl-matrix":1}],72:[function(n,t){"use strict";function r(n,t,r,f,e,o,s,h,c){var k,d,p,a,l=t.gl,v=e.paint["line-dasharray"],y=e.paint["line-pattern"],w,nt,tt,rt,g,it,b;if(h||c){if(w=1/i(r,1,t.transform.tileZoom),v)k=t.lineAtlas.getDash(v.from,"round"===e.layout["line-cap"]),d=t.lineAtlas.getDash(v.to,"round"===e.layout["line-cap"]),nt=k.width*v.fromScale,tt=d.width*v.toScale,l.uniform2f(n.u_patternscale_a,w/nt,-k.height/2),l.uniform2f(n.u_patternscale_b,w/tt,-d.height/2),l.uniform1f(n.u_sdfgamma,t.lineAtlas.width/(256*Math.min(nt,tt)*u.devicePixelRatio)/2);else if(y){if(p=t.spriteAtlas.getPosition(y.from,!0),a=t.spriteAtlas.getPosition(y.to,!0),!p||!a)return;l.uniform2f(n.u_pattern_size_a,p.size[0]*y.fromScale/w,a.size[1]);l.uniform2f(n.u_pattern_size_b,a.size[0]*y.toScale/w,a.size[1])}l.uniform2f(n.u_gl_units_to_pixels,1/t.transform.pixelsToGLUnits[0],1/t.transform.pixelsToGLUnits[1])}for(h&&(v?(l.uniform1i(n.u_image,0),l.activeTexture(l.TEXTURE0),t.lineAtlas.bind(l),l.uniform1f(n.u_tex_y_a,k.y),l.uniform1f(n.u_tex_y_b,d.y),l.uniform1f(n.u_mix,v.t)):y&&(l.uniform1i(n.u_image,0),l.activeTexture(l.TEXTURE0),t.spriteAtlas.bind(l,!0),l.uniform2fv(n.u_pattern_tl_a,p.tl),l.uniform2fv(n.u_pattern_br_a,p.br),l.uniform2fv(n.u_pattern_tl_b,a.tl),l.uniform2fv(n.u_pattern_br_b,a.br),l.uniform1f(n.u_fade,y.t)),l.uniform1f(n.u_width,e.paint["line-width"])),t.enableTileClippingMask(o),rt=t.translatePosMatrix(o.posMatrix,r,e.paint["line-translate"],e.paint["line-translate-anchor"]),l.uniformMatrix4fv(n.u_matrix,!1,rt),l.uniform1f(n.u_ratio,1/i(r,1,t.transform.zoom)),g=0,it=f.segments;g<it.length;g+=1)b=it[g],b.vaos[e.id].bind(l,n,f.layoutVertexBuffer,f.elementBuffer,s.paintVertexBuffer,b.vertexOffset),l.drawElements(l.TRIANGLES,3*b.primitiveLength,l.UNSIGNED_SHORT,6*b.primitiveOffset)}var u=n("../util/browser"),i=n("../source/pixels_to_tile_units");t.exports=function(n,t,i,u){var e;if(!n.isOpaquePass&&(n.setDepthSublayer(0),n.depthMask(!1),e=n.gl,e.enable(e.STENCIL_TEST),!(i.paint["line-width"]<=0)))for(var l,w=i.paint["line-dasharray"]?"lineSDF":i.paint["line-pattern"]?"linePattern":"line",a=!0,o=0,v=u;o<v.length;o+=1){var y=v[o],f=t.getTile(y),s=f.getBucket(i);if(s){var h=s.buffers.layerData[i.id],b=n.currentProgram,c=n.useProgram(w,h.programConfiguration),p=a||c!==b,k=l!==f.coord.z;p&&h.programConfiguration.setUniforms(n.gl,c,i,{zoom:n.transform.zoom});r(c,n,f,s.buffers,i,y,h,p,k);l=f.coord.z;a=!1}}}},{"../source/pixels_to_tile_units":87,"../util/browser":192}],73:[function(n,t){"use strict";function i(n,t,i,u){var f,s,e,o;if(!n.isOpaquePass){for(f=n.gl,f.enable(f.DEPTH_TEST),n.depthMask(!0),f.depthFunc(f.LESS),s=u.length&&u[0].z,e=0;e<u.length;e++)o=u[e],n.setDepthSublayer(o.z-s),r(n,t,i,o);f.depthFunc(f.LEQUAL)}}function r(n,t,i,r){var s=n.gl,c,p,h,a,w,l,v,y,b;s.disable(s.STENCIL_TEST);c=t.getTile(r);p=n.transform.calculatePosMatrix(r,t.getSource().maxzoom);c.registerFadeDuration(n.style.animationLoop,i.paint["raster-fade-duration"]);h=n.useProgram("raster");s.uniformMatrix4fv(h.u_matrix,!1,p);s.uniform1f(h.u_brightness_low,i.paint["raster-brightness-min"]);s.uniform1f(h.u_brightness_high,i.paint["raster-brightness-max"]);s.uniform1f(h.u_saturation_factor,e(i.paint["raster-saturation"]));s.uniform1f(h.u_contrast_factor,f(i.paint["raster-contrast"]));s.uniform3fv(h.u_spin_weights,u(i.paint["raster-hue-rotate"]));l=c.sourceCache&&c.sourceCache.findLoadedParent(r,0,{});v=o(c,l,i,n.transform);s.activeTexture(s.TEXTURE0);s.bindTexture(s.TEXTURE_2D,c.texture);s.activeTexture(s.TEXTURE1);l?(s.bindTexture(s.TEXTURE_2D,l.texture),a=Math.pow(2,l.coord.z-c.coord.z),w=[c.coord.x*a%1,c.coord.y*a%1]):s.bindTexture(s.TEXTURE_2D,c.texture);s.uniform2fv(h.u_tl_parent,w||[0,0]);s.uniform1f(h.u_scale_parent,a||1);s.uniform1f(h.u_buffer_scale,1);s.uniform1f(h.u_fade_t,v.mix);s.uniform1f(h.u_opacity,v.opacity*i.paint["raster-opacity"]);s.uniform1i(h.u_image0,0);s.uniform1i(h.u_image1,1);y=c.boundsBuffer||n.rasterBoundsBuffer;b=c.boundsVAO||n.rasterBoundsVAO;b.bind(s,h,y);s.drawArrays(s.TRIANGLE_STRIP,0,y.length)}function u(n){n*=Math.PI/180;var i=Math.sin(n),t=Math.cos(n);return[(2*t+1)/3,(-Math.sqrt(3)*i-t+1)/3,(Math.sqrt(3)*i-t+1)/3]}function f(n){return n>0?1/(1-n):1+n}function e(n){return n>0?1-1/(1.001-n):-n}function o(n,t,i,r){var u=i.paint["raster-fade-duration"];if(n.sourceCache&&u>0){var f=Date.now(),e=(f-n.timeAdded)/u,a=t?(f-t.timeAdded)/u:-1,o=n.sourceCache.getSource(),h=r.coveringZoomLevel({tileSize:o.tileSize,roundZoom:o.roundZoom}),c=!t||Math.abs(t.coord.z-h)>Math.abs(n.coord.z-h),l=c&&n.refreshedUponExpiration?1:s.clamp(c?e:1-a,0,1);return n.refreshedUponExpiration&&e>=1&&(n.refreshedUponExpiration=!1),t?{opacity:1,mix:1-l}:{opacity:l,mix:0}}return{opacity:1,mix:0}}var s=n("../util/util");t.exports=i},{"../util/util":212}],74:[function(n,t){"use strict";function u(n,t,r,u){if(!n.isOpaquePass){var e=!(r.layout["text-allow-overlap"]||r.layout["icon-allow-overlap"]||r.layout["text-ignore-placement"]||r.layout["icon-ignore-placement"]),f=n.gl;e?f.disable(f.STENCIL_TEST):f.enable(f.STENCIL_TEST);n.setDepthSublayer(0);n.depthMask(!1);i(n,t,r,u,!1,r.paint["icon-translate"],r.paint["icon-translate-anchor"],r.layout["icon-rotation-alignment"],r.layout["icon-rotation-alignment"],r.layout["icon-size"]);i(n,t,r,u,!0,r.paint["text-translate"],r.paint["text-translate-anchor"],r.layout["text-rotation-alignment"],r.layout["text-pitch-alignment"],r.layout["text-size"]);t.map.showCollisionBoxes&&s(n,t,r,u)}}function i(n,t,i,r,u,o,s,h,c,l){var y,it,w,k,p;if(u||!n.style.sprite||n.style.sprite.loaded()){var v=n.gl,ut="map"===h,b="map"===c,tt=b;for(tt?v.enable(v.DEPTH_TEST):v.disable(v.DEPTH_TEST),w=0,k=r;w<k.length;w+=1){var d=k[w],g=t.getTile(d),a=g.getBucket(i);if(a&&(p=u?a.buffers.glyph:a.buffers.icon,p&&p.segments.length)){var ft=p.layerData[i.id],rt=ft.programConfiguration,nt=u||a.sdfIcons;y&&a.fontstack===it||(y=n.useProgram(nt?"symbolSDF":"symbolIcon",rt),rt.setUniforms(v,y,i,{zoom:n.transform.zoom}),f(y,n,u,nt,ut,b,a.fontstack,l,a.iconsNeedLinear,u?a.adjustedTextSize:a.adjustedIconSize));n.enableTileClippingMask(d);v.uniformMatrix4fv(y.u_matrix,!1,n.translatePosMatrix(d.posMatrix,g,o,s));e(y,n,i,g,p,u,nt,b,l);it=a.fontstack}}tt||v.enable(v.DEPTH_TEST)}}function f(n,t,i,r,u,f,e,s,h,c){var l=t.gl,a=t.transform,v,y;if(l.uniform1i(n.u_rotate_with_map,u),l.uniform1i(n.u_pitch_with_map,f),l.activeTexture(l.TEXTURE0),l.uniform1i(n.u_texture,0),i){if(v=e&&t.glyphSource.getGlyphAtlas(e),!v)return;v.updateTexture(l);l.uniform2f(n.u_texsize,v.width/4,v.height/4)}else{var p=t.options.rotating||t.options.zooming,w=1!==s||o.devicePixelRatio!==t.spriteAtlas.pixelRatio||h,b=f||a.pitch;t.spriteAtlas.bind(l,r||p||w||b);l.uniform2f(n.u_texsize,t.spriteAtlas.width/4,t.spriteAtlas.height/4)}l.activeTexture(l.TEXTURE1);t.frameHistory.bind(l);l.uniform1i(n.u_fadetexture,1);y=Math.log(s/c)/Math.LN2||0;l.uniform1f(n.u_zoom,10*(a.zoom-y));l.uniform1f(n.u_pitch,a.pitch/180*Math.PI);l.uniform1f(n.u_bearing,a.bearing/180*Math.PI);l.uniform1f(n.u_aspect_ratio,a.width/a.height)}function e(n,t,i,u,f,e,o,s,c){var l=t.gl,a=t.transform,v=c/(e?24:1),y,p;if(s?(y=h(u,v,a.zoom),l.uniform2f(n.u_extrude_scale,y,y)):(p=a.cameraToCenterDistance*v,l.uniform2f(n.u_extrude_scale,a.pixelsToGLUnits[0]*p,a.pixelsToGLUnits[1]*p)),o){var w=(e?"text":"icon")+"-halo-width",b=!i.isPaintValueFeatureConstant(w)||i.paint[w],k=v*(s?Math.cos(a._pitch):1)*a.cameraToCenterDistance;l.uniform1f(n.u_font_scale,v);l.uniform1f(n.u_gamma_scale,k);b&&(l.uniform1f(n.u_is_halo,1),r(f,i,l,n));l.uniform1f(n.u_is_halo,0)}r(f,i,l,n)}function r(n,t,i,r){for(var u,e=n.layerData[t.id],s=e&&e.paintVertexBuffer,f=0,o=n.segments;f<o.length;f+=1)u=o[f],u.vaos[t.id].bind(i,r,n.layoutVertexBuffer,n.elementBuffer,s,u.vertexOffset),i.drawElements(i.TRIANGLES,3*u.primitiveLength,i.UNSIGNED_SHORT,6*u.primitiveOffset)}var o=n("../util/browser"),s=n("./draw_collision_debug"),h=n("../source/pixels_to_tile_units");t.exports=u},{"../source/pixels_to_tile_units":87,"../util/browser":192,"./draw_collision_debug":68}],75:[function(n,t){"use strict";var i=function(){this.changeTimes=new Float64Array(256);this.changeOpacities=new Uint8Array(256);this.opacities=new Uint8ClampedArray(256);this.array=new Uint8Array(this.opacities.buffer);this.previousZoom=0;this.firstFrame=!0};i.prototype.record=function(n,t,i){var u=this,r,e,f;if(this.firstFrame&&(n=0,this.firstFrame=!1),t=Math.floor(10*t),t<this.previousZoom)for(r=t+1;r<=this.previousZoom;r++)u.changeTimes[r]=n,u.changeOpacities[r]=u.opacities[r];else for(r=t;r>this.previousZoom;r--)u.changeTimes[r]=n,u.changeOpacities[r]=u.opacities[r];for(r=0;r<256;r++)e=n-u.changeTimes[r],f=255*(i?e/i:1),u.opacities[r]=r<=t?u.changeOpacities[r]+f:u.changeOpacities[r]-f;this.changed=!0;this.previousZoom=t};i.prototype.bind=function(n){this.texture?(n.bindTexture(n.TEXTURE_2D,this.texture),this.changed&&(n.texSubImage2D(n.TEXTURE_2D,0,0,0,256,1,n.ALPHA,n.UNSIGNED_BYTE,this.array),this.changed=!1)):(this.texture=n.createTexture(),n.bindTexture(n.TEXTURE_2D,this.texture),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST),n.texImage2D(n.TEXTURE_2D,0,n.ALPHA,256,1,0,n.ALPHA,n.UNSIGNED_BYTE,this.array))};t.exports=i},{}],76:[function(n,t){"use strict";var r=n("../util/util"),i=function(n,t){this.width=n;this.height=t;this.nextRow=0;this.bytes=4;this.data=new Uint8Array(this.width*this.height*this.bytes);this.positions={}};i.prototype.setSprite=function(n){this.sprite=n};i.prototype.getDash=function(n,t){var i=n.join(",")+t;return this.positions[i]||(this.positions[i]=this.addDash(n,t)),this.positions[i]};i.prototype.addDash=function(n,t){var y=this,i=t?7:0,b=2*i+1,o,s,v,w,nt;if(this.nextRow+b>this.height)return r.warnOnce("LineAtlas out of space"),null;for(o=0,s=0;s<n.length;s++)o+=n[s];for(var h=this.width/o,p=h/2,k=n.length%2==1,c=-i;c<=i;c++)for(var tt=y.nextRow+i+c,it=y.width*tt,d=k?-n[n.length-1]:0,f=n[0],l=1,u=0;u<this.width;u++){for(;f<u/h;)d=f,f+=n[l],k&&l===n.length-1&&(f+=n[0]),l++;var rt=Math.abs(u-d*h),ut=Math.abs(u-f*h),e=Math.min(rt,ut),g=l%2==1,a=void 0;t?(v=i?c/i*(p+1):0,g?(w=p-Math.abs(v),a=Math.sqrt(e*e+w*w)):a=p-Math.sqrt(e*e+v*v)):a=(g?1:-1)*e;y.data[3+4*(it+u)]=Math.max(0,Math.min(255,a+128))}return nt={y:(this.nextRow+i+.5)/this.height,height:2*i/this.height,width:o},this.nextRow+=b,this.dirty=!0,nt};i.prototype.bind=function(n){this.texture?(n.bindTexture(n.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,n.texSubImage2D(n.TEXTURE_2D,0,0,0,this.width,this.height,n.RGBA,n.UNSIGNED_BYTE,this.data))):(this.texture=n.createTexture(),n.bindTexture(n.TEXTURE_2D,this.texture),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.REPEAT),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.REPEAT),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,this.width,this.height,0,n.RGBA,n.UNSIGNED_BYTE,this.data))};t.exports=i},{"../util/util":212}],77:[function(n,t){"use strict";var e=n("../util/browser"),v=n("@mapbox/gl-matrix").mat4,y=n("./frame_history"),s=n("../source/source_cache"),r=n("../data/extent"),h=n("../source/pixels_to_tile_units"),p=n("../util/util"),u=n("../data/buffer"),f=n("./vertex_array_object"),w=n("../data/raster_bounds_array"),c=n("../data/pos_array"),l=n("../data/program_configuration"),o=n("./shaders"),a={symbol:n("./draw_symbol"),circle:n("./draw_circle"),line:n("./draw_line"),fill:n("./draw_fill"),"fill-extrusion":n("./draw_fill_extrusion"),raster:n("./draw_raster"),background:n("./draw_background"),debug:n("./draw_debug")},i=function(n,t){this.gl=n;this.transform=t;this.reusableTextures={tiles:{},viewport:null};this.preFbos={};this.frameHistory=new y;this.setup();this.numSublayers=s.maxUnderzooming+s.maxOverzooming+1;this.depthEpsilon=1/Math.pow(2,16);this.lineWidthRange=n.getParameter(n.ALIASED_LINE_WIDTH_RANGE);this.basicFillProgramConfiguration=l.createStatic(["color","opacity"]);this.emptyProgramConfiguration=new l};i.prototype.resize=function(n,t){var i=this.gl;this.width=n*e.devicePixelRatio;this.height=t*e.devicePixelRatio;i.viewport(0,0,this.width,this.height)};i.prototype.setup=function(){var n=this.gl,i,t,e;n.verbose=!0;n.enable(n.BLEND);n.blendFunc(n.ONE,n.ONE_MINUS_SRC_ALPHA);n.enable(n.STENCIL_TEST);n.enable(n.DEPTH_TEST);n.depthFunc(n.LEQUAL);this._depthMask=!1;n.depthMask(!1);i=new c;i.emplaceBack(0,0);i.emplaceBack(r,0);i.emplaceBack(0,r);i.emplaceBack(r,r);this.tileExtentBuffer=u.fromStructArray(i,u.BufferType.VERTEX);this.tileExtentVAO=new f;this.tileExtentPatternVAO=new f;t=new c;t.emplaceBack(0,0);t.emplaceBack(r,0);t.emplaceBack(r,r);t.emplaceBack(0,r);t.emplaceBack(0,0);this.debugBuffer=u.fromStructArray(t,u.BufferType.VERTEX);this.debugVAO=new f;e=new w;e.emplaceBack(0,0,0,0);e.emplaceBack(r,0,32767,0);e.emplaceBack(0,r,0,32767);e.emplaceBack(r,r,32767,32767);this.rasterBoundsBuffer=u.fromStructArray(e,u.BufferType.VERTEX);this.rasterBoundsVAO=new f};i.prototype.clearColor=function(){var n=this.gl;n.clearColor(0,0,0,0);n.clear(n.COLOR_BUFFER_BIT)};i.prototype.clearStencil=function(){var n=this.gl;n.clearStencil(0);n.stencilMask(255);n.clear(n.STENCIL_BUFFER_BIT)};i.prototype.clearDepth=function(){var n=this.gl;n.clearDepth(1);this.depthMask(!0);n.clear(n.DEPTH_BUFFER_BIT)};i.prototype._renderTileClippingMasks=function(n){var i=this,t=this.gl,o,r,u,f,s,e;for(t.colorMask(!1,!1,!1,!1),this.depthMask(!1),t.disable(t.DEPTH_TEST),t.enable(t.STENCIL_TEST),t.stencilMask(248),t.stencilOp(t.KEEP,t.KEEP,t.REPLACE),o=1,this._tileClippingMaskIDs={},r=0,u=n;r<u.length;r+=1)f=u[r],s=i._tileClippingMaskIDs[f.id]=o++<<3,t.stencilFunc(t.ALWAYS,s,248),e=i.useProgram("fill",i.basicFillProgramConfiguration),t.uniformMatrix4fv(e.u_matrix,!1,f.posMatrix),i.tileExtentVAO.bind(t,e,i.tileExtentBuffer),t.drawArrays(t.TRIANGLE_STRIP,0,i.tileExtentBuffer.length);t.stencilMask(0);t.colorMask(!0,!0,!0,!0);this.depthMask(!0);t.enable(t.DEPTH_TEST)};i.prototype.enableTileClippingMask=function(n){var t=this.gl;t.stencilFunc(t.EQUAL,this._tileClippingMaskIDs[n.id],248)};i.prototype.prepareBuffers=function(){};i.prototype.bindDefaultFramebuffer=function(){var n=this.gl;n.bindFramebuffer(n.FRAMEBUFFER,null)};i.prototype.render=function(n,t){if(this.style=n,this.options=t,this.lineAtlas=n.lineAtlas,this.spriteAtlas=n.spriteAtlas,this.spriteAtlas.setSprite(n.sprite),this.glyphSource=n.glyphSource,this.frameHistory.record(Date.now(),this.transform.zoom,n.getTransition().duration),this.prepareBuffers(),this.clearColor(),this.clearDepth(),this.showOverdrawInspector(t.showOverdrawInspector),this.depthRange=(n._order.length+2)*this.numSublayers*this.depthEpsilon,this.isOpaquePass=!0,this.renderPass(),this.isOpaquePass=!1,this.renderPass(),this.options.showTileBoundaries){var i=this.style.sourceCaches[Object.keys(this.style.sourceCaches)[0]];i&&a.debug(this,i,i.getVisibleCoordinates())}};i.prototype.renderPass=function(){var t,i,n=this,u=this.style._order,f,r;for(this.currentLayer=this.isOpaquePass?u.length-1:0,this.isOpaquePass?this._showOverdrawInspector||this.gl.disable(this.gl.BLEND):this.gl.enable(this.gl.BLEND),f=0;f<u.length;f++)r=n.style._layers[u[n.currentLayer]],r.source!==(t&&t.id)&&(t=n.style.sourceCaches[r.source],i=[],t&&(t.prepare&&t.prepare(),n.clearStencil(),i=t.getVisibleCoordinates(),t.getSource().isTileClipped&&n._renderTileClippingMasks(i)),n.isOpaquePass||i.reverse()),n.renderLayer(n,t,r,i),n.currentLayer+=n.isOpaquePass?-1:1};i.prototype.depthMask=function(n){n!==this._depthMask&&(this._depthMask=n,this.gl.depthMask(n))};i.prototype.renderLayer=function(n,t,i,r){i.isHidden(this.transform.zoom)||("background"===i.type||r.length)&&(this.id=i.id,a[i.type](n,t,i,r))};i.prototype.setDepthSublayer=function(n){var t=1-((1+this.currentLayer)*this.numSublayers+n)*this.depthEpsilon,i=t-1+this.depthRange;this.gl.depthRange(i,t)};i.prototype.translatePosMatrix=function(n,t,i,r){var u,f,o,e;return!i[0]&&!i[1]?n:("viewport"===r&&(u=Math.sin(-this.transform.angle),f=Math.cos(-this.transform.angle),i=[i[0]*f-i[1]*u,i[0]*u+i[1]*f]),o=[h(t,i[0],this.transform.zoom),h(t,i[1],this.transform.zoom),0],e=new Float32Array(16),v.translate(e,n,o),e)};i.prototype.saveTileTexture=function(n){var t=this.reusableTextures.tiles[n.size];t?t.push(n):this.reusableTextures.tiles[n.size]=[n]};i.prototype.saveViewportTexture=function(n){this.reusableTextures.viewport=n};i.prototype.getTileTexture=function(n){var t=this.reusableTextures.tiles[n];return t&&t.length>0?t.pop():null};i.prototype.getViewportTexture=function(n,t){var i=this.reusableTextures.viewport;if(i)return i.width===n&&i.height===t?i:(this.gl.deleteTexture(i),void(this.reusableTextures.viewport=null))};i.prototype.lineWidth=function(n){this.gl.lineWidth(p.clamp(n,this.lineWidthRange[0],this.lineWidthRange[1]))};i.prototype.showOverdrawInspector=function(n){var t,r,i;(n||this._showOverdrawInspector)&&(this._showOverdrawInspector=n,t=this.gl,n?(t.blendFunc(t.CONSTANT_COLOR,t.ONE),r=8,i=1/r,t.blendColor(i,i,i,0),t.clearColor(0,0,0,1),t.clear(t.COLOR_BUFFER_BIT)):t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA))};i.prototype.createProgram=function(n,t){var i=this.gl,r=i.createProgram(),y=o[n],s="#define MAPBOX_GL_JS\n#define DEVICE_PIXEL_RATIO "+e.devicePixelRatio.toFixed(1)+"\n",u,a,w,f,v;this._showOverdrawInspector&&(s+="#define OVERDRAW_INSPECTOR;\n");var b=t.applyPragmas(s+o.prelude.fragmentSource+y.fragmentSource,"fragment"),k=t.applyPragmas(s+o.prelude.vertexSource+y.vertexSource,"vertex"),h=i.createShader(i.FRAGMENT_SHADER);i.shaderSource(h,b);i.compileShader(h);i.attachShader(r,h);u=i.createShader(i.VERTEX_SHADER);i.shaderSource(u,k);i.compileShader(u);i.attachShader(r,u);i.linkProgram(r);for(var p=i.getProgramParameter(r,i.ACTIVE_ATTRIBUTES),c={program:r,numAttributes:p},l=0;l<p;l++)a=i.getActiveAttrib(r,l),c[a.name]=i.getAttribLocation(r,a.name);for(w=i.getProgramParameter(r,i.ACTIVE_UNIFORMS),f=0;f<w;f++)v=i.getActiveUniform(r,f),c[v.name]=i.getUniformLocation(r,v.name);return c};i.prototype._createProgramCached=function(n,t){this.cache=this.cache||{};var i=""+n+(t.cacheKey||"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[i]||(this.cache[i]=this.createProgram(n,t)),this.cache[i]};i.prototype.useProgram=function(n,t){var r=this.gl,i=this._createProgramCached(n,t||this.emptyProgramConfiguration);return this.currentProgram!==i&&(r.useProgram(i.program),this.currentProgram=i),i};t.exports=i},{"../data/buffer":51,"../data/extent":54,"../data/pos_array":57,"../data/program_configuration":58,"../data/raster_bounds_array":59,"../source/pixels_to_tile_units":87,"../source/source_cache":92,"../util/browser":192,"../util/util":212,"./draw_background":66,"./draw_circle":67,"./draw_debug":69,"./draw_fill":70,"./draw_fill_extrusion":71,"./draw_line":72,"./draw_raster":73,"./draw_symbol":74,"./frame_history":75,"./shaders":79,"./vertex_array_object":80,"@mapbox/gl-matrix":1}],78:[function(n,t,i){"use strict";var r=n("../source/pixels_to_tile_units");i.prepare=function(n,t,i){var r=t.gl,u=t.spriteAtlas.getPosition(n.from,!0),f=t.spriteAtlas.getPosition(n.to,!0);u&&f&&(r.uniform1i(i.u_image,0),r.uniform2fv(i.u_pattern_tl_a,u.tl),r.uniform2fv(i.u_pattern_br_a,u.br),r.uniform2fv(i.u_pattern_tl_b,f.tl),r.uniform2fv(i.u_pattern_br_b,f.br),r.uniform1f(i.u_mix,n.t),r.uniform2fv(i.u_pattern_size_a,u.size),r.uniform2fv(i.u_pattern_size_b,f.size),r.uniform1f(i.u_scale_a,n.fromScale),r.uniform1f(i.u_scale_b,n.toScale),r.activeTexture(r.TEXTURE0),t.spriteAtlas.bind(r,!0))};i.setTile=function(n,t,i){var u=t.gl;u.uniform1f(i.u_tile_units_to_pixels,1/r(n,1,t.transform.tileZoom));var f=Math.pow(2,n.coord.z),e=n.tileSize*Math.pow(2,t.transform.tileZoom)/f,o=e*(n.coord.x+n.coord.w*f),s=e*n.coord.y;u.uniform2f(i.u_pixel_coord_upper,o>>16,s>>16);u.uniform2f(i.u_pixel_coord_lower,65535&o,65535&s)}},{"../source/pixels_to_tile_units":87}],79:[function(n,t){"use strict";var i=n("path");t.exports={prelude:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif\n\nfloat evaluate_zoom_function_1(const vec4 values, const float t) {\n    if (t < 1.0) {\n        return mix(values[0], values[1], t);\n    } else if (t < 2.0) {\n        return mix(values[1], values[2], t - 1.0);\n    } else {\n        return mix(values[2], values[3], t - 2.0);\n    }\n}\nvec4 evaluate_zoom_function_4(const vec4 value0, const vec4 value1, const vec4 value2, const vec4 value3, const float t) {\n    if (t < 1.0) {\n        return mix(value0, value1, t);\n    } else if (t < 2.0) {\n        return mix(value1, value2, t - 1.0);\n    } else {\n        return mix(value2, value3, t - 2.0);\n    }\n}\n\n\n// To minimize the number of attributes needed in the mapbox-gl-native shaders,\n// we encode a 4-component color into a pair of floats (i.e. a vec2) as follows:\n// [ floor(color.r * 255) * 256 + color.g * 255,\n//   floor(color.b * 255) * 256 + color.g * 255 ]\nvec4 decode_color(const vec2 encodedColor) {\n    float r = floor(encodedColor[0]/256.0)/255.0;\n    float g = (encodedColor[0] - r*256.0*255.0)/255.0;\n    float b = floor(encodedColor[1]/256.0)/255.0;\n    float a = (encodedColor[1] - b*256.0*255.0)/255.0;\n    return vec4(r, g, b, a);\n}\n\n// Unpack a pair of paint values and interpolate between them.\nfloat unpack_mix_vec2(const vec2 packedValue, const float t) {\n    return mix(packedValue[0], packedValue[1], t);\n}\n\n// Unpack a pair of paint values and interpolate between them.\nvec4 unpack_mix_vec4(const vec4 packedColors, const float t) {\n    vec4 minColor = decode_color(vec2(packedColors[0], packedColors[1]));\n    vec4 maxColor = decode_color(vec2(packedColors[2], packedColors[3]));\n    return mix(minColor, maxColor, t);\n}\n\n// The offset depends on how many pixels are between the world origin and the edge of the tile:\n// vec2 offset = mod(pixel_coord, size)\n//\n// At high zoom levels there are a ton of pixels between the world origin and the edge of the tile.\n// The glsl spec only guarantees 16 bits of precision for highp floats. We need more than that.\n//\n// The pixel_coord is passed in as two 16 bit values:\n// pixel_coord_upper = floor(pixel_coord / 2^16)\n// pixel_coord_lower = mod(pixel_coord, 2^16)\n//\n// The offset is calculated in a series of steps that should preserve this precision:\nvec2 get_pattern_pos(const vec2 pixel_coord_upper, const vec2 pixel_coord_lower,\n    const vec2 pattern_size, const float tile_units_to_pixels, const vec2 pos) {\n\n    vec2 offset = mod(mod(mod(pixel_coord_upper, pattern_size) * 256.0, pattern_size) * 256.0 + pixel_coord_lower, pattern_size);\n    return (tile_units_to_pixels * pos + offset) / pattern_size;\n}\n"},circle:{fragmentSource:"#pragma mapbox: define lowp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\n\nvarying vec2 v_extrude;\nvarying lowp float v_antialiasblur;\n\nvoid main() {\n    #pragma mapbox: initialize lowp vec4 color\n    #pragma mapbox: initialize mediump float radius\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp vec4 stroke_color\n    #pragma mapbox: initialize mediump float stroke_width\n    #pragma mapbox: initialize lowp float stroke_opacity\n\n    float extrude_length = length(v_extrude);\n    float antialiased_blur = -max(blur, v_antialiasblur);\n\n    float opacity_t = smoothstep(0.0, antialiased_blur, extrude_length - 1.0);\n\n    float color_t = stroke_width < 0.01 ? 0.0 : smoothstep(\n        antialiased_blur,\n        0.0,\n        extrude_length - radius / (radius + stroke_width)\n    );\n\n    gl_FragColor = opacity_t * mix(color * opacity, stroke_color * stroke_opacity, color_t);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform bool u_scale_with_map;\nuniform vec2 u_extrude_scale;\n\nattribute vec2 a_pos;\n\n#pragma mapbox: define lowp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\n\nvarying vec2 v_extrude;\nvarying lowp float v_antialiasblur;\n\nvoid main(void) {\n    #pragma mapbox: initialize lowp vec4 color\n    #pragma mapbox: initialize mediump float radius\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp vec4 stroke_color\n    #pragma mapbox: initialize mediump float stroke_width\n    #pragma mapbox: initialize lowp float stroke_opacity\n\n    // unencode the extrusion vector that we snuck into the a_pos vector\n    v_extrude = vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\n\n    vec2 extrude = v_extrude * (radius + stroke_width) * u_extrude_scale;\n    // multiply a_pos by 0.5, since we had it * 2 in order to sneak\n    // in extrusion data\n    gl_Position = u_matrix * vec4(floor(a_pos * 0.5), 0, 1);\n\n    if (u_scale_with_map) {\n        gl_Position.xy += extrude;\n    } else {\n        gl_Position.xy += extrude * gl_Position.w;\n    }\n\n    // This is a minimum blur distance that serves as a faux-antialiasing for\n    // the circle. since blur is a ratio of the circle's size and the intent is\n    // to keep the blur at roughly 1px, the two are inversely related.\n    v_antialiasblur = 1.0 / DEVICE_PIXEL_RATIO / (radius + stroke_width);\n}\n"},collisionBox:{fragmentSource:"uniform float u_zoom;\nuniform float u_maxzoom;\n\nvarying float v_max_zoom;\nvarying float v_placement_zoom;\n\nvoid main() {\n\n    float alpha = 0.5;\n\n    gl_FragColor = vec4(0.0, 1.0, 0.0, 1.0) * alpha;\n\n    if (v_placement_zoom > u_zoom) {\n        gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0) * alpha;\n    }\n\n    if (u_zoom >= v_max_zoom) {\n        gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0) * alpha * 0.25;\n    }\n\n    if (v_placement_zoom >= u_maxzoom) {\n        gl_FragColor = vec4(0.0, 0.0, 1.0, 1.0) * alpha * 0.2;\n    }\n}\n",vertexSource:"attribute vec2 a_pos;\nattribute vec2 a_extrude;\nattribute vec2 a_data;\n\nuniform mat4 u_matrix;\nuniform float u_scale;\n\nvarying float v_max_zoom;\nvarying float v_placement_zoom;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos + a_extrude / u_scale, 0.0, 1.0);\n\n    v_max_zoom = a_data.x;\n    v_placement_zoom = a_data.y;\n}\n"},debug:{fragmentSource:"uniform lowp vec4 u_color;\n\nvoid main() {\n    gl_FragColor = u_color;\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, step(32767.0, a_pos.x), 1);\n}\n"},fill:{fragmentSource:"#pragma mapbox: define lowp vec4 color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp vec4 color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_FragColor = color * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\n#pragma mapbox: define lowp vec4 color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp vec4 color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},fillOutline:{fragmentSource:"#pragma mapbox: define lowp vec4 outline_color\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_pos;\n\nvoid main() {\n    #pragma mapbox: initialize lowp vec4 outline_color\n    #pragma mapbox: initialize lowp float opacity\n\n    float dist = length(v_pos - gl_FragCoord.xy);\n    float alpha = smoothstep(1.0, 0.0, dist);\n    gl_FragColor = outline_color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\nuniform vec2 u_world;\n\nvarying vec2 v_pos;\n\n#pragma mapbox: define lowp vec4 outline_color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp vec4 outline_color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos = (gl_Position.xy / gl_Position.w + 1.0) / 2.0 * u_world;\n}\n"},fillOutlinePattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec2 v_pos;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a, u_pattern_br_a, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b, u_pattern_br_b, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    // find distance to outline for alpha interpolation\n\n    float dist = length(v_pos - gl_FragCoord.xy);\n    float alpha = smoothstep(1.0, 0.0, dist);\n\n\n    gl_FragColor = mix(color1, color2, u_mix) * alpha * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_world;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec2 v_pos;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, a_pos);\n\n    v_pos = (gl_Position.xy / gl_Position.w + 1.0) / 2.0 * u_world;\n}\n"},fillPattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a, u_pattern_br_a, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b, u_pattern_br_b, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    gl_FragColor = mix(color1, color2, u_mix) * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, a_pos);\n}\n"},fillExtrusion:{fragmentSource:"varying vec4 v_color;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 color\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n    #pragma mapbox: initialize lowp vec4 color\n\n    gl_FragColor = v_color;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec3 u_lightcolor;\nuniform lowp vec3 u_lightpos;\nuniform lowp float u_lightintensity;\n\nattribute vec2 a_pos;\nattribute vec3 a_normal;\nattribute float a_edgedistance;\n\nvarying vec4 v_color;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n\n#pragma mapbox: define lowp vec4 color\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n    #pragma mapbox: initialize lowp vec4 color\n\n    float ed = a_edgedistance; // use each attrib in order to not trip a VAO assert\n    float t = mod(a_normal.x, 2.0);\n\n    gl_Position = u_matrix * vec4(a_pos, t > 0.0 ? height : base, 1);\n\n    // Relative luminance (how dark/bright is the surface color?)\n    float colorvalue = color.r * 0.2126 + color.g * 0.7152 + color.b * 0.0722;\n\n    v_color = vec4(0.0, 0.0, 0.0, 1.0);\n\n    // Add slight ambient lighting so no extrusions are totally black\n    vec4 ambientlight = vec4(0.03, 0.03, 0.03, 1.0);\n    color += ambientlight;\n\n    // Calculate cos(theta), where theta is the angle between surface normal and diffuse light ray\n    float directional = clamp(dot(a_normal / 16384.0, u_lightpos), 0.0, 1.0);\n\n    // Adjust directional so that\n    // the range of values for highlight/shading is narrower\n    // with lower light intensity\n    // and with lighter/brighter surface colors\n    directional = mix((1.0 - u_lightintensity), max((1.0 - colorvalue + u_lightintensity), 1.0), directional);\n\n    // Add gradient along z axis of side surfaces\n    if (a_normal.y != 0.0) {\n        directional *= clamp((t + base) * pow(height / 150.0, 0.5), mix(0.7, 0.98, 1.0 - u_lightintensity), 1.0);\n    }\n\n    // Assign final color based on surface + ambient light color, diffuse light directional, and light color\n    // with lower bounds adjusted to hue of light\n    // so that shading is tinted with the complementary (opposite) color to the light color\n    v_color.r += clamp(color.r * directional * u_lightcolor.r, mix(0.0, 0.3, 1.0 - u_lightcolor.r), 1.0);\n    v_color.g += clamp(color.g * directional * u_lightcolor.g, mix(0.0, 0.3, 1.0 - u_lightcolor.g), 1.0);\n    v_color.b += clamp(color.b * directional * u_lightcolor.b, mix(0.0, 0.3, 1.0 - u_lightcolor.b), 1.0);\n}\n"},fillExtrusionPattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec4 v_lighting;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a, u_pattern_br_a, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b, u_pattern_br_b, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    vec4 mixedColor = mix(color1, color2, u_mix);\n\n    gl_FragColor = mixedColor * v_lighting;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\nuniform float u_height_factor;\n\nuniform vec3 u_lightcolor;\nuniform lowp vec3 u_lightpos;\nuniform lowp float u_lightintensity;\n\nattribute vec2 a_pos;\nattribute vec3 a_normal;\nattribute float a_edgedistance;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec4 v_lighting;\nvarying float v_directional;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n\n    float t = mod(a_normal.x, 2.0);\n    float z = t > 0.0 ? height : base;\n\n    gl_Position = u_matrix * vec4(a_pos, z, 1);\n\n    vec2 pos = a_normal.x == 1.0 && a_normal.y == 0.0 && a_normal.z == 16384.0\n        ? a_pos // extrusion top\n        : vec2(a_edgedistance, z * u_height_factor); // extrusion side\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, pos);\n\n    v_lighting = vec4(0.0, 0.0, 0.0, 1.0);\n    float directional = clamp(dot(a_normal / 16383.0, u_lightpos), 0.0, 1.0);\n    directional = mix((1.0 - u_lightintensity), max((0.5 + u_lightintensity), 1.0), directional);\n\n    if (a_normal.y != 0.0) {\n        directional *= clamp((t + base) * pow(height / 150.0, 0.5), mix(0.7, 0.98, 1.0 - u_lightintensity), 1.0);\n    }\n\n    v_lighting.rgb += clamp(directional * u_lightcolor, mix(vec3(0.0), vec3(0.3), 1.0 - u_lightcolor), vec3(1.0));\n}\n"},extrusionTexture:{fragmentSource:"uniform sampler2D u_texture;\nuniform float u_opacity;\n\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_FragColor = texture2D(u_texture, v_pos) * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(0.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform int u_xdim;\nuniform int u_ydim;\nattribute vec2 a_pos;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos.x = a_pos.x / float(u_xdim);\n    v_pos.y = 1.0 - a_pos.y / float(u_ydim);\n}\n"},line:{fragmentSource:"#pragma mapbox: define lowp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_width2;\nvarying vec2 v_normal;\nvarying float v_gamma_scale;\n\nvoid main() {\n    #pragma mapbox: initialize lowp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    gl_FragColor = color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\n// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\nattribute vec2 a_pos;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform mediump float u_width;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define lowp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n\nvoid main() {\n    #pragma mapbox: initialize lowp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n\n    // We store the texture normals in the most insignificant bit\n    // transform y so that 0 => -1 and 1 => 1\n    // In the texture normal, x is 0 if the normal points straight up/down and 1 if it's a round cap\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = mod(a_pos, 2.0);\n    normal.y = sign(normal.y - 0.5);\n    v_normal = normal;\n\n\n    // these transformations used to be applied in the JS and native code bases. \n    // moved them into the shader for clarity and simplicity. \n    gapwidth = gapwidth / 2.0;\n    float width = u_width / 2.0;\n    offset = -1.0 * offset; \n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + width * (gapwidth > 0.0 ? 2.0 : 1.0) + ANTIALIASING;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    // Remove the texture normal bit to get the position\n    vec2 pos = floor(a_pos * 0.5);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_width2 = vec2(outset, inset);\n}\n"},linePattern:{fragmentSource:"uniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform float u_fade;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_linesofar;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    float x_a = mod(v_linesofar / u_pattern_size_a.x, 1.0);\n    float x_b = mod(v_linesofar / u_pattern_size_b.x, 1.0);\n    float y_a = 0.5 + (v_normal.y * v_width2.s / u_pattern_size_a.y);\n    float y_b = 0.5 + (v_normal.y * v_width2.s / u_pattern_size_b.y);\n    vec2 pos_a = mix(u_pattern_tl_a, u_pattern_br_a, vec2(x_a, y_a));\n    vec2 pos_b = mix(u_pattern_tl_b, u_pattern_br_b, vec2(x_b, y_b));\n\n    vec4 color = mix(texture2D(u_image, pos_a), texture2D(u_image, pos_b), u_fade);\n\n    gl_FragColor = color * alpha * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\n// We scale the distance before adding it to the buffers so that we can store\n// long distances for long segments. Use this value to unscale the distance.\n#define LINE_DISTANCE_SCALE 2.0\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\nattribute vec2 a_pos;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform mediump float u_width;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_linesofar;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float gapwidth\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n    float a_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * LINE_DISTANCE_SCALE;\n\n    // We store the texture normals in the most insignificant bit\n    // transform y so that 0 => -1 and 1 => 1\n    // In the texture normal, x is 0 if the normal points straight up/down and 1 if it's a round cap\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = mod(a_pos, 2.0);\n    normal.y = sign(normal.y - 0.5);\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases. \n    // moved them into the shader for clarity and simplicity. \n    gapwidth = gapwidth / 2.0;\n    float width = u_width / 2.0;\n    offset = -1.0 * offset; \n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + width * (gapwidth > 0.0 ? 2.0 : 1.0) + ANTIALIASING;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    // Remove the texture normal bit to get the position\n    vec2 pos = floor(a_pos * 0.5);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_linesofar = a_linesofar;\n    v_width2 = vec2(outset, inset);\n}\n"},lineSDF:{fragmentSource:"\nuniform sampler2D u_image;\nuniform float u_sdfgamma;\nuniform float u_mix;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying vec2 v_tex_a;\nvarying vec2 v_tex_b;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define lowp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    float sdfdist_a = texture2D(u_image, v_tex_a).a;\n    float sdfdist_b = texture2D(u_image, v_tex_b).a;\n    float sdfdist = mix(sdfdist_a, sdfdist_b, u_mix);\n    alpha *= smoothstep(0.5 - u_sdfgamma, 0.5 + u_sdfgamma, sdfdist);\n\n    gl_FragColor = color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\n// We scale the distance before adding it to the buffers so that we can store\n// long distances for long segments. Use this value to unscale the distance.\n#define LINE_DISTANCE_SCALE 2.0\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\nattribute vec2 a_pos;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_patternscale_a;\nuniform float u_tex_y_a;\nuniform vec2 u_patternscale_b;\nuniform float u_tex_y_b;\nuniform vec2 u_gl_units_to_pixels;\nuniform mediump float u_width;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying vec2 v_tex_a;\nvarying vec2 v_tex_b;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define lowp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n\nvoid main() {\n    #pragma mapbox: initialize lowp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n    float a_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * LINE_DISTANCE_SCALE;\n\n    // We store the texture normals in the most insignificant bit\n    // transform y so that 0 => -1 and 1 => 1\n    // In the texture normal, x is 0 if the normal points straight up/down and 1 if it's a round cap\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = mod(a_pos, 2.0);\n    normal.y = sign(normal.y - 0.5);\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases. \n    // moved them into the shader for clarity and simplicity. \n    gapwidth = gapwidth / 2.0;\n    float width = u_width / 2.0;\n    offset = -1.0 * offset;\n \n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + width * (gapwidth > 0.0 ? 2.0 : 1.0) + ANTIALIASING;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist =outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    // Remove the texture normal bit to get the position\n    vec2 pos = floor(a_pos * 0.5);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_tex_a = vec2(a_linesofar * u_patternscale_a.x, normal.y * u_patternscale_a.y + u_tex_y_a);\n    v_tex_b = vec2(a_linesofar * u_patternscale_b.x, normal.y * u_patternscale_b.y + u_tex_y_b);\n\n    v_width2 = vec2(outset, inset);\n}\n"},raster:{fragmentSource:"uniform float u_fade_t;\nuniform float u_opacity;\nuniform sampler2D u_image0;\nuniform sampler2D u_image1;\nvarying vec2 v_pos0;\nvarying vec2 v_pos1;\n\nuniform float u_brightness_low;\nuniform float u_brightness_high;\n\nuniform float u_saturation_factor;\nuniform float u_contrast_factor;\nuniform vec3 u_spin_weights;\n\nvoid main() {\n\n    // read and cross-fade colors from the main and parent tiles\n    vec4 color0 = texture2D(u_image0, v_pos0);\n    vec4 color1 = texture2D(u_image1, v_pos1);\n    vec4 color = mix(color0, color1, u_fade_t);\n    color.a *= u_opacity;\n    vec3 rgb = color.rgb;\n\n    // spin\n    rgb = vec3(\n        dot(rgb, u_spin_weights.xyz),\n        dot(rgb, u_spin_weights.zxy),\n        dot(rgb, u_spin_weights.yzx));\n\n    // saturation\n    float average = (color.r + color.g + color.b) / 3.0;\n    rgb += (average - rgb) * u_saturation_factor;\n\n    // contrast\n    rgb = (rgb - 0.5) * u_contrast_factor + 0.5;\n\n    // brightness\n    vec3 u_high_vec = vec3(u_brightness_low, u_brightness_low, u_brightness_low);\n    vec3 u_low_vec = vec3(u_brightness_high, u_brightness_high, u_brightness_high);\n\n    gl_FragColor = vec4(mix(u_high_vec, u_low_vec, rgb) * color.a, color.a);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_tl_parent;\nuniform float u_scale_parent;\nuniform float u_buffer_scale;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos0;\nvarying vec2 v_pos1;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos0 = (((a_texture_pos / 32767.0) - 0.5) / u_buffer_scale ) + 0.5;\n    v_pos1 = (v_pos0 * u_scale_parent) + u_tl_parent;\n}\n"},symbolIcon:{fragmentSource:"uniform sampler2D u_texture;\nuniform sampler2D u_fadetexture;\n\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_tex;\nvarying vec2 v_fade_tex;\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    lowp float alpha = texture2D(u_fadetexture, v_fade_tex).a * opacity;\n    gl_FragColor = texture2D(u_texture, v_tex) * alpha;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"\nattribute vec4 a_pos_offset;\nattribute vec2 a_texture_pos;\nattribute vec4 a_data;\n\n#pragma mapbox: define lowp float opacity\n\n// matrix is for the vertex position.\nuniform mat4 u_matrix;\n\nuniform mediump float u_zoom;\nuniform bool u_rotate_with_map;\nuniform vec2 u_extrude_scale;\n\nuniform vec2 u_texsize;\n\nvarying vec2 v_tex;\nvarying vec2 v_fade_tex;\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 a_pos = a_pos_offset.xy;\n    vec2 a_offset = a_pos_offset.zw;\n\n    vec2 a_tex = a_texture_pos.xy;\n    mediump float a_labelminzoom = a_data[0];\n    mediump vec2 a_zoom = a_data.pq;\n    mediump float a_minzoom = a_zoom[0];\n    mediump float a_maxzoom = a_zoom[1];\n\n    // u_zoom is the current zoom level adjusted for the change in font size\n    mediump float z = 2.0 - step(a_minzoom, u_zoom) - (1.0 - step(a_maxzoom, u_zoom));\n\n    vec2 extrude = u_extrude_scale * (a_offset / 64.0);\n    if (u_rotate_with_map) {\n        gl_Position = u_matrix * vec4(a_pos + extrude, 0, 1);\n        gl_Position.z += z * gl_Position.w;\n    } else {\n        gl_Position = u_matrix * vec4(a_pos, 0, 1) + vec4(extrude, 0, 0);\n    }\n\n    v_tex = a_tex / u_texsize;\n    v_fade_tex = vec2(a_labelminzoom / 255.0, 0.0);\n}\n"},symbolSDF:{fragmentSource:"#define SDF_PX 8.0\n#define EDGE_GAMMA 0.105/DEVICE_PIXEL_RATIO\n\nuniform bool u_is_halo;\n#pragma mapbox: define lowp vec4 fill_color\n#pragma mapbox: define lowp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\n\nuniform sampler2D u_texture;\nuniform sampler2D u_fadetexture;\nuniform lowp float u_font_scale;\nuniform highp float u_gamma_scale;\n\nvarying vec2 v_tex;\nvarying vec2 v_fade_tex;\nvarying float v_gamma_scale;\n\nvoid main() {\n    #pragma mapbox: initialize lowp vec4 fill_color\n    #pragma mapbox: initialize lowp vec4 halo_color\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float halo_width\n    #pragma mapbox: initialize lowp float halo_blur\n\n    lowp vec4 color = fill_color;\n    highp float gamma = EDGE_GAMMA / u_gamma_scale;\n    lowp float buff = (256.0 - 64.0) / 256.0;\n    if (u_is_halo) {\n        color = halo_color;\n        gamma = (halo_blur * 1.19 / SDF_PX + EDGE_GAMMA) / u_gamma_scale;\n        buff = (6.0 - halo_width / u_font_scale) / SDF_PX;\n    }\n\n    lowp float dist = texture2D(u_texture, v_tex).a;\n    lowp float fade_alpha = texture2D(u_fadetexture, v_fade_tex).a;\n    highp float gamma_scaled = gamma * v_gamma_scale;\n    highp float alpha = smoothstep(buff - gamma_scaled, buff + gamma_scaled, dist) * fade_alpha;\n\n    gl_FragColor = color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"const float PI = 3.141592653589793;\n\nattribute vec4 a_pos_offset;\nattribute vec2 a_texture_pos;\nattribute vec4 a_data;\n\n#pragma mapbox: define lowp vec4 fill_color\n#pragma mapbox: define lowp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\n\n// matrix is for the vertex position.\nuniform mat4 u_matrix;\n\nuniform mediump float u_zoom;\nuniform bool u_rotate_with_map;\nuniform bool u_pitch_with_map;\nuniform mediump float u_pitch;\nuniform mediump float u_bearing;\nuniform mediump float u_aspect_ratio;\nuniform vec2 u_extrude_scale;\n\nuniform vec2 u_texsize;\n\nvarying vec2 v_tex;\nvarying vec2 v_fade_tex;\nvarying float v_gamma_scale;\n\nvoid main() {\n    #pragma mapbox: initialize lowp vec4 fill_color\n    #pragma mapbox: initialize lowp vec4 halo_color\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float halo_width\n    #pragma mapbox: initialize lowp float halo_blur\n\n    vec2 a_pos = a_pos_offset.xy;\n    vec2 a_offset = a_pos_offset.zw;\n\n    vec2 a_tex = a_texture_pos.xy;\n    mediump float a_labelminzoom = a_data[0];\n    mediump vec2 a_zoom = a_data.pq;\n    mediump float a_minzoom = a_zoom[0];\n    mediump float a_maxzoom = a_zoom[1];\n\n    // u_zoom is the current zoom level adjusted for the change in font size\n    mediump float z = 2.0 - step(a_minzoom, u_zoom) - (1.0 - step(a_maxzoom, u_zoom));\n\n    // pitch-alignment: map\n    // rotation-alignment: map | viewport\n    if (u_pitch_with_map) {\n        lowp float angle = u_rotate_with_map ? (a_data[1] / 256.0 * 2.0 * PI) : u_bearing;\n        lowp float asin = sin(angle);\n        lowp float acos = cos(angle);\n        mat2 RotationMatrix = mat2(acos, asin, -1.0 * asin, acos);\n        vec2 offset = RotationMatrix * a_offset;\n        vec2 extrude = u_extrude_scale * (offset / 64.0);\n        gl_Position = u_matrix * vec4(a_pos + extrude, 0, 1);\n        gl_Position.z += z * gl_Position.w;\n    // pitch-alignment: viewport\n    // rotation-alignment: map\n    } else if (u_rotate_with_map) {\n        // foreshortening factor to apply on pitched maps\n        // as a label goes from horizontal <=> vertical in angle\n        // it goes from 0% foreshortening to up to around 70% foreshortening\n        lowp float pitchfactor = 1.0 - cos(u_pitch * sin(u_pitch * 0.75));\n\n        lowp float lineangle = a_data[1] / 256.0 * 2.0 * PI;\n\n        // use the lineangle to position points a,b along the line\n        // project the points and calculate the label angle in projected space\n        // this calculation allows labels to be rendered unskewed on pitched maps\n        vec4 a = u_matrix * vec4(a_pos, 0, 1);\n        vec4 b = u_matrix * vec4(a_pos + vec2(cos(lineangle),sin(lineangle)), 0, 1);\n        lowp float angle = atan((b[1]/b[3] - a[1]/a[3])/u_aspect_ratio, b[0]/b[3] - a[0]/a[3]);\n        lowp float asin = sin(angle);\n        lowp float acos = cos(angle);\n        mat2 RotationMatrix = mat2(acos, -1.0 * asin, asin, acos);\n\n        vec2 offset = RotationMatrix * (vec2((1.0-pitchfactor)+(pitchfactor*cos(angle*2.0)), 1.0) * a_offset);\n        vec2 extrude = u_extrude_scale * (offset / 64.0);\n        gl_Position = u_matrix * vec4(a_pos, 0, 1) + vec4(extrude, 0, 0);\n        gl_Position.z += z * gl_Position.w;\n    // pitch-alignment: viewport\n    // rotation-alignment: viewport\n    } else {\n        vec2 extrude = u_extrude_scale * (a_offset / 64.0);\n        gl_Position = u_matrix * vec4(a_pos, 0, 1) + vec4(extrude, 0, 0);\n    }\n\n    v_gamma_scale = gl_Position.w;\n\n    v_tex = a_tex / u_texsize;\n    v_fade_tex = vec2(a_labelminzoom / 255.0, 0.0);\n}\n"}}},{path:23}],80:[function(n,t){"use strict";var i=function(){this.boundProgram=null;this.boundVertexBuffer=null;this.boundVertexBuffer2=null;this.boundElementBuffer=null;this.boundVertexOffset=null;this.vao=null};i.prototype.bind=function(n,t,i,r,u,f){void 0===n.extVertexArrayObject&&(n.extVertexArrayObject=n.getExtension("OES_vertex_array_object"));var e=!this.vao||this.boundProgram!==t||this.boundVertexBuffer!==i||this.boundVertexBuffer2!==u||this.boundElementBuffer!==r||this.boundVertexOffset!==f;!n.extVertexArrayObject||e?(this.freshBind(n,t,i,r,u,f),this.gl=n):n.extVertexArrayObject.bindVertexArrayOES(this.vao)};i.prototype.freshBind=function(n,t,i,r,u,f){var e,h=t.numAttributes,o,s;if(n.extVertexArrayObject)this.vao&&this.destroy(),this.vao=n.extVertexArrayObject.createVertexArrayOES(),n.extVertexArrayObject.bindVertexArrayOES(this.vao),e=0,this.boundProgram=t,this.boundVertexBuffer=i,this.boundVertexBuffer2=u,this.boundElementBuffer=r,this.boundVertexOffset=f;else for(e=n.currentNumAttributes||0,o=h;o<e;o++)n.disableVertexAttribArray(o);for(s=e;s<h;s++)n.enableVertexAttribArray(s);i.bind(n);i.setVertexAttribPointers(n,t,f);u&&(u.bind(n),u.setVertexAttribPointers(n,t,f));r&&r.bind(n);n.currentNumAttributes=h};i.prototype.destroy=function(){this.vao&&(this.gl.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};t.exports=i},{}],81:[function(n,t){"use strict";var i=n("./image_source"),r=n("../util/window"),u=function(n){function t(t,i,r,u){n.call(this,t,i,r,u);this.options=i;this.animate=!i.hasOwnProperty("animate")||i.animate}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.load=function(){if(this.canvas=this.canvas||r.document.getElementById(this.options.canvas),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions())return this.fire("error",new Error("Canvas dimensions cannot be less than or equal to zero."));var n;this.play=function(){n=this.map.style.animationLoop.set(1/0);this.map._rerender()};this.pause=function(){this.map.style.animationLoop.cancel(n)};this._finishLoading()},t.prototype.getCanvas=function(){return this.canvas},t.prototype.onAdd=function(n){this.map||(this.map=n,this.load(),this.canvas&&this.animate&&this.play())},t.prototype.prepare=function(){var n=!1;this.canvas.width!==this.width&&(this.width=this.canvas.width,n=!0);this.canvas.height!==this.height&&(this.height=this.canvas.height,n=!0);this._hasInvalidDimensions()||this.tile&&this._prepareImage(this.map.painter.gl,this.canvas,n)},t.prototype.serialize=function(){return{type:"canvas",canvas:this.canvas,coordinates:this.coordinates}},t.prototype._hasInvalidDimensions=function(){for(var t,i=this,n=0,r=[i.canvas.width,i.canvas.height];n<r.length;n+=1)if(t=r[n],isNaN(t)||t<=0)return!0;return!1},t}(i);t.exports=u},{"../util/window":194,"./image_source":85}],82:[function(n,t){"use strict";function u(n){var t=e.document.createElement("a");return t.href=n,t.href}var f=n("../util/evented"),r=n("../util/util"),e=n("../util/window"),i=n("../data/extent"),o=function(n){function t(t,u,f,e){n.call(this);u=u||{};this.id=t;this.type="geojson";this.minzoom=0;this.maxzoom=18;this.tileSize=512;this.isTileClipped=!0;this.reparseOverscaled=!0;this.dispatcher=f;this.setEventedParent(e);this._data=u.data;void 0!==u.maxzoom&&(this.maxzoom=u.maxzoom);u.type&&(this.type=u.type);var o=i/this.tileSize;this.workerOptions=r.extend({source:this.id,cluster:u.cluster||!1,geojsonVtOptions:{buffer:(void 0!==u.buffer?u.buffer:128)*o,tolerance:(void 0!==u.tolerance?u.tolerance:.375)*o,extent:i,maxZoom:this.maxzoom},superclusterOptions:{maxZoom:Math.min(u.clusterMaxZoom,this.maxzoom-1)||this.maxzoom-1,extent:i,radius:(u.clusterRadius||50)*o,log:!1}},u.workerOptions)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.load=function(){var n=this;this.fire("dataloading",{dataType:"source"});this._updateWorkerData(function(t){return t?void n.fire("error",{error:t}):void n.fire("data",{dataType:"source",sourceDataType:"metadata"})})},t.prototype.onAdd=function(n){this.load();this.map=n},t.prototype.setData=function(n){var t=this;return this._data=n,this.fire("dataloading",{dataType:"source"}),this._updateWorkerData(function(n){return n?t.fire("error",{error:n}):void t.fire("data",{dataType:"source",sourceDataType:"content"})}),this},t.prototype._updateWorkerData=function(n){var f=this,t=r.extend({},this.workerOptions),i=this._data;"string"==typeof i?t.url=u(i):t.data=JSON.stringify(i);this.workerID=this.dispatcher.send(this.type+".loadData",t,function(t){f._loaded=!0;n(t)})},t.prototype.loadTile=function(n,t){var i=this,r=n.coord.z>this.maxzoom?Math.pow(2,n.coord.z-this.maxzoom):1,u={type:this.type,uid:n.uid,coord:n.coord,zoom:n.coord.z,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,overscaling:r,angle:this.map.transform.angle,pitch:this.map.transform.pitch,showCollisionBoxes:this.map.showCollisionBoxes};n.workerID=this.dispatcher.send("loadTile",u,function(r,u){if(n.unloadVectorData(),!n.aborted)return r?t(r):(n.loadVectorData(u,i.map.painter),n.redoWhenDone&&(n.redoWhenDone=!1,n.redoPlacement(i)),t(null))},this.workerID)},t.prototype.abortTile=function(n){n.aborted=!0},t.prototype.unloadTile=function(n){n.unloadVectorData();this.dispatcher.send("removeTile",{uid:n.uid,type:this.type,source:this.id},function(){},n.workerID)},t.prototype.onRemove=function(){this.dispatcher.broadcast("removeSource",{type:this.type,source:this.id},function(){})},t.prototype.serialize=function(){return{type:this.type,data:this._data}},t}(f);t.exports=o},{"../data/extent":54,"../util/evented":200,"../util/util":212,"../util/window":194}],83:[function(n,t){"use strict";var i=n("../util/ajax"),r=n("geojson-rewind"),u=n("./geojson_wrapper"),f=n("vt-pbf"),e=n("supercluster"),o=n("geojson-vt"),s=n("./vector_tile_worker_source"),h=function(n){function t(t,i,r){n.call(this,t,i);r&&(this.loadGeoJSON=r);this._geoJSONIndexes={}}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.loadVectorData=function(n,t){var s=n.source,e=n.coord,o,r,i;if(!this._geoJSONIndexes[s]||(o=this._geoJSONIndexes[s].getTile(Math.min(e.z,n.maxZoom),e.x,e.y),!o))return t(null,null);r=new u(o.features);r.name="_geojsonTileLayer";i=f({layers:{_geojsonTileLayer:r}});0===i.byteOffset&&i.byteLength===i.buffer.byteLength||(i=new Uint8Array(i));r.rawData=i.buffer;t(null,r)},t.prototype.loadData=function(n,t){var i=function(i,u){var f=this;return i?t(i):"object"!=typeof u?t(new Error("Input data is not a valid GeoJSON object.")):(r(u,!0),void this._indexData(u,n,function(i,r){return i?t(i):(f._geoJSONIndexes[n.source]=r,void t(null))}))}.bind(this);this.loadGeoJSON(n,i)},t.prototype.loadGeoJSON=function(n,t){if(n.url)i.getJSON(n.url,t);else{if("string"!=typeof n.data)return t(new Error("Input data is not a valid GeoJSON object."));try{return t(null,JSON.parse(n.data))}catch(n){return t(new Error("Input data is not a valid GeoJSON object."))}}},t.prototype.removeSource=function(n){this._geoJSONIndexes[n.source]&&delete this._geoJSONIndexes[n.source]},t.prototype._indexData=function(n,t,i){try{t.cluster?i(null,e(t.superclusterOptions).load(n.features)):i(null,o(n,t.geojsonVtOptions))}catch(n){return i(n)}},t}(s);t.exports=h},{"../util/ajax":191,"./geojson_wrapper":84,"./vector_tile_worker_source":96,"geojson-rewind":7,"geojson-vt":11,supercluster:29,"vt-pbf":38}],84:[function(n,t){"use strict";var f=n("point-geometry"),e=n("vector-tile").VectorTileFeature,u=n("../data/extent"),i=function(n){var i=this,t;if(this.type=n.type,1===n.type)for(this.rawGeometry=[],t=0;t<n.geometry.length;t++)i.rawGeometry.push([n.geometry[t]]);else this.rawGeometry=n.geometry;this.properties=n.tags;"id"in n&&(this.id=n.id);this.extent=u},r;i.prototype.loadGeometry=function(){var e=this,r=this.rawGeometry,n;for(this.geometry=[],n=0;n<r.length;n++){for(var i=r[n],u=[],t=0;t<i.length;t++)u.push(new f(i[t][0],i[t][1]));e.geometry.push(u)}return this.geometry};i.prototype.bbox=function(){var o,t,n;this.geometry||this.loadGeometry();for(var s=this.geometry,i=1/0,r=-(1/0),u=1/0,f=-(1/0),e=0;e<s.length;e++)for(o=s[e],t=0;t<o.length;t++)n=o[t],i=Math.min(i,n.x),r=Math.max(r,n.x),u=Math.min(u,n.y),f=Math.max(f,n.y);return[i,u,r,f]};i.prototype.toGeoJSON=function(){e.prototype.toGeoJSON.call(this)};r=function(n){this.features=n;this.length=n.length;this.extent=u};r.prototype.feature=function(n){return new i(this.features[n])};t.exports=r},{"../data/extent":54,"point-geometry":26,"vector-tile":34}],85:[function(n,t){"use strict";var f=n("../util/util"),i=n("../util/window"),e=n("./tile_coord"),o=n("../geo/lng_lat"),s=n("point-geometry"),h=n("../util/evented"),c=n("../util/ajax"),r=n("../data/extent"),l=n("../data/raster_bounds_array"),u=n("../data/buffer"),a=n("../render/vertex_array_object"),v=function(n){function t(t,i,r,u){n.call(this);this.id=t;this.dispatcher=r;this.coordinates=i.coordinates;this.type="image";this.minzoom=0;this.maxzoom=22;this.tileSize=512;this.setEventedParent(u);this.options=i}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.load=function(){var n=this;this.fire("dataloading",{dataType:"source"});this.url=this.options.url;c.getImage(this.options.url,function(t,i){return t?n.fire("error",{error:t}):(n.image=i,void n._finishLoading())})},t.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire("data",{dataType:"source",sourceDataType:"metadata"}))},t.prototype.onAdd=function(n){this.load();this.map=n;this.image&&this.setCoordinates(this.coordinates)},t.prototype.setCoordinates=function(n){this.coordinates=n;var u=this.map,i=n.map(function(n){return u.transform.locationCoordinate(o.convert(n)).zoomTo(0)}),t=this.centerCoord=f.getCoordinatesCenter(i);return t.column=Math.round(t.column),t.row=Math.round(t.row),this.minzoom=this.maxzoom=t.zoom,this.coord=new e(t.zoom,t.column,t.row),this._tileCoords=i.map(function(n){var i=n.zoomTo(t.zoom);return new s(Math.round((i.column-t.column)*r),Math.round((i.row-t.row)*r))}),this.fire("data",{dataType:"source",sourceDataType:"content"}),this},t.prototype._setTile=function(n){this.tile=n;var i=32767,t=new l;t.emplaceBack(this._tileCoords[0].x,this._tileCoords[0].y,0,0);t.emplaceBack(this._tileCoords[1].x,this._tileCoords[1].y,i,0);t.emplaceBack(this._tileCoords[3].x,this._tileCoords[3].y,0,i);t.emplaceBack(this._tileCoords[2].x,this._tileCoords[2].y,i,i);this.tile.buckets={};this.tile.boundsBuffer=u.fromStructArray(t,u.BufferType.VERTEX);this.tile.boundsVAO=new a},t.prototype.prepare=function(){this.tile&&this.image&&this._prepareImage(this.map.painter.gl,this.image)},t.prototype._prepareImage=function(n,t,r){"loaded"!==this.tile.state?(this.tile.state="loaded",this.tile.texture=n.createTexture(),n.bindTexture(n.TEXTURE_2D,this.tile.texture),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,t)):r?n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,t):(t instanceof i.HTMLVideoElement||t instanceof i.ImageData||t instanceof i.HTMLCanvasElement)&&(n.bindTexture(n.TEXTURE_2D,this.tile.texture),n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,t))},t.prototype.loadTile=function(n,t){this.coord&&this.coord.toString()===n.coord.toString()?(this._setTile(n),t(null)):(n.state="errored",t(null))},t.prototype.serialize=function(){return{type:"image",urls:this.url,coordinates:this.coordinates}},t}(h);t.exports=v},{"../data/buffer":51,"../data/extent":54,"../data/raster_bounds_array":59,"../geo/lng_lat":62,"../render/vertex_array_object":80,"../util/ajax":191,"../util/evented":200,"../util/util":212,"../util/window":194,"./tile_coord":94,"point-geometry":26}],86:[function(n,t){"use strict";var i=n("../util/util"),r=n("../util/ajax"),u=n("../util/browser"),f=n("../util/mapbox").normalizeSourceURL;t.exports=function(n,t){var e=function(n,r){if(n)return t(n);var u=i.pick(r,["tiles","minzoom","maxzoom","attribution","mapbox_logo"]);r.vector_layers&&(u.vectorLayers=r.vector_layers,u.vectorLayerIds=u.vectorLayers.map(function(n){return n.id}));t(null,u)};n.url?r.getJSON(f(n.url),e):u.frame(e.bind(null,null,n))}},{"../util/ajax":191,"../util/browser":192,"../util/mapbox":208,"../util/util":212}],87:[function(n,t){"use strict";var i=n("../data/extent");t.exports=function(n,t,r){return t*(i/(n.tileSize*Math.pow(2,r-n.coord.z)))}},{"../data/extent":54}],88:[function(n,t,i){"use strict";function r(n,t){var i=n.coord,r=t.coord;return i.z-r.z||i.y-r.y||i.w-r.w||i.x-r.x}function u(n){for(var o,r,u,f,e,t=n[0]||{},i=1;i<n.length;i++){o=n[i];for(r in o)if(u=o[r],f=t[r],void 0===f)f=t[r]=u;else for(e=0;e<u.length;e++)f.push(u[e])}return t}var f=n("./tile_coord");i.rendered=function(n,t,i,f,e,o){var c=n.tilesIn(i),l,h,s;for(c.sort(r),l=[],h=0;h<c.length;h++)s=c[h],s.tile.featureIndex&&l.push(s.tile.featureIndex.query({queryGeometry:s.queryGeometry,scale:s.scale,tileSize:s.tile.tileSize,bearing:o,params:f},t));return u(l)};i.source=function(n,t){for(var i,u,e=n.getRenderableIds().map(function(t){return n.getTileByID(t)}),o=[],s={},r=0;r<e.length;r++)i=e[r],u=new f(Math.min(i.sourceMaxZoom,i.coord.z),i.coord.x,i.coord.y,0).id,s[u]||(s[u]=!0,i.querySourceFeatures(o,t));return o}},{"./tile_coord":94}],89:[function(n,t){"use strict";var i=n("../util/util"),r=n("../util/ajax"),u=n("../util/evented"),f=n("./load_tilejson"),e=n("../util/mapbox").normalizeTileURL,o=function(n){function t(t,r,u,f){n.call(this);this.id=t;this.dispatcher=u;this.setEventedParent(f);this.type="raster";this.minzoom=0;this.maxzoom=22;this.roundZoom=!0;this.scheme="xyz";this.tileSize=512;this._loaded=!1;this.options=r;i.extend(this,i.pick(r,["url","scheme","tileSize"]))}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.load=function(){var n=this;this.fire("dataloading",{dataType:"source"});f(this.options,function(t,r){return t?n.fire("error",t):(i.extend(n,r),n.fire("data",{dataType:"source",sourceDataType:"metadata"}),void n.fire("data",{dataType:"source",sourceDataType:"content"}))})},t.prototype.onAdd=function(n){this.load();this.map=n},t.prototype.serialize=function(){return{type:"raster",url:this.url,tileSize:this.tileSize,tiles:this.tiles}},t.prototype.loadTile=function(n,t){function i(i,r){if(delete n.request,n.aborted)return this.state="unloaded",t(null);if(i)return this.state="errored",t(i);this.map._refreshExpiredTiles||n.setExpiryData(r);delete r.cacheControl;delete r.expires;var u=this.map.painter.gl;n.texture=this.map.painter.getTileTexture(r.width);n.texture?(u.bindTexture(u.TEXTURE_2D,n.texture),u.texSubImage2D(u.TEXTURE_2D,0,0,0,u.RGBA,u.UNSIGNED_BYTE,r)):(n.texture=u.createTexture(),u.bindTexture(u.TEXTURE_2D,n.texture),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.LINEAR_MIPMAP_NEAREST),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.LINEAR),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.CLAMP_TO_EDGE),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.CLAMP_TO_EDGE),u.texImage2D(u.TEXTURE_2D,0,u.RGBA,u.RGBA,u.UNSIGNED_BYTE,r),n.texture.size=r.width);u.generateMipmap(u.TEXTURE_2D);n.state="loaded";t(null)}var u=e(n.coord.url(this.tiles,null,this.scheme),this.url,this.tileSize);n.request=r.getImage(u,i.bind(this))},t.prototype.abortTile=function(n){n.request&&(n.request.abort(),delete n.request)},t.prototype.unloadTile=function(n){n.texture&&this.map.painter.saveTileTexture(n.texture)},t}(u);t.exports=o},{"../util/ajax":191,"../util/evented":200,"../util/mapbox":208,"../util/util":212,"./load_tilejson":86}],90:[function(n,t){"use strict";var f=n("../util/ajax"),e=n("../util/evented"),r=n("../util/window"),u=!1,i=null;t.exports.evented=new e;t.exports.registerForPluginAvailability=function(n){return i?n(i,t.exports.errorCallback):t.exports.evented.once("pluginAvailable",n),n};t.exports.setRTLTextPlugin=function(n,e){if(u)throw new Error("setRTLTextPlugin cannot be called multiple times.");u=!0;t.exports.errorCallback=e;f.getArrayBuffer(n,function(n,u){n?e(n):(i=r.URL.createObjectURL(new r.Blob([u.data]),{type:"text/javascript"}),t.exports.evented.fire("pluginAvailable",{pluginBlobURL:i,errorCallback:e}))})}},{"../util/ajax":191,"../util/evented":200,"../util/window":194}],91:[function(n,t,i){"use strict";var u=n("../util/util"),r={vector:n("../source/vector_tile_source"),raster:n("../source/raster_tile_source"),geojson:n("../source/geojson_source"),video:n("../source/video_source"),image:n("../source/image_source"),canvas:n("../source/canvas_source")};i.create=function(n,t,i,f){if(t=new r[t.type](n,t,i,f),t.id!==n)throw new Error("Expected Source id to be "+n+" instead of "+t.id);return u.bindAll(["load","abort","unload","serialize","prepare"],t),t};i.getType=function(n){return r[n]};i.setType=function(n,t){r[n]=t}},{"../source/canvas_source":81,"../source/geojson_source":82,"../source/image_source":85,"../source/raster_tile_source":89,"../source/vector_tile_source":95,"../source/video_source":97,"../util/util":212}],92:[function(n,t){"use strict";function r(n,t,r){var u=r.zoomTo(Math.min(n.z,t));return{x:(u.column-(n.x+n.w*Math.pow(2,n.z)))*i,y:(u.row-n.y)*i}}function o(n,t){return n%32-t%32}function s(n){return"raster"===n||"image"===n||"video"===n}var h=n("./source"),c=n("./tile"),l=n("../util/evented"),u=n("./tile_coord"),a=n("../util/lru_cache"),e=n("../geo/coordinate"),v=n("../util/util"),i=n("../data/extent"),f=function(n){function t(t,i,r){n.call(this);this.id=t;this.dispatcher=r;this.on("data",function(n){"source"===n.dataType&&"metadata"===n.sourceDataType&&(this._sourceLoaded=!0);this._sourceLoaded&&"source"===n.dataType&&"content"===n.sourceDataType&&(this.reload(),this.transform&&this.update(this.transform))});this.on("error",function(){this._sourceErrored=!0});this._source=h.create(t,i,r,this);this._tiles={};this._cache=new a(0,this.unloadTile.bind(this));this._timers={};this._cacheTimers={};this._isIdRenderable=this._isIdRenderable.bind(this)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.onAdd=function(n){this.map=n;this._source&&this._source.onAdd&&this._source.onAdd(n)},t.prototype.onRemove=function(n){this._source&&this._source.onRemove&&this._source.onRemove(n)},t.prototype.loaded=function(){var t=this,i,n;if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;for(i in t._tiles)if(n=t._tiles[i],"loaded"!==n.state&&"errored"!==n.state)return!1;return!0},t.prototype.getSource=function(){return this._source},t.prototype.loadTile=function(n,t){return this._source.loadTile(n,t)},t.prototype.unloadTile=function(n){if(this._source.unloadTile)return this._source.unloadTile(n)},t.prototype.abortTile=function(n){if(this._source.abortTile)return this._source.abortTile(n)},t.prototype.serialize=function(){return this._source.serialize()},t.prototype.prepare=function(){if(this._sourceLoaded&&this._source.prepare)return this._source.prepare()},t.prototype.getIds=function(){return Object.keys(this._tiles).map(Number).sort(o)},t.prototype.getRenderableIds=function(){return this.getIds().filter(this._isIdRenderable)},t.prototype._isIdRenderable=function(n){return this._tiles[n].hasData()&&!this._coveredTiles[n]},t.prototype.reload=function(){var n=this,t;this._cache.reset();for(t in n._tiles)n.reloadTile(t,"reloading")},t.prototype.reloadTile=function(n,t){var i=this._tiles[n];i&&("loading"!==i.state&&(i.state=t),this.loadTile(i,this._tileLoaded.bind(this,i,n,t)))},t.prototype._tileLoaded=function(n,t,i,r){return r?(n.state="errored",void this._source.fire("error",{tile:n,error:r})):(n.sourceCache=this,n.timeAdded=(new Date).getTime(),"expired"===i&&(n.refreshedUponExpiration=!0),this._setTileReloadTimer(t,n),this._source.fire("data",{dataType:"source",tile:n,coord:n.coord}),void(this.map&&(this.map.painter.tileExtentVAO.vao=null)))},t.prototype.getTile=function(n){return this.getTileByID(n.id)},t.prototype.getTileByID=function(n){return this._tiles[n]},t.prototype.getZoom=function(n){return n.zoom+n.scaleZoom(n.tileSize/this._source.tileSize)},t.prototype.findLoadedChildren=function(n,t,i){var u=this,s=!1,f,r,e,o;for(f in u._tiles)if(r=u._tiles[f],!(i[f]||!r.hasData()||r.coord.z<=n.z||r.coord.z>t)&&(e=Math.pow(2,Math.min(r.coord.z,u._source.maxzoom)-Math.min(n.z,u._source.maxzoom)),Math.floor(r.coord.x/e)===n.x&&Math.floor(r.coord.y/e)===n.y))for(i[f]=!0,s=!0;r&&r.coord.z-1>n.z;)o=r.coord.parent(u._source.maxzoom).id,r=u._tiles[o],r&&r.hasData()&&(delete i[f],i[o]=!0);return s},t.prototype.findLoadedParent=function(n,t,i){for(var u,r=this,f=n.z-1;f>=t;f--){if(n=n.parent(r._source.maxzoom),u=r._tiles[n.id],u&&u.hasData())return i[n.id]=!0,u;if(r._cache.has(n.id))return i[n.id]=!0,r._cache.getWithoutRemoving(n.id)}},t.prototype.updateCacheSize=function(n){var t=Math.ceil(n.width/n.tileSize)+1,i=Math.ceil(n.height/n.tileSize)+1,r=t*i;this._cache.setMaxSize(Math.floor(r*5))},t.prototype.update=function(n){var i=this,f,e,o,h,p,l,w,a,y,c,b;if(this.transform=n,this._sourceLoaded){this.updateCacheSize(n);var k=(this._source.roundZoom?Math.round:Math.floor)(this.getZoom(n)),d=Math.max(k-t.maxOverzooming,this._source.minzoom),g=Math.max(k+t.maxUnderzooming,this._source.minzoom),r={};for(this._coveredTiles={},p=this.used?this._source.coord?[this._source.coord]:n.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}):[],f=0;f<p.length;f++)e=p[f],o=i.addTile(e),r[e.id]=!0,o.hasData()||i.findLoadedChildren(e,g,r)||(h=i.findLoadedParent(e,d,r),h&&i.addTile(h.coord));if(l={},s(this._source.type))for(w=Object.keys(r),a=0;a<w.length;a++)y=w[a],e=u.fromID(y),o=i._tiles[y],o&&("undefined"==typeof o.fadeEndTime||o.fadeEndTime>=Date.now())&&(i.findLoadedChildren(e,g,r)&&(r[y]=!0),h=i.findLoadedParent(e,d,l),h&&i.addTile(h.coord));for(c in l)r[c]||(i._coveredTiles[c]=!0);for(c in l)r[c]=!0;for(b=v.keysDifference(this._tiles,r),f=0;f<b.length;f++)i.removeTile(+b[f])}},t.prototype.addTile=function(n){var t=this._tiles[n.id],i,r,u,f;return t?t:(i=n.wrapped(),t=this._tiles[i.id],t||(t=this._cache.get(i.id),t&&(t.redoPlacement(this._source),this._cacheTimers[i.id]&&(clearTimeout(this._cacheTimers[i.id]),this._cacheTimers[i.id]=void 0,this._setTileReloadTimer(i.id,t)))),r=Boolean(t),r||(u=n.z,f=u>this._source.maxzoom?Math.pow(2,u-this._source.maxzoom):1,t=new c(i,this._source.tileSize*f,this._source.maxzoom),this.loadTile(t,this._tileLoaded.bind(this,t,n.id,t.state))),t.uses++,this._tiles[n.id]=t,r||this._source.fire("dataloading",{tile:t,coord:t.coord,dataType:"source"}),t)},t.prototype._setTileReloadTimer=function(n,t){var i=this,r=t.getExpiryTimeout();r&&(this._timers[n]=setTimeout(function(){i.reloadTile(n,"expired");i._timers[n]=void 0},r))},t.prototype._setCacheInvalidationTimer=function(n,t){var i=this,r=t.getExpiryTimeout();r&&(this._cacheTimers[n]=setTimeout(function(){i._cache.remove(n);i._cacheTimers[n]=void 0},r))},t.prototype.removeTile=function(n){var t=this._tiles[n],i;!t||(t.uses--,delete this._tiles[n],this._timers[n]&&(clearTimeout(this._timers[n]),this._timers[n]=void 0),t.uses>0)||(t.hasData()?(i=t.coord.wrapped().id,this._cache.add(i,t),this._setCacheInvalidationTimer(i,t)):(t.aborted=!0,this.abortTile(t),this.unloadTile(t)))},t.prototype.clearTiles=function(){var n=this;for(var t in n._tiles)n.removeTile(t);this._cache.reset()},t.prototype.tilesIn=function(n){for(var f,o,d,l,a,g,it,nt=this,s={},v=this.getIds(),y=1/0,p=1/0,w=-(1/0),b=-(1/0),tt=n[0].zoom,k=0;k<n.length;k++)f=n[k],y=Math.min(y,f.column),p=Math.min(p,f.row),w=Math.max(w,f.column),b=Math.max(b,f.row);for(o=0;o<v.length;o++){var t=nt._tiles[v[o]],h=u.fromID(v[o]),c=[r(h,t.sourceMaxZoom,new e(y,p,tt)),r(h,t.sourceMaxZoom,new e(w,b,tt))];if(c[0].x<i&&c[0].y<i&&c[1].x>=0&&c[1].y>=0){for(d=[],l=0;l<n.length;l++)d.push(r(h,t.sourceMaxZoom,n[l]));a=s[t.coord.id];void 0===a&&(a=s[t.coord.id]={tile:t,coord:h,queryGeometry:[],scale:Math.pow(2,nt.transform.zoom-t.coord.z)});a.queryGeometry.push(d)}}g=[];for(it in s)g.push(s[it]);return g},t.prototype.redoPlacement=function(){for(var r,t=this,i=this.getIds(),n=0;n<i.length;n++)r=t.getTileByID(i[n]),r.redoPlacement(t._source)},t.prototype.getVisibleCoordinates=function(){for(var t,i=this,r=this.getRenderableIds().map(u.fromID),n=0,f=r;n<f.length;n+=1)t=f[n],t.posMatrix=i.transform.calculatePosMatrix(t,i._source.maxzoom);return r},t}(l);f.maxOverzooming=10;f.maxUnderzooming=3;t.exports=f},{"../data/extent":54,"../geo/coordinate":61,"../util/evented":200,"../util/lru_cache":207,"../util/util":212,"./source":91,"./tile":93,"./tile_coord":94}],93:[function(n,t){"use strict";var r=n("../util/util"),u=n("../data/bucket"),e=n("../data/feature_index"),o=n("vector-tile"),s=n("pbf"),h=n("../util/vectortile_to_geojson"),c=n("../style-spec/feature_filter"),f=n("../symbol/collision_tile"),l=n("../symbol/collision_box"),a=3e4,i=function(n,t,i){this.coord=n;this.uid=r.uniqueId();this.uses=0;this.tileSize=t;this.sourceMaxZoom=i;this.buckets={};this.expirationTime=null;this.expiredRequestCount=0;this.state="loading"};i.prototype.registerFadeDuration=function(n,t){var i=t+this.timeAdded;i<Date.now()||this.fadeEndTime&&i<this.fadeEndTime||(this.fadeEndTime=i,n.set(this.fadeEndTime-Date.now()))};i.prototype.loadVectorData=function(n,t){this.hasData()&&this.unloadVectorData();this.state="loaded";n&&(n.rawTileData&&(this.rawTileData=n.rawTileData),this.collisionBoxArray=new l(n.collisionBoxArray),this.collisionTile=new f(n.collisionTile,this.collisionBoxArray),this.featureIndex=new e(n.featureIndex,this.rawTileData,this.collisionTile),this.buckets=u.deserialize(n.buckets,t.style))};i.prototype.reloadSymbolData=function(n,t){var i=this,e,o;if("unloaded"!==this.state){this.collisionTile=new f(n.collisionTile,this.collisionBoxArray);this.featureIndex.setCollisionTile(this.collisionTile);for(e in i.buckets)o=i.buckets[e],"symbol"===o.layers[0].type&&(o.destroy(),delete i.buckets[e]);r.extend(this.buckets,u.deserialize(n.buckets,t))}};i.prototype.unloadVectorData=function(){var n=this;for(var t in n.buckets)n.buckets[t].destroy();this.buckets={};this.collisionBoxArray=null;this.collisionTile=null;this.featureIndex=null;this.state="unloaded"};i.prototype.redoPlacement=function(n){var t=this;if("vector"===n.type||"geojson"===n.type)return"loaded"!==this.state?void(this.redoWhenDone=!0):void(this.collisionTile&&(this.state="reloading",n.dispatcher.send("redoPlacement",{type:n.type,uid:this.uid,source:n.id,angle:n.map.transform.angle,pitch:n.map.transform.pitch,showCollisionBoxes:n.map.showCollisionBoxes},function(i,r){t.reloadSymbolData(r,n.map.style);n.map&&(n.map.painter.tileExtentVAO.vao=null);t.state="loaded";t.redoWhenDone&&(t.redoWhenDone=!1,t.redoPlacement(n))},this.workerID)))};i.prototype.getBucket=function(n){return this.buckets[n.id]};i.prototype.querySourceFeatures=function(n,t){var r=this,i,f,e;if(this.rawTileData&&(this.vtLayers||(this.vtLayers=new o.VectorTile(new s(this.rawTileData)).layers),i=this.vtLayers._geojsonTileLayer||this.vtLayers[t.sourceLayer],i))for(var l=c(t&&t.filter),a={z:this.coord.z,x:this.coord.x,y:this.coord.y},u=0;u<i.length;u++)f=i.feature(u),l(f)&&(e=new h(f,r.coord.z,r.coord.x,r.coord.y),e.tile=a,n.push(e))};i.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state};i.prototype.setExpiryData=function(n){var i=this.expirationTime,u,f,t,e;n.cacheControl?(u=r.parseCacheControl(n.cacheControl),u["max-age"]&&(this.expirationTime=Date.now()+1e3*u["max-age"])):n.expires&&(this.expirationTime=new Date(n.expires).getTime());this.expirationTime&&(f=Date.now(),t=!1,this.expirationTime>f?t=!1:i?this.expirationTime<i?t=!0:(e=this.expirationTime-i,e?this.expirationTime=f+Math.max(e,a):t=!0):t=!0,t?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0)};i.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)};t.exports=i},{"../data/bucket":45,"../data/feature_index":55,"../style-spec/feature_filter":103,"../symbol/collision_box":160,"../symbol/collision_tile":162,"../util/util":212,"../util/vectortile_to_geojson":213,pbf:25,"vector-tile":34}],94:[function(n,t){"use strict";function r(n,t){if(n.row>t.row){var i=n;n=t;t=i}return{x0:n.column,y0:n.row,x1:t.column,y1:t.row,dx:t.column-n.column,dy:t.row-n.row}}function u(n,t,i,r,u){var h=Math.max(i,Math.floor(t.y0)),c=Math.min(r,Math.ceil(t.y1)),e,o,s;(n.x0===t.x0&&n.y0===t.y0?n.x0+t.dy/n.dy*n.dx<t.x1:n.x1-t.dy/n.dy*n.dx<t.x0)&&(e=n,n=t,t=e);for(var l=n.dx/n.dy,a=t.dx/t.dy,v=n.dx>0,y=t.dx<0,f=h;f<c;f++)o=l*Math.max(0,Math.min(n.dy,f+v-n.y0))+n.x0,s=a*Math.max(0,Math.min(t.dy,f+y-t.y0))+t.x0,u(Math.floor(s),Math.ceil(o),f)}function f(n,t,i,f,e,o){var l,s=r(n,t),h=r(t,i),c=r(i,n);s.dy>h.dy&&(l=s,s=h,h=l);s.dy>c.dy&&(l=s,s=c,c=l);h.dy>c.dy&&(l=h,h=c,c=l);s.dy&&u(c,s,f,e,o);h.dy&&u(c,h,f,e,o)}function e(n,t,i){for(var r,f="",u=n;u>0;u--)r=1<<u-1,f+=(t&r?1:0)+(i&r?2:0);return f}var o=n("@mapbox/whoots-js"),s=n("../geo/coordinate"),i=function(n,t,i,r){isNaN(r)&&(r=0);this.z=+n;this.x=+t;this.y=+i;this.w=+r;r*=2;r<0&&(r=r*-1-1);var u=1<<this.z;this.id=32*(u*u*r+u*this.y+this.x)+this.z;this.posMatrix=null};i.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};i.prototype.toCoordinate=function(n){var t=Math.min(this.z,void 0===n?this.z:n),i=Math.pow(2,t),r=this.y,u=this.x+i*this.w;return new s(u,r,t)};i.prototype.url=function(n,t,i){var r=o.getTileBBox(this.x,this.y,this.z),u=e(this.z,this.x,this.y);return n[(this.x+this.y)%n.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",Math.min(this.z,t||this.z)).replace("{x}",this.x).replace("{y}","tms"===i?Math.pow(2,this.z)-this.y-1:this.y).replace("{quadkey}",u).replace("{bbox-epsg-3857}",r)};i.prototype.parent=function(n){return 0===this.z?null:this.z>n?new i(this.z-1,this.x,this.y,this.w):new i(this.z-1,Math.floor(this.x/2),Math.floor(this.y/2),this.w)};i.prototype.wrapped=function(){return new i(this.z,this.x,this.y,0)};i.prototype.children=function(n){if(this.z>=n)return[new i(this.z+1,this.x,this.y,this.w)];var t=this.z+1,r=2*this.x,u=2*this.y;return[new i(t,r,u,this.w),new i(t,r+1,u,this.w),new i(t,r,u+1,this.w),new i(t,r+1,u+1,this.w)]};i.cover=function(n,t,r,u){function s(n,t,f){var s,h,l,c;if(f>=0&&f<=e)for(s=n;s<t;s++)h=Math.floor(s/e),l=(s%e+e)%e,0!==h&&u!==!0||(c=new i(r,l,f,h),o[c.id]=c)}void 0===u&&(u=!0);var e=1<<n,o={};return f(t[0],t[1],t[2],0,e,s),f(t[2],t[3],t[0],0,e,s),Object.keys(o).map(function(n){return o[n]})};i.fromID=function(n){var u=n%32,t=1<<u,f=(n-u)/32,e=f%t,o=(f-e)/t%t,r=Math.floor(f/(t*t));return r%2!=0&&(r=r*-1-1),r/=2,new i(u,e,o,r)};t.exports=i},{"../geo/coordinate":61,"@mapbox/whoots-js":4}],95:[function(n,t){"use strict";var r=n("../util/evented"),i=n("../util/util"),u=n("./load_tilejson"),f=n("../util/mapbox").normalizeTileURL,e=function(n){function t(t,r,u,f){if(n.call(this),this.id=t,this.dispatcher=u,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,i.extend(this,i.pick(r,["url","scheme","tileSize"])),this._options=i.extend({type:"vector"},r),512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(f)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.load=function(){var n=this;this.fire("dataloading",{dataType:"source"});u(this._options,function(t,r){return t?void n.fire("error",t):(i.extend(n,r),n.fire("data",{dataType:"source",sourceDataType:"metadata"}),void n.fire("data",{dataType:"source",sourceDataType:"content"}))})},t.prototype.onAdd=function(n){this.load();this.map=n},t.prototype.serialize=function(){return i.extend({},this._options)},t.prototype.loadTile=function(n,t){function i(i,r){if(!n.aborted){if(i)return t(i);this.map._refreshExpiredTiles||n.setExpiryData(r);n.loadVectorData(r,this.map.painter);n.redoWhenDone&&(n.redoWhenDone=!1,n.redoPlacement(this));t(null);n.reloadCallback&&(this.loadTile(n,n.reloadCallback),n.reloadCallback=null)}}var r=n.coord.z>this.maxzoom?Math.pow(2,n.coord.z-this.maxzoom):1,u={url:f(n.coord.url(this.tiles,this.maxzoom,this.scheme),this.url),uid:n.uid,coord:n.coord,zoom:n.coord.z,tileSize:this.tileSize*r,type:this.type,source:this.id,overscaling:r,angle:this.map.transform.angle,pitch:this.map.transform.pitch,showCollisionBoxes:this.map.showCollisionBoxes};n.workerID&&"expired"!==n.state?"loading"===n.state?n.reloadCallback=t:this.dispatcher.send("reloadTile",u,i.bind(this),n.workerID):n.workerID=this.dispatcher.send("loadTile",u,i.bind(this))},t.prototype.abortTile=function(n){this.dispatcher.send("abortTile",{uid:n.uid,type:this.type,source:this.id},null,n.workerID)},t.prototype.unloadTile=function(n){n.unloadVectorData();this.dispatcher.send("removeTile",{uid:n.uid,type:this.type,source:this.id},null,n.workerID)},t}(r);t.exports=e},{"../util/evented":200,"../util/mapbox":208,"../util/util":212,"./load_tilejson":86}],96:[function(n,t){"use strict";var r=n("../util/ajax"),u=n("vector-tile"),f=n("pbf"),e=n("./worker_tile"),o=n("../util/util"),i=function(n,t,i){this.actor=n;this.layerIndex=t;i&&(this.loadVectorData=i);this.loading={};this.loaded={}};i.prototype.loadTile=function(n,t){function f(n,f){return delete this.loading[i][u],n?t(n):f?(r.vectorTile=f,r.parse(f,this.layerIndex,this.actor,function(n,i,r){if(n)return t(n);var u={};f.expires&&(u.expires=f.expires);f.cacheControl&&(u.cacheControl=f.cacheControl);t(null,o.extend({rawTileData:f.rawData},i,u),r)}),this.loaded[i]=this.loaded[i]||{},void(this.loaded[i][u]=r)):t(null,null)}var i=n.source,u=n.uid,r;this.loading[i]||(this.loading[i]={});r=this.loading[i][u]=new e(n);r.abort=this.loadVectorData(n,f.bind(this))};i.prototype.reloadTile=function(n,t){function e(n,i){if(this.reloadCallback){var r=this.reloadCallback;delete this.reloadCallback;this.parse(this.vectorTile,f.layerIndex,f.actor,r)}t(n,i)}var r=this.loaded[n.source],u=n.uid,f=this,i;r&&r[u]&&(i=r[u],"parsing"===i.status?i.reloadCallback=t:"done"===i.status&&i.parse(i.vectorTile,this.layerIndex,this.actor,e.bind(i)))};i.prototype.abortTile=function(n){var t=this.loading[n.source],i=n.uid;t&&t[i]&&t[i].abort&&(t[i].abort(),delete t[i])};i.prototype.removeTile=function(n){var t=this.loaded[n.source],i=n.uid;t&&t[i]&&delete t[i]};i.prototype.loadVectorData=function(n,t){function i(n,i){if(n)return t(n);var r=new u.VectorTile(new f(i.data));r.rawData=i.data;r.cacheControl=i.cacheControl;r.expires=i.expires;t(n,r)}var e=r.getArrayBuffer(n.url,i.bind(this));return function(){e.abort()}};i.prototype.redoPlacement=function(n,t){var u=this.loaded[n.source],f=this.loading[n.source],i=n.uid,e,r;u&&u[i]?(e=u[i],r=e.redoPlacement(n.angle,n.pitch,n.showCollisionBoxes),r.result&&t(null,r.result,r.transferables)):f&&f[i]&&(f[i].angle=n.angle)};t.exports=i},{"../util/ajax":191,"../util/util":212,"./worker_tile":99,pbf:25,"vector-tile":34}],97:[function(n,t){"use strict";var i=n("../util/ajax"),r=n("./image_source"),u=function(n){function t(t,i,r,u){n.call(this,t,i,r,u);this.roundZoom=!0;this.type="video";this.options=i}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.load=function(){var n=this,t=this.options;this.urls=t.urls;i.getVideo(t.urls,function(t,i){if(t)return n.fire("error",{error:t});n.video=i;n.video.loop=!0;var r;n.video.addEventListener("playing",function(){r=n.map.style.animationLoop.set(1/0);n.map._rerender()});n.video.addEventListener("pause",function(){n.map.style.animationLoop.cancel(r)});n.map&&n.video.play();n._finishLoading()})},t.prototype.getVideo=function(){return this.video},t.prototype.onAdd=function(n){this.map||(this.load(),this.map=n,this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},t.prototype.prepare=function(){!this.tile||this.video.readyState<2||this._prepareImage(this.map.painter.gl,this.video)},t.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},t}(r);t.exports=u},{"../util/ajax":191,"./image_source":85}],98:[function(n,t){"use strict";var u=n("../util/actor"),f=n("../style/style_layer_index"),e=n("./vector_tile_worker_source"),o=n("./geojson_worker_source"),r=n("./rtl_text_plugin"),i=function(n){var t=this;this.self=n;this.actor=new u(n,this);this.layerIndexes={};this.workerSourceTypes={vector:e,geojson:o};this.workerSources={};this.self.registerWorkerSource=function(n,i){if(t.workerSourceTypes[n])throw new Error('Worker source with name "'+n+'" already registered.');t.workerSourceTypes[n]=i};this.self.registerRTLTextPlugin=function(n){if(r.applyArabicShaping||r.processBidirectionalText)throw new Error("RTL text plugin already registered.");r.applyArabicShaping=n.applyArabicShaping;r.processBidirectionalText=n.processBidirectionalText}};i.prototype.setLayers=function(n,t){this.getLayerIndex(n).replace(t)};i.prototype.updateLayers=function(n,t){this.getLayerIndex(n).update(t.layers,t.removedIds,t.symbolOrder)};i.prototype.loadTile=function(n,t,i){this.getWorkerSource(n,t.type).loadTile(t,i)};i.prototype.reloadTile=function(n,t,i){this.getWorkerSource(n,t.type).reloadTile(t,i)};i.prototype.abortTile=function(n,t){this.getWorkerSource(n,t.type).abortTile(t)};i.prototype.removeTile=function(n,t){this.getWorkerSource(n,t.type).removeTile(t)};i.prototype.removeSource=function(n,t){var i=this.getWorkerSource(n,t.type);void 0!==i.removeSource&&i.removeSource(t)};i.prototype.redoPlacement=function(n,t,i){this.getWorkerSource(n,t.type).redoPlacement(t,i)};i.prototype.loadWorkerSource=function(n,t,i){try{this.self.importScripts(t.url);i()}catch(n){i(n)}};i.prototype.loadRTLTextPlugin=function(n,t,i){try{r.applyArabicShaping||r.processBidirectionalText||this.self.importScripts(t)}catch(n){i(n)}};i.prototype.getLayerIndex=function(n){var t=this.layerIndexes[n];return t||(t=this.layerIndexes[n]=new f),t};i.prototype.getWorkerSource=function(n,t){var r=this,i;return(this.workerSources[n]||(this.workerSources[n]={}),this.workerSources[n][t])||(i={send:function(t,i,u,f){r.actor.send(t,i,u,f,n)}},this.workerSources[n][t]=new this.workerSourceTypes[t](i,this.getLayerIndex(n))),this.workerSources[n][t]};t.exports=function(n){return new i(n)}},{"../style/style_layer_index":154,"../util/actor":190,"./geojson_worker_source":83,"./rtl_text_plugin":90,"./vector_tile_worker_source":96}],99:[function(n,t){"use strict";function f(n,t){for(var u,i=0,r=n.layers;i<r.length;i+=1)u=r[i],u.recalculate(t)}function e(n,t){return n.filter(function(n){return!n.isEmpty()}).map(function(n){return n.serialize(t)})}var o=n("../data/feature_index"),r=n("../symbol/collision_tile"),s=n("../symbol/collision_box"),h=n("../util/dictionary_coder"),i=n("../util/util"),u=function(n){this.coord=n.coord;this.uid=n.uid;this.zoom=n.zoom;this.tileSize=n.tileSize;this.source=n.source;this.overscaling=n.overscaling;this.angle=n.angle;this.pitch=n.pitch;this.showCollisionBoxes=n.showCollisionBoxes};u.prototype.parse=function(n,t,u,c){var l=this,lt,v,p,w,d,g,ot,b,a,nt,st,yt,pt,ht,tt,ct;n.layers||(n={layers:{_geojsonTileLayer:n}});this.status="parsing";this.data=n;this.collisionBoxArray=new s;lt=new h(Object.keys(n.layers).sort());v=new o(this.coord,this.overscaling);v.bucketLayerIDs={};var y={},ft=0,et={featureIndex:v,iconDependencies:{},glyphDependencies:{}},at=t.familiesBySource[this.source];for(p in at)if(w=n.layers[p],w){1===w.version&&i.warnOnce('Vector tile source "'+l.source+'" layer "'+p+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var bt=lt.encode(p),vt=[],k=0;k<w.length;k++)d=w.feature(k),d.index=k,d.sourceLayerIndex=bt,vt.push(d);for(g=0,ot=at[p];g<ot.length;g+=1)if(b=ot[g],a=b[0],!(a.minzoom&&l.zoom<a.minzoom||a.maxzoom&&l.zoom>=a.maxzoom||a.layout&&"none"===a.layout.visibility)){for(nt=0,st=b;nt<st.length;nt+=1)yt=st[nt],yt.recalculate(l.zoom);pt=y[a.id]=a.createBucket({index:ft,layers:b,zoom:l.zoom,overscaling:l.overscaling,collisionBoxArray:l.collisionBoxArray});pt.populate(vt,et);v.bucketLayerIDs[ft]=b.map(function(n){return n.id});ft++}}for(ht=function(n){var r,t;l.status="done";v.paintPropertyStatistics={};for(r in y)i.extend(v.paintPropertyStatistics,y[r].getPaintPropertyStatistics());t=[];c(null,{buckets:e(i.values(y),t),featureIndex:v.serialize(t),collisionTile:n.serialize(t),collisionBoxArray:l.collisionBoxArray.serialize()},t)},this.symbolBuckets=[],tt=t.symbolOrder.length-1;tt>=0;tt--)ct=y[t.symbolOrder[tt]],ct&&l.symbolBuckets.push(ct);if(0===this.symbolBuckets.length)return ht(new r(this.angle,this.pitch,this.collisionBoxArray));var wt=0,it=Object.keys(et.iconDependencies),rt=i.mapObject(et.glyphDependencies,function(n){return Object.keys(n).map(Number)}),ut=function(n){var t;if(n)return c(n);if(wt++,2===wt){for(var u=new r(l.angle,l.pitch,l.collisionBoxArray),i=0,e=l.symbolBuckets;i<e.length;i+=1)t=e[i],f(t,l.zoom),t.prepare(rt,it),t.place(u,l.showCollisionBoxes);ht(u)}};Object.keys(rt).length?u.send("getGlyphs",{uid:this.uid,stacks:rt},function(n,t){rt=t;ut(n)}):ut();it.length?u.send("getIcons",{icons:it},function(n,t){it=t;ut(n)}):ut()};u.prototype.redoPlacement=function(n,t,i){var h=this,s,u;if(this.angle=n,this.pitch=t,"done"!==this.status)return{};for(var c=new r(this.angle,this.pitch,this.collisionBoxArray),o=0,l=h.symbolBuckets;o<l.length;o+=1)s=l[o],f(s,h.zoom),s.place(c,i);return u=[],{result:{buckets:e(this.symbolBuckets,u),collisionTile:c.serialize(u)},transferables:u}};t.exports=u},{"../data/feature_index":55,"../symbol/collision_box":160,"../symbol/collision_tile":162,"../util/dictionary_coder":197,"../util/util":212}],100:[function(n,t){"use strict";function i(n,t){var i={};for(var r in n)"ref"!==r&&(i[r]=n[r]);return u.forEach(function(n){n in t&&(i[n]=t[n])}),i}function r(n){var u,r,t;for(n=n.slice(),u=Object.create(null),r=0;r<n.length;r++)u[n[r].id]=n[r];for(t=0;t<n.length;t++)"ref"in n[t]&&(n[t]=i(n[t],u[n[t].ref]));return n}var u=n("./util/ref_properties");t.exports=r},{"./util/ref_properties":122}],101:[function(n,t){"use strict";function o(n,t,u,f){n=n||{};t=t||{};for(var e in n)n.hasOwnProperty(e)&&(t.hasOwnProperty(e)||(u.push({command:i.removeSource,args:[e]}),f[e]=!0));for(e in t)t.hasOwnProperty(e)&&(n.hasOwnProperty(e)?r(n[e],t[e])||(u.push({command:i.removeSource,args:[e]}),u.push({command:i.addSource,args:[e,t[e]]}),f[e]=!0):u.push({command:i.addSource,args:[e,t[e]]}))}function u(n,t,i,u,f,e){n=n||{};t=t||{};for(var o in n)n.hasOwnProperty(o)&&(r(n[o],t[o])||i.push({command:e,args:[u,o,t[o],f]}));for(o in t)t.hasOwnProperty(o)&&!n.hasOwnProperty(o)&&(r(n[o],t[o])||i.push({command:e,args:[u,o,t[o],f]}))}function f(n){return n.id}function e(n,t){return n[t.id]=t,n}function s(n,t,o){n=n||[];t=t||[];for(var h,l,c,w,s,b=n.map(f),p=t.map(f),d=n.reduce(e,{}),k=t.reduce(e,{}),v=b.slice(),g=Object.create(null),a=0,y=0;a<b.length;a++)h=b[a],k.hasOwnProperty(h)?y++:(o.push({command:i.removeLayer,args:[h]}),v.splice(v.indexOf(h,y),1));for(a=0,y=0;a<p.length;a++)h=p[p.length-1-a],v[v.length-1-a]!==h&&(d.hasOwnProperty(h)?(o.push({command:i.removeLayer,args:[h]}),v.splice(v.lastIndexOf(h,v.length-y),1)):y++,w=v[v.length-a],o.push({command:i.addLayer,args:[k[h],w]}),v.splice(v.length-a,0,h),g[h]=!0);for(a=0;a<p.length;a++)if(h=p[a],l=d[h],c=k[h],!g[h]&&!r(l,c))if(r(l.source,c.source)&&r(l["source-layer"],c["source-layer"])&&r(l.type,c.type)){u(l.layout,c.layout,o,h,null,i.setLayoutProperty);u(l.paint,c.paint,o,h,null,i.setPaintProperty);r(l.filter,c.filter)||o.push({command:i.setFilter,args:[h,c.filter]});r(l.minzoom,c.minzoom)&&r(l.maxzoom,c.maxzoom)||o.push({command:i.setLayerZoomRange,args:[h,c.minzoom,c.maxzoom]});for(s in l)l.hasOwnProperty(s)&&"layout"!==s&&"paint"!==s&&"filter"!==s&&"metadata"!==s&&"minzoom"!==s&&"maxzoom"!==s&&(0===s.indexOf("paint.")?u(l[s],c[s],o,h,s.slice(6),i.setPaintProperty):r(l[s],c[s])||o.push({command:i.setLayerProperty,args:[h,s,c[s]]}));for(s in c)c.hasOwnProperty(s)&&!l.hasOwnProperty(s)&&"layout"!==s&&"paint"!==s&&"filter"!==s&&"metadata"!==s&&"minzoom"!==s&&"maxzoom"!==s&&(0===s.indexOf("paint.")?u(l[s],c[s],o,h,s.slice(6),i.setPaintProperty):r(l[s],c[s])||o.push({command:i.setLayerProperty,args:[h,s,c[s]]}))}else o.push({command:i.removeLayer,args:[h]}),w=v[v.lastIndexOf(h)+1],o.push({command:i.addLayer,args:[c,w]})}function h(n,t){var u,f,e,h;if(!n)return[{command:i.setStyle,args:[t]}];u=[];try{if(!r(n.version,t.version))return[{command:i.setStyle,args:[t]}];r(n.center,t.center)||u.push({command:i.setCenter,args:[t.center]});r(n.zoom,t.zoom)||u.push({command:i.setZoom,args:[t.zoom]});r(n.bearing,t.bearing)||u.push({command:i.setBearing,args:[t.bearing]});r(n.pitch,t.pitch)||u.push({command:i.setPitch,args:[t.pitch]});r(n.sprite,t.sprite)||u.push({command:i.setSprite,args:[t.sprite]});r(n.glyphs,t.glyphs)||u.push({command:i.setGlyphs,args:[t.glyphs]});r(n.transition,t.transition)||u.push({command:i.setTransition,args:[t.transition]});r(n.light,t.light)||u.push({command:i.setLight,args:[t.light]});f={};e=[];o(n.sources,t.sources,e,f);h=[];n.layers&&n.layers.forEach(function(n){f[n.source]?u.push({command:i.removeLayer,args:[n.id]}):h.push(n)});u=u.concat(e);s(h,t.layers,u)}catch(n){console.warn("Unable to compute style diff:",n);u=[{command:i.setStyle,args:[t]}]}return u}var r=n("lodash.isequal"),i={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};t.exports=h;t.exports.operations=i},{"lodash.isequal":114}],102:[function(n,t){"use strict";function r(n,t){this.message=(n?n+": ":"")+i.apply(i,Array.prototype.slice.call(arguments,2));null!==t&&void 0!==t&&t.__line__&&(this.line=t.__line__)}var i=n("util").format;t.exports=r},{util:33}],103:[function(n,t){"use strict";function c(n){return new Function("f","var p = (f && f.properties || {}); return "+f(n))}function f(n){var t,f;return n?(t=n[0],n.length<=1)?"any"===t?"false":"true":(f="=="===t?i(n[1],n[2],"===",!1):"!="===t?i(n[1],n[2],"!==",!1):"<"===t||">"===t||"<="===t||">="===t?i(n[1],n[2],t,!0):"any"===t?r(n.slice(1),"||"):"all"===t?r(n.slice(1),"&&"):"none"===t?u(r(n.slice(1),"||")):"in"===t?o(n[1],n.slice(2)):"!in"===t?u(o(n[1],n.slice(2))):"has"===t?s(n[1]):"!has"===t?u(s(n[1])):"true","("+f+")"):"true"}function e(n){return"$type"===n?"f.type":"$id"===n?"f.id":"p["+JSON.stringify(n)+"]"}function i(n,t,i,r){var u=e(n),f="$type"===n?h.indexOf(t):JSON.stringify(t);return(r?"typeof "+u+"=== typeof "+f+"&&":"")+u+i+f}function r(n,t){return n.map(f).join(t)}function o(n,t){"$type"===n&&(t=t.map(function(n){return h.indexOf(n)}));var i=JSON.stringify(t.sort(l)),r=e(n);return t.length<=200?i+".indexOf("+r+") !== -1":"function(v, a, i, j) {while (i <= j) { var m = (i + j) >> 1;    if (a[m] === v) return true; if (a[m] > v) j = m - 1; else i = m + 1;}return false; }("+r+", "+i+",0,"+(t.length-1)+")"}function s(n){return"$id"===n?'"id" in f':JSON.stringify(n)+" in p"}function u(n){return"!("+n+")"}function l(n,t){return n<t?-1:n>t?1:0}t.exports=c;var h=["Unknown","Point","LineString","Polygon"]},{}],104:[function(n,t){"use strict";function r(n){return n>w?Math.pow(n,1/3):n/v+a}function u(n){return n>i?n*n*n:v*(n-a)}function f(n){return 255*(n<=.0031308?12.92*n:1.055*Math.pow(n,1/2.4)-.055)}function e(n){return n/=255,n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function o(n){var t=e(n[0]),i=e(n[1]),u=e(n[2]),o=r((.4124564*t+.3575761*i+.1804375*u)/h),f=r((.2126729*t+.7151522*i+.072175*u)/c),s=r((.0193339*t+.119192*i+.9503041*u)/l);return[116*f-16,500*(o-f),200*(f-s),n[3]]}function s(n){var t=(n[0]+16)/116,i=isNaN(n[1])?t:t+n[1]/500,r=isNaN(n[2])?t:t-n[2]/200;return t=c*u(t),i=h*u(i),r=l*u(r),[f(3.2404542*i-1.5371385*t-.4985314*r),f(-.969266*i+1.8760108*t+.041556*r),f(.0556434*i-.2040259*t+1.0572252*r),n[3]]}function y(n){var t=o(n),f=t[0],i=t[1],r=t[2],u=Math.atan2(r,i)*k;return[u<0?u+360:u,Math.sqrt(i*i+r*r),f,n[3]]}function p(n){var t=n[0]*b,i=n[1],r=n[2];return s([r,Math.cos(t)*i,Math.sin(t)*i,n[3]])}var h=.95047,c=1,l=1.08883,a=4/29,i=6/29,v=3*i*i,w=i*i*i,b=Math.PI/180,k=180/Math.PI;t.exports={lab:{forward:o,reverse:s},hcl:{forward:y,reverse:p}}},{}],105:[function(n,t){"use strict";function a(n){return n}function f(n,t){var u,st="color"===t.type,s,g,it,nt,rt,ut,d,ft,h,o,ot;if(c(n)){var tt=n.stops&&"object"==typeof n.stops[0][0],ct=tt||void 0!==n.property,lt=tt||!ct,k=n.type||("interpolated"===t.function?"exponential":"interval");if(st&&(n=b({},n),n.stops&&(n.stops=n.stops.map(function(n){return[n[0],r(n[1])]})),n.default=n.default?r(n.default):r(t.default)),"exponential"===k)s=e;else if("interval"===k)s=y;else if("categorical"===k){for(s=v,g=Object.create(null),nt=0,rt=n.stops;nt<rt.length;nt+=1)ut=rt[nt],g[ut[0]]=ut[1];it=typeof n.stops[0][0]}else{if("identity"!==k)throw new Error('Unknown function type "'+k+'"');s=p}if(n.colorSpace&&"rgb"!==n.colorSpace){if(!l[n.colorSpace])throw new Error("Unknown color space: "+n.colorSpace);for(ft=l[n.colorSpace],n=JSON.parse(JSON.stringify(n)),h=0;h<n.stops.length;h++)n.stops[h]=[n.stops[h][0],ft.forward(n.stops[h][1])];d=ft.reverse}else d=a;if(tt){for(var w={},ht=[],et=0;et<n.stops.length;et++)o=n.stops[et],void 0===w[o[0].zoom]&&(w[o[0].zoom]={zoom:o[0].zoom,type:n.type,property:n.property,stops:[]}),w[o[0].zoom].stops.push([o[0].value,o[1]]);for(ot in w)ht.push([w[ot].zoom,f(w[ot],t)]);u=function(i,r){return d(e({stops:ht,base:n.base},t,i)(i,r))};u.isFeatureConstant=!1;u.isZoomConstant=!1}else lt?(u=function(i){return d(s(n,t,i,g,it))},u.isFeatureConstant=!0,u.isZoomConstant=!1):(u=function(r,u){var f=u[n.property];return void 0===f?i(n.default,t.default):d(s(n,t,f,g,it))},u.isFeatureConstant=!1,u.isZoomConstant=!0)}else st&&n&&(n=r(n)),u=function(){return n},u.isFeatureConstant=!0,u.isZoomConstant=!0;return u}function i(n,t,i){return void 0!==n?n:void 0!==t?t:void 0!==i?i:void 0}function v(n,t,r,u,f){var e=typeof r===f?u[r]:void 0;return i(e,n.default,t.default)}function y(n,t,r){var f,e;return"number"!==u(r)?i(n.default,t.default):(f=n.stops.length,1===f)?n.stops[0][1]:r<=n.stops[0][0]?n.stops[0][1]:r>=n.stops[f-1][0]?n.stops[f-1][1]:(e=o(n.stops,r),n.stops[e][1])}function e(n,t,r){var h=void 0!==n.base?n.base:1,e,f;return"number"!==u(r)?i(n.default,t.default):(e=n.stops.length,1===e)?n.stops[0][1]:r<=n.stops[0][0]?n.stops[0][1]:r>=n.stops[e-1][0]?n.stops[e-1][1]:(f=o(n.stops,r),s(r,h,n.stops[f][0],n.stops[f+1][0],n.stops[f][1],n.stops[f+1][1]))}function p(n,t,f){return"color"===t.type?f=r(f):u(f)!==t.type&&(f=void 0),i(f,n.default,t.default)}function o(n,t){for(var r,e,o=n.length,u=0,f=o-1,i=0;u<=f;){if(i=Math.floor((u+f)/2),r=n[i][0],e=n[i+1][0],t>=r&&t<e)return i;r<t?u=i+1:r>t&&(f=i-1)}return Math.max(i-1,0)}function s(n,t,i,r,u,f){return"function"==typeof u?function(){var e=u.apply(void 0,arguments),o=f.apply(void 0,arguments);if(void 0!==e&&void 0!==o)return s(n,t,i,r,e,o)}:u.length?w(n,t,i,r,u,f):h(n,t,i,r,u,f)}function h(n,t,i,r,u,f){var e,o=r-i,s=n-i;return e=1===t?s/o:(Math.pow(t,s)-1)/(Math.pow(t,o)-1),u*(1-e)+f*e}function w(n,t,i,r,u,f){for(var o=[],e=0;e<u.length;e++)o[e]=h(n,t,i,r,u[e],f[e]);return o}function c(n){return"object"==typeof n&&(n.stops||"identity"===n.type)}var l=n("./color_spaces"),r=n("../util/parse_color"),b=n("../util/extend"),u=n("../util/get_type");t.exports=f;t.exports.isFunctionDefinition=c},{"../util/extend":119,"../util/get_type":120,"../util/parse_color":121,"./color_spaces":104}],106:[function(n,t){"use strict";function i(n){return f(u.map(function(t){return n[t]}))}function r(n){for(var f,u,e,o,t={},r=0;r<n.length;r++)f=i(n[r]),u=t[f],u||(u=t[f]=[]),u.push(n[r]);e=[];for(o in t)e.push(t[o]);return e}var u=n("./util/ref_properties"),f=n("fast-stable-stringify");t.exports=r},{"./util/ref_properties":122,"fast-stable-stringify":108}],107:[function(n,t,i){function r(n){return n=Math.round(n),n<0?0:n>255?255:n}function s(n){return n<0?0:n>1?1:n}function f(n){return r("%"===n[n.length-1]?parseFloat(n)/100*255:parseInt(n))}function u(n){return s("%"===n[n.length-1]?parseFloat(n)/100:parseFloat(n))}function e(n,t,i){return i<0?i+=1:i>1&&(i-=1),6*i<1?n+(t-n)*i*6:2*i<1?t:3*i<2?n+(t-n)*(2/3-i)*6:n}function h(n){var i=n.replace(/ /g,"").toLowerCase(),t,h,v;if(i in o)return o[i].slice();if("#"===i[0])return 4===i.length?(t=parseInt(i.substr(1),16),t>=0&&t<=4095?[(3840&t)>>4|(3840&t)>>8,240&t|(240&t)>>4,15&t|(15&t)<<4,1]:null):7===i.length?(t=parseInt(i.substr(1),16),t>=0&&t<=16777215?[(16711680&t)>>16,(65280&t)>>8,255&t,1]:null):null;if(h=i.indexOf("("),v=i.indexOf(")"),h!==-1&&v+1===i.length){var b=i.substr(0,h),s=i.substr(h+1,v-(h+1)).split(","),l=1;switch(b){case"rgba":if(4!==s.length)return null;l=u(s.pop());case"rgb":return 3!==s.length?null:[f(s[0]),f(s[1]),f(s[2]),l];case"hsla":if(4!==s.length)return null;l=u(s.pop());case"hsl":if(3!==s.length)return null;var y=(parseFloat(s[0])%360+360)%360/360,p=u(s[1]),c=u(s[2]),a=c<=.5?c*(p+1):c+p-c*p,w=2*c-a;return[r(255*e(w,a,y+1/3)),r(255*e(w,a,y)),r(255*e(w,a,y-1/3)),l];default:return null}}return null}var o={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};try{i.parseCSSColor=h}catch(c){}},{}],108:[function(n,t){function i(n){var t,f,s,c,h,l;switch(typeof n){case"object":if(null===n)return null;if(e(n)){for(s="[",f=n.length-1,t=0;t<f;t++)s+=i(n[t])+",";return f>-1&&(s+=i(n[t])),s+"]"}for(c=o(n).sort(),f=c.length,s="{",h=c[t=0],l=f>0&&void 0!==n[h];t<f;)l?(s+='"'+h.replace(r,u)+'":'+i(n[h]),h=c[++t],l=t<f&&void 0!==n[h],l&&(s+=",")):(h=c[++t],l=t<f&&void 0!==n[h]);return s+"}";case"undefined":return null;case"string":return'"'+n.replace(r,u)+'"';default:return n}}var f={}.toString,e=Array.isArray||function(n){return"[object Array]"===f.call(n)},o=Object.keys||function(n){var t=[];for(var i in n)n.hasOwnProperty(i)&&t.push(i);return t},r=/[\u0000-\u001f"\\]/g,u=function(n){var t=n.charCodeAt(0);switch(t){case 34:return'\\"';case 92:return"\\\\";case 12:return"\\f";case 10:return"\\n";case 13:return"\\r";case 9:return"\\t";case 8:return"\\b";default:return t>15?"\\u00"+t.toString(16):"\\u000"+t.toString(16)}};t.exports=function(n){if(void 0!==n)return""+i(n)};t.exports.stringSearch=r;t.exports.stringReplace=u},{}],109:[function(n,t){function a(n){return!!n&&"object"==typeof n}function v(n,t){for(var i=-1,r=n.length;++i<r;)if(t(n[i],i,n))return!0;return!1}function u(n,t,i,r,f,e){return n===t||(null==n||null==t||!k(n)&&!a(t)?n!==n&&t!==t:y(n,t,u,i,r,f,e))}function y(n,t,u,o,c,a,v){var d=f(n),it=f(t),y=h,k=h,nt,tt,g,ft;d||(y=l.call(n),y==s?y=i:y!=i&&(d=e(n)));it||(k=l.call(t),k==s?k=i:k!=i&&(it=e(t)));var rt=y==i,et=k==i,ut=y==k;if(ut&&!d&&!rt)return w(n,t,y);if(!c&&(nt=rt&&r.call(n,"__wrapped__"),tt=et&&r.call(t,"__wrapped__"),nt||tt))return u(nt?n.value():n,tt?t.value():t,o,c,a,v);if(!ut)return!1;for(a||(a=[]),v||(v=[]),g=a.length;g--;)if(a[g]==n)return v[g]==t;return a.push(n),v.push(t),ft=(d?p:b)(n,t,u,o,c,a,v),a.pop(),v.pop(),ft}function p(n,t,i,r,u,f,e){var s=-1,c=n.length,l=t.length;if(c!=l&&!(u&&l>c))return!1;for(;++s<c;){var o=n[s],h=t[s],a=r?r(u?h:o,u?o:h,s):void 0;if(void 0!==a){if(a)continue;return!1}if(u){if(!v(t,function(n){return o===n||i(o,n,r,u,f,e)}))return!1}else if(o!==h&&!i(o,h,r,u,f,e))return!1}return!0}function w(n,t,i){switch(i){case d:case g:return+n==+t;case nt:return n.name==t.name&&n.message==t.message;case tt:return n!=+n?t!=+t:n==+t;case it:case rt:return n==t+""}return!1}function b(n,t,i,u,f,e,s){var y=o(n),p=y.length,d=o(t),g=d.length,c,h,v,l,a;if(p!=g&&!f)return!1;for(c=p;c--;)if(h=y[c],!(f?h in t:r.call(t,h)))return!1;for(v=f;++c<p;){h=y[c];var w=n[h],b=t[h],k=u?u(f?b:w,f?w:b,h):void 0;if(!(void 0===k?i(w,b,u,f,e,s):k))return!1;v||(v="constructor"==h)}return!v&&(l=n.constructor,a=t.constructor,l!=a&&"constructor"in n&&"constructor"in t&&!("function"==typeof l&&l instanceof l&&"function"==typeof a&&a instanceof a))?!1:!0}function k(n){var t=typeof n;return!!n&&("object"==t||"function"==t)}var f=n("lodash.isarray"),e=n("lodash.istypedarray"),o=n("lodash.keys"),s="[object Arguments]",h="[object Array]",d="[object Boolean]",g="[object Date]",nt="[object Error]",tt="[object Number]",i="[object Object]",it="[object RegExp]",rt="[object String]",c=Object.prototype,r=c.hasOwnProperty,l=c.toString;t.exports=u},{"lodash.isarray":113,"lodash.istypedarray":115,"lodash.keys":116}],110:[function(n,t){function i(n,t,i){if("function"!=typeof n)return r;if(void 0===t)return n;switch(i){case 1:return function(i){return n.call(t,i)};case 3:return function(i,r,u){return n.call(t,i,r,u)};case 4:return function(i,r,u,f){return n.call(t,i,r,u,f)};case 5:return function(i,r,u,f,e){return n.call(t,i,r,u,f,e)}}return function(){return n.apply(t,arguments)}}function r(n){return n}t.exports=i},{}],111:[function(n,t){function u(n){return!!n&&"object"==typeof n}function f(n,t){var i=null==n?void 0:n[t];if(s(i))return i}function e(n){return o(n)&&a.call(n)==h}function o(n){var t=typeof n;return!!n&&("object"==t||"function"==t)}function s(n){return null!=n&&(e(n)?v.test(r.call(n)):u(n)&&c.test(n))}var h="[object Function]",c=/^\[object .+?Constructor\]$/,i=Object.prototype,r=Function.prototype.toString,l=i.hasOwnProperty,a=i.toString,v=RegExp("^"+r.call(l).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=f},{}],112:[function(n,t){function u(n){return e(n)&&p.call(n,"callee")&&(!w.call(n,"callee")||r.call(n)==a)}function f(n){return null!=n&&s(n.length)&&!o(n)}function e(n){return c(n)&&f(n)}function o(n){var t=h(n)?r.call(n):"";return t==v||t==y}function s(n){return"number"==typeof n&&n>-1&&n%1==0&&n<=l}function h(n){var t=typeof n;return!!n&&("object"==t||"function"==t)}function c(n){return!!n&&"object"==typeof n}var l=9007199254740991,a="[object Arguments]",v="[object Function]",y="[object GeneratorFunction]",i=Object.prototype,p=i.hasOwnProperty,r=i.toString,w=i.propertyIsEnumerable;t.exports=u},{}],113:[function(n,t){function i(n){return!!n&&"object"==typeof n}function e(n,t){var i=null==n?void 0:n[t];if(c(i))return i}function o(n){return"number"==typeof n&&n>-1&&n%1==0&&n<=b}function s(n){return h(n)&&f.call(n)==a}function h(n){var t=typeof n;return!!n&&("object"==t||"function"==t)}function c(n){return null!=n&&(s(n)?p.test(u.call(n)):i(n)&&v.test(n))}var l="[object Array]",a="[object Function]",v=/^\[object .+?Constructor\]$/,r=Object.prototype,u=Function.prototype.toString,y=r.hasOwnProperty,f=r.toString,p=RegExp("^"+u.call(y).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),w=e(Array,"isArray"),b=9007199254740991,k=w||function(n){return i(n)&&o(n.length)&&f.call(n)==l};t.exports=k},{}],114:[function(n,t){function i(n,t,i,f){i="function"==typeof i?u(i,f,3):void 0;var e=i?i(n,t):void 0;return void 0===e?r(n,t,i):!!e}var r=n("lodash._baseisequal"),u=n("lodash._bindcallback");t.exports=i},{"lodash._baseisequal":109,"lodash._bindcallback":110}],115:[function(n,t){function f(n){return"number"==typeof n&&n>-1&&n%1==0&&n<=s}function e(n){return!!n&&"object"==typeof n}function o(n){return e(n)&&f(n.length)&&!!i[u.call(n)]}var s=9007199254740991,i={},r,u;i["[object Float32Array]"]=i["[object Float64Array]"]=i["[object Int8Array]"]=i["[object Int16Array]"]=i["[object Int32Array]"]=i["[object Uint8Array]"]=i["[object Uint8ClampedArray]"]=i["[object Uint16Array]"]=i["[object Uint32Array]"]=!0;i["[object Arguments]"]=i["[object Array]"]=i["[object ArrayBuffer]"]=i["[object Boolean]"]=i["[object DataView]"]=i["[object Date]"]=i["[object Error]"]=i["[object Function]"]=i["[object Map]"]=i["[object Number]"]=i["[object Object]"]=i["[object RegExp]"]=i["[object Set]"]=i["[object String]"]=i["[object WeakMap]"]=!1;r=Object.prototype;u=r.toString;t.exports=o},{}],116:[function(n,t){function l(n){return function(t){if(null!=t)return t[n]}}function a(n){return null!=n&&i(b(n))}function r(n,t){return n="number"==typeof n||p.test(n)?+n:-1,t=null==t?c:t,n>-1&&n%1==0&&n<t}function i(n){return"number"==typeof n&&n>-1&&n%1==0&&n<=c}function u(n){for(var t,f=v(n),h=f.length,u=h&&n.length,a=!!u&&i(u)&&(o(n)||e(n)),c=-1,l=[];++c<h;)t=f[c],(a&&r(t,u)||s.call(n,t))&&l.push(t);return l}function f(n){var t=typeof n;return!!n&&("object"==t||"function"==t)}function v(n){var t,u;if(null==n)return[];f(n)||(n=Object(n));t=n.length;t=t&&i(t)&&(o(n)||e(n))&&t||0;for(var l=n.constructor,h=-1,a="function"==typeof l&&l.prototype===n,c=Array(t),v=t>0;++h<t;)c[h]=h+"";for(u in n)v&&r(u,t)||"constructor"==u&&(a||!s.call(n,u))||c.push(u);return c}var y=n("lodash._getnative"),e=n("lodash.isarguments"),o=n("lodash.isarray"),p=/^\d+$/,w=Object.prototype,s=w.hasOwnProperty,h=y(Object,"keys"),c=9007199254740991,b=l("length"),k=h?function(n){var t=null==n?void 0:n.constructor;return"function"==typeof t&&t.prototype===n||"function"!=typeof n&&a(n)?u(n):f(n)?h(n):[]}:u;t.exports=k},{"lodash._getnative":111,"lodash.isarguments":112,"lodash.isarray":113}],117:[function(n,t){"use strict";t.exports=n("./v8.json")},{"./v8.json":118}],118:[function(n,t){t.exports={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number","default":0,period:360,units:"degrees"},pitch:{type:"number","default":0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_tile","source_geojson","source_video","source_image","source_canvas"],source_tile:{type:{required:!0,type:"enum",values:{vector:{},raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},minzoom:{type:"number","default":0},maxzoom:{type:"number","default":22},tileSize:{type:"number","default":512,units:"pixels"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number","default":18},buffer:{type:"number","default":128,maximum:512,minimum:0},tolerance:{type:"number","default":.375},cluster:{type:"boolean","default":!1},clusterRadius:{type:"number","default":50,minimum:0},clusterMaxZoom:{type:"number"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_canvas:{type:{required:!0,type:"enum",values:{canvas:{}}},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}},animate:{type:"boolean","default":"true"},canvas:{type:"string",required:!0}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},"fill-extrusion":{},raster:{},background:{}}},metadata:{type:"*"},ref:{type:"string"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"},"paint.*":{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_fill-extrusion","layout_symbol","layout_raster","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},"default":"visible"}},layout_fill:{visibility:{type:"enum",values:{visible:{},none:{}},"default":"visible"}},layout_circle:{visibility:{type:"enum",values:{visible:{},none:{}},"default":"visible"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},"default":"visible"}},layout_line:{"line-cap":{type:"enum","function":"piecewise-constant","zoom-function":!0,values:{butt:{},round:{},square:{}},"default":"butt"},"line-join":{type:"enum","function":"piecewise-constant","zoom-function":!0,values:{bevel:{},round:{},miter:{}},"default":"miter"},"line-miter-limit":{type:"number","default":2,"function":"interpolated","zoom-function":!0,requires:[{"line-join":"miter"}]},"line-round-limit":{type:"number","default":1.05,"function":"interpolated","zoom-function":!0,requires:[{"line-join":"round"}]},visibility:{type:"enum",values:{visible:{},none:{}},"default":"visible"}},layout_symbol:{"symbol-placement":{type:"enum","function":"piecewise-constant","zoom-function":!0,values:{point:{},line:{}},"default":"point"},"symbol-spacing":{type:"number","default":250,minimum:1,"function":"interpolated","zoom-function":!0,units:"pixels",requires:[{"symbol-placement":"line"}]},"symbol-avoid-edges":{type:"boolean","function":"piecewise-constant","zoom-function":!0,"default":!1},"icon-allow-overlap":{type:"boolean","function":"piecewise-constant","zoom-function":!0,"default":!1,requires:["icon-image"]},"icon-ignore-placement":{type:"boolean","function":"piecewise-constant","zoom-function":!0,"default":!1,requires:["icon-image"]},"icon-optional":{type:"boolean","function":"piecewise-constant","zoom-function":!0,"default":!1,requires:["icon-image","text-field"]},"icon-rotation-alignment":{type:"enum","function":"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{},auto:{}},"default":"auto",requires:["icon-image"]},"icon-size":{type:"number","default":1,minimum:0,"function":"interpolated","zoom-function":!0,requires:["icon-image"]},"icon-text-fit":{type:"enum","function":"piecewise-constant","zoom-function":!0,values:{none:{},width:{},height:{},both:{}},"default":"none",requires:["icon-image","text-field"]},"icon-text-fit-padding":{type:"array",value:"number",length:4,"default":[0,0,0,0],units:"pixels","function":"interpolated","zoom-function":!0,requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}]},"icon-image":{type:"string","function":"piecewise-constant","zoom-function":!0,tokens:!0},"icon-rotate":{type:"number","default":0,period:360,"function":"interpolated","zoom-function":!0,"property-function":!0,units:"degrees",requires:["icon-image"]},"icon-padding":{type:"number","default":2,minimum:0,"function":"interpolated","zoom-function":!0,units:"pixels",requires:["icon-image"]},"icon-keep-upright":{type:"boolean","function":"piecewise-constant","zoom-function":!0,"default":!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":"line"}]},"icon-offset":{type:"array",value:"number",length:2,"default":[0,0],"function":"interpolated","zoom-function":!0,"property-function":!0,requires:["icon-image"]},"text-pitch-alignment":{type:"enum","function":"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{},auto:{}},"default":"auto",requires:["text-field"]},"text-rotation-alignment":{type:"enum","function":"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{},auto:{}},"default":"auto",requires:["text-field"]},"text-field":{type:"string","function":"piecewise-constant","zoom-function":!0,"property-function":!0,"default":"",tokens:!0},"text-font":{type:"array",value:"string","function":"piecewise-constant","zoom-function":!0,"default":["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"]},"text-size":{type:"number","default":16,minimum:0,units:"pixels","function":"interpolated","zoom-function":!0,requires:["text-field"]},"text-max-width":{type:"number","default":10,minimum:0,units:"ems","function":"interpolated","zoom-function":!0,requires:["text-field"]},"text-line-height":{type:"number","default":1.2,units:"ems","function":"interpolated","zoom-function":!0,requires:["text-field"]},"text-letter-spacing":{type:"number","default":0,units:"ems","function":"interpolated","zoom-function":!0,requires:["text-field"]},"text-justify":{type:"enum","function":"piecewise-constant","zoom-function":!0,values:{left:{},center:{},right:{}},"default":"center",requires:["text-field"]},"text-anchor":{type:"enum","function":"piecewise-constant","zoom-function":!0,values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center",requires:["text-field"]},"text-max-angle":{type:"number","default":45,units:"degrees","function":"interpolated","zoom-function":!0,requires:["text-field",{"symbol-placement":"line"}]},"text-rotate":{type:"number","default":0,period:360,units:"degrees","function":"interpolated","zoom-function":!0,requires:["text-field"]},"text-padding":{type:"number","default":2,minimum:0,units:"pixels","function":"interpolated","zoom-function":!0,requires:["text-field"]},"text-keep-upright":{type:"boolean","function":"piecewise-constant","zoom-function":!0,"default":!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":"line"}]},"text-transform":{type:"enum","function":"piecewise-constant","zoom-function":!0,"property-function":!0,values:{none:{},uppercase:{},lowercase:{}},"default":"none",requires:["text-field"]},"text-offset":{type:"array",value:"number",units:"ems","function":"interpolated","zoom-function":!0,length:2,"default":[0,0],requires:["text-field"]},"text-allow-overlap":{type:"boolean","function":"piecewise-constant","zoom-function":!0,"default":!1,requires:["text-field"]},"text-ignore-placement":{type:"boolean","function":"piecewise-constant","zoom-function":!0,"default":!1,requires:["text-field"]},"text-optional":{type:"boolean","function":"piecewise-constant","zoom-function":!0,"default":!1,requires:["text-field","icon-image"]},visibility:{type:"enum",values:{visible:{},none:{}},"default":"visible"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},"default":"visible"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},"function":{stops:{type:"array",value:"function_stop"},base:{type:"number","default":1,minimum:0},property:{type:"string","default":"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},"default":"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},"default":"rgb"},"default":{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:22,value:["number","color"],length:2},light:{anchor:{type:"enum","default":"viewport",values:{map:{},viewport:{}},transition:!1},position:{type:"array","default":[1.15,210,30],length:3,value:"number",transition:!0,"function":"interpolated","zoom-function":!0,"property-function":!1},color:{type:"color","default":"#ffffff","function":"interpolated","zoom-function":!0,"property-function":!1,transition:!0},intensity:{type:"number","default":.5,minimum:0,maximum:1,"function":"interpolated","zoom-function":!0,"property-function":!1,transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_fill-extrusion","paint_symbol","paint_raster","paint_background"],paint_fill:{"fill-antialias":{type:"boolean","function":"piecewise-constant","zoom-function":!0,"default":!0},"fill-opacity":{type:"number","function":"interpolated","zoom-function":!0,"property-function":!0,"default":1,minimum:0,maximum:1,transition:!0},"fill-color":{type:"color","default":"#000000","function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"fill-pattern"}]},"fill-outline-color":{type:"color","function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}]},"fill-translate":{type:"array",value:"number",length:2,"default":[0,0],"function":"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"fill-translate-anchor":{type:"enum","function":"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},"default":"map",requires:["fill-translate"]},"fill-pattern":{type:"string","function":"piecewise-constant","zoom-function":!0,transition:!0}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number","function":"interpolated","zoom-function":!0,"property-function":!1,"default":1,minimum:0,maximum:1,transition:!0},"fill-extrusion-color":{type:"color","default":"#000000","function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"fill-extrusion-pattern"}]},"fill-extrusion-translate":{type:"array",value:"number",length:2,"default":[0,0],"function":"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"fill-extrusion-translate-anchor":{type:"enum","function":"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},"default":"map",requires:["fill-extrusion-translate"]},"fill-extrusion-pattern":{type:"string","function":"piecewise-constant","zoom-function":!0,transition:!0},"fill-extrusion-height":{type:"number","function":"interpolated","zoom-function":!0,"property-function":!0,"default":0,minimum:0,units:"meters",transition:!0},"fill-extrusion-base":{type:"number","function":"interpolated","zoom-function":!0,"property-function":!0,"default":0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"]}},paint_line:{"line-opacity":{type:"number","function":"interpolated","zoom-function":!0,"property-function":!0,"default":1,minimum:0,maximum:1,transition:!0},"line-color":{type:"color","default":"#000000","function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"line-pattern"}]},"line-translate":{type:"array",value:"number",length:2,"default":[0,0],"function":"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"line-translate-anchor":{type:"enum","function":"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},"default":"map",requires:["line-translate"]},"line-width":{type:"number","default":1,minimum:0,"function":"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"line-gap-width":{type:"number","default":0,minimum:0,"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-offset":{type:"number","default":0,"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-blur":{type:"number","default":0,minimum:0,"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-dasharray":{type:"array",value:"number","function":"piecewise-constant","zoom-function":!0,minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}]},"line-pattern":{type:"string","function":"piecewise-constant","zoom-function":!0,transition:!0}},paint_circle:{"circle-radius":{type:"number","default":5,minimum:0,"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"circle-color":{type:"color","default":"#000000","function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-blur":{type:"number","default":0,"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-opacity":{type:"number","default":1,minimum:0,maximum:1,"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-translate":{type:"array",value:"number",length:2,"default":[0,0],"function":"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"circle-translate-anchor":{type:"enum","function":"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},"default":"map",requires:["circle-translate"]},"circle-pitch-scale":{type:"enum","function":"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},"default":"map"},"circle-stroke-width":{type:"number","default":0,minimum:0,"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"circle-stroke-color":{type:"color","default":"#000000","function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-stroke-opacity":{type:"number","default":1,minimum:0,maximum:1,"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0}},paint_symbol:{"icon-opacity":{type:"number","default":1,minimum:0,maximum:1,"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["icon-image"]},"icon-color":{type:"color","default":"#000000","function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["icon-image"]},"icon-halo-color":{type:"color","default":"rgba(0, 0, 0, 0)","function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["icon-image"]},"icon-halo-width":{type:"number","default":0,minimum:0,"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["icon-image"]},"icon-halo-blur":{type:"number","default":0,minimum:0,"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["icon-image"]},"icon-translate":{type:"array",value:"number",length:2,"default":[0,0],"function":"interpolated","zoom-function":!0,transition:!0,units:"pixels",requires:["icon-image"]},"icon-translate-anchor":{type:"enum","function":"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},"default":"map",requires:["icon-image","icon-translate"]},"text-opacity":{type:"number","default":1,minimum:0,maximum:1,"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["text-field"]},"text-color":{type:"color","default":"#000000","function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["text-field"]},"text-halo-color":{type:"color","default":"rgba(0, 0, 0, 0)","function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["text-field"]},"text-halo-width":{type:"number","default":0,minimum:0,"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["text-field"]},"text-halo-blur":{type:"number","default":0,minimum:0,"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["text-field"]},"text-translate":{type:"array",value:"number",length:2,"default":[0,0],"function":"interpolated","zoom-function":!0,transition:!0,units:"pixels",requires:["text-field"]},"text-translate-anchor":{type:"enum","function":"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},"default":"map",requires:["text-field","text-translate"]}},paint_raster:{"raster-opacity":{type:"number","default":1,minimum:0,maximum:1,"function":"interpolated","zoom-function":!0,transition:!0},"raster-hue-rotate":{type:"number","default":0,period:360,"function":"interpolated","zoom-function":!0,transition:!0,units:"degrees"},"raster-brightness-min":{type:"number","function":"interpolated","zoom-function":!0,"default":0,minimum:0,maximum:1,transition:!0},"raster-brightness-max":{type:"number","function":"interpolated","zoom-function":!0,"default":1,minimum:0,maximum:1,transition:!0},"raster-saturation":{type:"number","default":0,minimum:-1,maximum:1,"function":"interpolated","zoom-function":!0,transition:!0},"raster-contrast":{type:"number","default":0,minimum:-1,maximum:1,"function":"interpolated","zoom-function":!0,transition:!0},"raster-fade-duration":{type:"number","default":300,minimum:0,"function":"interpolated","zoom-function":!0,transition:!0,units:"milliseconds"}},paint_background:{"background-color":{type:"color","default":"#000000","function":"interpolated","zoom-function":!0,transition:!0,requires:[{"!":"background-pattern"}]},"background-pattern":{type:"string","function":"piecewise-constant","zoom-function":!0,transition:!0},"background-opacity":{type:"number","default":1,minimum:0,maximum:1,"function":"interpolated","zoom-function":!0,transition:!0}},transition:{duration:{type:"number","default":300,minimum:0,units:"milliseconds"},delay:{type:"number","default":0,minimum:0,units:"milliseconds"}}}},{}],119:[function(n,t){"use strict";t.exports=function(n){for(var i,r,u=arguments,t=1;t<arguments.length;t++){i=u[t];for(r in i)n[r]=i[r]}return n}},{}],120:[function(n,t){"use strict";t.exports=function(n){return n instanceof Number?"number":n instanceof String?"string":n instanceof Boolean?"boolean":Array.isArray(n)?"array":null===n?"null":typeof n}},{}],121:[function(n,t){"use strict";var i=n("csscolorparser").parseCSSColor;t.exports=function(n){if("string"==typeof n){var t=i(n);return t?[t[0]/255*t[3],t[1]/255*t[3],t[2]/255*t[3],t[3]]:void 0}if(Array.isArray(n))return n}},{csscolorparser:107}],122:[function(n,t){"use strict";t.exports=["type","source","source-layer","minzoom","maxzoom","filter","layout"]},{}],123:[function(n,t){"use strict";t.exports=function(n){return n instanceof Number||n instanceof String||n instanceof Boolean?n.valueOf():n}},{}],124:[function(n,t){"use strict";var i=n("../error/validation_error"),r=n("../util/get_type"),u=n("../util/extend");t.exports=function(t){var l=n("./validate_function"),a=n("./validate_object"),o={"*":function(){return[]},array:n("./validate_array"),boolean:n("./validate_boolean"),number:n("./validate_number"),color:n("./validate_color"),constants:n("./validate_constants"),"enum":n("./validate_enum"),filter:n("./validate_filter"),"function":n("./validate_function"),layer:n("./validate_layer"),object:n("./validate_object"),source:n("./validate_source"),light:n("./validate_light"),string:n("./validate_string")},f=t.value,e=t.valueSpec,s=t.key,h=t.styleSpec,c=t.style;if("string"===r(f)&&"@"===f[0]){if(h.$version>7)return[new i(s,f,"constants have been deprecated as of v8")];if(!(f in c.constants))return[new i(s,f,'constant "%s" not found',f)];t=u({},t,{value:c.constants[f]})}return e.function&&"object"===r(f)?l(t):e.type&&o[e.type]?o[e.type](t):a(u({},t,{valueSpec:e.type?h[e.type]:e}))}},{"../error/validation_error":102,"../util/extend":119,"../util/get_type":120,"./validate_array":125,"./validate_boolean":126,"./validate_color":127,"./validate_constants":128,"./validate_enum":129,"./validate_filter":130,"./validate_function":131,"./validate_layer":133,"./validate_light":135,"./validate_number":136,"./validate_object":137,"./validate_source":140,"./validate_string":141}],125:[function(n,t){"use strict";var i=n("../util/get_type"),u=n("./validate"),r=n("../error/validation_error");t.exports=function(n){var t=n.value,f=n.valueSpec,l=n.style,c=n.styleSpec,o=n.key,a=n.arrayElementValidator||u,s,h,e;if("array"!==i(t))return[new r(o,t,"array expected, %s found",i(t))];if(f.length&&t.length!==f.length)return[new r(o,t,"array length %d expected, length %d found",f.length,t.length)];if(f["min-length"]&&t.length<f["min-length"])return[new r(o,t,"array length at least %d expected, length %d found",f["min-length"],t.length)];for(s={type:f.value},c.$version<7&&(s.function=f.function),"object"===i(f.value)&&(s=f.value),h=[],e=0;e<t.length;e++)h=h.concat(a({array:t,arrayIndex:e,value:t[e],valueSpec:s,style:l,styleSpec:c,key:o+"["+e+"]"}));return h}},{"../error/validation_error":102,"../util/get_type":120,"./validate":124}],126:[function(n,t){"use strict";var i=n("../util/get_type"),r=n("../error/validation_error");t.exports=function(n){var t=n.value,f=n.key,u=i(t);return"boolean"!==u?[new r(f,t,"boolean expected, %s found",u)]:[]}},{"../error/validation_error":102,"../util/get_type":120}],127:[function(n,t){"use strict";var i=n("../error/validation_error"),r=n("../util/get_type"),u=n("csscolorparser").parseCSSColor;t.exports=function(n){var f=n.key,t=n.value,e=r(t);return"string"!==e?[new i(f,t,"color expected, %s found",e)]:null===u(t)?[new i(f,t,'color expected, "%s" found',t)]:[]}},{"../error/validation_error":102,"../util/get_type":120,csscolorparser:107}],128:[function(n,t){"use strict";var i=n("../error/validation_error"),r=n("../util/get_type");t.exports=function(n){var f=n.key,t=n.value,s=n.styleSpec,e,o,u;if(s.$version>7)return t?[new i(f,t,"constants have been deprecated as of v8")]:[];if(e=r(t),"object"!==e)return[new i(f,t,"object expected, %s found",e)];o=[];for(u in t)"@"!==u[0]&&o.push(new i(f+"."+u,t[u],'constants must start with "@"'));return o}},{"../error/validation_error":102,"../util/get_type":120}],129:[function(n,t){"use strict";var i=n("../error/validation_error"),r=n("../util/unbundle_jsonlint");t.exports=function(n){var e=n.key,t=n.value,u=n.valueSpec,f=[];return Array.isArray(u.values)?u.values.indexOf(r(t))===-1&&f.push(new i(e,t,"expected one of [%s], %s found",u.values.join(", "),t)):Object.keys(u.values).indexOf(r(t))===-1&&f.push(new i(e,t,"expected one of [%s], %s found",Object.keys(u.values).join(", "),t)),f}},{"../error/validation_error":102,"../util/unbundle_jsonlint":123}],130:[function(n,t){"use strict";var i=n("../error/validation_error"),f=n("./validate_enum"),r=n("../util/get_type"),u=n("../util/unbundle_jsonlint");t.exports=function e(n){var s,t=n.value,h=n.key,a=n.styleSpec,o=[],c,l;if("array"!==r(t))return[new i(h,t,"array expected, %s found",r(t))];if(t.length<1)return[new i(h,t,"filter array must have at least 1 element")];switch(o=o.concat(f({key:h+"[0]",value:t[0],valueSpec:a.filter_operator,style:n.style,styleSpec:n.styleSpec})),u(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&"$type"===u(t[1])&&o.push(new i(h,t,'"$type" cannot be use with operator "%s"',t[0]));case"==":case"!=":3!==t.length&&o.push(new i(h,t,'filter array for operator "%s" must have 3 elements',t[0]));case"in":case"!in":for(t.length>=2&&(s=r(t[1]),"string"!==s&&o.push(new i(h+"[1]",t[1],"string expected, %s found",s))),c=2;c<t.length;c++)s=r(t[c]),"$type"===u(t[1])?o=o.concat(f({key:h+"["+c+"]",value:t[c],valueSpec:a.geometry_type,style:n.style,styleSpec:n.styleSpec})):"string"!==s&&"number"!==s&&"boolean"!==s&&o.push(new i(h+"["+c+"]",t[c],"string, number, or boolean expected, %s found",s));break;case"any":case"all":case"none":for(l=1;l<t.length;l++)o=o.concat(e({key:h+"["+l+"]",value:t[l],style:n.style,styleSpec:n.styleSpec}));break;case"has":case"!has":s=r(t[1]);2!==t.length?o.push(new i(h,t,'filter array for "%s" operator must have 2 elements',t[0])):"string"!==s&&o.push(new i(h+"[1]",t[1],"string expected, %s found",s))}return o}},{"../error/validation_error":102,"../util/get_type":120,"../util/unbundle_jsonlint":123,"./validate_enum":129}],131:[function(n,t){"use strict";var i=n("../error/validation_error"),r=n("../util/get_type"),f=n("./validate"),e=n("./validate_object"),o=n("./validate_array"),s=n("./validate_number"),u=n("../util/unbundle_jsonlint");t.exports=function(n){function k(n){if("identity"===t)return[new i(n.key,n.value,'identity function may not have a "stops" property')];var u=[],f=n.value;return u=u.concat(o({key:n.key,value:f,valueSpec:n.valueSpec,style:n.style,styleSpec:n.styleSpec,arrayElementValidator:d})),"array"===r(f)&&0===f.length&&u.push(new i(n.key,f,"array must have at least one stop")),u}function d(n){var h=[],t=n.value,o=n.key;if("array"!==r(t))return[new i(o,t,"array expected, %s found",r(t))];if(2!==t.length)return[new i(o,t,"array length %d expected, length %d found",2,t.length)];if(b){if("object"!==r(t[0]))return[new i(o,t,"object expected, %s found",r(t[0]))];if(void 0===t[0].zoom)return[new i(o,t,"object stop key must have zoom")];if(void 0===t[0].value)return[new i(o,t,"object stop key must have value")];if(a&&a>u(t[0].zoom))return[new i(o,t[0].zoom,"stop zoom values must appear in ascending order")];u(t[0].zoom)!==a&&(a=u(t[0].zoom),l=void 0,y={});h=h.concat(e({key:o+"[0]",value:t[0],valueSpec:{zoom:{}},style:n.style,styleSpec:n.styleSpec,objectElementValidators:{zoom:s,value:w}}))}else h=h.concat(w({key:o+"[0]",value:t[0],valueSpec:{},style:n.style,styleSpec:n.styleSpec}));return h.concat(f({key:o+"[1]",value:t[1],valueSpec:v,style:n.style,styleSpec:n.styleSpec}))}function w(n){var f=r(n.value),e=u(n.value),o;if(c){if(f!==c)return[new i(n.key,n.value,"%s stop domain type must match previous stop domain type %s",f,c)]}else c=f;return"number"!==f&&"string"!==f&&"boolean"!==f?[new i(n.key,n.value,"stop domain value must be a number, string, or boolean")]:"number"!==f&&"categorical"!==t?(o="number expected, %s found",v["property-function"]&&void 0===t&&(o+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new i(n.key,n.value,o,f)]):"categorical"!==t||"number"!==f||isFinite(e)&&Math.floor(e)===e?"number"===f&&void 0!==l&&e<l?[new i(n.key,n.value,"stop domain values must appear in ascending order")]:(l=e,"categorical"===t&&e in y?[new i(n.key,n.value,"stop domain values must be unique")]:(y[e]=!0,[])):[new i(n.key,n.value,"integer expected, found %s",e)]}function g(n){return f({key:n.key,value:n.value,valueSpec:v,style:n.style,styleSpec:n.styleSpec})}var c,l,a,v=n.valueSpec,t=u(n.value.type),y={},p="categorical"!==t&&void 0===n.value.property,nt=!p,b="array"===r(n.value.stops)&&"array"===r(n.value.stops[0])&&"object"===r(n.value.stops[0][0]),h=e({key:n.key,value:n.value,valueSpec:n.styleSpec.function,style:n.style,styleSpec:n.styleSpec,objectElementValidators:{stops:k,"default":g}});return"identity"===t&&p&&h.push(new i(n.key,n.value,'missing required property "property"')),"identity"===t||n.value.stops||h.push(new i(n.key,n.value,'missing required property "stops"')),"exponential"===t&&"piecewise-constant"===n.valueSpec.function&&h.push(new i(n.key,n.value,"exponential functions not supported")),n.styleSpec.$version>=8&&(nt&&!n.valueSpec["property-function"]?h.push(new i(n.key,n.value,"property functions not supported")):p&&!n.valueSpec["zoom-function"]&&h.push(new i(n.key,n.value,"zoom functions not supported"))),"categorical"!==t&&!b||void 0!==n.value.property||h.push(new i(n.key,n.value,'"property" property is required')),h}},{"../error/validation_error":102,"../util/get_type":120,"../util/unbundle_jsonlint":123,"./validate":124,"./validate_array":125,"./validate_number":136,"./validate_object":137}],132:[function(n,t){"use strict";var i=n("../error/validation_error"),r=n("./validate_string");t.exports=function(n){var u=n.value,f=n.key,t=r(n);return t.length?t:(u.indexOf("{fontstack}")===-1&&t.push(new i(f,u,'"glyphs" url must include a "{fontstack}" token')),u.indexOf("{range}")===-1&&t.push(new i(f,u,'"glyphs" url must include a "{range}" token')),t)}},{"../error/validation_error":102,"./validate_string":141}],133:[function(n,t){"use strict";var i=n("../error/validation_error"),r=n("../util/unbundle_jsonlint"),u=n("./validate_object"),e=n("./validate_filter"),o=n("./validate_paint_property"),s=n("./validate_layout_property"),f=n("../util/extend");t.exports=function(n){var h=[],t=n.value,c=n.key,a=n.style,g=n.styleSpec,l,b,d,v,k,y,p,w;if(t.type||t.ref||h.push(new i(c,t,'either "type" or "ref" is required')),l=r(t.type),b=r(t.ref),t.id)for(d=r(t.id),v=0;v<n.arrayIndex;v++)k=a.layers[v],r(k.id)===d&&h.push(new i(c,t.id,'duplicate layer id "%s", previously used at line %d',t.id,k.id.__line__));return"ref"in t?(["type","source","source-layer","filter","layout"].forEach(function(n){n in t&&h.push(new i(c,t[n],'"%s" is prohibited for ref layers',n))}),a.layers.forEach(function(n){r(n.id)===b&&(y=n)}),y?y.ref?h.push(new i(c,t.ref,"ref cannot reference another ref layer")):l=r(y.type):h.push(new i(c,t.ref,'ref layer "%s" not found',b))):"background"!==l&&(t.source?(p=a.sources&&a.sources[t.source],w=p&&r(p.type),p?"vector"===w&&"raster"===l?h.push(new i(c,t.source,'layer "%s" requires a raster source',t.id)):"raster"===w&&"raster"!==l?h.push(new i(c,t.source,'layer "%s" requires a vector source',t.id)):"vector"!==w||t["source-layer"]||h.push(new i(c,t,'layer "%s" must specify a "source-layer"',t.id)):h.push(new i(c,t.source,'source "%s" not found',t.source))):h.push(new i(c,t,'missing required property "source"'))),h=h.concat(u({key:c,value:t,valueSpec:g.layer,style:n.style,styleSpec:n.styleSpec,objectElementValidators:{"*":function(){return[]},filter:e,layout:function(n){return u({layer:t,key:n.key,value:n.value,style:n.style,styleSpec:n.styleSpec,objectElementValidators:{"*":function(n){return s(f({layerType:l},n))}}})},paint:function(n){return u({layer:t,key:n.key,value:n.value,style:n.style,styleSpec:n.styleSpec,objectElementValidators:{"*":function(n){return o(f({layerType:l},n))}}})}}}))}},{"../error/validation_error":102,"../util/extend":119,"../util/unbundle_jsonlint":123,"./validate_filter":130,"./validate_layout_property":134,"./validate_object":137,"./validate_paint_property":138}],134:[function(n,t){"use strict";var i=n("./validate_property");t.exports=function(n){return i(n,"layout")}},{"./validate_property":139}],135:[function(n,t){"use strict";var i=n("../error/validation_error"),u=n("../util/get_type"),r=n("./validate");t.exports=function(n){var f=n.value,o=n.styleSpec,s=o.light,c=n.style,e=[],l=u(f),t,h;if(void 0===f)return e;if("object"!==l)return e.concat([new i("light",f,"object expected, %s found",l)]);for(t in f)h=t.match(/^(.*)-transition$/),e=h&&s[h[1]]&&s[h[1]].transition?e.concat(r({key:t,value:f[t],valueSpec:o.transition,style:c,styleSpec:o})):s[t]?e.concat(r({key:t,value:f[t],valueSpec:s[t],style:c,styleSpec:o})):e.concat([new i(t,f[t],'unknown property "%s"',t)]);return e}},{"../error/validation_error":102,"../util/get_type":120,"./validate":124}],136:[function(n,t){"use strict";var r=n("../util/get_type"),i=n("../error/validation_error");t.exports=function(n){var f=n.key,t=n.value,u=n.valueSpec,e=r(t);return"number"!==e?[new i(f,t,"number expected, %s found",e)]:"minimum"in u&&t<u.minimum?[new i(f,t,"%s is less than the minimum value %s",t,u.minimum)]:"maximum"in u&&t>u.maximum?[new i(f,t,"%s is greater than the maximum value %s",t,u.maximum)]:[]}},{"../error/validation_error":102,"../util/get_type":120}],137:[function(n,t){"use strict";var i=n("../error/validation_error"),u=n("../util/get_type"),r=n("./validate");t.exports=function(n){var o=n.key,t=n.value,f=n.valueSpec||{},l=n.objectElementValidators||{},y=n.style,p=n.styleSpec,s=[],v=u(t),e,c;if("object"!==v)return[new i(o,t,"object expected, %s found",v)];for(e in t){var a=e.split(".")[0],w=f[a]||f["*"],h=void 0;if(l[a])h=l[a];else if(f[a])h=r;else if(l["*"])h=l["*"];else{if(!f["*"]){s.push(new i(o,t[e],'unknown property "%s"',e));continue}h=r}s=s.concat(h({key:(o?o+".":o)+e,value:t[e],valueSpec:w,style:y,styleSpec:p,object:t,objectKey:e}))}for(c in f)f[c].required&&void 0===f[c].default&&void 0===t[c]&&s.push(new i(o,t,'missing required property "%s"',c));return s}},{"../error/validation_error":102,"../util/get_type":120,"./validate":124}],138:[function(n,t){"use strict";var i=n("./validate_property");t.exports=function(n){return i(n,"paint")}},{"./validate_property":139}],139:[function(n,t){"use strict";var r=n("./validate"),i=n("../error/validation_error"),u=n("../util/get_type");t.exports=function(n,t){var s=n.key,h=n.style,c=n.styleSpec,f=n.value,e=n.objectKey,l=c[t+"_"+n.layerType],a,o,y,v;return l?(a=e.match(/^(.*)-transition$/),"paint"===t&&a&&l[a[1]]&&l[a[1]].transition)?r({key:s,value:f,valueSpec:c.transition,style:h,styleSpec:c}):(o=n.valueSpec||l[e],!o)?[new i(s,f,'unknown property "%s"',e)]:"string"===u(f)&&o["property-function"]&&!o.tokens&&(y=/^{([^}]+)}$/.exec(f))?[new i(s,f,'"%s" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": %s` }`.',e,JSON.stringify(y[1]))]:(v=[],"symbol"===n.layerType&&"text-field"===e&&h&&!h.glyphs&&v.push(new i(s,f,'use of "text-field" requires a style "glyphs" property')),v.concat(r({key:n.key,value:f,valueSpec:o,style:h,styleSpec:c}))):[]}},{"../error/validation_error":102,"../util/get_type":120,"./validate":124}],140:[function(n,t){"use strict";var r=n("../error/validation_error"),u=n("../util/unbundle_jsonlint"),i=n("./validate_object"),f=n("./validate_enum");t.exports=function(n){var t=n.value,o=n.key,e=n.styleSpec,s=n.style,l,h,c;if(!t.type)return[new r(o,t,'"type" is required')];l=u(t.type);h=[];switch(l){case"vector":case"raster":if(h=h.concat(i({key:o,value:t,valueSpec:e.source_tile,style:n.style,styleSpec:e})),"url"in t)for(c in t)["type","url","tileSize"].indexOf(c)<0&&h.push(new r(o+"."+c,t[c],'a source with a "url" property may not include a "%s" property',c));return h;case"geojson":return i({key:o,value:t,valueSpec:e.source_geojson,style:s,styleSpec:e});case"video":return i({key:o,value:t,valueSpec:e.source_video,style:s,styleSpec:e});case"image":return i({key:o,value:t,valueSpec:e.source_image,style:s,styleSpec:e});case"canvas":return i({key:o,value:t,valueSpec:e.source_canvas,style:s,styleSpec:e});default:return f({key:o+".type",value:t.type,valueSpec:{values:["vector","raster","geojson","video","image","canvas"]},style:s,styleSpec:e})}}},{"../error/validation_error":102,"../util/unbundle_jsonlint":123,"./validate_enum":129,"./validate_object":137}],141:[function(n,t){"use strict";var i=n("../util/get_type"),r=n("../error/validation_error");t.exports=function(n){var t=n.value,f=n.key,u=i(t);return"string"!==u?[new r(f,t,"string expected, %s found",u)]:[]}},{"../error/validation_error":102,"../util/get_type":120}],142:[function(n,t){"use strict";function i(n,t){t=t||o;var i=[];return i=i.concat(e({key:"",value:n,valueSpec:t.$root,styleSpec:t,style:n,objectElementValidators:{glyphs:s,"*":function(){return[]}}})),t.$version>7&&n.constants&&(i=i.concat(f({key:"constants",value:n.constants,style:n,styleSpec:t}))),u(i)}function u(n){return[].concat(n).sort(function(n,t){return n.line-t.line})}function r(n){return function(){return u(n.apply(this,arguments))}}var f=n("./validate/validate_constants"),e=n("./validate/validate"),o=n("./reference/latest"),s=n("./validate/validate_glyphs_url");i.source=r(n("./validate/validate_source"));i.light=r(n("./validate/validate_light"));i.layer=r(n("./validate/validate_layer"));i.filter=r(n("./validate/validate_filter"));i.paintProperty=r(n("./validate/validate_paint_property"));i.layoutProperty=r(n("./validate/validate_layout_property"));t.exports=i},{"./reference/latest":117,"./validate/validate":124,"./validate/validate_constants":128,"./validate/validate_filter":130,"./validate/validate_glyphs_url":132,"./validate/validate_layer":133,"./validate/validate_layout_property":134,"./validate/validate_light":135,"./validate/validate_paint_property":138,"./validate/validate_source":140}],143:[function(n,t){"use strict";var i=function(){this.n=0;this.times=[]};i.prototype.stopped=function(){return this.times=this.times.filter(function(n){return n.time>=(new Date).getTime()}),!this.times.length};i.prototype.set=function(n){return this.times.push({id:this.n,time:n+(new Date).getTime()}),this.n++};i.prototype.cancel=function(n){this.times=this.times.filter(function(t){return t.id!==n})};t.exports=i},{}],144:[function(n,t){"use strict";var e=n("../util/evented"),r=n("../util/ajax"),i=n("../util/browser"),u=n("../util/mapbox").normalizeSpriteURL,f=function(){this.x=0;this.y=0;this.width=0;this.height=0;this.pixelRatio=1;this.sdf=!1},o=function(n){function t(t,f){var e=this,o;n.call(this);this.base=t;this.retina=i.devicePixelRatio>1;this.setEventedParent(f);o=this.retina?"@2x":"";r.getJSON(u(t,o,".json"),function(n,t){return n?void e.fire("error",{error:n}):(e.data=t,void(e.imgData&&e.fire("data",{dataType:"style"})))});r.getImage(u(t,o,".png"),function(n,t){var r,u;if(n)return void e.fire("error",{error:n});for(e.imgData=i.getImageData(t),r=0;r<e.imgData.length;r+=4)u=e.imgData[r+3]/255,e.imgData[r+0]*=u,e.imgData[r+1]*=u,e.imgData[r+2]*=u;e.width=t.width;e.data&&e.fire("data",{dataType:"style"})})}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.toJSON=function(){return this.base},t.prototype.loaded=function(){return!(!this.data||!this.imgData)},t.prototype.resize=function(){var r=this,n;if(i.devicePixelRatio>1!==this.retina){n=new t(this.base);n.on("data",function(){r.data=n.data;r.imgData=n.imgData;r.width=n.width;r.retina=n.retina})}},t.prototype.getSpritePosition=function(n){if(!this.loaded())return new f;var t=this.data&&this.data[n];return t&&this.imgData?t:new f},t}(e);t.exports=o},{"../util/ajax":191,"../util/browser":192,"../util/evented":200,"../util/mapbox":208}],145:[function(n,t){"use strict";var e=n("../style-spec/reference/latest"),i=n("../util/util"),o=n("../util/evented"),r=n("./validate_style"),u=n("./style_declaration"),s=n("./style_transition"),f="-transition",h=function(n){function t(t){n.call(this);this.properties=["anchor","color","position","intensity"];this._specifications=e.light;this.set(t)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.set=function(n){var e=this,t,o,f;if(!this._validate(r.light,n)){for(this._declarations={},this._transitions={},this._transitionOptions={},this.calculated={},n=i.extend({anchor:this._specifications.anchor.default,color:this._specifications.color.default,position:this._specifications.position.default,intensity:this._specifications.intensity.default},n),t=0,o=e.properties;t<o.length;t+=1)f=o[t],e._declarations[f]=new u(e._specifications[f],n[f]);return this}},t.prototype.getLight=function(){return{anchor:this.getLightProperty("anchor"),color:this.getLightProperty("color"),position:this.getLightProperty("position"),intensity:this.getLightProperty("intensity")}},t.prototype.getLightProperty=function(n){return i.endsWith(n,f)?this._transitionOptions[n]:this._declarations[n]&&this._declarations[n].value},t.prototype.getLightValue=function(n,t){if("position"===n){var u=this._transitions[n].calculate(t),r=i.sphericalToCartesian(u);return{x:r[0],y:r[1],z:r[2]}}return this._transitions[n].calculate(t)},t.prototype.setLight=function(n){var o=this,t,e;if(!this._validate(r.light,n))for(t in n)e=n[t],i.endsWith(t,f)?o._transitionOptions[t]=e:null===e||void 0===e?delete o._declarations[t]:o._declarations[t]=new u(o._specifications[t],e)},t.prototype.recalculate=function(n){var t=this;for(var i in t._declarations)t.calculated[i]=t.getLightValue(i,{zoom:n})},t.prototype._applyLightDeclaration=function(n,t,r,e,o){var h=r.transition?this._transitions[n]:void 0,l=this._specifications[n],a,c;(null!==t&&void 0!==t||(t=new u(l,l.default)),h&&h.declaration.json===t.json)||(a=i.extend({duration:300,delay:0},e,this.getLightProperty(n+f)),c=this._transitions[n]=new s(l,t,h,a),c.instant()||(c.loopID=o.set(c.endTime-Date.now())),h&&o.cancel(h.loopID))},t.prototype.updateLightTransitions=function(n,t,i){var r,u=this;for(r in u._declarations)u._applyLightDeclaration(r,u._declarations[r],n,t,i)},t.prototype._validate=function(n,t){return r.emitErrors(this,n.call(r,i.extend({value:t,style:{glyphs:!0,sprite:!0},styleSpec:e})))},t}(o);t.exports=h},{"../style-spec/reference/latest":117,"../util/evented":200,"../util/util":212,"./style_declaration":147,"./style_transition":155,"./validate_style":156}],146:[function(n,t){"use strict";var l=n("../util/evented"),f=n("./style_layer"),a=n("./image_sprite"),v=n("./light"),y=n("../symbol/glyph_source"),p=n("../symbol/sprite_atlas"),w=n("../render/line_atlas"),i=n("../util/util"),b=n("../util/ajax"),e=n("../util/mapbox"),k=n("../util/browser"),d=n("../util/dispatcher"),g=n("./animation_loop"),r=n("./validate_style"),o=n("../source/source"),s=n("../source/query_features"),nt=n("../source/source_cache"),tt=n("../style-spec/reference/latest"),it=n("../style-spec/function"),rt=n("../util/global_worker_pool"),h=n("../style-spec/deref"),u=n("../style-spec/diff"),c=n("../source/rtl_text_plugin"),ut=i.pick(u.operations,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition"]),ft=i.pick(u.operations,["setCenter","setZoom","setBearing","setPitch"]),et=function(n){function t(t,u,f){var o=this,s,h;n.call(this);this.map=u;this.animationLoop=u&&u.animationLoop||new g;this.dispatcher=new d(rt(),this);this.spriteAtlas=new p(1024,1024);this.spriteAtlas.setEventedParent(this);this.lineAtlas=new w(256,512);this._layers={};this._order=[];this.sourceCaches={};this.zoomHistory={};this._loaded=!1;i.bindAll(["_redoPlacement"],this);this._resetUpdates();f=i.extend({validate:"string"!=typeof t||!e.isMapboxURL(t)},f);this.setEventedParent(u);this.fire("dataloading",{dataType:"style"});s=this;this._rtlTextPluginCallback=c.registerForPluginAvailability(function(n){s.dispatcher.broadcast("loadRTLTextPlugin",n.pluginBlobURL,n.errorCallback);for(var t in s.sourceCaches)s.sourceCaches[t].reload()});h=function(n,t){if(n)return void o.fire("error",{error:n});if(!f.validate||!r.emitErrors(o,r(t))){o._loaded=!0;o.stylesheet=t;o.updateClasses();for(var i in t.sources)o.addSource(i,t.sources[i],f);t.sprite&&(o.sprite=new a(t.sprite,o));o.glyphSource=new y(t.glyphs);o._resolve();o.fire("data",{dataType:"style"});o.fire("style.load")}};"string"==typeof t?b.getJSON(e.normalizeStyleURL(t),h):k.frame(h.bind(this,null,t));this.on("data",function(n){var t,r,i;if("source"===n.dataType&&"metadata"===n.sourceDataType&&(t=o.sourceCaches[n.sourceId].getSource(),t&&t.vectorLayerIds))for(r in o._layers)i=o._layers[r],i.source===t.id&&o._validateLayer(i)})}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype._validateLayer=function(n){var i=this.sourceCaches[n.source],t;n.sourceLayer&&i&&(t=i.getSource(),("geojson"===t.type||t.vectorLayerIds&&t.vectorLayerIds.indexOf(n.sourceLayer)===-1)&&this.fire("error",{error:new Error('Source layer "'+n.sourceLayer+'" does not exist on source "'+t.id+'" as specified by style layer "'+n.id+'"')}))},t.prototype.loaded=function(){var n=this,t;if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(t in n.sourceCaches)if(!n.sourceCaches[t].loaded())return!1;return!(this.sprite&&!this.sprite.loaded())},t.prototype._resolve=function(){var r=this,u=h(this.stylesheet.layers),t,i,n;for(this._order=u.map(function(n){return n.id}),this._layers={},t=0,i=u;t<i.length;t+=1)n=i[t],n=f.create(n),n.setEventedParent(r,{layer:{id:n.id}}),r._layers[n.id]=n;this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order));this.light=new v(this.stylesheet.light)},t.prototype._serializeLayers=function(n){var t=this;return n.map(function(n){return t._layers[n].serialize()})},t.prototype._applyClasses=function(n,t){var i=this,r,e,u,o,f,s;if(this._loaded){n=n||[];t=t||{transition:!0};r=this.stylesheet.transition||{};e=this._updatedAllPaintProps?this._layers:this._updatedPaintProps;for(u in e)if(o=i._layers[u],f=i._updatedPaintProps[u],i._updatedAllPaintProps||f.all)o.updatePaintTransitions(n,t,r,i.animationLoop,i.zoomHistory);else for(s in f)i._layers[u].updatePaintTransition(s,n,t,r,i.animationLoop,i.zoomHistory);this.light.updateLightTransitions(t,r,this.animationLoop)}},t.prototype._recalculate=function(n){var t=this,f,r,u,e,i,o;if(this._loaded){for(f in t.sourceCaches)t.sourceCaches[f].used=!1;for(this._updateZoomHistory(n),r=0,u=t._order;r<u.length;r+=1)e=u[r],i=t._layers[e],i.recalculate(n),!i.isHidden(n)&&i.source&&(t.sourceCaches[i.source].used=!0);this.light.recalculate(n);o=300;Math.floor(this.z)!==Math.floor(n)&&this.animationLoop.set(o);this.z=n}},t.prototype._updateZoomHistory=function(n){var t=this.zoomHistory;void 0===t.lastIntegerZoom&&(t.lastIntegerZoom=Math.floor(n),t.lastIntegerZoomTime=0,t.lastZoom=n);Math.floor(t.lastZoom)<Math.floor(n)?(t.lastIntegerZoom=Math.floor(n),t.lastIntegerZoomTime=Date.now()):Math.floor(t.lastZoom)>Math.floor(n)&&(t.lastIntegerZoom=Math.floor(n+1),t.lastIntegerZoomTime=Date.now());t.lastZoom=n},t.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading");},t.prototype.update=function(n,t){var i=this,u,f,r,e;if(this._changed){u=Object.keys(this._updatedLayers);f=Object.keys(this._removedLayers);(u.length||f.length||this._updatedSymbolOrder)&&this._updateWorkerLayers(u,f);for(r in i._updatedSources)e=i._updatedSources[r],"reload"===e?i._reloadSource(r):"clear"===e&&i._clearSource(r);this._applyClasses(n,t);this._resetUpdates();this.fire("data",{dataType:"style"})}},t.prototype._updateWorkerLayers=function(n,t){var i=this,r=this._updatedSymbolOrder?this._order.filter(function(n){return"symbol"===i._layers[n].type}):null;this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(n),removedIds:t,symbolOrder:r})},t.prototype._resetUpdates=function(){this._changed=!1;this._updatedLayers={};this._removedLayers={};this._updatedSymbolOrder=!1;this._updatedSources={};this._updatedPaintProps={};this._updatedAllPaintProps=!1},t.prototype.setState=function(n){var e=this,t,f;if((this._checkLoaded(),r.emitErrors(this,r(n)))||(n=i.extend({},n),n.layers=h(n.layers),t=u(this.serialize(),n).filter(function(n){return!(n.command in ft)}),0===t.length))return!1;if(f=t.filter(function(n){return!(n.command in ut)}),f.length>0)throw new Error("Unimplemented: "+f.map(function(n){return n.command}).join(", ")+".");return t.forEach(function(n){"setTransition"!==n.command&&e[n.command].apply(e,n.args)}),this.stylesheet=n,!0},t.prototype.addSource=function(n,t,i){var o=this,f,e,u;if(this._checkLoaded(),void 0!==this.sourceCaches[n])throw new Error("There is already a source with this ID");if(!t.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(t)+".");f=["vector","raster","geojson","video","image","canvas"];e=f.indexOf(t.type)>=0;e&&this._validate(r.source,"sources."+n,t,null,i)||(u=this.sourceCaches[n]=new nt(n,t,this.dispatcher),u.style=this,u.setEventedParent(this,function(){return{isSourceLoaded:o.loaded(),source:u.serialize(),sourceId:n}}),u.onAdd(this.map),this._changed=!0)},t.prototype.removeSource=function(n){if(this._checkLoaded(),void 0===this.sourceCaches[n])throw new Error("There is no source with this ID");var t=this.sourceCaches[n];delete this.sourceCaches[n];delete this._updatedSources[n];t.setEventedParent(null);t.clearTiles();t.onRemove&&t.onRemove(this.map);this._changed=!0},t.prototype.getSource=function(n){return this.sourceCaches[n]&&this.sourceCaches[n].getSource()},t.prototype.addLayer=function(n,t,u){var e,o,s,h;this._checkLoaded();e=n.id;("object"==typeof n.source&&(this.addSource(e,n.source),n=i.extend(n,{source:e})),this._validate(r.layer,"layers."+e,n,{arrayIndex:-1},u))||(o=f.create(n),this._validateLayer(o),o.setEventedParent(this,{layer:{id:e}}),s=t?this._order.indexOf(t):this._order.length,(this._order.splice(s,0,e),this._layers[e]=o,this._removedLayers[e]&&o.source)&&(h=this._removedLayers[e],delete this._removedLayers[e],this._updatedSources[o.source]=h.type!==o.type?"clear":"reload"),this._updateLayer(o),"symbol"===o.type&&(this._updatedSymbolOrder=!0),this.updateClasses(e))},t.prototype.moveLayer=function(n,t){var i,r,u;if(this._checkLoaded(),this._changed=!0,i=this._layers[n],!i)return void this.fire("error",{error:new Error("The layer '"+n+"' does not exist in the map's style and cannot be moved.")});r=this._order.indexOf(n);this._order.splice(r,1);u=t?this._order.indexOf(t):this._order.length;this._order.splice(u,0,n);"symbol"===i.type&&(this._updatedSymbolOrder=!0,i.source&&!this._updatedSources[i.source]&&(this._updatedSources[i.source]="reload"))},t.prototype.removeLayer=function(n){var t,i;if(this._checkLoaded(),t=this._layers[n],!t)return void this.fire("error",{error:new Error("The layer '"+n+"' does not exist in the map's style and cannot be removed.")});t.setEventedParent(null);i=this._order.indexOf(n);this._order.splice(i,1);"symbol"===t.type&&(this._updatedSymbolOrder=!0);this._changed=!0;this._removedLayers[n]=t;delete this._layers[n];delete this._updatedLayers[n];delete this._updatedPaintProps[n]},t.prototype.getLayer=function(n){return this._layers[n]},t.prototype.setLayerZoomRange=function(n,t,i){this._checkLoaded();var r=this.getLayer(n);return r?void(r.minzoom===t&&r.maxzoom===i||(null!=t&&(r.minzoom=t),null!=i&&(r.maxzoom=i),this._updateLayer(r))):void this.fire("error",{error:new Error("The layer '"+n+"' does not exist in the map's style and cannot have zoom extent.")})},t.prototype.setFilter=function(n,t){this._checkLoaded();var u=this.getLayer(n);return u?void(null!==t&&void 0!==t&&this._validate(r.filter,"layers."+u.id+".filter",t)||i.deepEqual(u.filter,t)||(u.filter=i.clone(t),this._updateLayer(u))):void this.fire("error",{error:new Error("The layer '"+n+"' does not exist in the map's style and cannot be filtered.")})},t.prototype.getFilter=function(n){return i.clone(this.getLayer(n).filter)},t.prototype.setLayoutProperty=function(n,t,r){this._checkLoaded();var u=this.getLayer(n);return u?void(i.deepEqual(u.getLayoutProperty(t),r)||(u.setLayoutProperty(t,r),this._updateLayer(u))):void this.fire("error",{error:new Error("The layer '"+n+"' does not exist in the map's style and cannot be styled.")})},t.prototype.getLayoutProperty=function(n,t){return this.getLayer(n).getLayoutProperty(t)},t.prototype.setPaintProperty=function(n,t,r,u){var f,e,o;if(this._checkLoaded(),f=this.getLayer(n),!f)return void this.fire("error",{error:new Error("The layer '"+n+"' does not exist in the map's style and cannot be styled.")});i.deepEqual(f.getPaintProperty(t,u),r)||(e=f.isPaintValueFeatureConstant(t),f.setPaintProperty(t,r,u),o=!(r&&it.isFunctionDefinition(r)&&"$zoom"!==r.property&&void 0!==r.property),o&&e||this._updateLayer(f),this.updateClasses(n,t))},t.prototype.getPaintProperty=function(n,t,i){return this.getLayer(n).getPaintProperty(t,i)},t.prototype.getTransition=function(){return i.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},t.prototype.updateClasses=function(n,t){if(this._changed=!0,n){var i=this._updatedPaintProps;i[n]||(i[n]={});i[n][t||"all"]=!0}else this._updatedAllPaintProps=!0},t.prototype.serialize=function(){var n=this;return i.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:i.mapObject(this.sourceCaches,function(n){return n.serialize()}),layers:this._order.map(function(t){return n._layers[t].serialize()})},function(n){return void 0!==n})},t.prototype._updateLayer=function(n){this._updatedLayers[n.id]=!0;n.source&&!this._updatedSources[n.source]&&(this._updatedSources[n.source]="reload");this._changed=!0},t.prototype._flattenRenderedFeatures=function(n){for(var s,u,t,f,h,c=this,e=[],i=this._order.length-1;i>=0;i--)for(var l=c._order[i],r=0,o=n;r<o.length;r+=1)if(s=o[r],u=s[l],u)for(t=0,f=u;t<f.length;t+=1)h=f[t],e.push(h);return e},t.prototype.queryRenderedFeatures=function(n,t,i,u){var f=this,o,e,h,c,l,a,v,y;if(t&&t.filter&&this._validate(r.filter,"queryRenderedFeatures.filter",t.filter),o={},t&&t.layers){if(!Array.isArray(t.layers))return void this.fire("error",{error:"parameters.layers must be an Array."});for(e=0,h=t.layers;e<h.length;e+=1){if(c=h[e],l=f._layers[c],!l)return void f.fire("error",{error:"The layer '"+c+"' does not exist in the map's style and cannot be queried for features."});o[l.source]=!0}}a=[];for(v in f.sourceCaches)(!t.layers||o[v])&&(y=s.rendered(f.sourceCaches[v],f._layers,n,t,i,u),a.push(y));return this._flattenRenderedFeatures(a)},t.prototype.querySourceFeatures=function(n,t){t&&t.filter&&this._validate(r.filter,"querySourceFeatures.filter",t.filter);var i=this.sourceCaches[n];return i?s.source(i,t):[]},t.prototype.addSourceType=function(n,t,i){return o.getType(n)?i(new Error('A source type called "'+n+'" already exists.')):(o.setType(n,t),t.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:n,url:t.workerSourceURL},i):i(null,null))},t.prototype.getLight=function(){return this.light.getLight()},t.prototype.setLight=function(n,t){var f,r,u,e;this._checkLoaded();f=this.light.getLight();r=!1;for(u in n)if(!i.deepEqual(n[u],f[u])){r=!0;break}r&&(e=this.stylesheet.transition||{},this.light.setLight(n),this.light.updateLightTransitions(t||{transition:!0},e,this.animationLoop))},t.prototype._validate=function(n,t,u,f,e){return(!e||e.validate!==!1)&&r.emitErrors(this,n.call(r,i.extend({key:t,style:this.serialize(),value:u,styleSpec:tt},f)))},t.prototype._remove=function(){var n=this,t;c.evented.off("pluginAvailable",this._rtlTextPluginCallback);for(t in n.sourceCaches)n.sourceCaches[t].clearTiles();this.dispatcher.remove()},t.prototype._clearSource=function(n){this.sourceCaches[n].clearTiles()},t.prototype._reloadSource=function(n){this.sourceCaches[n].reload()},t.prototype._updateSources=function(n){var t=this;for(var i in t.sourceCaches)t.sourceCaches[i].update(n)},t.prototype._redoPlacement=function(){var n=this;for(var t in n.sourceCaches)n.sourceCaches[t].redoPlacement()},t.prototype.getIcons=function(n,t,i){var r=this,u=function(){r.spriteAtlas.setSprite(r.sprite);r.spriteAtlas.addIcons(t.icons,i)};!this.sprite||this.sprite.loaded()?u():this.sprite.on("data",u)},t.prototype.getGlyphs=function(n,t,i){function o(n,t,r){n&&console.error(n);f[r]=t;u--;0===u&&i(null,f)}var s=this,r=t.stacks,u=Object.keys(r).length,f={};for(var e in r)s.glyphSource.getSimpleGlyphs(e,r[e],t.uid,o)},t}(l);t.exports=et},{"../render/line_atlas":76,"../source/query_features":88,"../source/rtl_text_plugin":90,"../source/source":91,"../source/source_cache":92,"../style-spec/deref":100,"../style-spec/diff":101,"../style-spec/function":105,"../style-spec/reference/latest":117,"../symbol/glyph_source":165,"../symbol/sprite_atlas":170,"../util/ajax":191,"../util/browser":192,"../util/dispatcher":198,"../util/evented":200,"../util/global_worker_pool":202,"../util/mapbox":208,"../util/util":212,"./animation_loop":143,"./image_sprite":144,"./light":145,"./style_layer":148,"./validate_style":156}],147:[function(n,t){"use strict";var i=n("../style-spec/function"),u=n("../util/util"),r=function(n,t){var f=this,h,r;if(this.value=u.clone(t),this.isFunction=i.isFunctionDefinition(t),this.json=JSON.stringify(this.value),this.minimum=n.minimum,this.function=i(this.value,n),this.isFeatureConstant=this.function.isFeatureConstant,this.isZoomConstant=this.function.isZoomConstant,!this.isFeatureConstant&&!this.isZoomConstant){this.stopZoomLevels=[];for(var e=[],o=0,s=f.value.stops;o<s.length;o+=1)h=s[o],r=h[0].zoom,f.stopZoomLevels.indexOf(r)<0&&(f.stopZoomLevels.push(r),e.push([r,e.length]));this.functionInterpolationT=i({type:"exponential",stops:e,base:t.base},{type:"number"})}};r.prototype.calculate=function(n,t){var i=this.function(n&&n.zoom,t||{});return void 0!==this.minimum&&i<this.minimum?this.minimum:i};r.prototype.calculateInterpolationT=function(n,t){return this.functionInterpolationT(n&&n.zoom,t||{})};t.exports=r},{"../style-spec/function":105,"../util/util":212}],148:[function(n,t){"use strict";function s(n){return n.value}var i=n("../util/util"),c=n("./style_transition"),u=n("./style_declaration"),f=n("../style-spec/reference/latest"),r=n("./validate_style"),l=n("./../style-spec/util/parse_color"),a=n("../util/evented"),e="-transition",o=function(n){function t(t){var i=this,r,u,o,e,s,h;n.call(this);this.id=t.id;this.metadata=t.metadata;this.type=t.type;this.source=t.source;this.sourceLayer=t["source-layer"];this.minzoom=t.minzoom;this.maxzoom=t.maxzoom;this.filter=t.filter;this.paint={};this.layout={};this._paintSpecifications=f["paint_"+this.type];this._layoutSpecifications=f["layout_"+this.type];this._paintTransitions={};this._paintTransitionOptions={};this._paintDeclarations={};this._layoutDeclarations={};this._layoutFunctions={};o={validate:!1};for(e in t)if(s=e.match(/^paint(?:\.(.*))?$/),s){h=s[1]||"";for(r in t[e])i.setPaintProperty(r,t[e][r],h,o)}for(u in t.layout)i.setLayoutProperty(u,t.layout[u],o);for(r in i._paintSpecifications)i.paint[r]=i.getPaintValue(r);for(u in i._layoutSpecifications)i._updateLayoutValue(u)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.setLayoutProperty=function(n,t,i){if(null==t)delete this._layoutDeclarations[n];else{var f="layers."+this.id+".layout."+n;if(this._validate(r.layoutProperty,f,n,t,i))return;this._layoutDeclarations[n]=new u(this._layoutSpecifications[n],t)}this._updateLayoutValue(n)},t.prototype.getLayoutProperty=function(n){return this._layoutDeclarations[n]&&this._layoutDeclarations[n].value},t.prototype.getLayoutValue=function(n,t,i){var u=this._layoutSpecifications[n],r=this._layoutDeclarations[n];return r?r.calculate(t,i):u.default},t.prototype.setPaintProperty=function(n,t,f,o){var s="layers."+this.id+(f?'["paint.'+f+'"].':".paint.")+n;if(i.endsWith(n,e))if(this._paintTransitionOptions[f||""]||(this._paintTransitionOptions[f||""]={}),null===t||void 0===t)delete this._paintTransitionOptions[f||""][n];else{if(this._validate(r.paintProperty,s,n,t,o))return;this._paintTransitionOptions[f||""][n]=t}else if(this._paintDeclarations[f||""]||(this._paintDeclarations[f||""]={}),null===t||void 0===t)delete this._paintDeclarations[f||""][n];else{if(this._validate(r.paintProperty,s,n,t,o))return;this._paintDeclarations[f||""][n]=new u(this._paintSpecifications[n],t)}},t.prototype.getPaintProperty=function(n,t){return t=t||"",i.endsWith(n,e)?this._paintTransitionOptions[t]&&this._paintTransitionOptions[t][n]:this._paintDeclarations[t]&&this._paintDeclarations[t][n]&&this._paintDeclarations[t][n].value},t.prototype.getPaintValue=function(n,t,i){var r=this._paintSpecifications[n],u=this._paintTransitions[n];return u?u.calculate(t,i):"color"===r.type&&r.default?l(r.default):r.default},t.prototype.getPaintValueStopZoomLevels=function(n){var t=this._paintTransitions[n];return t?t.declaration.stopZoomLevels:[]},t.prototype.getPaintInterpolationT=function(n,t){var i=this._paintTransitions[n];return i.declaration.calculateInterpolationT(t)},t.prototype.isPaintValueFeatureConstant=function(n){var t=this._paintTransitions[n];return!t||t.declaration.isFeatureConstant},t.prototype.isLayoutValueFeatureConstant=function(n){var t=this._layoutDeclarations[n];return!t||t.isFeatureConstant},t.prototype.isPaintValueZoomConstant=function(n){var t=this._paintTransitions[n];return!t||t.declaration.isZoomConstant},t.prototype.isHidden=function(n){return!!(this.minzoom&&n<this.minzoom)||!!(this.maxzoom&&n>=this.maxzoom)||"none"===this.layout.visibility},t.prototype.updatePaintTransitions=function(n,t,r,u,f){for(var e,o=this,s=i.extend({},this._paintDeclarations[""]),h=0;h<n.length;h++)i.extend(s,o._paintDeclarations[n[h]]);for(e in s)o._applyPaintDeclaration(e,s[e],t,r,u,f);for(e in o._paintTransitions)e in s||o._applyPaintDeclaration(e,null,t,r,u,f)},t.prototype.updatePaintTransition=function(n,t,i,r,u,f){for(var e,h=this,s=this._paintDeclarations[""][n],o=0;o<t.length;o++)e=h._paintDeclarations[t[o]],e&&e[n]&&(s=e[n]);this._applyPaintDeclaration(n,s,i,r,u,f)},t.prototype.recalculate=function(n){var t=this,i,r;for(i in t._paintTransitions)t.paint[i]=t.getPaintValue(i,{zoom:n});for(r in t._layoutFunctions)t.layout[r]=t.getLayoutValue(r,{zoom:n})},t.prototype.serialize=function(){var t=this,r={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:i.mapObject(this._layoutDeclarations,s)},n,u;for(n in t._paintDeclarations)u=""===n?"paint":"paint."+n,r[u]=i.mapObject(t._paintDeclarations[n],s);return i.filterObject(r,function(n,t){return void 0!==n&&!("layout"===t&&!Object.keys(n).length)})},t.prototype._applyPaintDeclaration=function(n,t,r,f,o,s){var h=r.transition?this._paintTransitions[n]:void 0,a=this._paintSpecifications[n],v,l;(null!==t&&void 0!==t||(t=new u(a,a.default)),h&&h.declaration.json===t.json)||(v=i.extend({duration:300,delay:0},f,this.getPaintProperty(n+e)),l=this._paintTransitions[n]=new c(a,t,h,v,s),l.instant()||(l.loopID=o.set(l.endTime-Date.now())),h&&o.cancel(h.loopID))},t.prototype._updateLayoutValue=function(n){var t=this._layoutDeclarations[n];t&&t.isFunction?this._layoutFunctions[n]=!0:(delete this._layoutFunctions[n],this.layout[n]=this.getLayoutValue(n))},t.prototype._validate=function(n,t,i,u,e){return(!e||e.validate!==!1)&&r.emitErrors(this,n.call(r,{key:t,layerType:this.type,objectKey:i,value:u,styleSpec:f,style:{glyphs:!0,sprite:!0}}))},t}(a),h;t.exports=o;h={circle:n("./style_layer/circle_style_layer"),fill:n("./style_layer/fill_style_layer"),"fill-extrusion":n("./style_layer/fill_extrusion_style_layer"),line:n("./style_layer/line_style_layer"),symbol:n("./style_layer/symbol_style_layer")};o.create=function(n){var t=h[n.type]||o;return new t(n)}},{"../style-spec/reference/latest":117,"../util/evented":200,"../util/util":212,"./../style-spec/util/parse_color":121,"./style_declaration":147,"./style_layer/circle_style_layer":149,"./style_layer/fill_extrusion_style_layer":150,"./style_layer/fill_style_layer":151,"./style_layer/line_style_layer":152,"./style_layer/symbol_style_layer":153,"./style_transition":155,"./validate_style":156}],149:[function(n,t){"use strict";var i=n("../style_layer"),r=n("../../data/bucket/circle_bucket"),u=function(n){function t(){n.apply(this,arguments)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.createBucket=function(n){return new r(n)},t}(i);t.exports=u},{"../../data/bucket/circle_bucket":46,"../style_layer":148}],150:[function(n,t){"use strict";var i=n("../style_layer"),r=n("../../data/bucket/fill_extrusion_bucket"),u=function(n){function t(){n.apply(this,arguments)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.getPaintValue=function(t,i,r){var u=n.prototype.getPaintValue.call(this,t,i,r);return"fill-extrusion-color"===t&&u&&(u[3]=1),u},t.prototype.createBucket=function(n){return new r(n)},t}(i);t.exports=u},{"../../data/bucket/fill_extrusion_bucket":48,"../style_layer":148}],151:[function(n,t){"use strict";var i=n("../style_layer"),r=n("../../data/bucket/fill_bucket"),u=function(n){function t(){n.apply(this,arguments)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.getPaintValue=function(t,i,r){var e=this,u,f;if("fill-outline-color"===t){if(void 0===this.getPaintProperty("fill-outline-color"))return n.prototype.getPaintValue.call(this,"fill-color",i,r);for(u=this._paintTransitions["fill-outline-color"];u;){if(f=u&&u.declaration&&u.declaration.value,!f)return n.prototype.getPaintValue.call(e,"fill-color",i,r);u=u.oldTransition}}return n.prototype.getPaintValue.call(this,t,i,r)},t.prototype.getPaintValueStopZoomLevels=function(t){return"fill-outline-color"===t&&void 0===this.getPaintProperty("fill-outline-color")?n.prototype.getPaintValueStopZoomLevels.call(this,"fill-color"):n.prototype.getPaintValueStopZoomLevels.call(this,t)},t.prototype.getPaintInterpolationT=function(t,i){return"fill-outline-color"===t&&void 0===this.getPaintProperty("fill-outline-color")?n.prototype.getPaintInterpolationT.call(this,"fill-color",i):n.prototype.getPaintInterpolationT.call(this,t,i)},t.prototype.isPaintValueFeatureConstant=function(t){return"fill-outline-color"===t&&void 0===this.getPaintProperty("fill-outline-color")?n.prototype.isPaintValueFeatureConstant.call(this,"fill-color"):n.prototype.isPaintValueFeatureConstant.call(this,t)},t.prototype.isPaintValueZoomConstant=function(t){return"fill-outline-color"===t&&void 0===this.getPaintProperty("fill-outline-color")?n.prototype.isPaintValueZoomConstant.call(this,"fill-color"):n.prototype.isPaintValueZoomConstant.call(this,t)},t.prototype.createBucket=function(n){return new r(n)},t}(i);t.exports=u},{"../../data/bucket/fill_bucket":47,"../style_layer":148}],152:[function(n,t){"use strict";var i=n("../style_layer"),r=n("../../data/bucket/line_bucket"),u=n("../../util/util"),f=function(n){function t(){n.apply(this,arguments)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.getPaintValue=function(t,i,r){var f=n.prototype.getPaintValue.call(this,t,i,r),e;return f&&"line-dasharray"===t&&(e=this.getPaintValue("line-width",u.extend({},i,{zoom:Math.floor(i.zoom)}),r),f.fromScale*=e,f.toScale*=e),f},t.prototype.createBucket=function(n){return new r(n)},t}(i);t.exports=f},{"../../data/bucket/line_bucket":49,"../../util/util":212,"../style_layer":148}],153:[function(n,t){"use strict";var i=n("../style_layer"),r=n("../../data/bucket/symbol_bucket"),u=function(n){function t(){n.apply(this,arguments)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.getLayoutValue=function(t,i,r){var u=n.prototype.getLayoutValue.call(this,t,i,r);if("auto"!==u)return u;switch(t){case"text-rotation-alignment":case"icon-rotation-alignment":return"line"===this.getLayoutValue("symbol-placement",i,r)?"map":"viewport";case"text-pitch-alignment":return this.getLayoutValue("text-rotation-alignment",i,r);default:return u}},t.prototype.createBucket=function(n){return new r(n)},t}(i);t.exports=u},{"../../data/bucket/symbol_bucket":50,"../style_layer":148}],154:[function(n,t){"use strict";var r=n("./style_layer"),u=n("../util/util"),f=n("../style-spec/feature_filter"),e=n("../style-spec/group_by_layout"),i=function(n){n&&this.replace(n)};i.prototype.replace=function(n){var u=this,t,i,r;for(this.symbolOrder=[],t=0,i=n;t<i.length;t+=1)r=i[t],"symbol"===r.type&&u.symbolOrder.push(r.id);this._layerConfigs={};this._layers={};this.update(n,[])};i.prototype.update=function(n,t,i){for(var s,c,l,p,w,k,h,d,v,o=this,y=0,g=n;y<g.length;y+=1)s=g[y],o._layerConfigs[s.id]=s,c=o._layers[s.id]=r.create(s),c.updatePaintTransitions({},{transition:!1}),c.filter=f(c.filter);for(l=0,p=t;l<p.length;l+=1)w=p[l],delete o._layerConfigs[w],delete o._layers[w];i&&(this.symbolOrder=i);this.familiesBySource={};for(var it=e(u.values(this._layerConfigs)),b=0,nt=it;b<nt.length;b+=1){var rt=nt[b],tt=rt.map(function(n){return o._layers[n.id]}),a=tt[0];a.layout&&"none"===a.layout.visibility||(k=a.source||"",h=o.familiesBySource[k],h||(h=o.familiesBySource[k]={}),d=a.sourceLayer||"_geojsonTileLayer",v=h[d],v||(v=h[d]=[]),v.push(tt))}};t.exports=i},{"../style-spec/feature_filter":103,"../style-spec/group_by_layout":106,"../util/util":212,"./style_layer":148}],155:[function(n,t){"use strict";function u(n,t,i){if(void 0!==n&&void 0!==t)return{from:n.to,fromScale:n.toScale,to:t.to,toScale:t.toScale,t:i}}var f=n("../util/util"),r=n("../util/interpolate"),e={lastIntegerZoom:0,lastIntegerZoomTime:0,lastZoom:0},i=function(n,t,i,f,o){this.declaration=t;this.startTime=this.endTime=(new Date).getTime();this.oldTransition=i;this.duration=f.duration||0;this.delay=f.delay||0;this.zoomTransitioned="piecewise-constant"===n.function&&n.transition;this.interp=this.zoomTransitioned?u:r[n.type];this.zoomHistory=o||e;this.instant()||(this.endTime=this.startTime+this.duration+this.delay);i&&i.endTime<=this.startTime&&delete i.oldTransition};i.prototype.instant=function(){return!this.oldTransition||!this.interp||0===this.duration&&0===this.delay};i.prototype.calculate=function(n,t,i){var r=this._calculateTargetValue(n,t),u,e;return this.instant()?r:(i=i||Date.now(),i>=this.endTime)?r:(u=this.oldTransition.calculate(n,t,this.startTime),e=f.easeCubicInOut((i-this.startTime-this.delay)/this.duration),this.interp(u,r,e))};i.prototype._calculateTargetValue=function(n,t){if(!this.zoomTransitioned)return this.declaration.calculate(n,t);var i=n.zoom,u=this.zoomHistory.lastIntegerZoom,o=i>u?2:.5,f=this.declaration.calculate({zoom:i>u?i-1:i+1},t),e=this.declaration.calculate({zoom:i},t),s=Math.min((Date.now()-this.zoomHistory.lastIntegerZoomTime)/this.duration,1),h=Math.abs(i-u),c=r(s,1,h);if(void 0!==f&&void 0!==e)return{from:f,fromScale:o,to:e,toScale:1,t:c}};t.exports=i},{"../util/interpolate":204,"../util/util":212}],156:[function(n,t){"use strict";t.exports=n("../style-spec/validate_style.min");t.exports.emitErrors=function(n,t){if(t&&t.length){for(var i=0;i<t.length;i++)n.fire("error",{error:new Error(t[i].message)});return!0}return!1}},{"../style-spec/validate_style.min":142}],157:[function(n,t){"use strict";var i=n("point-geometry"),r=function(n){function t(t,i,r,u){n.call(this,t,i);this.angle=r;void 0!==u&&(this.segment=u)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.clone=function(){return new t(this.x,this.y,this.angle,this.segment)},t}(i);t.exports=r},{"point-geometry":26}],158:[function(n,t){"use strict";function i(n,t,i,r,u){var s,h,o;if(void 0===t.segment)return!0;for(var a=t,f=t.segment+1,e=0;e>-i/2;){if(f--,f<0)return!1;e-=n[f].dist(a);a=n[f]}for(e+=n[f].dist(n[f+1]),f++,s=[],h=0;e<i/2;){var v=n[f-1],c=n[f],l=n[f+1];if(!l)return!1;for(o=v.angleTo(c)-c.angleTo(l),o=Math.abs((o+3*Math.PI)%(2*Math.PI)-Math.PI),s.push({distance:e,angleDelta:o}),h+=o;e-s[0].distance>r;)h-=s.shift().angleDelta;if(h>u)return!1;f++;e+=c.dist(l)}return!0}t.exports=i},{}],159:[function(n,t){"use strict";function r(n,t,r,u,f){for(var e,o,l=[],h=0;h<n.length;h++)for(var a=n[h],s=void 0,c=0;c<a.length-1;c++)e=a[c],o=a[c+1],e.x<t&&o.x<t||(e.x<t?e=new i(t,e.y+(o.y-e.y)*((t-e.x)/(o.x-e.x)))._round():o.x<t&&(o=new i(t,e.y+(o.y-e.y)*((t-e.x)/(o.x-e.x)))._round()),e.y<r&&o.y<r||(e.y<r?e=new i(e.x+(o.x-e.x)*((r-e.y)/(o.y-e.y)),r)._round():o.y<r&&(o=new i(e.x+(o.x-e.x)*((r-e.y)/(o.y-e.y)),r)._round()),e.x>=u&&o.x>=u||(e.x>=u?e=new i(u,e.y+(o.y-e.y)*((u-e.x)/(o.x-e.x)))._round():o.x>=u&&(o=new i(u,e.y+(o.y-e.y)*((u-e.x)/(o.x-e.x)))._round()),e.y>=f&&o.y>=f||(e.y>=f?e=new i(e.x+(o.x-e.x)*((f-e.y)/(o.y-e.y)),f)._round():o.y>=f&&(o=new i(e.x+(o.x-e.x)*((f-e.y)/(o.y-e.y)),f)._round()),s&&e.equals(s[s.length-1])||(s=[e],l.push(s)),s.push(o)))));return l}var i=n("point-geometry");t.exports=r},{"point-geometry":26}],160:[function(n,t){"use strict";var r=n("../util/struct_array"),u=n("point-geometry"),i=r({members:[{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Float32",name:"maxScale"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"},{type:"Int16",name:"bbox0"},{type:"Int16",name:"bbox1"},{type:"Int16",name:"bbox2"},{type:"Int16",name:"bbox3"},{type:"Float32",name:"placementScale"}]});Object.defineProperty(i.prototype.StructType.prototype,"anchorPoint",{get:function(){return new u(this.anchorPointX,this.anchorPointY)}});t.exports=i},{"../util/struct_array":210,"point-geometry":26}],161:[function(n,t){"use strict";var i=function(n,t,i,r,u,f,e,o,s,h,c){var y=e.top*o-s,p=e.bottom*o+s,w=e.left*o-s,b=e.right*o+s,l,a,v,k;(this.boxStartIndex=n.length,h)?(l=p-y,a=b-w,l>0&&((l=Math.max(10*o,l),c)?(v=t[i.segment+1].sub(t[i.segment])._unit()._mult(a),k=[i.sub(v),i.add(v)],this._addLineCollisionBoxes(n,k,i,0,a,l,r,u,f)):this._addLineCollisionBoxes(n,t,i,i.segment,a,l,r,u,f))):n.emplaceBack(i.x,i.y,w,y,b,p,1/0,r,u,f,0,0,0,0,0);this.boxEndIndex=n.length};i.prototype._addLineCollisionBoxes=function(n,t,i,r,u,f,e,o,s){var y=f/2,g=Math.floor(u/y),w=-f/2,p=this.boxes,b=i,h=r+1,c=w,l,a,v;do{if(h--,h<0)return p;c-=t[h].dist(b);b=t[h]}while(c>-u/2);for(l=t[h].dist(t[h+1]),a=0;a<g;a++){for(v=-u/2+a*y;c+l<v;){if(c+=l,h++,h+1>=t.length)return p;l=t[h].dist(t[h+1])}var nt=v-c,k=t[h],tt=t[h+1],d=tt.sub(k)._unit()._mult(nt)._add(k)._round(),it=Math.max(Math.abs(v-w)-y/2,0),rt=u/2/it;n.emplaceBack(d.x,d.y,-f/2,-f/2,f/2,f/2,rt,e,o,s,0,0,0,0,0)}return p};t.exports=i},{}],162:[function(n,t){"use strict";var i=n("point-geometry"),u=n("../data/extent"),f=n("grid-index"),e=n("../util/intersection_tests"),r=function(n,t,i){var e,o,s,r;"object"==typeof n?(e=n,i=t,n=e.angle,t=e.pitch,this.grid=new f(e.grid),this.ignoredGrid=new f(e.ignoredGrid)):(this.grid=new f(u,12,6),this.ignoredGrid=new f(u,12,0));this.minScale=.5;this.maxScale=2;this.angle=n;this.pitch=t;o=Math.sin(n);s=Math.cos(n);(this.rotationMatrix=[s,-o,o,s],this.reverseRotationMatrix=[s,o,-o,s],this.yStretch=1/Math.cos(t/180*Math.PI),this.yStretch=Math.pow(this.yStretch,1.3),this.collisionBoxArray=i,0===i.length)&&(i.emplaceBack(),r=32767,i.emplaceBack(0,0,0,-r,0,r,r,0,0,0,0,0,0,0,0,0),i.emplaceBack(u,0,0,-r,0,r,r,0,0,0,0,0,0,0,0,0),i.emplaceBack(0,0,-r,0,r,0,r,0,0,0,0,0,0,0,0,0),i.emplaceBack(0,u,-r,0,r,0,r,0,0,0,0,0,0,0,0,0));this.tempCollisionBox=i.get(0);this.edges=[i.get(1),i.get(2),i.get(3),i.get(4)]};r.prototype.serialize=function(n){var t=this.grid.toArrayBuffer(),i=this.ignoredGrid.toArrayBuffer();return n&&(n.push(t),n.push(i)),{angle:this.angle,pitch:this.pitch,grid:t,ignoredGrid:i}};r.prototype.placeCollisionFeature=function(n,t,r){for(var b,s,k,st,f,y,d,e=this,g=this.collisionBoxArray,o=this.minScale,nt=this.rotationMatrix,tt=this.yStretch,p=n.boxStartIndex;p<n.boxEndIndex;p++){var u=g.get(p),w=u.anchorPoint._matMult(nt),it=w.x,rt=w.y,ut=it+u.x1,ft=rt+u.y1*tt,et=it+u.x2,ot=rt+u.y2*tt;if(u.bbox0=ut,u.bbox1=ft,u.bbox2=et,u.bbox3=ot,!t)for(b=e.grid.query(ut,ft,et,ot),s=0;s<b.length;s++)if(k=g.get(b[s]),st=k.anchorPoint._matMult(nt),o=e.getPlacementScale(o,w,u,st,k),o>=e.maxScale)return o;if(r){if(f=void 0,e.angle){var h=e.reverseRotationMatrix,c=new i(u.x1,u.y1).matMult(h),l=new i(u.x2,u.y1).matMult(h),a=new i(u.x1,u.y2).matMult(h),v=new i(u.x2,u.y2).matMult(h);f=e.tempCollisionBox;f.anchorPointX=u.anchorPoint.x;f.anchorPointY=u.anchorPoint.y;f.x1=Math.min(c.x,l.x,a.x,v.x);f.y1=Math.min(c.y,l.x,a.x,v.x);f.x2=Math.max(c.x,l.x,a.x,v.x);f.y2=Math.max(c.y,l.x,a.x,v.x);f.maxScale=u.maxScale}else f=u;for(y=0;y<this.edges.length;y++)if(d=e.edges[y],o=e.getPlacementScale(o,u.anchorPoint,f,d.anchorPoint,d),o>=e.maxScale)return o}}return o};r.prototype.queryRenderedSymbols=function(n,t){var o={},w=[],k,a,u,g,f;if(0===n.length||0===this.grid.length&&0===this.ignoredGrid.length)return w;for(var ht=this.collisionBoxArray,nt=this.rotationMatrix,tt=this.yStretch,it=[],s=1/0,h=1/0,c=-(1/0),l=-(1/0),b=0;b<n.length;b++)for(k=n[b],a=0;a<k.length;a++)u=k[a].matMult(nt),s=Math.min(s,u.x),h=Math.min(h,u.y),c=Math.max(c,u.x),l=Math.max(l,u.y),it.push(u);for(var v=this.grid.query(s,h,c,l),rt=this.ignoredGrid.query(s,h,c,l),d=0;d<rt.length;d++)v.push(rt[d]);for(g=Math.pow(2,Math.ceil(Math.log(t)/Math.LN2*10)/10),f=0;f<v.length;f++){var r=ht.get(v[f]),y=r.sourceLayerIndex,ut=r.featureIndex;if(void 0===o[y]&&(o[y]={}),!o[y][ut]&&!(g<r.placementScale||g>r.maxScale)){var p=r.anchorPoint.matMult(nt),ft=p.x+r.x1/t,et=p.y+r.y1/t*tt,ot=p.x+r.x2/t,st=p.y+r.y2/t*tt,ct=[new i(ft,et),new i(ot,et),new i(ot,st),new i(ft,st)];e.polygonIntersectsPolygon(it,ct)&&(o[y][ut]=!0,w.push(v[f]))}}return w};r.prototype.getPlacementScale=function(n,t,i,r,u){var c=t.x-r.x,l=t.y-r.y,e=(u.x1-i.x2)/c,o=(u.x2-i.x1)/c,s=(u.y1-i.y2)*this.yStretch/l,h=(u.y2-i.y1)*this.yStretch/l;(isNaN(e)||isNaN(o))&&(e=o=1);(isNaN(s)||isNaN(h))&&(s=h=1);var f=Math.min(Math.max(e,o),Math.max(s,h)),a=u.maxScale,v=i.maxScale;return f>a&&(f=a),f>v&&(f=v),f>n&&f>=u.placementScale&&(n=f),n};r.prototype.insertCollisionFeature=function(n,t,i){for(var r,f=this,e=i?this.ignoredGrid:this.grid,o=this.collisionBoxArray,u=n.boxStartIndex;u<n.boxEndIndex;u++)r=o.get(u),r.placementScale=t,t<f.maxScale&&e.insert(u,r.bbox0,r.bbox1,r.bbox2,r.bbox3)};t.exports=r},{"../data/extent":54,"../util/intersection_tests":205,"grid-index":16,"point-geometry":26}],163:[function(n,t){"use strict";function u(n,t,r,u,f,e,o,s,h){var y=u?.6*e*o:0,c=Math.max(u?u.right-u.left:0,f?f.right-f.left:0),l=0===n[0].x||n[0].x===h||0===n[0].y||n[0].y===h,a,v;return t-c*o<t/4&&(t=c*o+t/4),a=2*e,v=l?t/2*s%t:(c/2+a)*o*s%t,i(n,v,t,y,r,c*o,l,!1,h)}function i(n,t,u,o,s,h,c,l,a){for(var it,rt=h/2,ut=0,p=0;p<n.length-1;p++)ut+=n[p].dist(n[p+1]);for(var w=0,v=t-u,b=[],y=0;y<n.length-1;y++){for(var k=n[y],d=n[y+1],g=k.dist(d),et=d.angleTo(k);v+u<w+g;){v+=u;var ft=(v-w)/g,nt=r(k.x,d.x,ft),tt=r(k.y,d.y,ft);nt>=0&&nt<a&&tt>=0&&tt<a&&v-rt>=0&&v+rt<=ut&&(it=new f(nt,tt,et,y)._round(),o&&!e(n,it,h,o,s)||b.push(it))}w+=g}return l||b.length||c||(b=i(n,w/2,u,o,s,h,c,!0,a)),b}var r=n("../util/interpolate"),f=n("../symbol/anchor"),e=n("./check_max_angle");t.exports=u},{"../symbol/anchor":157,"../util/interpolate":204,"./check_max_angle":158}],164:[function(n,t){"use strict";var e=n("@mapbox/shelf-pack"),o=n("../util/util"),r=4,u=128,f=2048,i=function(){this.width=u;this.height=u;this.atlas=new e(this.width,this.height);this.index={};this.ids={};this.data=new Uint8Array(this.width*this.height)};i.prototype.getGlyphs=function(){var i,n,r,u=this,t={};for(var f in u.ids)i=f.split("#"),n=i[0],r=i[1],t[n]||(t[n]=[]),t[n].push(r);return t};i.prototype.getRects=function(){var i,n,r,u=this,t={};for(var f in u.ids)i=f.split("#"),n=i[0],r=i[1],t[n]||(t[n]={}),t[n][r]=u.index[f];return t};i.prototype.addGlyph=function(n,t,i,r){var y=this,f,u;if(!i)return null;if(f=t+"#"+i.id,this.index[f])return this.ids[f].indexOf(n)<0&&this.ids[f].push(n),this.index[f];if(!i.bitmap)return null;var a=i.width+2*r,v=i.height+2*r,e=1,s=a+2*e,h=v+2*e;if(s+=4-s%4,h+=4-h%4,u=this.atlas.packOne(s,h),u||(this.resize(),u=this.atlas.packOne(s,h)),!u)return o.warnOnce("glyph bitmap overflow"),null;this.index[f]=u;this.ids[f]=[n];for(var p=this.data,w=i.bitmap,c=0;c<v;c++)for(var b=y.width*(u.y+c+e)+u.x+e,k=a*c,l=0;l<a;l++)p[b+l]=w[k+l];return this.dirty=!0,u};i.prototype.resize=function(){var s=this,i=this.width,t=this.height,u,n,e,o;if(!(i>=f||t>=f)){for(this.texture&&(this.gl&&this.gl.deleteTexture(this.texture),this.texture=null),this.width*=r,this.height*=r,this.atlas.resize(this.width,this.height),u=new ArrayBuffer(this.width*this.height),n=0;n<t;n++)e=new Uint8Array(s.data.buffer,t*n,i),o=new Uint8Array(u,t*n*r,i),o.set(e);this.data=new Uint8Array(u)}};i.prototype.bind=function(n){this.gl=n;this.texture?n.bindTexture(n.TEXTURE_2D,this.texture):(this.texture=n.createTexture(),n.bindTexture(n.TEXTURE_2D,this.texture),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texImage2D(n.TEXTURE_2D,0,n.ALPHA,this.width,this.height,0,n.ALPHA,n.UNSIGNED_BYTE,null))};i.prototype.updateTexture=function(n){this.bind(n);this.dirty&&(n.texSubImage2D(n.TEXTURE_2D,0,0,0,this.width,this.height,n.ALPHA,n.UNSIGNED_BYTE,this.data),this.dirty=!1)};t.exports=i},{"../util/util":212,"@mapbox/shelf-pack":2}],165:[function(n,t){"use strict";function f(n,t,i,r){return r=r||"abc",i.replace("{s}",r[n.length%r.length]).replace("{fontstack}",n).replace("{range}",t)}var e=n("../util/mapbox").normalizeGlyphsURL,o=n("../util/ajax"),r=n("../util/verticalize_punctuation"),s=n("../util/glyphs"),h=n("../symbol/glyph_atlas"),c=n("pbf"),u=function(n,t,i){var r=1;this.advance=n.advance;this.left=n.left-i-r;this.top=n.top+i+r;this.rect=t},i=function(n){this.url=n&&e(n);this.atlases={};this.stacks={};this.loading={}};i.prototype.getSimpleGlyphs=function(n,t,i,f){var y=this,a,v,k,d;void 0===this.stacks[n]&&(this.stacks[n]={});void 0===this.atlases[n]&&(this.atlases[n]=new h);for(var o={},p=this.stacks[n],w=this.atlases[n],s=3,e={},c=0,b=function(t){var r=Math.floor(t/256),f,h;p[r]?(f=p[r].glyphs[t],h=w.addGlyph(i,n,f,s),f&&(o[t]=new u(f,h,s))):(void 0===e[r]&&(e[r]=[],c++),e[r].push(t))},l=0;l<t.length;l++)a=t[l],v=String.fromCharCode(a),b(a),r.lookup[v]&&b(r.lookup[v].charCodeAt(0));c||f(void 0,o,n);k=function(t,r,h){var v,l;if(!t)for(v=y.stacks[n][r]=h.stacks[0],l=0;l<e[r].length;l++){var p=e[r][l],a=v.glyphs[p],b=w.addGlyph(i,n,a,s);a&&(o[p]=new u(a,b,s))}c--;c||f(void 0,o,n)};for(d in e)y.loadRange(n,d,k)};i.prototype.loadRange=function(n,t,i){var r,u,e;if(256*t>65535)return i("glyphs > 65535 not supported");void 0===this.loading[n]&&(this.loading[n]={});r=this.loading[n];r[t]?r[t].push(i):(r[t]=[i],u=256*t+"-"+(256*t+255),e=f(n,u,this.url),o.getArrayBuffer(e,function(n,i){for(var f=!n&&new s(new c(i.data)),u=0;u<r[t].length;u++)r[t][u](n,t,f);delete r[t]}))};i.prototype.getGlyphAtlas=function(n){return this.atlases[n]};t.exports=i},{"../symbol/glyph_atlas":164,"../util/ajax":191,"../util/glyphs":203,"../util/mapbox":208,"../util/verticalize_punctuation":214,pbf:25}],166:[function(n,t){"use strict";t.exports=function(n){function v(i){t.push(n[i]);c++}function y(n,i,r){var f=u[n];return delete u[n],u[i]=f,t[f].geometry[0].pop(),t[f].geometry[0]=t[f].geometry[0].concat(r[0]),f}function p(n,i,r){var u=f[i];return delete f[i],f[n]=u,t[u].geometry[0].shift(),t[u].geometry[0]=r[0].concat(t[u].geometry[0]),u}function h(n,t,i){var r=i?t[0][t[0].length-1]:t[0][0];return n+":"+r.x+":"+r.y}for(var i,r,l,a,f={},u={},t=[],c=0,e=0;e<n.length;e++){var w=n[e],o=w.geometry,s=w.text;s?(i=h(s,o),r=h(s,o,!0),i in u&&r in f&&u[i]!==f[r]?(l=p(i,r,o),a=y(i,r,t[l].geometry),delete f[i],delete u[r],u[h(s,t[a].geometry,!0)]=a,t[l].geometry=null):i in u?y(i,r,o):r in f?p(i,r,o):(v(e),f[i]=c-1,u[r]=c-1)):v(e)}return t.filter(function(n){return n.geometry})}},{}],167:[function(n,t){"use strict";function u(n,t,i,r,u,f,e,o,s,h,c){this.anchorPoint=n;this.tl=t;this.tr=i;this.bl=r;this.br=u;this.tex=f;this.anchorAngle=e;this.glyphAngle=o;this.minScale=s;this.maxScale=h;this.writingMode=c}function e(n,t,f,e,o,s,h,c,l){var y,p,w,b,ht=t.image.rect,a=o.layout,ct=1,nt=t.left-ct,et=nt+ht.w/t.image.pixelRatio,tt=t.top-ct,ot=tt+ht.h/t.image.pixelRatio,v,g,st;if("none"!==a["icon-text-fit"]&&h){var lt=et-nt,at=ot-tt,it=a["text-size"]/24,k=h.left*it,ii=h.right*it,d=h.top*it,ri=h.bottom*it,vt=ii-k,yt=ri-d,pt=a["icon-text-fit-padding"][0],wt=a["icon-text-fit-padding"][1],bt=a["icon-text-fit-padding"][2],kt=a["icon-text-fit-padding"][3],rt="width"===a["icon-text-fit"]?.5*(yt-at):0,ut="height"===a["icon-text-fit"]?.5*(vt-lt):0,dt="width"===a["icon-text-fit"]||"both"===a["icon-text-fit"]?vt:lt,gt="height"===a["icon-text-fit"]||"both"===a["icon-text-fit"]?yt:at;y=new i(k+ut-kt,d+rt-pt);p=new i(k+ut+wt+dt,d+rt-pt);w=new i(k+ut+wt+dt,d+rt+bt+gt);b=new i(k+ut-kt,d+rt+bt+gt)}else y=new i(nt,tt),p=new i(et,tt),w=new i(et,ot),b=new i(nt,ot);if(v=o.getLayoutValue("icon-rotate",c,l)*Math.PI/180,s&&(g=e[n.segment],n.y===g.y&&n.x===g.x&&n.segment+1<e.length?(st=e[n.segment+1],v+=Math.atan2(n.y-st.y,n.x-st.x)+Math.PI):v+=Math.atan2(n.y-g.y,n.x-g.x)),v){var ni=Math.sin(v),ti=Math.cos(v),ft=[ti,-ni,ni,ti];y=y.matMult(ft);p=p.matMult(ft);b=b.matMult(ft);w=w.matMult(ft)}return[new u(new i(n.x,n.y),y,p,b,w,t.image.rect,0,0,r,1/0)]}function o(n,t,e,o,s,h){for(var c,a,p,b,d=s.layout["text-rotate"]*Math.PI/180,bt=s.layout["text-keep-upright"],et=t.positionedGlyphs,ot=[],g=0;g<et.length;g++)if(c=et[g],a=c.glyph,a&&(p=a.rect,p)){var st=(c.x+a.advance/2)*e,v=void 0,w=r;h?(v=[],w=f(v,n,st,o,n.segment,!0),bt&&(w=Math.min(w,f(v,n,st,o,n.segment,!1)))):v=[{anchorPoint:new i(n.x,n.y),offset:0,angle:0,maxScale:1/0,minScale:r}];var nt=c.x+a.left,tt=c.y-a.top,ht=nt+p.w,ct=tt+p.h,l=new i(c.x,a.advance/2),lt=new i(nt,tt),at=new i(ht,tt),vt=new i(nt,ct),yt=new i(ht,ct);for(0!==c.angle&&(lt._sub(l)._rotate(c.angle)._add(l),at._sub(l)._rotate(c.angle)._add(l),vt._sub(l)._rotate(c.angle)._add(l),yt._sub(l)._rotate(c.angle)._add(l)),b=0;b<v.length;b++){var y=v[b],it=lt,rt=at,ut=vt,ft=yt;if(d){var pt=Math.sin(d),wt=Math.cos(d),k=[wt,-pt,pt,wt];it=it.matMult(k);rt=rt.matMult(k);ut=ut.matMult(k);ft=ft.matMult(k)}var kt=Math.max(y.minScale,w),dt=(n.angle+y.offset+2*Math.PI)%(2*Math.PI),gt=(y.angle+y.offset+2*Math.PI)%(2*Math.PI);ot.push(new u(y.anchorPoint,it,rt,ut,ft,p,dt,gt,kt,y.maxScale,t.writingMode))}}return ot}function f(n,t,u,f,e,o){var w=!o,l,p;u<0&&(o=!o);o&&e++;var s=new i(t.x,t.y),h=f[e],a=1/0;for(u=Math.abs(u),l=r;;){var v=s.dist(h),c=u/v,y=Math.atan2(h.y-s.y,h.x-s.x);if(o||(y+=Math.PI),n.push({anchorPoint:s,offset:w?Math.PI:0,minScale:c,maxScale:a,angle:(y+2*Math.PI)%(2*Math.PI)}),c<=l)break;for(s=h;s.equals(h);)if(e+=o?1:-1,h=f[e],!h)return c;p=h.sub(s)._unit();s=s.sub(p._mult(v));a=c}return l}var i=n("point-geometry"),r;t.exports={getIconQuads:e,getGlyphQuads:o,SymbolQuad:u};r=.5},{"point-geometry":26}],168:[function(n,t){"use strict";var i=n("../util/token");t.exports=function(n,t,r){var u=n.getLayoutValue("text-field",t,r),f;if(n.isLayoutValueFeatureConstant("text-field")&&(u=i(r,u)),u)return u=u.toString(),f=n.getLayoutValue("text-transform",t,r),"uppercase"===f?u=u.toLocaleUpperCase():"lowercase"===f&&(u=u.toLocaleLowerCase()),u}},{"../util/token":211}],169:[function(n,t){"use strict";function r(n,t,i,r,u){this.codePoint=n;this.x=t;this.y=i;this.glyph=r||null;this.angle=u}function a(n,t,i,r,u,f,e){this.positionedGlyphs=n;this.text=t;this.top=i;this.bottom=r;this.left=u;this.right=f;this.writingMode=e}function v(n,t){for(var f,r=[],i=0,u=0,e=t;u<e.length;u+=1)f=e[u],r.push(n.substring(i,f)),i=f;return i<n.length&&r.push(n.substring(i,n.length)),r}function y(n,t,r,u,f,e,s,c,l,y,p){var w=n.trim(),g,k,d;return p===i.vertical&&(w=tt(w)),k=[],d=new a(k,w,l[1],l[1],l[0],l[0],p),g=h.processBidirectionalText?h.processBidirectionalText(w,o(w,c,r,t)):v(w,o(w,c,r,t)),b(d,t,g,u,f,e,s,l,p,c,y),!!k.length&&d}function p(n,t,i,r){var u=0,e,f,o;for(e in n)f=r[n.charCodeAt(e)],f&&(u+=f.advance+t);return o=Math.max(1,Math.ceil(u/i)),u/o}function u(n,t,i,r){var u=Math.pow(n-t,2);return r?n<t?u/2:2*u:u+Math.abs(i)*i}function w(n,t){var i=0;return 10===n&&(i-=1e4),40!==n&&65288!==n||(i+=50),41!==t&&65289!==t||(i+=50),i}function f(n,t,i,r,f,e){for(var c=null,o=u(t,i,f,e),s=0,l=r;s<l.length;s+=1){var h=l[s],v=t-h.x,a=u(v,i,f,e)+h.badness;a<=o&&(c=h,o=a)}return{index:n,x:t,priorBreak:c,badness:o}}function e(n){return n?e(n.priorBreak).concat(n.index):[]}function o(n,t,i,r){var o,v;if(!i)return[];if(!n)return[];for(var h=[],y=p(n,t,i,r),a=0,u=0;u<n.length;u++)o=n.charCodeAt(u),v=r[o],v&&!c[o]&&(a+=v.advance+t),u<n.length-1&&(l[o]||s.charAllowsIdeographicBreaking(o))&&h.push(f(u+1,a,y,h,w(o,n.charCodeAt(u+1)),!1));return e(f(n.length,a,y,h,0,!0))}function b(n,t,u,f,e,o,h,c,l,a,v){var p=0,it=-17,w=0,y=n.positionedGlyphs,ft,nt,rt,tt,b,g,et,ut;for(ft in u)if(nt=u[ft].trim(),nt.length){for(rt=y.length,tt=0;tt<nt.length;tt++)b=nt.charCodeAt(tt),g=t[b],g&&(s.charHasUprightVerticalOrientation(b)&&l!==i.horizontal?(y.push(new r(b,p,0,g,-Math.PI/2)),p+=v+a):(y.push(new r(b,p,it,g,0)),p+=g.advance+a));y.length!==rt&&(et=p-a,w=Math.max(et,w),k(y,t,rt,y.length-1,h));p=0;it+=f}else it+=f;d(y,h,e,o,w,f,u.length,c);ut=u.length*f;n.top+=-o*ut;n.bottom=n.top+ut;n.left+=-e*w;n.right=n.left+w}function k(n,t,i,r,u){if(u)for(var e=t[n[r].codePoint].advance,o=(n[r].x+e)*u,f=i;f<=r;f++)n[f].x-=o}function d(n,t,i,r,u,f,e,o){for(var h=(t-i)*u+o[0],c=(-r*e+.5)*f+o[1],s=0;s<n.length;s++)n[s].x+=h,n[s].y+=c}function g(n,t){if(!n||!n.rect)return null;var u=t[0],f=t[1],i=u-n.width/2,e=i+n.width,r=f-n.height/2,o=r+n.height;return new nt(n,r,o,i,e)}function nt(n,t,i,r,u){this.image=n;this.top=t;this.bottom=i;this.left=r;this.right=u}var s=n("../util/script_detection"),tt=n("../util/verticalize_punctuation"),h=n("../source/rtl_text_plugin"),i={horizontal:1,vertical:2},c,l;t.exports={shapeText:y,shapeIcon:g,WritingMode:i};c={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0};l={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0}},{"../source/rtl_text_plugin":90,"../util/script_detection":209,"../util/verticalize_punctuation":214}],170:[function(n,t){"use strict";function r(n,t,i,r,u,f,e,o,s,h,c){var l,a,y=r*t+i,v=o*f+e;if(c)for(v-=f,a=-1;a<=h;a++,v+=f)for(y=((a+h)%h+r)*t+i,l=-1;l<=s;l++)u[v+l]=n[y+(l+s)%s];else for(a=0;a<h;a++,y+=t,v+=f)for(l=0;l<s;l++)u[v+l]=n[y+l]}var u=n("@mapbox/shelf-pack"),i=n("../util/browser"),f=n("../util/util"),e=n("../util/window"),o=n("../util/evented"),s=function(n){function t(t,i){n.call(this);this.width=t;this.height=i;this.shelfPack=new u(t,i);this.images={};this.data=!1;this.texture=0;this.filter=0;this.pixelRatio=1;this.dirty=!0}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.allocateImage=function(n,t){n/=this.pixelRatio;t/=this.pixelRatio;var i=2,u=n+i+(4-(n+i)%4),e=t+i+(4-(t+i)%4),r=this.shelfPack.packOne(u,e);return r?r:(f.warnOnce("SpriteAtlas out of space."),null)},t.prototype.addImage=function(n,t,r){var u,f,o,s,h;if(t instanceof e.HTMLImageElement?(u=t.width,f=t.height,t=i.getImageData(t),o=this.pixelRatio):(u=r.width,f=r.height,o=r.pixelRatio||this.pixelRatio),ArrayBuffer.isView(t)&&(t=new Uint32Array(t.buffer)),!(t instanceof Uint32Array))return this.fire("error",{error:new Error("Image provided in an invalid format. Supported formats are HTMLImageElement, ImageData, and ArrayBufferView.")});if(this.images[n])return this.fire("error",{error:new Error("An image with this name already exists.")});if(s=this.allocateImage(u,f),!s)return this.fire("error",{error:new Error("There is not enough space to add this image.")});h={rect:s,width:u/o,height:f/o,sdf:!1,pixelRatio:1};this.images[n]=h;this.copy(t,u,s,{pixelRatio:o,x:0,y:0,width:u,height:f},!1);this.fire("data",{dataType:"style"})},t.prototype.removeImage=function(n){var t=this.images[n];return delete this.images[n],t?(this.shelfPack.unref(t.rect),void this.fire("data",{dataType:"style"})):this.fire("error",{error:new Error("No image with this name exists.")})},t.prototype.getImage=function(n,t){var i,r,u,f;return this.images[n]?this.images[n]:this.sprite?(i=this.sprite.getSpritePosition(n),!i.width||!i.height)?null:(r=this.allocateImage(i.width,i.height),!r)?null:(u={rect:r,width:i.width/i.pixelRatio,height:i.height/i.pixelRatio,sdf:i.sdf,pixelRatio:i.pixelRatio/this.pixelRatio},this.images[n]=u,!this.sprite.imgData)?null:(f=new Uint32Array(this.sprite.imgData.buffer),this.copy(f,this.sprite.width,r,i,t),u):null},t.prototype.getPosition=function(n,t){var i=this.getImage(n,t),r=i&&i.rect;if(!r)return null;var f=i.width*i.pixelRatio,e=i.height*i.pixelRatio,u=1;return{size:[i.width,i.height],tl:[(r.x+u)/this.width,(r.y+u)/this.height],br:[(r.x+u+f)/this.width,(r.y+u+e)/this.height]}},t.prototype.allocate=function(){var r=this,t,i,n;if(!this.data)for(t=Math.floor(this.width*this.pixelRatio),i=Math.floor(this.height*this.pixelRatio),this.data=new Uint32Array(t*i),n=0;n<this.data.length;n++)r.data[n]=0},t.prototype.copy=function(n,t,i,u,f){this.allocate();var o=this.data,e=1;r(n,t,u.x,u.y,o,this.width*this.pixelRatio,(i.x+e)*this.pixelRatio,(i.y+e)*this.pixelRatio,u.width,u.height,f);this.dirty=!0},t.prototype.setSprite=function(n){n&&(this.pixelRatio=i.devicePixelRatio>1?2:1,this.canvas&&(this.canvas.width=this.width*this.pixelRatio,this.canvas.height=this.height*this.pixelRatio));this.sprite=n},t.prototype.addIcons=function(n,t){for(var r=this,i=0;i<n.length;i++)r.getImage(n[i]);t(null,this.images)},t.prototype.bind=function(n,t){var r=!1,i;this.texture?n.bindTexture(n.TEXTURE_2D,this.texture):(this.texture=n.createTexture(),n.bindTexture(n.TEXTURE_2D,this.texture),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),r=!0);i=t?n.LINEAR:n.NEAREST;i!==this.filter&&(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,i),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,i),this.filter=i);this.dirty&&(this.allocate(),r?n.texImage2D(n.TEXTURE_2D,0,n.RGBA,this.width*this.pixelRatio,this.height*this.pixelRatio,0,n.RGBA,n.UNSIGNED_BYTE,new Uint8Array(this.data.buffer)):n.texSubImage2D(n.TEXTURE_2D,0,0,0,this.width*this.pixelRatio,this.height*this.pixelRatio,n.RGBA,n.UNSIGNED_BYTE,new Uint8Array(this.data.buffer)),this.dirty=!1)},t}(o);t.exports=s},{"../util/browser":192,"../util/evented":200,"../util/util":212,"../util/window":194,"@mapbox/shelf-pack":2}],171:[function(n,t){"use strict";var i=n("../util/dom"),u=n("point-geometry"),r={scrollZoom:n("./handler/scroll_zoom"),boxZoom:n("./handler/box_zoom"),dragRotate:n("./handler/drag_rotate"),dragPan:n("./handler/drag_pan"),keyboard:n("./handler/keyboard"),doubleClickZoom:n("./handler/dblclick_zoom"),touchZoomRotate:n("./handler/touch_zoom_rotate")};t.exports=function(n,t){function v(n){e("mouseout",n)}function y(t){n.stop();a=i.mousePos(f,t);e("mousedown",t);l=!0}function p(t){var i=n.dragRotate&&n.dragRotate.isActive();c&&!i&&e("contextmenu",c);c=null;l=!1;e("mouseup",t)}function w(t){if(!(n.dragPan&&n.dragPan.isActive()||n.dragRotate&&n.dragRotate.isActive())){for(var i=t.toElement||t.target;i&&i!==f;)i=i.parentNode;i===f&&e("mousemove",t)}}function b(t){n.stop();h("touchstart",t);!t.touches||t.touches.length>1||(o?(clearTimeout(o),o=null,e("dblclick",t)):o=setTimeout(nt,300))}function k(n){h("touchmove",n)}function d(n){h("touchend",n)}function g(n){h("touchcancel",n)}function nt(){o=null}function tt(n){var t=i.mousePos(f,n);t.equals(a)&&e("click",n)}function it(n){e("dblclick",n);n.preventDefault()}function rt(t){var i=n.dragRotate&&n.dragRotate.isActive();l||i?l&&(c=t):e("contextmenu",t);t.preventDefault()}function e(t,r){var u=i.mousePos(f,r);return n.fire(t,{lngLat:n.unproject(u),point:u,originalEvent:r})}function h(t,r){var e=i.touchPos(f,r),o=e.reduce(function(n,t,i,r){return n.add(t.div(r.length))},new u(0,0));return n.fire(t,{lngLat:n.unproject(o),point:o,lngLats:e.map(function(t){return n.unproject(t)},this),points:e,originalEvent:r})}var f=n.getCanvasContainer(),c=null,l=!1,a=null,o=null;for(var s in r)n[s]=new r[s](n,t),t.interactive&&t[s]&&n[s].enable(t[s]);f.addEventListener("mouseout",v,!1);f.addEventListener("mousedown",y,!1);f.addEventListener("mouseup",p,!1);f.addEventListener("mousemove",w,!1);f.addEventListener("touchstart",b,!1);f.addEventListener("touchend",d,!1);f.addEventListener("touchmove",k,!1);f.addEventListener("touchcancel",g,!1);f.addEventListener("click",tt,!1);f.addEventListener("dblclick",it,!1);f.addEventListener("contextmenu",rt,!1)}},{"../util/dom":199,"./handler/box_zoom":179,"./handler/dblclick_zoom":180,"./handler/drag_pan":181,"./handler/drag_rotate":182,"./handler/keyboard":183,"./handler/scroll_zoom":184,"./handler/touch_zoom_rotate":185,"point-geometry":26}],172:[function(n,t){"use strict";var i=n("../util/util"),r=n("../util/interpolate"),e=n("../util/browser"),u=n("../geo/lng_lat"),o=n("../geo/lng_lat_bounds"),f=n("point-geometry"),s=n("../util/evented"),h=function(n){function t(t,i){n.call(this);this.moving=!1;this.transform=t;this._bearingSnap=i.bearingSnap}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.getCenter=function(){return this.transform.center},t.prototype.setCenter=function(n,t){return this.jumpTo({center:n},t),this},t.prototype.panBy=function(n,t,r){return this.panTo(this.transform.center,i.extend({offset:f.convert(n).mult(-1)},t),r),this},t.prototype.panTo=function(n,t,r){return this.easeTo(i.extend({center:n},t),r)},t.prototype.getZoom=function(){return this.transform.zoom},t.prototype.setZoom=function(n,t){return this.jumpTo({zoom:n},t),this},t.prototype.zoomTo=function(n,t,r){return this.easeTo(i.extend({zoom:n},t),r)},t.prototype.zoomIn=function(n,t){return this.zoomTo(this.getZoom()+1,n,t),this},t.prototype.zoomOut=function(n,t){return this.zoomTo(this.getZoom()-1,n,t),this},t.prototype.getBearing=function(){return this.transform.bearing},t.prototype.setBearing=function(n,t){return this.jumpTo({bearing:n},t),this},t.prototype.rotateTo=function(n,t,r){return this.easeTo(i.extend({bearing:n},t),r)},t.prototype.resetNorth=function(n,t){return this.rotateTo(0,i.extend({duration:1e3},n),t),this},t.prototype.snapToNorth=function(n,t){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(n,t):this},t.prototype.getPitch=function(){return this.transform.pitch},t.prototype.setPitch=function(n,t){return this.jumpTo({pitch:n},t),this},t.prototype.fitBounds=function(n,t,r){var e;if((t=i.extend({padding:{top:0,bottom:0,right:0,left:0},offset:[0,0],maxZoom:this.transform.maxZoom},t),"number"==typeof t.padding)&&(e=t.padding,t.padding={top:e,bottom:e,right:e,left:e}),!i.deepEqual(Object.keys(t.padding).sort(function(n,t){return n<t?-1:n>t?1:0}),["bottom","left","right","top"]))return void i.warnOnce("options.padding must be a positive number, or an Object with keys 'bottom', 'left', 'right', 'top'");n=o.convert(n);var s=[t.padding.left-t.padding.right,t.padding.top-t.padding.bottom],p=Math.min(t.padding.right,t.padding.left),w=Math.min(t.padding.top,t.padding.bottom);t.offset=[t.offset[0]+s[0],t.offset[1]+s[1]];var h=f.convert(t.offset),u=this.transform,c=u.project(n.getNorthWest()),l=u.project(n.getSouthEast()),a=l.sub(c),v=(u.width-2*p-2*Math.abs(h.x))/a.x,y=(u.height-2*w-2*Math.abs(h.y))/a.y;return y<0||v<0?void i.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset."):(t.center=u.unproject(c.add(l).div(2)),t.zoom=Math.min(u.scaleZoom(u.scale*Math.min(v,y)),t.maxZoom),t.bearing=0,t.linear?this.easeTo(t,r):this.flyTo(t,r))},t.prototype.jumpTo=function(n,t){this.stop();var i=this.transform,r=!1,f=!1,e=!1;return"zoom"in n&&i.zoom!==+n.zoom&&(r=!0,i.zoom=+n.zoom),"center"in n&&(i.center=u.convert(n.center)),"bearing"in n&&i.bearing!==+n.bearing&&(f=!0,i.bearing=+n.bearing),"pitch"in n&&i.pitch!==+n.pitch&&(e=!0,i.pitch=+n.pitch),this.fire("movestart",t).fire("move",t),r&&this.fire("zoomstart",t).fire("zoom",t).fire("zoomend",t),f&&this.fire("rotate",t),e&&this.fire("pitch",t),this.fire("moveend",t)},t.prototype.easeTo=function(n,t){var h=this,v;this.stop();n=i.extend({offset:[0,0],duration:500,easing:i.ease},n);var o,s,e=this.transform,y=f.convert(n.offset),l=this.getZoom(),c=this.getBearing(),a=this.getPitch(),p="zoom"in n?+n.zoom:l,w="bearing"in n?this._normalizeBearing(n.bearing,c):c,b="pitch"in n?+n.pitch:a;return"center"in n?(o=u.convert(n.center),s=e.centerPoint.add(y)):"around"in n?(o=u.convert(n.around),s=e.locationPoint(o)):(s=e.centerPoint.add(y),o=e.pointLocation(s)),v=e.locationPoint(o),n.animate===!1&&(n.duration=0),this.zooming=p!==l,this.rotating=c!==w,this.pitching=b!==a,n.smoothEasing&&0!==n.duration&&(n.easing=this._smoothOutEasing(n.duration)),n.noMoveStart||(this.moving=!0,this.fire("movestart",t)),this.zooming&&this.fire("zoomstart",t),clearTimeout(this._onEaseEnd),this._ease(function(n){this.zooming&&(e.zoom=r(l,p,n));this.rotating&&(e.bearing=r(c,w,n));this.pitching&&(e.pitch=r(a,b,n));e.setLocationAtPoint(o,v.add(s.sub(v)._mult(n)));this.fire("move",t);this.zooming&&this.fire("zoom",t);this.rotating&&this.fire("rotate",t);this.pitching&&this.fire("pitch",t)},function(){n.delayEndEvents?h._onEaseEnd=setTimeout(h._easeToEnd.bind(h,t),n.delayEndEvents):h._easeToEnd(t)},n),this},t.prototype._easeToEnd=function(n){var t=this.zooming;this.moving=!1;this.zooming=!1;this.rotating=!1;this.pitching=!1;t&&this.fire("zoomend",n);this.fire("moveend",n)},t.prototype.flyTo=function(n,t){function g(n){var t=(c*c-s*s+(n?-1:1)*b*b*l*l)/(2*(n?c:s)*b*l);return Math.log(Math.sqrt(t*t+1)-t)}function nt(n){return(Math.exp(n)-Math.exp(-n))/2}function y(n){return(Math.exp(n)+Math.exp(-n))/2}function at(n){return nt(n)/y(n)}var et,ot,ct,lt;this.stop();n=i.extend({offset:[0,0],speed:1.2,curve:1.42,easing:i.ease},n);var e=this.transform,vt=f.convert(n.offset),v=this.getZoom(),p=this.getBearing(),k=this.getPitch(),h="center"in n?u.convert(n.center):this.getCenter(),tt="zoom"in n?+n.zoom:v,it="bearing"in n?this._normalizeBearing(n.bearing,p):p,rt="pitch"in n?+n.pitch:k;Math.abs(e.center.lng)+Math.abs(h.lng)>180&&(e.center.lng>0&&h.lng<0?h.lng+=360:e.center.lng<0&&h.lng>0&&(h.lng-=360));var ut=e.zoomScale(tt-v),w=e.point,ft="center"in n?e.project(h).sub(vt.div(ut)):w,o=n.curve,s=Math.max(e.width,e.height),c=s/ut,l=ft.sub(w).mag();"minZoom"in n&&(et=i.clamp(Math.min(n.minZoom,v,tt),e.minZoom,e.maxZoom),ot=s/e.zoomScale(et-v),o=Math.sqrt(ot/l*2));var b=o*o,a=g(0),st=function(n){return y(a)/y(a+o*n)},ht=function(n){return s*((y(a)*at(a+o*n)-nt(a))/b)/l},d=(g(1)-a)/o;if(Math.abs(l)<1e-6){if(Math.abs(s-c)<1e-6)return this.easeTo(n,t);ct=c<s?-1:1;d=Math.abs(Math.log(c/s))/o;ht=function(){return 0};st=function(n){return Math.exp(ct*o*n)}}return"duration"in n?n.duration=+n.duration:(lt="screenSpeed"in n?+n.screenSpeed/o:+n.speed,n.duration=1e3*d/lt),this.moving=!0,this.zooming=!0,p!==it&&(this.rotating=!0),k!==rt&&(this.pitching=!0),this.fire("movestart",t),this.fire("zoomstart",t),this._ease(function(n){var i=n*d,f=ht(i),u=1/st(i);e.zoom=v+e.scaleZoom(u);e.center=e.unproject(w.add(ft.sub(w).mult(f)).mult(u));this.rotating&&(e.bearing=r(p,it,n));this.pitching&&(e.pitch=r(k,rt,n));this.fire("move",t);this.fire("zoom",t);this.rotating&&this.fire("rotate",t);this.pitching&&this.fire("pitch",t)},function(){this.moving=!1;this.zooming=!1;this.rotating=!1;this.pitching=!1;this.fire("zoomend",t);this.fire("moveend",t)},n),this},t.prototype.isEasing=function(){return!!this._abortFn},t.prototype.isMoving=function(){return this.moving},t.prototype.stop=function(){return this._abortFn&&(this._abortFn(),this._finishEase()),this},t.prototype._ease=function(n,t,i){this._finishFn=t;this._abortFn=e.timed(function(t){n.call(this,i.easing(t));1===t&&this._finishEase()},i.animate===!1?0:i.duration,this)},t.prototype._finishEase=function(){delete this._abortFn;var n=this._finishFn;delete this._finishFn;n.call(this)},t.prototype._normalizeBearing=function(n,t){n=i.wrap(n,-180,180);var r=Math.abs(n-t);return Math.abs(n-360-t)<r&&(n-=360),Math.abs(n+360-t)<r&&(n+=360),n},t.prototype._smoothOutEasing=function(n){var r=i.ease;if(this._prevEase){var t=this._prevEase,f=(Date.now()-t.start)/t.duration,e=t.easing(f+.01)-t.easing(f),u=.27/Math.sqrt(e*e+.0001)*.01,o=Math.sqrt(.0729-u*u);r=i.bezier(u,o,.25,1)}return this._prevEase={start:(new Date).getTime(),duration:n,easing:r},r},t}(s);t.exports=h},{"../geo/lng_lat":62,"../geo/lng_lat_bounds":63,"../util/browser":192,"../util/evented":200,"../util/interpolate":204,"../util/util":212,"point-geometry":26}],173:[function(n,t){"use strict";var r=n("../../util/dom"),u=n("../../util/util"),i=function(n){this.options=n;u.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};i.prototype.getDefaultPosition=function(){return"bottom-right"};i.prototype.onAdd=function(n){var t=this.options&&this.options.compact;return this._map=n,this._container=r.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),t&&this._container.classList.add("compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===t&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container};i.prototype.onRemove=function(){this._container.parentNode.removeChild(this._container);this._map.off("sourcedata",this._updateData);this._map.off("moveend",this._updateEditLink);this._map.off("resize",this._updateCompact);this._map=void 0};i.prototype._updateEditLink=function(){if(this._editLink||(this._editLink=this._container.querySelector(".mapbox-improve-map")),this._editLink){var n=this._map.getCenter();this._editLink.href="https://www.mapbox.com/map-feedback/#/"+n.lng+"/"+n.lat+"/"+Math.round(this._map.getZoom()+1)}};i.prototype._updateData=function(n){this._updateAttributions(n);this._updateEditLink()};i.prototype._updateAttributions=function(n){var t,r,u,i;if(this._map.style&&(!n||"metadata"===n.sourceDataType)){t=[];r=this._map.style.sourceCaches;for(u in r)i=r[u].getSource(),i.attribution&&t.indexOf(i.attribution)<0&&t.push(i.attribution);t.sort(function(n,t){return n.length-t.length});t=t.filter(function(n,i){for(var r=i+1;r<t.length;r++)if(t[r].indexOf(n)>=0)return!1;return!0});this._container.innerHTML=t.join(" | ");this._editLink=null}};i.prototype._updateCompact=function(){var n=this._map.getCanvasContainer().offsetWidth<=640;this._container.classList[n?"add":"remove"]("compact")};t.exports=i},{"../../util/dom":199,"../../util/util":212}],174:[function(n,t){"use strict";var u=n("../../util/dom"),f=n("../../util/util"),i=n("../../util/window"),r=function(){this._fullscreen=!1;f.bindAll(["_onClickFullscreen","_changeIcon"],this);"onfullscreenchange"in i.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in i.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in i.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in i.document&&(this._fullscreenchange="MSFullscreenChange")};r.prototype.onAdd=function(n){var t="mapboxgl-ctrl",f=this._container=u.create("div",t+" mapboxgl-ctrl-group"),r=this._fullscreenButton=u.create("button",t+"-icon "+t+"-fullscreen",this._container);return r.setAttribute("aria-label","Toggle fullscreen"),r.type="button",this._fullscreenButton.addEventListener("click",this._onClickFullscreen),this._mapContainer=n.getContainer(),i.document.addEventListener(this._fullscreenchange,this._changeIcon),f};r.prototype.onRemove=function(){this._container.parentNode.removeChild(this._container);this._map=null;i.document.removeEventListener(this._fullscreenchange,this._changeIcon)};r.prototype._isFullscreen=function(){return this._fullscreen};r.prototype._changeIcon=function(n){if(n.target===this._mapContainer){this._fullscreen=!this._fullscreen;var t="mapboxgl-ctrl";this._fullscreenButton.classList.toggle(t+"-shrink");this._fullscreenButton.classList.toggle(t+"-fullscreen")}};r.prototype._onClickFullscreen=function(){this._isFullscreen()?i.document.exitFullscreen?i.document.exitFullscreen():i.document.mozCancelFullScreen?i.document.mozCancelFullScreen():i.document.msExitFullscreen?i.document.msExitFullscreen():i.document.webkitCancelFullScreen&&i.document.webkitCancelFullScreen():this._mapContainer.requestFullscreen?this._mapContainer.requestFullscreen():this._mapContainer.mozRequestFullScreen?this._mapContainer.mozRequestFullScreen():this._mapContainer.msRequestFullscreen?this._mapContainer.msRequestFullscreen():this._mapContainer.webkitRequestFullscreen&&this._mapContainer.webkitRequestFullscreen()};t.exports=r},{"../../util/dom":199,"../../util/util":212,"../../util/window":194}],175:[function(n,t){"use strict";function o(n){void 0!==r?n(r):void 0!==i.navigator.permissions?i.navigator.permissions.query({name:"geolocation"}).then(function(t){r="denied"!==t.state;n(r)}):(r=!!i.navigator.geolocation,n(r))}var s=n("../../util/evented"),f=n("../../util/dom"),i=n("../../util/window"),e=n("../../util/util"),h={enableHighAccuracy:!1,timeout:6e3},u="mapboxgl-ctrl",r,c=function(n){function t(t){n.call(this);this.options=t||{};e.bindAll(["_onSuccess","_onError","_finish","_setupUI"],this)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.onAdd=function(n){return this._map=n,this._container=f.create("div",u+" "+u+"-group"),o(this._setupUI),this._container},t.prototype.onRemove=function(){this._container.parentNode.removeChild(this._container);this._map=void 0},t.prototype._onSuccess=function(n){this._map.jumpTo({center:[n.coords.longitude,n.coords.latitude],zoom:17,bearing:0,pitch:0});this.fire("geolocate",n);this._finish()},t.prototype._onError=function(n){this.fire("error",n);this._finish()},t.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId);this._timeoutId=void 0},t.prototype._setupUI=function(n){n!==!1&&(this._container.addEventListener("contextmenu",function(n){return n.preventDefault()}),this._geolocateButton=f.create("button",u+"-icon "+u+"-geolocate",this._container),this._geolocateButton.type="button",this._geolocateButton.setAttribute("aria-label","Geolocate"),this.options.watchPosition&&this._geolocateButton.setAttribute("aria-pressed",!1),this._geolocateButton.addEventListener("click",this._onClickGeolocate.bind(this)))},t.prototype._onClickGeolocate=function(){var n=e.extend(h,this.options&&this.options.positionOptions||{});this.options.watchPosition?void 0!==this._geolocationWatchID?(this._geolocateButton.classList.remove("watching"),this._geolocateButton.setAttribute("aria-pressed",!1),i.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0):(this._geolocateButton.classList.add("watching"),this._geolocateButton.setAttribute("aria-pressed",!0),this._geolocationWatchID=i.navigator.geolocation.watchPosition(this._onSuccess,this._onError,n)):(i.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,n),this._timeoutId=setTimeout(this._finish,1e4))},t}(s);t.exports=c},{"../../util/dom":199,"../../util/evented":200,"../../util/util":212,"../../util/window":194}],176:[function(n,t){"use strict";var r=n("../../util/dom"),u=n("../../util/util"),i=function(){u.bindAll(["_updateLogo"],this)};i.prototype.onAdd=function(n){return this._map=n,this._container=r.create("div","mapboxgl-ctrl"),this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._container};i.prototype.onRemove=function(){this._container.parentNode.removeChild(this._container);this._map.off("sourcedata",this._updateLogo)};i.prototype.getDefaultPosition=function(){return"bottom-left"};i.prototype._updateLogo=function(n){if(n&&"metadata"===n.sourceDataType)if(!this._container.childNodes.length&&this._logoRequired()){var t=r.create("a","mapboxgl-ctrl-logo");t.target="_blank";t.href="https://www.mapbox.com/";t.setAttribute("aria-label","Mapbox logo");this._container.appendChild(t);this._map.off("data",this._updateLogo)}else this._container.childNodes.length&&!this._logoRequired()&&this.onRemove()};i.prototype._logoRequired=function(){var n,t,i;if(this._map.style){n=this._map.style.sourceCaches;for(t in n)if(i=n[t].getSource(),i.mapbox_logo)return!0;return!1}};t.exports=i},{"../../util/dom":199,"../../util/util":212}],177:[function(n,t){"use strict";function e(n){return new f.MouseEvent(n.type,{button:2,buttons:2,bubbles:!0,cancelable:!0,detail:n.detail,view:n.view,screenX:n.screenX,screenY:n.screenY,clientX:n.clientX,clientY:n.clientY,movementX:n.movementX,movementY:n.movementY,ctrlKey:n.ctrlKey,shiftKey:n.shiftKey,altKey:n.altKey,metaKey:n.metaKey})}var u=n("../../util/dom"),f=n("../../util/window"),o=n("../../util/util"),i="mapboxgl-ctrl",r=function(){o.bindAll(["_rotateCompassArrow"],this)};r.prototype._rotateCompassArrow=function(){var n="rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassArrow.style.transform=n};r.prototype.onAdd=function(n){return this._map=n,this._container=u.create("div",i+" "+i+"-group",n.getContainer()),this._container.addEventListener("contextmenu",this._onContextMenu.bind(this)),this._zoomInButton=this._createButton(i+"-icon "+i+"-zoom-in","Zoom In",n.zoomIn.bind(n)),this._zoomOutButton=this._createButton(i+"-icon "+i+"-zoom-out","Zoom Out",n.zoomOut.bind(n)),this._compass=this._createButton(i+"-icon "+i+"-compass","Reset North",n.resetNorth.bind(n)),this._compassArrow=u.create("span",i+"-compass-arrow",this._compass),this._compass.addEventListener("mousedown",this._onCompassDown.bind(this)),this._onCompassMove=this._onCompassMove.bind(this),this._onCompassUp=this._onCompassUp.bind(this),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._container};r.prototype.onRemove=function(){this._container.parentNode.removeChild(this._container);this._map.off("rotate",this._rotateCompassArrow);this._map=void 0};r.prototype._onContextMenu=function(n){n.preventDefault()};r.prototype._onCompassDown=function(n){0===n.button&&(u.disableDrag(),f.document.addEventListener("mousemove",this._onCompassMove),f.document.addEventListener("mouseup",this._onCompassUp),this._map.getCanvasContainer().dispatchEvent(e(n)),n.stopPropagation())};r.prototype._onCompassMove=function(n){0===n.button&&(this._map.getCanvasContainer().dispatchEvent(e(n)),n.stopPropagation())};r.prototype._onCompassUp=function(n){0===n.button&&(f.document.removeEventListener("mousemove",this._onCompassMove),f.document.removeEventListener("mouseup",this._onCompassUp),u.enableDrag(),this._map.getCanvasContainer().dispatchEvent(e(n)),n.stopPropagation())};r.prototype._createButton=function(n,t,i){var r=u.create("button",n,this._container);return r.type="button",r.setAttribute("aria-label",t),r.addEventListener("click",function(){i()}),r};t.exports=r},{"../../util/dom":199,"../../util/util":212,"../../util/window":194}],178:[function(n,t){"use strict";function u(n,t,i){var u=i&&i.maxWidth||100,o=n._container.clientHeight/2,s=f(n.unproject([0,o]),n.unproject([u,o])),e,h;i&&"imperial"===i.unit?(e=3.2808*s,e>5280?(h=e/5280,r(t,u,h,"mi")):r(t,u,e,"ft")):r(t,u,s,"m")}function r(n,t,i,r){var u=e(i),f=u/i;"m"===r&&u>=1e3&&(u/=1e3,r="km");n.style.width=t*f+"px";n.innerHTML=u+r}function f(n,t){var i=Math.PI/180,r=n.lat*i,u=t.lat*i,f=Math.sin(r)*Math.sin(u)+Math.cos(r)*Math.cos(u)*Math.cos((t.lng-n.lng)*i);return 6371e3*Math.acos(Math.min(f,1))}function e(n){var i=Math.pow(10,(""+Math.floor(n)).length-1),t=n/i;return t=t>=10?10:t>=5?5:t>=3?3:t>=2?2:1,i*t}var o=n("../../util/dom"),s=n("../../util/util"),i=function(n){this.options=n;s.bindAll(["_onMove"],this)};i.prototype.getDefaultPosition=function(){return"bottom-left"};i.prototype._onMove=function(){u(this._map,this._container,this.options)};i.prototype.onAdd=function(n){return this._map=n,this._container=o.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",n.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container};i.prototype.onRemove=function(){this._container.parentNode.removeChild(this._container);this._map.off("move",this._onMove);this._map=void 0};t.exports=i},{"../../util/dom":199,"../../util/util":212}],179:[function(n,t){"use strict";var r=n("../../util/dom"),f=n("../../geo/lng_lat_bounds"),e=n("../../util/util"),u=n("../../util/window"),i=function(n){this._map=n;this._el=n.getCanvasContainer();this._container=n.getContainer();e.bindAll(["_onMouseDown","_onMouseMove","_onMouseUp","_onKeyDown"],this)};i.prototype.isEnabled=function(){return!!this._enabled};i.prototype.isActive=function(){return!!this._active};i.prototype.enable=function(){this.isEnabled()||(this._el.addEventListener("mousedown",this._onMouseDown,!1),this._enabled=!0)};i.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("mousedown",this._onMouseDown),this._enabled=!1)};i.prototype._onMouseDown=function(n){n.shiftKey&&0===n.button&&(u.document.addEventListener("mousemove",this._onMouseMove,!1),u.document.addEventListener("keydown",this._onKeyDown,!1),u.document.addEventListener("mouseup",this._onMouseUp,!1),r.disableDrag(),this._startPos=r.mousePos(this._el,n),this._active=!0)};i.prototype._onMouseMove=function(n){var t=this._startPos,i=r.mousePos(this._el,n);this._box||(this._box=r.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",n));var u=Math.min(t.x,i.x),e=Math.max(t.x,i.x),f=Math.min(t.y,i.y),o=Math.max(t.y,i.y);r.setTransform(this._box,"translate("+u+"px,"+f+"px)");this._box.style.width=e-u+"px";this._box.style.height=o-f+"px"};i.prototype._onMouseUp=function(n){if(0===n.button){var t=this._startPos,i=r.mousePos(this._el,n),u=(new f).extend(this._map.unproject(t)).extend(this._map.unproject(i));this._finish();t.x===i.x&&t.y===i.y?this._fireEvent("boxzoomcancel",n):this._map.fitBounds(u,{linear:!0}).fire("boxzoomend",{originalEvent:n,boxZoomBounds:u})}};i.prototype._onKeyDown=function(n){27===n.keyCode&&(this._finish(),this._fireEvent("boxzoomcancel",n))};i.prototype._finish=function(){this._active=!1;u.document.removeEventListener("mousemove",this._onMouseMove,!1);u.document.removeEventListener("keydown",this._onKeyDown,!1);u.document.removeEventListener("mouseup",this._onMouseUp,!1);this._container.classList.remove("mapboxgl-crosshair");this._box&&(this._box.parentNode.removeChild(this._box),this._box=null);r.enableDrag()};i.prototype._fireEvent=function(n,t){return this._map.fire(n,{originalEvent:t})};t.exports=i},{"../../geo/lng_lat_bounds":63,"../../util/dom":199,"../../util/util":212,"../../util/window":194}],180:[function(n,t){"use strict";var i=function(n){this._map=n;this._onDblClick=this._onDblClick.bind(this)};i.prototype.isEnabled=function(){return!!this._enabled};i.prototype.enable=function(){this.isEnabled()||(this._map.on("dblclick",this._onDblClick),this._enabled=!0)};i.prototype.disable=function(){this.isEnabled()&&(this._map.off("dblclick",this._onDblClick),this._enabled=!1)};i.prototype._onDblClick=function(n){this._map.zoomTo(this._map.getZoom()+(n.originalEvent.shiftKey?-1:1),{around:n.lngLat},n)};t.exports=i},{}],181:[function(n,t){"use strict";var f=n("../../util/dom"),e=n("../../util/util"),r=n("../../util/window"),u=.3,s=e.bezier(0,0,u,1),o=1400,h=2500,i=function(n){this._map=n;this._el=n.getCanvasContainer();e.bindAll(["_onDown","_onMove","_onUp","_onTouchEnd","_onMouseUp"],this)};i.prototype.isEnabled=function(){return!!this._enabled};i.prototype.isActive=function(){return!!this._active};i.prototype.enable=function(){this.isEnabled()||(this._el.addEventListener("mousedown",this._onDown),this._el.addEventListener("touchstart",this._onDown),this._enabled=!0)};i.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("mousedown",this._onDown),this._el.removeEventListener("touchstart",this._onDown),this._enabled=!1)};i.prototype._onDown=function(n){this._ignoreEvent(n)||this.isActive()||(n.touches?(r.document.addEventListener("touchmove",this._onMove),r.document.addEventListener("touchend",this._onTouchEnd)):(r.document.addEventListener("mousemove",this._onMove),r.document.addEventListener("mouseup",this._onMouseUp)),r.addEventListener("blur",this._onMouseUp),this._active=!1,this._startPos=this._pos=f.mousePos(this._el,n),this._inertia=[[Date.now(),this._pos]])};i.prototype._onMove=function(n){if(!this._ignoreEvent(n)){this.isActive()||(this._active=!0,this._map.moving=!0,this._fireEvent("dragstart",n),this._fireEvent("movestart",n));var t=f.mousePos(this._el,n),i=this._map;i.stop();this._drainInertiaBuffer();this._inertia.push([Date.now(),t]);i.transform.setLocationAtPoint(i.transform.pointLocation(this._pos),t);this._fireEvent("drag",n);this._fireEvent("move",n);this._pos=t;n.preventDefault()}};i.prototype._onUp=function(n){var a=this,f,t,r,i,l,y;if(this.isActive()){if(this._active=!1,this._fireEvent("dragend",n),this._drainInertiaBuffer(),f=function(){a._map.moving=!1;a._fireEvent("moveend",n)},t=this._inertia,t.length<2)return void f();var e=t[t.length-1],c=t[0],p=e[1].sub(c[1]),v=(e[0]-c[0])/1e3;if(0===v||e[1].equals(c[1]))return void f();r=p.mult(u/v);i=r.mag();i>o&&(i=o,r._unit()._mult(i));l=i/(h*u);y=r.mult(-l/2);this._map.panBy(y,{duration:1e3*l,easing:s,noMoveStart:!0},{originalEvent:n})}};i.prototype._onMouseUp=function(n){this._ignoreEvent(n)||(this._onUp(n),r.document.removeEventListener("mousemove",this._onMove),r.document.removeEventListener("mouseup",this._onMouseUp),r.removeEventListener("blur",this._onMouseUp))};i.prototype._onTouchEnd=function(n){this._ignoreEvent(n)||(this._onUp(n),r.document.removeEventListener("touchmove",this._onMove),r.document.removeEventListener("touchend",this._onTouchEnd))};i.prototype._fireEvent=function(n,t){return this._map.fire(n,{originalEvent:t})};i.prototype._ignoreEvent=function(n){var t=this._map,i,r;return t.boxZoom&&t.boxZoom.isActive()?!0:t.dragRotate&&t.dragRotate.isActive()?!0:n.touches?n.touches.length>1:n.ctrlKey?!0:(i=1,r=0,"mousemove"===n.type?n.buttons&0===i:n.button&&n.button!==r)};i.prototype._drainInertiaBuffer=function(){for(var n=this._inertia,t=Date.now();n.length>0&&t-n[0][0]>160;)n.shift()};t.exports=i},{"../../util/dom":199,"../../util/util":212,"../../util/window":194}],182:[function(n,t){"use strict";var f=n("../../util/dom"),e=n("../../util/util"),r=n("../../util/window"),u=.25,s=e.bezier(0,0,u,1),o=180,h=720,i=function(n,t){this._map=n;this._el=n.getCanvasContainer();this._bearingSnap=t.bearingSnap;this._pitchWithRotate=t.pitchWithRotate!==!1;e.bindAll(["_onDown","_onMove","_onUp"],this)};i.prototype.isEnabled=function(){return!!this._enabled};i.prototype.isActive=function(){return!!this._active};i.prototype.enable=function(){this.isEnabled()||(this._el.addEventListener("mousedown",this._onDown),this._enabled=!0)};i.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("mousedown",this._onDown),this._enabled=!1)};i.prototype._onDown=function(n){this._ignoreEvent(n)||this.isActive()||(r.document.addEventListener("mousemove",this._onMove),r.document.addEventListener("mouseup",this._onUp),r.addEventListener("blur",this._onUp),this._active=!1,this._inertia=[[Date.now(),this._map.getBearing()]],this._startPos=this._pos=f.mousePos(this._el,n),this._center=this._map.transform.centerPoint,n.preventDefault())};i.prototype._onMove=function(n){var t;if(!this._ignoreEvent(n)){this.isActive()||(this._active=!0,this._map.moving=!0,this._fireEvent("rotatestart",n),this._fireEvent("movestart",n));t=this._map;t.stop();var u=this._pos,i=f.mousePos(this._el,n),o=.8*(u.x-i.x),s=(u.y-i.y)*-.5,e=t.getBearing()-o,h=t.getPitch()-s,r=this._inertia,c=r[r.length-1];this._drainInertiaBuffer();r.push([Date.now(),t._normalizeBearing(e,c[1])]);t.transform.bearing=e;this._pitchWithRotate&&(t.transform.pitch=h);this._fireEvent("rotate",n);this._fireEvent("move",n);this._pos=i}};i.prototype._onUp=function(n){var c=this,e,a,k;if(!this._ignoreEvent(n)&&(r.document.removeEventListener("mousemove",this._onMove),r.document.removeEventListener("mouseup",this._onUp),r.removeEventListener("blur",this._onUp),this.isActive())){this._active=!1;this._fireEvent("rotateend",n);this._drainInertiaBuffer();var t=this._map,v=t.getBearing(),i=this._inertia,y=function(){Math.abs(v)<c._bearingSnap?t.resetNorth({noMoveStart:!0},{originalEvent:n}):(c._map.moving=!1,c._fireEvent("moveend",n))};if(i.length<2)return void y();var p=i[0],w=i[i.length-1],d=i[i.length-2],f=t._normalizeBearing(v,d[1]),l=w[1]-p[1],g=l<0?-1:1,b=(w[0]-p[0])/1e3;if(0===l||0===b)return void y();e=Math.abs(l*(u/b));e>o&&(e=o);a=e/(h*u);k=g*e*(a/2);f+=k;Math.abs(t._normalizeBearing(f,0))<this._bearingSnap&&(f=t._normalizeBearing(0,f));t.rotateTo(f,{duration:1e3*a,easing:s,noMoveStart:!0},{originalEvent:n})}};i.prototype._fireEvent=function(n,t){return this._map.fire(n,{originalEvent:t})};i.prototype._ignoreEvent=function(n){var t=this._map;if(t.boxZoom&&t.boxZoom.isActive()||t.dragPan&&t.dragPan.isActive())return!0;if(n.touches)return n.touches.length>1;var u=n.ctrlKey?1:2,f=n.ctrlKey?0:2,i=n.button;return"undefined"!=typeof InstallTrigger&&2===n.button&&n.ctrlKey&&r.navigator.platform.toUpperCase().indexOf("MAC")>=0&&(i=0),"mousemove"===n.type?n.buttons&0===u:!this.isActive()&&i!==f};i.prototype._drainInertiaBuffer=function(){for(var n=this._inertia,t=Date.now();n.length>0&&t-n[0][0]>160;)n.shift()};t.exports=i},{"../../util/dom":199,"../../util/util":212,"../../util/window":194}],183:[function(n,t){"use strict";function u(n){return n*(2-n)}var r=100,f=15,e=10,i=function(n){this._map=n;this._el=n.getCanvasContainer();this._onKeyDown=this._onKeyDown.bind(this)};i.prototype.isEnabled=function(){return!!this._enabled};i.prototype.enable=function(){this.isEnabled()||(this._el.addEventListener("keydown",this._onKeyDown,!1),this._enabled=!0)};i.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("keydown",this._onKeyDown),this._enabled=!1)};i.prototype._onKeyDown=function(n){if(!(n.altKey||n.ctrlKey||n.metaKey)){var i=0,o=0,s=0,h=0,c=0;switch(n.keyCode){case 61:case 107:case 171:case 187:i=1;break;case 189:case 109:case 173:i=-1;break;case 37:n.shiftKey?o=-1:(n.preventDefault(),h=-1);break;case 39:n.shiftKey?o=1:(n.preventDefault(),h=1);break;case 38:n.shiftKey?s=1:(n.preventDefault(),c=-1);break;case 40:n.shiftKey?s=-1:(c=1,n.preventDefault())}var t=this._map,l=t.getZoom(),a={duration:300,delayEndEvents:500,easing:u,zoom:i?Math.round(l)+i*(n.shiftKey?2:1):l,bearing:t.getBearing()+o*f,pitch:t.getPitch()+s*e,offset:[-h*r,-c*r],center:t.getCenter()};t.easeTo(a,{originalEvent:n})}};t.exports=i},{}],184:[function(n,t){"use strict";var e=n("../../util/dom"),o=n("../../util/util"),f=n("../../util/browser"),r=n("../../util/window"),u=r.navigator.userAgent.toLowerCase(),s=u.indexOf("firefox")!==-1,h=u.indexOf("safari")!==-1&&u.indexOf("chrom")===-1,i=function(n){this._map=n;this._el=n.getCanvasContainer();o.bindAll(["_onWheel","_onTimeout"],this)};i.prototype.isEnabled=function(){return!!this._enabled};i.prototype.enable=function(n){this.isEnabled()||(this._el.addEventListener("wheel",this._onWheel,!1),this._el.addEventListener("mousewheel",this._onWheel,!1),this._enabled=!0,this._aroundCenter=n&&"center"===n.around)};i.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("wheel",this._onWheel),this._el.removeEventListener("mousewheel",this._onWheel),this._enabled=!1)};i.prototype._onWheel=function(n){var t,i,u;"wheel"===n.type?(t=n.deltaY,s&&n.deltaMode===r.WheelEvent.DOM_DELTA_PIXEL&&(t/=f.devicePixelRatio),n.deltaMode===r.WheelEvent.DOM_DELTA_LINE&&(t*=40)):"mousewheel"===n.type&&(t=-n.wheelDeltaY,h&&(t/=3));i=f.now();u=i-(this._time||0);this._pos=e.mousePos(this._el,n);this._time=i;0!==t&&t%4.000244140625==0?this._type="wheel":0!==t&&Math.abs(t)<4?this._type="trackpad":u>400?(this._type=null,this._lastValue=t,this._timeout=setTimeout(this._onTimeout,40)):this._type||(this._type=Math.abs(u*t)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,t+=this._lastValue));n.shiftKey&&t&&(t/=4);this._type&&this._zoom(-t,n);n.preventDefault()};i.prototype._onTimeout=function(){this._type="wheel";this._zoom(-this._lastValue)};i.prototype._zoom=function(n,t){var i,r,u,f;0!==n&&(i=this._map,r=2/(1+Math.exp(-Math.abs(n/100))),n<0&&0!==r&&(r=1/r),u=i.ease?i.ease.to:i.transform.scale,f=i.transform.scaleZoom(u*r),i.zoomTo(f,{duration:"wheel"===this._type?200:0,around:this._aroundCenter?i.getCenter():i.unproject(this._pos),delayEndEvents:200,smoothEasing:!0},{originalEvent:t}))};t.exports=i},{"../../util/browser":192,"../../util/dom":199,"../../util/util":212,"../../util/window":194}],185:[function(n,t){"use strict";var r=n("../../util/dom"),o=n("../../util/util"),u=n("../../util/window"),f=.15,s=o.bezier(0,0,f,1),h=12,e=2.5,c=.15,l=4,i=function(n){this._map=n;this._el=n.getCanvasContainer();o.bindAll(["_onStart","_onMove","_onEnd"],this)};i.prototype.isEnabled=function(){return!!this._enabled};i.prototype.enable=function(n){this.isEnabled()||(this._el.addEventListener("touchstart",this._onStart,!1),this._enabled=!0,this._aroundCenter=n&&"center"===n.around)};i.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("touchstart",this._onStart),this._enabled=!1)};i.prototype.disableRotation=function(){this._rotationDisabled=!0};i.prototype.enableRotation=function(){this._rotationDisabled=!1};i.prototype._onStart=function(n){if(2===n.touches.length){var t=r.mousePos(this._el,n.touches[0]),i=r.mousePos(this._el,n.touches[1]);this._startVec=t.sub(i);this._startScale=this._map.transform.scale;this._startBearing=this._map.transform.bearing;this._gestureIntent=void 0;this._inertia=[];u.document.addEventListener("touchmove",this._onMove,!1);u.document.addEventListener("touchend",this._onEnd,!1)}};i.prototype._onMove=function(n){var i,a,v;if(2===n.touches.length){var e=r.mousePos(this._el,n.touches[0]),o=r.mousePos(this._el,n.touches[1]),s=e.add(o).div(2),u=e.sub(o),f=u.mag()/this._startVec.mag(),h=this._rotationDisabled?0:180*u.angleWith(this._startVec)/Math.PI,t=this._map;this._gestureIntent?(i={duration:0,around:t.unproject(s)},"rotate"===this._gestureIntent&&(i.bearing=this._startBearing+h),"zoom"!==this._gestureIntent&&"rotate"!==this._gestureIntent||(i.zoom=t.transform.scaleZoom(this._startScale*f)),t.stop(),this._drainInertiaBuffer(),this._inertia.push([Date.now(),f,s]),t.easeTo(i,{originalEvent:n})):(a=Math.abs(1-f)>c,v=Math.abs(h)>l,v?this._gestureIntent="rotate":a&&(this._gestureIntent="zoom"),this._gestureIntent&&(this._startVec=u,this._startScale=t.transform.scale,this._startBearing=t.transform.bearing));n.preventDefault()}};i.prototype._onEnd=function(n){var r,t,i,a,o;if(u.document.removeEventListener("touchmove",this._onMove),u.document.removeEventListener("touchend",this._onEnd),this._drainInertiaBuffer(),r=this._inertia,t=this._map,r.length<2)return void t.snapToNorth({},{originalEvent:n});var c=r[r.length-1],v=r[0],l=t.transform.scaleZoom(this._startScale*c[1]),y=t.transform.scaleZoom(this._startScale*v[1]),w=l-y,p=(c[0]-v[0])/1e3,b=c[2];if(0===p||l===y)return void t.snapToNorth({},{originalEvent:n});i=w*f/p;Math.abs(i)>e&&(i=i>0?e:-e);a=1e3*Math.abs(i/(h*f));o=l+i*a/2e3;o<0&&(o=0);t.easeTo({zoom:o,duration:a,easing:s,around:this._aroundCenter?t.getCenter():t.unproject(b)},{originalEvent:n})};i.prototype._drainInertiaBuffer=function(){for(var n=this._inertia,t=Date.now();n.length>2&&t-n[0][0]>160;)n.shift()};t.exports=i},{"../../util/dom":199,"../../util/util":212,"../../util/window":194}],186:[function(n,t){"use strict";var u=n("../util/util"),r=n("../util/window"),i=function(){u.bindAll(["_onHashChange","_updateHash"],this)};i.prototype.addTo=function(n){return this._map=n,r.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this};i.prototype.remove=function(){return r.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),delete this._map,this};i.prototype._onHashChange=function(){var n=r.location.hash.replace("#","").split("/");return n.length>=3&&(this._map.jumpTo({center:[+n[2],+n[1]],zoom:+n[0],bearing:+(n[3]||0),pitch:+(n[4]||0)}),!0)};i.prototype._updateHash=function(){var i=this._map.getCenter(),u=this._map.getZoom(),f=this._map.getBearing(),n=this._map.getPitch(),e=Math.max(0,Math.ceil(Math.log(u)/Math.LN2)),t="#"+Math.round(100*u)/100+"/"+i.lat.toFixed(e)+"/"+i.lng.toFixed(e);(f||n)&&(t+="/"+Math.round(10*f)/10);n&&(t+="/"+Math.round(n));r.history.replaceState("","",t)};t.exports=i},{"../util/util":212,"../util/window":194}],187:[function(n,t){"use strict";function h(n){n.parentNode&&n.parentNode.removeChild(n)}var r=n("../util/util"),o=n("../util/browser"),u=n("../util/window"),f=n("../util/dom"),s=n("../style/style"),a=n("../style/animation_loop"),v=n("../render/painter"),y=n("../geo/transform"),p=n("./hash"),w=n("./bind_handlers"),b=n("./camera"),k=n("../geo/lng_lat"),c=n("../geo/lng_lat_bounds"),i=n("point-geometry"),d=n("./control/attribution_control"),g=n("./control/logo_control"),nt=n("mapbox-gl-supported"),e=0,l=22,tt={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:e,maxZoom:l,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,bearingSnap:7,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0},it=function(n){function t(t){var i=this,f;if(t=r.extend({},tt,t),null!=t.minZoom&&null!=t.maxZoom&&t.minZoom>t.maxZoom)throw new Error("maxZoom must be greater than minZoom");if(f=new y(t.minZoom,t.maxZoom,t.renderWorldCopies),n.call(this,f,t),this._interactive=t.interactive,this._failIfMajorPerformanceCaveat=t.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=t.preserveDrawingBuffer,this._trackResize=t.trackResize,this._bearingSnap=t.bearingSnap,this._refreshExpiredTiles=t.refreshExpiredTiles,"string"==typeof t.container){if(this._container=u.document.getElementById(t.container),!this._container)throw new Error("Container '"+t.container+"' not found.");}else this._container=t.container;this.animationLoop=new a;t.maxBounds&&this.setMaxBounds(t.maxBounds);r.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored","_update","_render","_onData","_onDataLoading"],this);this._setupContainer();this._setupPainter();this.on("move",this._update.bind(this,!1));this.on("zoom",this._update.bind(this,!0));this.on("moveend",function(){i.animationLoop.set(300);i._rerender()});"undefined"!=typeof u&&(u.addEventListener("online",this._onWindowOnline,!1),u.addEventListener("resize",this._onWindowResize,!1));w(this,t);this._hash=t.hash&&(new p).addTo(this);this._hash&&this._hash._onHashChange()||this.jumpTo({center:t.center,zoom:t.zoom,bearing:t.bearing,pitch:t.pitch});this._classes=[];this.resize();t.classes&&this.setClasses(t.classes);t.style&&this.setStyle(t.style);t.attributionControl&&this.addControl(new d);this.addControl(new g,t.logoPosition);this.on("style.load",function(){this.transform.unmodified&&this.jumpTo(this.style.stylesheet);this.style.update(this._classes,{transition:!1})});this.on("data",this._onData);this.on("dataloading",this._onDataLoading)}n&&(t.__proto__=n);t.prototype=Object.create(n&&n.prototype);t.prototype.constructor=t;var b={showTileBoundaries:{},showCollisionBoxes:{},showOverdrawInspector:{},repaint:{},vertices:{}};return t.prototype.addControl=function(n,t){void 0===t&&n.getDefaultPosition&&(t=n.getDefaultPosition());void 0===t&&(t="top-right");var r=n.onAdd(this),i=this._controlPositions[t];return t.indexOf("bottom")!==-1?i.insertBefore(r,i.firstChild):i.appendChild(r),this},t.prototype.removeControl=function(n){return n.onRemove(this),this},t.prototype.addClass=function(n,t){return r.warnOnce("Style classes are deprecated and will be removed in an upcoming release of Mapbox GL JS."),this._classes.indexOf(n)>=0||""===n?this:(this._classes.push(n),this._classOptions=t,this.style&&this.style.updateClasses(),this._update(!0))},t.prototype.removeClass=function(n,t){r.warnOnce("Style classes are deprecated and will be removed in an upcoming release of Mapbox GL JS.");var i=this._classes.indexOf(n);return i<0||""===n?this:(this._classes.splice(i,1),this._classOptions=t,this.style&&this.style.updateClasses(),this._update(!0))},t.prototype.setClasses=function(n,t){r.warnOnce("Style classes are deprecated and will be removed in an upcoming release of Mapbox GL JS.");for(var u={},i=0;i<n.length;i++)""!==n[i]&&(u[n[i]]=!0);return this._classes=Object.keys(u),this._classOptions=t,this.style&&this.style.updateClasses(),this._update(!0)},t.prototype.hasClass=function(n){return r.warnOnce("Style classes are deprecated and will be removed in an upcoming release of Mapbox GL JS."),this._classes.indexOf(n)>=0},t.prototype.getClasses=function(){return r.warnOnce("Style classes are deprecated and will be removed in an upcoming release of Mapbox GL JS."),this._classes},t.prototype.resize=function(){var i=this._containerDimensions(),n=i[0],t=i[1];return this._resizeCanvas(n,t),this.transform.resize(n,t),this.painter.resize(n,t),this.fire("movestart").fire("move").fire("resize").fire("moveend")},t.prototype.getBounds=function(){var n=new c(this.transform.pointLocation(new i(0,this.transform.height)),this.transform.pointLocation(new i(this.transform.width,0)));return(this.transform.angle||this.transform.pitch)&&(n.extend(this.transform.pointLocation(new i(this.transform.size.x,0))),n.extend(this.transform.pointLocation(new i(0,this.transform.size.y)))),n},t.prototype.setMaxBounds=function(n){if(n){var t=c.convert(n);this.transform.lngRange=[t.getWest(),t.getEast()];this.transform.latRange=[t.getSouth(),t.getNorth()];this.transform._constrain();this._update()}else null!==n&&void 0!==n||(this.transform.lngRange=[],this.transform.latRange=[],this._update());return this},t.prototype.setMinZoom=function(n){if(n=null===n||void 0===n?e:n,n>=e&&n<=this.transform.maxZoom)return this.transform.minZoom=n,this._update(),this.getZoom()<n&&this.setZoom(n),this;throw new Error("minZoom must be between "+e+" and the current maxZoom, inclusive");},t.prototype.getMinZoom=function(){return this.transform.minZoom},t.prototype.setMaxZoom=function(n){if(n=null===n||void 0===n?l:n,n>=this.transform.minZoom)return this.transform.maxZoom=n,this._update(),this.getZoom()>n&&this.setZoom(n),this;throw new Error("maxZoom must be greater than the current minZoom");},t.prototype.getMaxZoom=function(){return this.transform.maxZoom},t.prototype.project=function(n){return this.transform.locationPoint(k.convert(n))},t.prototype.unproject=function(n){return this.transform.pointLocation(i.convert(n))},t.prototype.queryRenderedFeatures=function(){function r(n){return n instanceof i||Array.isArray(n)}var n,t={};return 2===arguments.length?(n=arguments[0],t=arguments[1]):1===arguments.length&&r(arguments[0])?n=arguments[0]:1===arguments.length&&(t=arguments[0]),this.style.queryRenderedFeatures(this._makeQueryGeometry(n),t,this.transform.zoom,this.transform.angle)},t.prototype._makeQueryGeometry=function(n){var e=this,r,u,f,t;return void 0===n&&(n=[i.convert([0,0]),i.convert([this.transform.width,this.transform.height])]),u=n instanceof i||"number"==typeof n[0],u?(f=i.convert(n),r=[f]):(t=[i.convert(n[0]),i.convert(n[1])],r=[t[0],new i(t[1].x,t[0].y),t[1],new i(t[0].x,t[1].y),t[0]]),r.map(function(n){return e.transform.pointCoordinate(n)})},t.prototype.querySourceFeatures=function(n,t){return this.style.querySourceFeatures(n,t)},t.prototype.setStyle=function(n,t){var i=(!t||t.diff!==!1)&&this.style&&n&&!(n instanceof s)&&"string"!=typeof n;if(i)try{return this.style.setState(n)&&this._update(!0),this}catch(n){r.warnOnce("Unable to perform style diff: "+(n.message||n.error||n)+".  Rebuilding the style from scratch.")}return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.off("rotate",this.style._redoPlacement),this.off("pitch",this.style._redoPlacement)),n?(this.style=n instanceof s?n:new s(n,this),this.style.setEventedParent(this,{style:this.style}),this.on("rotate",this.style._redoPlacement),this.on("pitch",this.style._redoPlacement),this):(this.style=null,this)},t.prototype.getStyle=function(){if(this.style)return this.style.serialize()},t.prototype.addSource=function(n,t){return this.style.addSource(n,t),this._update(!0),this},t.prototype.isSourceLoaded=function(n){var t=this.style&&this.style.sourceCaches[n];return void 0===t?void this.fire("error",{error:new Error("There is no source with ID '"+n+"'")}):t.loaded()},t.prototype.addSourceType=function(n,t,i){return this.style.addSourceType(n,t,i)},t.prototype.removeSource=function(n){return this.style.removeSource(n),this._update(!0),this},t.prototype.getSource=function(n){return this.style.getSource(n)},t.prototype.addImage=function(n,t,i){this.style.spriteAtlas.addImage(n,t,i)},t.prototype.removeImage=function(n){this.style.spriteAtlas.removeImage(n)},t.prototype.addLayer=function(n,t){return this.style.addLayer(n,t),this._update(!0),this},t.prototype.moveLayer=function(n,t){return this.style.moveLayer(n,t),this._update(!0),this},t.prototype.removeLayer=function(n){return this.style.removeLayer(n),this._update(!0),this},t.prototype.getLayer=function(n){return this.style.getLayer(n)},t.prototype.setFilter=function(n,t){return this.style.setFilter(n,t),this._update(!0),this},t.prototype.setLayerZoomRange=function(n,t,i){return this.style.setLayerZoomRange(n,t,i),this._update(!0),this},t.prototype.getFilter=function(n){return this.style.getFilter(n)},t.prototype.setPaintProperty=function(n,t,i,r){return this.style.setPaintProperty(n,t,i,r),this._update(!0),this},t.prototype.getPaintProperty=function(n,t,i){return this.style.getPaintProperty(n,t,i)},t.prototype.setLayoutProperty=function(n,t,i){return this.style.setLayoutProperty(n,t,i),this._update(!0),this},t.prototype.getLayoutProperty=function(n,t){return this.style.getLayoutProperty(n,t)},t.prototype.setLight=function(n){return this.style.setLight(n),this._update(!0),this},t.prototype.getLight=function(){return this.style.getLight()},t.prototype.getContainer=function(){return this._container},t.prototype.getCanvasContainer=function(){return this._canvasContainer},t.prototype.getCanvas=function(){return this._canvas},t.prototype._containerDimensions=function(){var n=0,t=0;return this._container&&(n=this._container.offsetWidth||400,t=this._container.offsetHeight||300),[n,t]},t.prototype._setupContainer=function(){var n=this._container,t,i,r,u;n.classList.add("mapboxgl-map");t=this._canvasContainer=f.create("div","mapboxgl-canvas-container",n);this._interactive&&t.classList.add("mapboxgl-interactive");this._canvas=f.create("canvas","mapboxgl-canvas",t);this._canvas.style.position="absolute";this._canvas.addEventListener("webglcontextlost",this._contextLost,!1);this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1);this._canvas.setAttribute("tabindex",0);this._canvas.setAttribute("aria-label","Map");i=this._containerDimensions();this._resizeCanvas(i[0],i[1]);r=this._controlContainer=f.create("div","mapboxgl-control-container",n);u=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(n){u[n]=f.create("div","mapboxgl-ctrl-"+n,r)})},t.prototype._resizeCanvas=function(n,t){var i=u.devicePixelRatio||1;this._canvas.width=i*n;this._canvas.height=i*t;this._canvas.style.width=n+"px";this._canvas.style.height=t+"px"},t.prototype._setupPainter=function(){var n=r.extend({failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer},nt.webGLContextAttributes),t=this._canvas.getContext("webgl",n)||this._canvas.getContext("experimental-webgl",n);return t?void(this.painter=new v(t,this.transform)):void this.fire("error",{error:new Error("Failed to initialize WebGL")})},t.prototype._contextLost=function(n){n.preventDefault();this._frameId&&o.cancelFrame(this._frameId);this.fire("webglcontextlost",{originalEvent:n})},t.prototype._contextRestored=function(n){this._setupPainter();this.resize();this._update();this.fire("webglcontextrestored",{originalEvent:n})},t.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!(!this.style||!this.style.loaded())},t.prototype._update=function(n){return this.style?(this._styleDirty=this._styleDirty||n,this._sourcesDirty=!0,this._rerender(),this):this},t.prototype._render=function(){return this.style&&this._styleDirty&&(this._styleDirty=!1,this.style.update(this._classes,this._classOptions),this._classOptions=null,this.style._recalculate(this.transform.zoom)),this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.rotating,zooming:this.zooming}),this.fire("render"),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire("load")),this._frameId=null,this.animationLoop.stopped()||(this._styleDirty=!0),(this._sourcesDirty||this._repaint||this._styleDirty)&&this._rerender(),this},t.prototype.remove=function(){this._hash&&this._hash.remove();o.cancelFrame(this._frameId);this.setStyle(null);"undefined"!=typeof u&&(u.removeEventListener("resize",this._onWindowResize,!1),u.removeEventListener("online",this._onWindowOnline,!1));var n=this.painter.gl.getExtension("WEBGL_lose_context");n&&n.loseContext();h(this._canvasContainer);h(this._controlContainer);this._container.classList.remove("mapboxgl-map");this.fire("remove")},t.prototype._rerender=function(){this.style&&!this._frameId&&(this._frameId=o.frame(this._render))},t.prototype._onWindowOnline=function(){this._update()},t.prototype._onWindowResize=function(){this._trackResize&&this.stop().resize()._update()},b.showTileBoundaries.get=function(){return!!this._showTileBoundaries},b.showTileBoundaries.set=function(n){this._showTileBoundaries!==n&&(this._showTileBoundaries=n,this._update())},b.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},b.showCollisionBoxes.set=function(n){this._showCollisionBoxes!==n&&(this._showCollisionBoxes=n,this.style._redoPlacement())},b.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},b.showOverdrawInspector.set=function(n){this._showOverdrawInspector!==n&&(this._showOverdrawInspector=n,this._update())},b.repaint.get=function(){return!!this._repaint},b.repaint.set=function(n){this._repaint=n;this._update()},b.vertices.get=function(){return!!this._vertices},b.vertices.set=function(n){this._vertices=n;this._update()},t.prototype._onData=function(n){this._update("style"===n.dataType);this.fire(n.dataType+"data",n)},t.prototype._onDataLoading=function(n){this.fire(n.dataType+"dataloading",n)},Object.defineProperties(t.prototype,b),t}(b);t.exports=it},{"../geo/lng_lat":62,"../geo/lng_lat_bounds":63,"../geo/transform":64,"../render/painter":77,"../style/animation_loop":143,"../style/style":146,"../util/browser":192,"../util/dom":199,"../util/util":212,"../util/window":194,"./bind_handlers":171,"./camera":172,"./control/attribution_control":173,"./control/logo_control":176,"./hash":186,"mapbox-gl-supported":22,"point-geometry":26}],188:[function(n,t){"use strict";var r=n("../util/dom"),u=n("../geo/lng_lat"),f=n("point-geometry"),i=function(n,t){this._offset=f.convert(t&&t.offset||[0,0]);this._update=this._update.bind(this);this._onMapClick=this._onMapClick.bind(this);n||(n=r.create("div"));n.classList.add("mapboxgl-marker");this._element=n;this._popup=null};i.prototype.addTo=function(n){return this.remove(),this._map=n,n.getCanvasContainer().appendChild(this._element),n.on("move",this._update),n.on("moveend",this._update),this._update(),this._map.on("click",this._onMapClick),this};i.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map=null),r.remove(this._element),this._popup&&this._popup.remove(),this};i.prototype.getLngLat=function(){return this._lngLat};i.prototype.setLngLat=function(n){return this._lngLat=u.convert(n),this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this};i.prototype.getElement=function(){return this._element};i.prototype.setPopup=function(n){return this._popup&&(this._popup.remove(),this._popup=null),n&&(this._popup=n,this._popup.setLngLat(this._lngLat)),this};i.prototype._onMapClick=function(n){var t=n.originalEvent.target,i=this._element;this._popup&&(t===i||i.contains(t))&&this.togglePopup()};i.prototype.getPopup=function(){return this._popup};i.prototype.togglePopup=function(){var n=this._popup;n&&(n.isOpen()?n.remove():n.addTo(this._map))};i.prototype._update=function(n){if(this._map){var t=this._map.project(this._lngLat)._add(this._offset);n&&"moveend"!==n.type||(t=t.round());r.setTransform(this._element,"translate("+t.x+"px, "+t.y+"px)")}};t.exports=i},{"../geo/lng_lat":62,"../util/dom":199,"point-geometry":26}],189:[function(n,t){"use strict";function f(n){var t,r;return n?"number"==typeof n?(t=Math.round(Math.sqrt(.5*Math.pow(n,2))),{top:new i(0,n),"top-left":new i(t,t),"top-right":new i(-t,t),bottom:new i(0,-n),"bottom-left":new i(t,-t),"bottom-right":new i(-t,-t),left:new i(n,0),right:new i(-n,0)}):o(n)?(r=i.convert(n),{top:r,"top-left":r,"top-right":r,bottom:r,"bottom-left":r,"bottom-right":r,left:r,right:r}):{top:i.convert(n.top||[0,0]),"top-left":i.convert(n["top-left"]||[0,0]),"top-right":i.convert(n["top-right"]||[0,0]),bottom:i.convert(n.bottom||[0,0]),"bottom-left":i.convert(n["bottom-left"]||[0,0]),"bottom-right":i.convert(n["bottom-right"]||[0,0]),left:i.convert(n.left||[0,0]),right:i.convert(n.right||[0,0])}:f(new i(0,0))}function o(n){return n instanceof i||Array.isArray(n)}var e=n("../util/util"),s=n("../util/evented"),r=n("../util/dom"),h=n("../geo/lng_lat"),i=n("point-geometry"),u=n("../util/window"),c={closeButton:!0,closeOnClick:!0},l=function(n){function t(t){n.call(this);this.options=e.extend(Object.create(c),t);e.bindAll(["_update","_onClickClose"],this)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.addTo=function(n){return this._map=n,this._map.on("move",this._update),this.options.closeOnClick&&this._map.on("click",this._onClickClose),this._update(),this},t.prototype.isOpen=function(){return!!this._map},t.prototype.remove=function(){return this._content&&this._content.parentNode&&this._content.parentNode.removeChild(this._content),this._container&&(this._container.parentNode.removeChild(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("click",this._onClickClose),delete this._map),this.fire("close"),this},t.prototype.getLngLat=function(){return this._lngLat},t.prototype.setLngLat=function(n){return this._lngLat=h.convert(n),this._update(),this},t.prototype.setText=function(n){return this.setDOMContent(u.document.createTextNode(n))},t.prototype.setHTML=function(n){var t,i=u.document.createDocumentFragment(),r=u.document.createElement("body");for(r.innerHTML=n;;){if(t=r.firstChild,!t)break;i.appendChild(t)}return this.setDOMContent(i)},t.prototype.setDOMContent=function(n){return this._createContent(),this._content.appendChild(n),this._update(),this},t.prototype._createContent=function(){this._content&&this._content.parentNode&&this._content.parentNode.removeChild(this._content);this._content=r.create("div","mapboxgl-popup-content",this._container);this.options.closeButton&&(this._closeButton=r.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClickClose))},t.prototype._update=function(){var i,u,c;if(this._map&&this._lngLat&&this._content){this._container||(this._container=r.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=r.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content));var n=this.options.anchor,e=f(this.options.offset),t=this._map.project(this._lngLat).round();n||(i=this._container.offsetWidth,u=this._container.offsetHeight,n=t.y+e.bottom.y<u?["top"]:t.y>this._map.transform.height-u?["bottom"]:[],t.x<i/2?n.push("left"):t.x>this._map.transform.width-i/2&&n.push("right"),n=0===n.length?"bottom":n.join("-"));var o=t.add(e[n]),s={top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"},h=this._container.classList;for(c in s)h.remove("mapboxgl-popup-anchor-"+c);h.add("mapboxgl-popup-anchor-"+n);r.setTransform(this._container,s[n]+" translate("+o.x+"px,"+o.y+"px)")}},t.prototype._onClickClose=function(){this.remove()},t}(s);t.exports=l},{"../geo/lng_lat":62,"../util/dom":199,"../util/evented":200,"../util/util":212,"../util/window":194,"point-geometry":26}],190:[function(n,t){"use strict";var i=function(n,t,i){this.target=n;this.parent=t;this.mapId=i;this.callbacks={};this.callbackID=0;this.receive=this.receive.bind(this);this.target.addEventListener("message",this.receive,!1)};i.prototype.send=function(n,t,i,r,u){var f=i?this.mapId+":"+this.callbackID++:null;i&&(this.callbacks[f]=i);this.target.postMessage({targetMapId:u,sourceMapId:this.mapId,type:n,id:String(f),data:t},r)};i.prototype.receive=function(n){var i,f=this,t=n.data,o=t.id,r,u,e;t.targetMapId&&this.mapId!==t.targetMapId||(r=function(n,t,i){f.target.postMessage({sourceMapId:f.mapId,type:"<response>",id:String(o),error:n?String(n):null,data:t},i)},"<response>"===t.type?(i=this.callbacks[t.id],delete this.callbacks[t.id],i&&i(t.error||null,t.data)):"undefined"!=typeof t.id&&this.parent[t.type]?this.parent[t.type](t.sourceMapId,t.data,r):"undefined"!=typeof t.id&&this.parent.getWorkerSource?(u=t.type.split("."),e=this.parent.getWorkerSource(t.sourceMapId,u[0]),e[u[1]](t.data,r)):this.parent[t.type](t.data))};i.prototype.remove=function(){this.target.removeEventListener("message",this.receive,!1)};t.exports=i},{}],191:[function(n,t,i){"use strict";function f(n){var t=r.document.createElement("a");return t.href=n,t.protocol===r.document.location.protocol&&t.host===r.document.location.host}var r=n("./window"),u;i.getJSON=function(n,t){var i=new r.XMLHttpRequest;return i.open("GET",n,!0),i.setRequestHeader("Accept","application/json"),i.onerror=function(n){t(n)},i.onload=function(){if(i.status>=200&&i.status<300&&i.response){var n;try{n=JSON.parse(i.response)}catch(n){return t(n)}t(null,n)}else t(new Error(i.statusText))},i.send(),i};i.getArrayBuffer=function(n,t){var i=new r.XMLHttpRequest;return i.open("GET",n,!0),i.responseType="arraybuffer",i.onerror=function(n){t(n)},i.onload=function(){return 0===i.response.byteLength&&200===i.status?t(new Error("http status 200 returned without content.")):void(i.status>=200&&i.status<300&&i.response?t(null,{data:i.response,cacheControl:i.getResponseHeader("Cache-Control"),expires:i.getResponseHeader("Expires")}):t(new Error(i.statusText)))},i.send(),i};u="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";i.getImage=function(n,t){return i.getArrayBuffer(n,function(n,i){var f,e,o;if(n)return t(n);f=new r.Image;e=r.URL||r.webkitURL;f.onload=function(){t(null,f);e.revokeObjectURL(f.src)};o=new r.Blob([new Uint8Array(i.data)],{type:"image/png"});f.cacheControl=i.cacheControl;f.expires=i.expires;f.src=i.data.byteLength?e.createObjectURL(o):u})};i.getVideo=function(n,t){var i=r.document.createElement("video"),u,e;for(i.onloadstart=function(){t(null,i)},u=0;u<n.length;u++)e=r.document.createElement("source"),f(n[u])||(i.crossOrigin="Anonymous"),e.src=n[u],i.appendChild(e);return i}},{"./window":194}],192:[function(n,t,i){"use strict";var r=n("./window"),f,e,u;t.exports.now=function(){return r.performance&&r.performance.now?r.performance.now.bind(r.performance):Date.now.bind(Date)}();f=r.requestAnimationFrame||r.mozRequestAnimationFrame||r.webkitRequestAnimationFrame||r.msRequestAnimationFrame;i.frame=function(n){return f(n)};e=r.cancelAnimationFrame||r.mozCancelAnimationFrame||r.webkitCancelAnimationFrame||r.msCancelAnimationFrame;i.cancelFrame=function(n){e(n)};i.timed=function(n,r,u){function f(s){e||(s=t.exports.now(),s>=o+r?n.call(u,1):(n.call(u,(s-o)/r),i.frame(f)))}if(!r)return n.call(u,1),null;var e=!1,o=t.exports.now();return i.frame(f),function(){e=!0}};i.getImageData=function(n){var t=r.document.createElement("canvas"),i=t.getContext("2d");return t.width=n.width,t.height=n.height,i.drawImage(n,0,0),i.getImageData(0,0,n.width,n.height).data};i.supported=n("mapbox-gl-supported");i.hardwareConcurrency=r.navigator.hardwareConcurrency||4;Object.defineProperty(i,"devicePixelRatio",{get:function(){return r.devicePixelRatio}});i.supportsWebp=!1;u=r.document.createElement("img");u.onload=function(){i.supportsWebp=!0};u.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="},{"./window":194,"mapbox-gl-supported":22}],193:[function(n,t){"use strict";var r=n("webworkify"),i=n("../window"),u=i.URL.createObjectURL(new r(n("../../source/worker"),{bare:!0}));t.exports=function(){return new i.Worker(u)}},{"../../source/worker":98,"../window":194,webworkify:41}],194:[function(n,t){"use strict";t.exports=self},{}],195:[function(n,t){"use strict";function i(n,t){return t.area-n.area}var r=n("quickselect"),u=n("./util").calculateSignedArea;t.exports=function(n,t){var l=n.length,s,c,f,o,h,e;if(l<=1)return[n];for(f=[],o=0;o<l;o++)h=u(n[o]),0!==h&&(n[o].area=Math.abs(h),void 0===c&&(c=h<0),c===h<0?(s&&f.push(s),s=[n[o]]):s.push(n[o]));if(s&&f.push(s),t>1)for(e=0;e<f.length;e++)f[e].length<=t||(r(f[e],t,1,f[e].length-1,i),f[e]=f[e].slice(0,t));return f}},{"./util":212,quickselect:28}],196:[function(n,t){"use strict";t.exports={API_URL:"https://api.mapbox.com",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null}},{}],197:[function(n,t){"use strict";var i=function(n){var r=this,t,i;for(this._stringToNumber={},this._numberToString=[],t=0;t<n.length;t++)i=n[t],r._stringToNumber[i]=t,r._numberToString[t]=i};i.prototype.encode=function(n){return this._stringToNumber[n]};i.prototype.decode=function(n){return this._numberToString[n]};t.exports=i},{}],198:[function(n,t){"use strict";var r=n("./util"),u=n("./actor"),i=function(n,t){var o=this,f,i,s,e;for(this.workerPool=n,this.actors=[],this.currentActor=0,this.id=r.uniqueId(),f=this.workerPool.acquire(this.id),i=0;i<f.length;i++)s=f[i],e=new u(s,t,o.id),e.name="Worker "+i,o.actors.push(e)};i.prototype.broadcast=function(n,t,i){i=i||function(){};r.asyncAll(this.actors,function(i,r){i.send(n,t,r)},i)};i.prototype.send=function(n,t,i,r,u){return("number"!=typeof r||isNaN(r))&&(r=this.currentActor=(this.currentActor+1)%this.actors.length),this.actors[r].send(n,t,i,u),r};i.prototype.remove=function(){this.actors.forEach(function(n){n.remove()});this.actors=[];this.workerPool.release(this.id)};t.exports=i},{"./actor":190,"./util":212}],199:[function(n,t,i){"use strict";function o(n){for(var t=0;t<n.length;t++)if(n[t]in f)return n[t];return n[0]}function e(n){n.preventDefault();n.stopPropagation();r.removeEventListener("click",e,!0)}var s=n("point-geometry"),r=n("./window"),f,u,h,c;i.create=function(n,t,i){var u=r.document.createElement(n);return t&&(u.className=t),i&&i.appendChild(u),u};f=r.document.documentElement.style;u=o(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);i.disableDrag=function(){u&&(h=f[u],f[u]="none")};i.enableDrag=function(){u&&(f[u]=h)};c=o(["transform","WebkitTransform"]);i.setTransform=function(n,t){n.style[c]=t};i.suppressClick=function(){r.addEventListener("click",e,!0);r.setTimeout(function(){r.removeEventListener("click",e,!0)},0)};i.mousePos=function(n,t){var i=n.getBoundingClientRect();return t=t.touches?t.touches[0]:t,new s(t.clientX-i.left-n.clientLeft,t.clientY-i.top-n.clientTop)};i.touchPos=function(n,t){for(var u=n.getBoundingClientRect(),f=[],r="touchend"===t.type?t.changedTouches:t.touches,i=0;i<r.length;i++)f.push(new s(r[i].clientX-u.left-n.clientLeft,r[i].clientY-u.top-n.clientTop));return f};i.remove=function(n){n.parentNode&&n.parentNode.removeChild(n)}},{"./window":194,"point-geometry":26}],200:[function(n,t){"use strict";function f(n,t,i){i[n]=i[n]||[];i[n].push(t)}function r(n,t,i){if(i&&i[n]){var r=i[n].indexOf(t);r!==-1&&i[n].splice(r,1)}}var u=n("./util"),i=function(){};i.prototype.on=function(n,t){return this._listeners=this._listeners||{},f(n,t,this._listeners),this};i.prototype.off=function(n,t){return r(n,t,this._listeners),r(n,t,this._oneTimeListeners),this};i.prototype.once=function(n,t){return this._oneTimeListeners=this._oneTimeListeners||{},f(n,t,this._oneTimeListeners),this};i.prototype.fire=function(n,t){var o=this,s,f,e,i;if(this.listens(n)){for(t=u.extend({},t,{type:n,target:this}),s=this._listeners&&this._listeners[n]?this._listeners[n].slice():[],f=0;f<s.length;f++)s[f].call(o,t);for(e=this._oneTimeListeners&&this._oneTimeListeners[n]?this._oneTimeListeners[n].slice():[],i=0;i<e.length;i++)e[i].call(o,t),r(n,e[i],o._oneTimeListeners);this._eventedParent&&this._eventedParent.fire(n,u.extend({},t,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData))}else u.endsWith(n,"error")&&console.error(t&&t.error||t||"Empty error event");return this};i.prototype.listens=function(n){return this._listeners&&this._listeners[n]&&this._listeners[n].length>0||this._oneTimeListeners&&this._oneTimeListeners[n]&&this._oneTimeListeners[n].length>0||this._eventedParent&&this._eventedParent.listens(n)};i.prototype.setEventedParent=function(n,t){return this._eventedParent=n,this._eventedParentData=t,this};t.exports=i},{"./util":212}],201:[function(n,t){"use strict";function r(n,t){return t.max-n.max}function i(n,t,i,r){this.p=new o(n,t);this.h=i;this.d=u(this.p,r);this.max=this.d+this.h*Math.SQRT2}function u(n,t){for(var i,r,u=!1,f=1/0,e=0;e<t.length;e++)for(var o=t[e],h=0,c=o.length,l=c-1;h<c;l=h++)i=o[h],r=o[l],i.y>n.y!=r.y>n.y&&n.x<(r.x-i.x)*(n.y-i.y)/(r.y-i.y)+i.x&&(u=!u),f=Math.min(f,s(n,i,r));return(u?1:-1)*Math.sqrt(f)}function f(n){for(var u=0,s=0,h=0,f=n[0],e=0,c=f.length,l=c-1;e<c;l=e++){var t=f[e],r=f[l],o=t.x*r.y-r.x*t.y;s+=(t.x+r.x)*o;h+=(t.y+r.y)*o;u+=3*o}return new i(s/u,h/u,0,n)}var e=n("tinyqueue"),o=n("point-geometry"),s=n("./intersection_tests").distToSegmentSquared;t.exports=function(n,t,u){var v,y,p,w,nt,c,h,k,d,a,g,s;for(t=t||1,nt=n[0],c=0;c<nt.length;c++)h=nt[c],(!c||h.x<v)&&(v=h.x),(!c||h.y<y)&&(y=h.y),(!c||h.x>p)&&(p=h.x),(!c||h.y>w)&&(w=h.y);var tt=p-v,it=w-y,b=Math.min(tt,it),o=b/2,l=new e(null,r);if(0===b)return[v,y];for(k=v;k<p;k+=b)for(d=y;d<w;d+=b)l.push(new i(k+o,d+o,o,n));for(a=f(n),g=l.length;l.length;)s=l.pop(),(s.d>a.d||!a.d)&&(a=s,u&&console.log("found best %d after %d probes",Math.round(1e4*s.d)/1e4,g)),s.max-a.d<=t||(o=s.h/2,l.push(new i(s.p.x-o,s.p.y-o,o,n)),l.push(new i(s.p.x+o,s.p.y-o,o,n)),l.push(new i(s.p.x-o,s.p.y+o,o,n)),l.push(new i(s.p.x+o,s.p.y+o,o,n)),g+=4);return u&&(console.log("num probes: "+g),console.log("best distance: "+a.d)),a.p}},{"./intersection_tests":205,"point-geometry":26,tinyqueue:30}],202:[function(n,t){"use strict";var r=n("./worker_pool"),i;t.exports=function(){return i||(i=new r),i}},{"./worker_pool":215}],203:[function(n,t){"use strict";function i(n,t){this.stacks=n.readFields(r,[],t)}function r(n,t,i){if(1===n){var r=i.readMessage(u,{glyphs:{}});t.push(r)}}function u(n,t,i){if(1===n)t.name=i.readString();else if(2===n)t.range=i.readString();else if(3===n){var r=i.readMessage(f,{});t.glyphs[r.id]=r}}function f(n,t,i){1===n?t.id=i.readVarint():2===n?t.bitmap=i.readBytes():3===n?t.width=i.readVarint():4===n?t.height=i.readVarint():5===n?t.left=i.readSVarint():6===n?t.top=i.readSVarint():7===n&&(t.advance=i.readVarint())}t.exports=i},{}],204:[function(n,t){"use strict";function i(n,t,i){return n*(1-i)+t*i}t.exports=i;i.number=i;i.vec2=function(n,t,r){return[i(n[0],t[0],r),i(n[1],t[1],r)]};i.color=function(n,t,r){return[i(n[0],t[0],r),i(n[1],t[1],r),i(n[2],t[2],r),i(n[3],t[3],r)]};i.array=function(n,t,r){return n.map(function(n,u){return i(n,t[u],r)})}},{}],205:[function(n,t){"use strict";function s(n,t){for(var f,r=0;r<n.length;r++)if(i(t,n[r]))return!0;for(f=0;f<t.length;f++)if(i(n,t[f]))return!0;return!!u(n,t)}function h(n,t,r){for(var s,e,h,o,c,u=0;u<n.length;u++)for(s=n[u],e=0;e<t.length;e++)for(h=t[e],o=0;o<h.length;o++)if((c=h[o],i(s,c))||f(c,s,r))return!0;return!1}function c(n,t){var i,c,r,f,o,s,h;if(1===n.length&&1===n[0].length)return e(t,n[0][0]);for(i=0;i<t.length;i++)for(c=t[i],r=0;r<c.length;r++)if(e(n,c[r]))return!0;for(f=0;f<n.length;f++){for(o=n[f],s=0;s<o.length;s++)if(e(t,o[s]))return!0;for(h=0;h<t.length;h++)if(u(o,t[h]))return!0}return!1}function l(n,t,r){for(var f,e,o,s,u=0;u<t.length;u++)for(f=t[u],e=0;e<n.length;e++){if(o=n[e],o.length>=3)for(s=0;s<f.length;s++)if(i(o,f[s]))return!0;if(a(o,f,r))return!0}return!1}function a(n,t,i){var r,e;if(n.length>1){if(u(n,t))return!0;for(r=0;r<t.length;r++)if(f(t[r],n,i))return!0}for(e=0;e<n.length;e++)if(f(n[e],t,i))return!0;return!1}function u(n,t){var i,u,f;if(0===n.length||0===t.length)return!1;for(i=0;i<n.length-1;i++)for(var e=n[i],o=n[i+1],r=0;r<t.length-1;r++)if(u=t[r],f=t[r+1],v(e,o,u,f))return!0;return!1}function v(n,t,i,u){return r(n,i,u)!==r(t,i,u)&&r(n,t,i)!==r(n,t,u)}function f(n,t,i){var u=i*i,r,f,e;if(1===t.length)return n.distSqr(t[0])<u;for(r=1;r<t.length;r++)if(f=t[r-1],e=t[r],o(n,f,e)<u)return!0;return!1}function o(n,t,i){var u=t.distSqr(i),r;return 0===u?n.distSqr(t):(r=((n.x-t.x)*(i.x-t.x)+(n.y-t.y)*(i.y-t.y))/u,r<0?n.distSqr(t):r>1?n.distSqr(i):n.distSqr(i.sub(t)._mult(r)._add(t)))}function e(n,t){for(var r,i,u,o,s,f=!1,e=0;e<n.length;e++)for(r=n[e],o=0,s=r.length-1;o<r.length;s=o++)i=r[o],u=r[s],i.y>t.y!=u.y>t.y&&t.x<(u.x-i.x)*(t.y-i.y)/(u.y-i.y)+i.x&&(f=!f);return f}function i(n,t){for(var i,r,u=!1,f=0,e=n.length-1;f<n.length;e=f++)i=n[f],r=n[e],i.y>t.y!=r.y>t.y&&t.x<(r.x-i.x)*(t.y-i.y)/(r.y-i.y)+i.x&&(u=!u);return u}var r=n("./util").isCounterClockwise;t.exports={multiPolygonIntersectsBufferedMultiPoint:h,multiPolygonIntersectsMultiPolygon:c,multiPolygonIntersectsBufferedMultiLine:l,polygonIntersectsPolygon:s,distToSegmentSquared:o}},{"./util":212}],206:[function(n,t){"use strict";var i={"Latin-1 Supplement":function(n){return n>=128&&n<=255},"Hangul Jamo":function(n){return n>=4352&&n<=4607},"Unified Canadian Aboriginal Syllabics":function(n){return n>=5120&&n<=5759},"Unified Canadian Aboriginal Syllabics Extended":function(n){return n>=6320&&n<=6399},"General Punctuation":function(n){return n>=8192&&n<=8303},"Letterlike Symbols":function(n){return n>=8448&&n<=8527},"Number Forms":function(n){return n>=8528&&n<=8591},"Miscellaneous Technical":function(n){return n>=8960&&n<=9215},"Control Pictures":function(n){return n>=9216&&n<=9279},"Optical Character Recognition":function(n){return n>=9280&&n<=9311},"Enclosed Alphanumerics":function(n){return n>=9312&&n<=9471},"Geometric Shapes":function(n){return n>=9632&&n<=9727},"Miscellaneous Symbols":function(n){return n>=9728&&n<=9983},"Miscellaneous Symbols and Arrows":function(n){return n>=11008&&n<=11263},"CJK Radicals Supplement":function(n){return n>=11904&&n<=12031},"Kangxi Radicals":function(n){return n>=12032&&n<=12255},"Ideographic Description Characters":function(n){return n>=12272&&n<=12287},"CJK Symbols and Punctuation":function(n){return n>=12288&&n<=12351},Hiragana:function(n){return n>=12352&&n<=12447},Katakana:function(n){return n>=12448&&n<=12543},Bopomofo:function(n){return n>=12544&&n<=12591},"Hangul Compatibility Jamo":function(n){return n>=12592&&n<=12687},Kanbun:function(n){return n>=12688&&n<=12703},"Bopomofo Extended":function(n){return n>=12704&&n<=12735},"CJK Strokes":function(n){return n>=12736&&n<=12783},"Katakana Phonetic Extensions":function(n){return n>=12784&&n<=12799},"Enclosed CJK Letters and Months":function(n){return n>=12800&&n<=13055},"CJK Compatibility":function(n){return n>=13056&&n<=13311},"CJK Unified Ideographs Extension A":function(n){return n>=13312&&n<=19903},"Yijing Hexagram Symbols":function(n){return n>=19904&&n<=19967},"CJK Unified Ideographs":function(n){return n>=19968&&n<=40959},"Yi Syllables":function(n){return n>=40960&&n<=42127},"Yi Radicals":function(n){return n>=42128&&n<=42191},"Hangul Jamo Extended-A":function(n){return n>=43360&&n<=43391},"Hangul Syllables":function(n){return n>=44032&&n<=55215},"Hangul Jamo Extended-B":function(n){return n>=55216&&n<=55295},"Private Use Area":function(n){return n>=57344&&n<=63743},"CJK Compatibility Ideographs":function(n){return n>=63744&&n<=64255},"Vertical Forms":function(n){return n>=65040&&n<=65055},"CJK Compatibility Forms":function(n){return n>=65072&&n<=65103},"Small Form Variants":function(n){return n>=65104&&n<=65135},"Halfwidth and Fullwidth Forms":function(n){return n>=65280&&n<=65519}};t.exports=i},{}],207:[function(n,t){"use strict";var i=function(n,t){this.max=n;this.onRemove=t;this.reset()};i.prototype.reset=function(){var n=this;for(var t in n.data)n.onRemove(n.data[t]);return this.data={},this.order=[],this};i.prototype.add=function(n,t){if(this.has(n))this.order.splice(this.order.indexOf(n),1),this.data[n]=t,this.order.push(n);else if(this.data[n]=t,this.order.push(n),this.order.length>this.max){var i=this.get(this.order[0]);i&&this.onRemove(i)}return this};i.prototype.has=function(n){return n in this.data};i.prototype.keys=function(){return this.order};i.prototype.get=function(n){if(!this.has(n))return null;var t=this.data[n];return delete this.data[n],this.order.splice(this.order.indexOf(n),1),t};i.prototype.getWithoutRemoving=function(n){if(!this.has(n))return null;return this.data[n]};i.prototype.remove=function(n){if(!this.has(n))return this;var t=this.data[n];return delete this.data[n],this.onRemove(t),this.order.splice(this.order.indexOf(n),1),this};i.prototype.setMaxSize=function(n){var t=this,i;for(this.max=n;this.order.length>this.max;)i=t.get(t.order[0]),i&&t.onRemove(i);return this};t.exports=i},{}],208:[function(n,t,i){"use strict";function f(n,t){var i=u(o.API_URL);if(n.protocol=i.protocol,n.authority=i.authority,!o.REQUIRE_ACCESS_TOKEN)return e(n);if(t=t||o.ACCESS_TOKEN,!t)throw new Error("An API access token is required to use Mapbox GL. "+h);if("s"===t[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+h);return n.params.push("access_token="+t),e(n)}function r(n){return 0===n.indexOf("mapbox:")}function a(n){for(var t=0;t<n.length;t++)0===n[t].indexOf("access_token=tk.")&&(n[t]="access_token="+(o.ACCESS_TOKEN||""))}function u(n){var t=n.match(l);if(!t)throw new Error("Unable to parse URL object");return{protocol:t[1],authority:t[2],path:t[3]||"/",params:t[4]?t[4].split("&"):[]}}function e(n){var t=n.params.length?"?"+n.params.join("&"):"";return n.protocol+"://"+n.authority+n.path+t}var o=n("./config"),s=n("./browser"),h="See https://www.mapbox.com/api-documentation/#access-tokens",c,l;i.isMapboxURL=r;i.normalizeStyleURL=function(n,t){if(!r(n))return n;var i=u(n);return i.path="/styles/v1"+i.path,f(i,t)};i.normalizeGlyphsURL=function(n,t){if(!r(n))return n;var i=u(n);return i.path="/fonts/v1"+i.path,f(i,t)};i.normalizeSourceURL=function(n,t){if(!r(n))return n;var i=u(n);return i.path="/v4/"+i.authority+".json",i.params.push("secure"),f(i,t)};i.normalizeSpriteURL=function(n,t,i,o){var s=u(n);return r(n)?(s.path="/styles/v1"+s.path+"/sprite"+t+i,f(s,o)):(s.path+=""+t+i,e(s))};c=/(\.(png|jpg)\d*)(?=$)/;i.normalizeTileURL=function(n,t,i){if(!t||!r(t))return n;var f=u(n),o=s.devicePixelRatio>=2||512===i?"@2x":"",h=s.supportsWebp?".webp":"$1";return f.path=f.path.replace(c,""+o+h),a(f.params),e(f)};l=/^(\w+):\/\/([^\/?]+)(\/[^?]+)?\??(.+)?/},{"./browser":192,"./config":196}],209:[function(n,t,i){"use strict";var r=n("./is_char_in_unicode_block");t.exports.allowsIdeographicBreaking=function(n){for(var u,t=0,r=n;t<r.length;t+=1)if(u=r[t],!i.charAllowsIdeographicBreaking(u.charCodeAt(0)))return!1;return!0};t.exports.allowsVerticalWritingMode=function(n){for(var u,t=0,r=n;t<r.length;t+=1)if(u=r[t],i.charHasUprightVerticalOrientation(u.charCodeAt(0)))return!0;return!1};t.exports.charAllowsIdeographicBreaking=function(n){return!(n<11904)&&(!!r["Bopomofo Extended"](n)||!!r.Bopomofo(n)||!!r["CJK Compatibility Forms"](n)||!!r["CJK Compatibility Ideographs"](n)||!!r["CJK Compatibility"](n)||!!r["CJK Radicals Supplement"](n)||!!r["CJK Strokes"](n)||!!r["CJK Symbols and Punctuation"](n)||!!r["CJK Unified Ideographs Extension A"](n)||!!r["CJK Unified Ideographs"](n)||!!r["Enclosed CJK Letters and Months"](n)||!!r["Halfwidth and Fullwidth Forms"](n)||!!r.Hiragana(n)||!!r["Ideographic Description Characters"](n)||!!r["Kangxi Radicals"](n)||!!r["Katakana Phonetic Extensions"](n)||!!r.Katakana(n)||!!r["Vertical Forms"](n)||!!r["Yi Radicals"](n)||!!r["Yi Syllables"](n))};i.charHasUprightVerticalOrientation=function(n){return 746===n||747===n||!(n<4352)&&(!!r["Bopomofo Extended"](n)||!!r.Bopomofo(n)||!(!r["CJK Compatibility Forms"](n)||n>=65097&&n<=65103)||!!r["CJK Compatibility Ideographs"](n)||!!r["CJK Compatibility"](n)||!!r["CJK Radicals Supplement"](n)||!!r["CJK Strokes"](n)||!(!r["CJK Symbols and Punctuation"](n)||n>=12296&&n<=12305||n>=12308&&n<=12319||12336===n)||!!r["CJK Unified Ideographs Extension A"](n)||!!r["CJK Unified Ideographs"](n)||!!r["Enclosed CJK Letters and Months"](n)||!!r["Hangul Compatibility Jamo"](n)||!!r["Hangul Jamo Extended-A"](n)||!!r["Hangul Jamo Extended-B"](n)||!!r["Hangul Jamo"](n)||!!r["Hangul Syllables"](n)||!!r.Hiragana(n)||!!r["Ideographic Description Characters"](n)||!!r.Kanbun(n)||!!r["Kangxi Radicals"](n)||!!r["Katakana Phonetic Extensions"](n)||!(!r.Katakana(n)||12540===n)||!(!r["Halfwidth and Fullwidth Forms"](n)||65288===n||65289===n||65293===n||n>=65306&&n<=65310||65339===n||65341===n||65343===n||n>=65371&&n<=65503||65507===n||n>=65512&&n<=65519)||!(!r["Small Form Variants"](n)||n>=65112&&n<=65118||n>=65123&&n<=65126)||!!r["Unified Canadian Aboriginal Syllabics"](n)||!!r["Unified Canadian Aboriginal Syllabics Extended"](n)||!!r["Vertical Forms"](n)||!!r["Yijing Hexagram Symbols"](n)||!!r["Yi Syllables"](n)||!!r["Yi Radicals"](n))};i.charHasNeutralVerticalOrientation=function(n){return!(!r["Latin-1 Supplement"](n)||167!==n&&169!==n&&174!==n&&177!==n&&188!==n&&189!==n&&190!==n&&215!==n&&247!==n)||!(!r["General Punctuation"](n)||8214!==n&&8224!==n&&8225!==n&&8240!==n&&8241!==n&&8251!==n&&8252!==n&&8258!==n&&8263!==n&&8264!==n&&8265!==n&&8273!==n)||!!r["Letterlike Symbols"](n)||!!r["Number Forms"](n)||!(!r["Miscellaneous Technical"](n)||!(n>=8960&&n<=8967||n>=8972&&n<=8991||n>=8996&&n<=9e3||9003===n||n>=9085&&n<=9114||n>=9150&&n<=9165||9167===n||n>=9169&&n<=9179||n>=9186&&n<=9215))||!(!r["Control Pictures"](n)||9251===n)||!!r["Optical Character Recognition"](n)||!!r["Enclosed Alphanumerics"](n)||!!r["Geometric Shapes"](n)||!(!r["Miscellaneous Symbols"](n)||n>=9754&&n<=9759)||!(!r["Miscellaneous Symbols and Arrows"](n)||!(n>=11026&&n<=11055||n>=11088&&n<=11097||n>=11192&&n<=11243))||!!r["CJK Symbols and Punctuation"](n)||!!r.Katakana(n)||!!r["Private Use Area"](n)||!!r["CJK Compatibility Forms"](n)||!!r["Small Form Variants"](n)||!!r["Halfwidth and Fullwidth Forms"](n)||8734===n||8756===n||8757===n||n>=9984&&n<=10087||n>=10102&&n<=10131||65532===n||65533===n};i.charHasRotatedVerticalOrientation=function(n){return!(i.charHasUprightVerticalOrientation(n)||i.charHasNeutralVerticalOrientation(n))}},{"./is_char_in_unicode_block":206}],210:[function(n,t){"use strict";function h(n){var p=JSON.stringify(n),y,nt,f,o,tt,t;if(u[p])return u[p];var w=void 0===n.alignment?1:n.alignment,s=0,b=0,k=["Uint8"],d=n.members.map(function(n){k.indexOf(n.type)<0&&k.push(n.type);var t=r(n.type),u=s=e(s,Math.max(w,t)),i=n.components||1;return b=Math.max(b,t),s+=t*i,{name:n.name,type:n.type,components:i,offset:u}}),g=e(s,Math.max(b,w)),h=function(n){function t(){n.apply(this,arguments)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t}(v);for(h.prototype.alignment=w,h.prototype.size=g,y=0,nt=d;y<nt.length;y+=1)for(f=nt[y],o=0;o<f.components;o++)tt=f.name+(1===f.components?"":o),Object.defineProperty(h.prototype,tt,{get:l(f,o),set:a(f,o)});return t=function(n){function t(){n.apply(this,arguments)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t}(i),t.prototype.members=d,t.prototype.StructType=h,t.prototype.bytesPerElement=g,t.prototype.emplaceBack=c(d,g),t.prototype._usedTypes=k,u[p]=t,t}function e(n,t){return Math.ceil(n/t)*t}function r(n){return s[n].BYTES_PER_ELEMENT}function f(n){return n.toLowerCase()}function c(n,t){for(var u,i,o,c,v,l=[],s=[],e="var i = this.length;\nthis.resize(this.length + 1);\n",h=0,a=n;h<a.length;h+=1)for(u=a[h],i=r(u.type),l.indexOf(i)<0&&(l.push(i),e+="var o"+i.toFixed(0)+" = i * "+(t/i).toFixed(0)+";\n"),o=0;o<u.components;o++)c="v"+s.length,v="o"+i.toFixed(0)+" + "+(u.offset/i+o).toFixed(0),e+="this."+f(u.type)+"["+v+"] = "+c+";\n",s.push(c);return e+="return i;",new Function(s.toString(),e)}function o(n,t){var i="this._pos"+r(n.type).toFixed(0),u=(n.offset/r(n.type)+t).toFixed(0),e=i+" + "+u;return"this._structArray."+f(n.type)+"["+e+"]"}function l(n,t){return new Function("return "+o(n,t)+";")}function a(n,t){return new Function("x",o(n,t)+" = x;")}var u;t.exports=h;var s={Int8:Int8Array,Uint8:Uint8Array,Uint8Clamped:Uint8ClampedArray,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array,Float64:Float64Array},v=function(n,t){this._structArray=n;this._pos1=t*this.size;this._pos2=this._pos1/2;this._pos4=this._pos1/4;this._pos8=this._pos1/8},y=128,p=5,i=function(n){this.isTransferred=!1;void 0!==n?(this.arrayBuffer=n.arrayBuffer,this.length=n.length,this.capacity=this.arrayBuffer.byteLength/this.bytesPerElement,this._refreshViews()):(this.capacity=-1,this.resize(0))};i.serialize=function(){return{members:this.prototype.members,alignment:this.prototype.StructType.prototype.alignment,bytesPerElement:this.prototype.bytesPerElement}};i.prototype.serialize=function(n){return this._trim(),n&&(this.isTransferred=!0,n.push(this.arrayBuffer)),{length:this.length,arrayBuffer:this.arrayBuffer}};i.prototype.get=function(n){return new this.StructType(this,n)};i.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())};i.prototype.resize=function(n){if(this.length=n,n>this.capacity){this.capacity=Math.max(n,Math.floor(this.capacity*p),y);this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var t=this.uint8;this._refreshViews();t&&this.uint8.set(t)}};i.prototype._refreshViews=function(){for(var i,n=this,t=0,r=n._usedTypes;t<r.length;t+=1)i=r[t],n[f(i)]=new s[i](n.arrayBuffer)};i.prototype.toArray=function(n,t){for(var u,f=this,r=[],i=n;i<t;i++)u=f.get(i),r.push(u);return r};u={}},{}],211:[function(n,t){"use strict";function i(n,t){return t.replace(/{([^{}]+)}/g,function(t,i){return i in n?n[i]:""})}t.exports=i},{}],212:[function(n,t,i){"use strict";var f=n("@mapbox/unitbezier"),e=n("../geo/coordinate"),o=n("point-geometry"),u,r;i.easeCubicInOut=function(n){if(n<=0)return 0;if(n>=1)return 1;var t=n*n,i=t*n;return 4*(n<.5?i:3*(n-t)+i-.75)};i.bezier=function(n,t,i,r){var u=new f(n,t,i,r);return function(n){return u.solve(n)}};i.ease=i.bezier(.25,.1,.25,1);i.clamp=function(n,t,i){return Math.min(i,Math.max(t,n))};i.wrap=function(n,t,i){var r=i-t,u=((n-t)%r+r)%r+t;return u===t?i:u};i.asyncAll=function(n,t,i){if(!n.length)return i(null,[]);var f=n.length,r=new Array(n.length),u=null;n.forEach(function(n,e){t(n,function(n,t){n&&(u=n);r[e]=t;0==--f&&i(u,r)})})};i.values=function(n){var t=[];for(var i in n)t.push(n[i]);return t};i.keysDifference=function(n,t){var i=[];for(var r in n)r in t||i.push(r);return i};i.extend=function(n){for(var i,r,u=arguments,t=1;t<arguments.length;t++){i=u[t];for(r in i)n[r]=i[r]}return n};i.pick=function(n,t){for(var r,u={},i=0;i<t.length;i++)r=t[i],r in n&&(u[r]=n[r]);return u};u=1;i.uniqueId=function(){return u++};i.bindAll=function(n,t){n.forEach(function(n){t[n]&&(t[n]=t[n].bind(t))})};i.getCoordinatesCenter=function(n){for(var i=1/0,r=1/0,u=-(1/0),f=-(1/0),t=0;t<n.length;t++)i=Math.min(i,n[t].column),r=Math.min(r,n[t].row),u=Math.max(u,n[t].column),f=Math.max(f,n[t].row);var o=u-i,s=f-r,h=Math.max(o,s);return new e((i+u)/2,(r+f)/2,0).zoomTo(Math.floor(-Math.log(h)/Math.LN2))};i.endsWith=function(n,t){return n.indexOf(t,n.length-t.length)!==-1};i.mapObject=function(n,t,i){var f=this,u={};for(var r in n)u[r]=t.call(i||f,n[r],r,n);return u};i.filterObject=function(n,t,i){var f=this,u={};for(var r in n)t.call(i||f,n[r],r,n)&&(u[r]=n[r]);return u};i.deepEqual=function(n,t){var r,f,u;if(Array.isArray(n)){if(!Array.isArray(t)||n.length!==t.length)return!1;for(r=0;r<n.length;r++)if(!i.deepEqual(n[r],t[r]))return!1;return!0}if("object"==typeof n&&null!==n&&null!==t){if("object"!=typeof t||(f=Object.keys(n),f.length!==Object.keys(t).length))return!1;for(u in n)if(!i.deepEqual(n[u],t[u]))return!1;return!0}return n===t};i.clone=function(n){return Array.isArray(n)?n.map(i.clone):"object"==typeof n&&n?i.mapObject(n,i.clone):n};i.arraysIntersect=function(n,t){for(var i=0;i<n.length;i++)if(t.indexOf(n[i])>=0)return!0;return!1};r={};i.warnOnce=function(n){r[n]||("undefined"!=typeof console&&console.warn(n),r[n]=!0)};i.isCounterClockwise=function(n,t,i){return(i.y-n.y)*(t.x-n.x)>(t.y-n.y)*(i.x-n.x)};i.calculateSignedArea=function(n){for(var u=0,t=0,f=n.length,e=f-1,i=void 0,r=void 0;t<f;e=t++)i=n[t],r=n[e],u+=(r.x-i.x)*(i.y+r.y);return u};i.isClosedPolygon=function(n){if(n.length<4)return!1;var t=n[0],r=n[n.length-1];return!(Math.abs(t.x-r.x)>0||Math.abs(t.y-r.y)>0)&&Math.abs(i.calculateSignedArea(n))>.01};i.sphericalToCartesian=function(n){var r=n[0],t=n[1],i=n[2];return t+=90,t*=Math.PI/180,i*=Math.PI/180,[r*Math.cos(t)*Math.sin(i),r*Math.sin(t)*Math.sin(i),r*Math.cos(i)]};i.parseCacheControl=function(n){var t={},i;return(n.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(n,i,r,u){var f=r||u;return t[i]=!f||f.toLowerCase(),""}),t["max-age"])&&(i=parseInt(t["max-age"],10),isNaN(i)?delete t["max-age"]:t["max-age"]=i),t}},{"../geo/coordinate":61,"@mapbox/unitbezier":3,"point-geometry":26}],213:[function(n,t){"use strict";var i=function(n,t,i,r){this.type="Feature";this._vectorTileFeature=n;n._z=t;n._x=i;n._y=r;this.properties=n.properties;null!=n.id&&(this.id=n.id)},r={geometry:{}};r.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry};r.geometry.set=function(n){this._geometry=n};i.prototype.toJSON=function(){var t=this,i={geometry:this.geometry};for(var n in t)"_geometry"!==n&&"_vectorTileFeature"!==n&&(i[n]=t[n]);return i};Object.defineProperties(i.prototype,r);t.exports=i},{}],214:[function(n,t){"use strict";var i=n("./script_detection");t.exports=function(n){for(var u="",r=0;r<n.length;r++){var f=n.charCodeAt(r+1)||null,e=n.charCodeAt(r-1)||null,o=(!f||!i.charHasRotatedVerticalOrientation(f)||t.exports.lookup[n[r+1]])&&(!e||!i.charHasRotatedVerticalOrientation(e)||t.exports.lookup[n[r-1]]);u+=o&&t.exports.lookup[n[r]]?t.exports.lookup[n[r]]:n[r]}return u};t.exports.lookup={"!":"ï¸•","#":"ï¼ƒ",$:"ï¼„","%":"ï¼…","&":"ï¼†","(":"ï¸µ",")":"ï¸¶","*":"ï¼Š","+":"ï¼‹",",":"ï¸","-":"ï¸²",".":"ãƒ»","/":"ï¼",":":"ï¸“",";":"ï¸”","<":"ï¸¿","=":"ï¼",">":"ï¹€","?":"ï¸–","@":"ï¼ ","[":"ï¹‡","\\":"ï¼¼","]":"ï¹ˆ","^":"ï¼¾",_:"ï¸³","`":"ï½€","{":"ï¸·","|":"â€•","}":"ï¸¸","~":"ï½ž","Â¢":"ï¿ ","Â£":"ï¿¡","Â¥":"ï¿¥","Â¦":"ï¿¤","Â¬":"ï¿¢","Â¯":"ï¿£","â€“":"ï¸²","â€”":"ï¸±","â€˜":"ï¹ƒ","â€™":"ï¹„","â€œ":"ï¹","â€":"ï¹‚","â€¦":"ï¸™","â€§":"ãƒ»","â‚©":"ï¿¦","ã€":"ï¸‘","ã€‚":"ï¸’","ã€ˆ":"ï¸¿","ã€‰":"ï¹€","ã€Š":"ï¸½","ã€‹":"ï¸¾","ã€Œ":"ï¹","ã€":"ï¹‚","ã€Ž":"ï¹ƒ","ã€":"ï¹„","ã€":"ï¸»","ã€‘":"ï¸¼","ã€”":"ï¸¹","ã€•":"ï¸º","ã€–":"ï¸—","ã€—":"ï¸˜","ï¼":"ï¸•","ï¼ˆ":"ï¸µ","ï¼‰":"ï¸¶","ï¼Œ":"ï¸","ï¼":"ï¸²","ï¼Ž":"ãƒ»","ï¼š":"ï¸“","ï¼›":"ï¸”","ï¼œ":"ï¸¿","ï¼ž":"ï¹€","ï¼Ÿ":"ï¸–","ï¼»":"ï¹‡","ï¼½":"ï¹ˆ","ï¼¿":"ï¸³","ï½›":"ï¸·","ï½œ":"â€•","ï½":"ï¸¸","ï½Ÿ":"ï¸µ","ï½ ":"ï¸¶","ï½¡":"ï¸’","ï½¢":"ï¹","ï½£":"ï¹‚"}},{"./script_detection":209}],215:[function(n,t){"use strict";var r=n("./web_worker"),i=function(){this.active={}};i.prototype.acquire=function(t){var u=this,i;if(!this.workers)for(i=n("../").workerCount,this.workers=[];this.workers.length<i;)u.workers.push(new r);return this.active[t]=!0,this.workers.slice()};i.prototype.release=function(n){delete this.active[n];0===Object.keys(this.active).length&&(this.workers.forEach(function(n){n.terminate()}),this.workers=null)};t.exports=i},{"../":65,"./web_worker":193}]},{},[65])(65)});!function(){"use strict";var n,t=function(i,u){function b(n){return Math.floor(n)}function ut(){var n=f.params.autoplay,t=f.slides.eq(f.activeIndex);t.attr("data-swiper-autoplay")&&(n=t.attr("data-swiper-autoplay")||f.params.autoplay);f.autoplayTimeoutId=setTimeout(function(){f.params.loop?(f.fixLoop(),f._slideNext(),f.emit("onAutoplay",f)):f.isEnd?u.autoplayStopOnLast?f.stopAutoplay():(f._slideTo(0),f.emit("onAutoplay",f)):(f._slideNext(),f.emit("onAutoplay",f))},n)}function ft(t,i){var r=n(t.target),u;if(!r.is(i))if("string"==typeof i)r=r.parents(i);else if(i.nodeType)return r.parents().each(function(n,t){t===i&&(u=i)}),u?i:void 0;if(0!==r.length)return r[0]}function et(n,t){t=t||{};var r=window.MutationObserver||window.WebkitMutationObserver,i=new r(function(n){n.forEach(function(n){f.onResize(!0);f.emit("onObserverUpdate",f,n)})});i.observe(n,{attributes:void 0===t.attributes||t.attributes,childList:void 0===t.childList||t.childList,characterData:void 0===t.characterData||t.characterData});f.observers.push(i)}function yt(n){var t,o,s,e,r;if((n.originalEvent&&(n=n.originalEvent),t=n.keyCode||n.charCode,!f.params.allowSwipeToNext&&(f.isHorizontal()&&39===t||!f.isHorizontal()&&40===t))||!f.params.allowSwipeToPrev&&(f.isHorizontal()&&37===t||!f.isHorizontal()&&38===t))return!1;if(!(n.shiftKey||n.altKey||n.ctrlKey||n.metaKey||document.activeElement&&document.activeElement.nodeName&&("input"===document.activeElement.nodeName.toLowerCase()||"textarea"===document.activeElement.nodeName.toLowerCase()))){if(37===t||39===t||38===t||40===t){if(o=!1,f.container.parents("."+f.params.slideClass).length>0&&0===f.container.parents("."+f.params.slideActiveClass).length)return;var u={left:window.pageXOffset,top:window.pageYOffset},h=window.innerWidth,c=window.innerHeight,i=f.container.offset();for(f.rtl&&(i.left=i.left-f.container[0].scrollLeft),s=[[i.left,i.top],[i.left+f.width,i.top],[i.left,i.top+f.height],[i.left+f.width,i.top+f.height]],e=0;e<s.length;e++)r=s[e],r[0]>=u.left&&r[0]<=u.left+h&&r[1]>=u.top&&r[1]<=u.top+c&&(o=!0);if(!o)return}f.isHorizontal()?(37!==t&&39!==t||(n.preventDefault?n.preventDefault():n.returnValue=!1),(39===t&&!f.rtl||37===t&&f.rtl)&&f.slideNext(),(37===t&&!f.rtl||39===t&&f.rtl)&&f.slidePrev()):(38!==t&&40!==t||(n.preventDefault?n.preventDefault():n.returnValue=!1),40===t&&f.slideNext(),38===t&&f.slidePrev());f.emit("onKeyPress",f,t)}}function kt(n){var u=0,t=0,i=0,r=0;return"detail"in n&&(t=n.detail),"wheelDelta"in n&&(t=-n.wheelDelta/120),"wheelDeltaY"in n&&(t=-n.wheelDeltaY/120),"wheelDeltaX"in n&&(u=-n.wheelDeltaX/120),"axis"in n&&n.axis===n.HORIZONTAL_AXIS&&(u=t,t=0),i=10*u,r=10*t,"deltaY"in n&&(r=n.deltaY),"deltaX"in n&&(i=n.deltaX),(i||r)&&n.deltaMode&&(1===n.deltaMode?(i*=40,r*=40):(i*=800,r*=800)),i&&!u&&(u=i<1?-1:1),r&&!t&&(t=r<1?-1:1),{spinX:u,spinY:t,pixelX:i,pixelY:r}}function pt(n){n.originalEvent&&(n=n.originalEvent);var i=0,u=f.rtl?-1:1,t=kt(n);if(f.params.mousewheelForceToAxis)if(f.isHorizontal()){if(!(Math.abs(t.pixelX)>Math.abs(t.pixelY)))return;i=t.pixelX*u}else{if(!(Math.abs(t.pixelY)>Math.abs(t.pixelX)))return;i=t.pixelY}else i=Math.abs(t.pixelX)>Math.abs(t.pixelY)?-t.pixelX*u:-t.pixelY;if(0!==i){if(f.params.mousewheelInvert&&(i=-i),f.params.freeMode){var r=f.getWrapperTranslate()+i*f.params.mousewheelSensitivity,e=f.isBeginning,o=f.isEnd;if(r>=f.minTranslate()&&(r=f.minTranslate()),r<=f.maxTranslate()&&(r=f.maxTranslate()),f.setWrapperTransition(0),f.setWrapperTranslate(r),f.updateProgress(),f.updateActiveIndex(),(!e&&f.isBeginning||!o&&f.isEnd)&&f.updateClasses(),f.params.freeModeSticky?(clearTimeout(f.mousewheel.timeout),f.mousewheel.timeout=setTimeout(function(){f.slideReset()},300)):f.params.lazyLoading&&f.lazy&&f.lazy.load(),f.emit("onScroll",f,n),f.params.autoplay&&f.params.autoplayDisableOnInteraction&&f.stopAutoplay(),0===r||r===f.maxTranslate())return}else{if((new window.Date).getTime()-f.mousewheel.lastScrollTime>60)if(i<0)if(f.isEnd&&!f.params.loop||f.animating){if(f.params.mousewheelReleaseOnEdges)return!0}else f.slideNext(),f.emit("onScroll",f,n);else if(f.isBeginning&&!f.params.loop||f.animating){if(f.params.mousewheelReleaseOnEdges)return!0}else f.slidePrev(),f.emit("onScroll",f,n);f.mousewheel.lastScrollTime=(new window.Date).getTime()}return n.preventDefault?n.preventDefault():n.returnValue=!1,!1}}function wt(t,i){t=n(t);var e,r,u,o=f.rtl?-1:1;e=t.attr("data-swiper-parallax")||"0";r=t.attr("data-swiper-parallax-x");u=t.attr("data-swiper-parallax-y");r||u?(r=r||"0",u=u||"0"):f.isHorizontal()?(r=e,u="0"):(u=e,r="0");r=r.indexOf("%")>=0?parseInt(r,10)*i*o+"%":r*i*o+"px";u=u.indexOf("%")>=0?parseInt(u,10)*i+"%":u*i+"px";t.transform("translate3d("+r+", "+u+",0px)")}function ot(n){return 0!==n.indexOf("on")&&(n=n[0]!==n[0].toUpperCase()?"on"+n[0].toUpperCase()+n.substring(1):"on"+n),n}var y,bt,p,o,st,h,k,f,ht,it,rt,at,vt;if(!(this instanceof t))return new t(i,u);y={direction:"horizontal",touchEventsTarget:"container",initialSlide:0,speed:300,autoplay:!1,autoplayDisableOnInteraction:!0,autoplayStopOnLast:!1,iOSEdgeSwipeDetection:!1,iOSEdgeSwipeThreshold:20,freeMode:!1,freeModeMomentum:!0,freeModeMomentumRatio:1,freeModeMomentumBounce:!0,freeModeMomentumBounceRatio:1,freeModeMomentumVelocityRatio:1,freeModeSticky:!1,freeModeMinimumVelocity:.02,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",coverflow:{rotate:50,stretch:0,depth:100,modifier:1,slideShadows:!0},flip:{slideShadows:!0,limitRotation:!0},cube:{slideShadows:!0,shadow:!0,shadowOffset:20,shadowScale:.94},fade:{crossFade:!1},parallax:!1,zoom:!1,zoomMax:3,zoomMin:1,zoomToggle:!0,scrollbar:null,scrollbarHide:!0,scrollbarDraggable:!1,scrollbarSnapOnRelease:!1,keyboardControl:!1,mousewheelControl:!1,mousewheelReleaseOnEdges:!1,mousewheelInvert:!1,mousewheelForceToAxis:!1,mousewheelSensitivity:1,mousewheelEventsTarged:"container",hashnav:!1,hashnavWatchState:!1,history:!1,replaceState:!1,breakpoints:void 0,spaceBetween:0,slidesPerView:1,slidesPerColumn:1,slidesPerColumnFill:"column",slidesPerGroup:1,centeredSlides:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,onlyExternal:!1,threshold:0,touchMoveStopPropagation:!0,touchReleaseOnEdges:!1,uniqueNavElements:!0,pagination:null,paginationElement:"span",paginationClickable:!1,paginationHide:!1,paginationBulletRender:null,paginationProgressRender:null,paginationFractionRender:null,paginationCustomRender:null,paginationType:"bullets",resistance:!0,resistanceRatio:.85,nextButton:null,prevButton:null,watchSlidesProgress:!1,watchSlidesVisibility:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,lazyLoading:!1,lazyLoadingInPrevNext:!1,lazyLoadingInPrevNextAmount:1,lazyLoadingOnTransitionStart:!1,preloadImages:!0,updateOnImagesReady:!0,loop:!1,loopAdditionalSlides:0,loopedSlides:null,control:void 0,controlInverse:!1,controlBy:"slide",normalizeSlideIndex:!0,allowSwipeToPrev:!0,allowSwipeToNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",passiveListeners:!0,containerModifierClass:"swiper-container-",slideClass:"swiper-slide",slideActiveClass:"swiper-slide-active",slideDuplicateActiveClass:"swiper-slide-duplicate-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",slideNextClass:"swiper-slide-next",slideDuplicateNextClass:"swiper-slide-duplicate-next",slidePrevClass:"swiper-slide-prev",slideDuplicatePrevClass:"swiper-slide-duplicate-prev",wrapperClass:"swiper-wrapper",bulletClass:"swiper-pagination-bullet",bulletActiveClass:"swiper-pagination-bullet-active",buttonDisabledClass:"swiper-button-disabled",paginationCurrentClass:"swiper-pagination-current",paginationTotalClass:"swiper-pagination-total",paginationHiddenClass:"swiper-pagination-hidden",paginationProgressbarClass:"swiper-pagination-progressbar",paginationClickableClass:"swiper-pagination-clickable",paginationModifierClass:"swiper-pagination-",lazyLoadingClass:"swiper-lazy",lazyStatusLoadingClass:"swiper-lazy-loading",lazyStatusLoadedClass:"swiper-lazy-loaded",lazyPreloaderClass:"swiper-lazy-preloader",notificationClass:"swiper-notification",preloaderClass:"preloader",zoomContainerClass:"swiper-zoom-container",observer:!1,observeParents:!1,a11y:!1,prevSlideMessage:"Previous slide",nextSlideMessage:"Next slide",firstSlideMessage:"This is the first slide",lastSlideMessage:"This is the last slide",paginationBulletMessage:"Go to slide {{index}}",runCallbacksOnInit:!0};bt=u&&u.virtualTranslate;u=u||{};p={};for(o in u)if("object"!=typeof u[o]||null===u[o]||u[o].nodeType||u[o]===window||u[o]===document||void 0!==r&&u[o]instanceof r||"undefined"!=typeof jQuery&&u[o]instanceof jQuery)p[o]=u[o];else{p[o]={};for(st in u[o])p[o][st]=u[o][st]}for(h in y)if(void 0===u[h])u[h]=y[h];else if("object"==typeof u[h])for(k in y[h])void 0===u[h][k]&&(u[h][k]=y[h][k]);if(f=this,f.params=u,f.originalParams=p,f.classNames=[],void 0!==n&&void 0!==r&&(n=r),(void 0!==n||(n=void 0===r?window.Dom7||window.Zepto||window.jQuery:r))&&(f.$=n,f.currentBreakpoint=void 0,f.getActiveBreakpoint=function(){var n,i,t,r;if(!f.params.breakpoints)return!1;i=!1;t=[];for(n in f.params.breakpoints)f.params.breakpoints.hasOwnProperty(n)&&t.push(n);for(t.sort(function(n,t){return parseInt(n,10)>parseInt(t,10)}),r=0;r<t.length;r++)(n=t[r])>=window.innerWidth&&!i&&(i=n);return i||"max"},f.setBreakpoint=function(){var n=f.getActiveBreakpoint(),t,r,i;if(n&&f.currentBreakpoint!==n){t=n in f.params.breakpoints?f.params.breakpoints[n]:f.originalParams;r=f.params.loop&&t.slidesPerView!==f.params.slidesPerView;for(i in t)f.params[i]=t[i];f.currentBreakpoint=n;r&&f.destroyLoop&&f.reLoop(!0)}},f.params.breakpoints&&f.setBreakpoint(),f.container=n(i),0!==f.container.length)){if(f.container.length>1)return ht=[],f.container.each(function(){ht.push(new t(this,u))}),ht;f.container[0].swiper=f;f.container.data("swiper",f);f.classNames.push(f.params.containerModifierClass+f.params.direction);f.params.freeMode&&f.classNames.push(f.params.containerModifierClass+"free-mode");f.support.flexbox||(f.classNames.push(f.params.containerModifierClass+"no-flexbox"),f.params.slidesPerColumn=1);f.params.autoHeight&&f.classNames.push(f.params.containerModifierClass+"autoheight");(f.params.parallax||f.params.watchSlidesVisibility)&&(f.params.watchSlidesProgress=!0);f.params.touchReleaseOnEdges&&(f.params.resistanceRatio=0);["cube","coverflow","flip"].indexOf(f.params.effect)>=0&&(f.support.transforms3d?(f.params.watchSlidesProgress=!0,f.classNames.push(f.params.containerModifierClass+"3d")):f.params.effect="slide");"slide"!==f.params.effect&&f.classNames.push(f.params.containerModifierClass+f.params.effect);"cube"===f.params.effect&&(f.params.resistanceRatio=0,f.params.slidesPerView=1,f.params.slidesPerColumn=1,f.params.slidesPerGroup=1,f.params.centeredSlides=!1,f.params.spaceBetween=0,f.params.virtualTranslate=!0);"fade"!==f.params.effect&&"flip"!==f.params.effect||(f.params.slidesPerView=1,f.params.slidesPerColumn=1,f.params.slidesPerGroup=1,f.params.watchSlidesProgress=!0,f.params.spaceBetween=0,void 0===bt&&(f.params.virtualTranslate=!0));f.params.grabCursor&&f.support.touch&&(f.params.grabCursor=!1);f.wrapper=f.container.children("."+f.params.wrapperClass);f.params.pagination&&(f.paginationContainer=n(f.params.pagination),f.params.uniqueNavElements&&"string"==typeof f.params.pagination&&f.paginationContainer.length>1&&1===f.container.find(f.params.pagination).length&&(f.paginationContainer=f.container.find(f.params.pagination)),"bullets"===f.params.paginationType&&f.params.paginationClickable?f.paginationContainer.addClass(f.params.paginationModifierClass+"clickable"):f.params.paginationClickable=!1,f.paginationContainer.addClass(f.params.paginationModifierClass+f.params.paginationType));(f.params.nextButton||f.params.prevButton)&&(f.params.nextButton&&(f.nextButton=n(f.params.nextButton),f.params.uniqueNavElements&&"string"==typeof f.params.nextButton&&f.nextButton.length>1&&1===f.container.find(f.params.nextButton).length&&(f.nextButton=f.container.find(f.params.nextButton))),f.params.prevButton&&(f.prevButton=n(f.params.prevButton),f.params.uniqueNavElements&&"string"==typeof f.params.prevButton&&f.prevButton.length>1&&1===f.container.find(f.params.prevButton).length&&(f.prevButton=f.container.find(f.params.prevButton))));f.isHorizontal=function(){return"horizontal"===f.params.direction};f.rtl=f.isHorizontal()&&("rtl"===f.container[0].dir.toLowerCase()||"rtl"===f.container.css("direction"));f.rtl&&f.classNames.push(f.params.containerModifierClass+"rtl");f.rtl&&(f.wrongRTL="-webkit-box"===f.wrapper.css("display"));f.params.slidesPerColumn>1&&f.classNames.push(f.params.containerModifierClass+"multirow");f.device.android&&f.classNames.push(f.params.containerModifierClass+"android");f.container.addClass(f.classNames.join(" "));f.translate=0;f.progress=0;f.velocity=0;f.lockSwipeToNext=function(){f.params.allowSwipeToNext=!1;f.params.allowSwipeToPrev===!1&&f.params.grabCursor&&f.unsetGrabCursor()};f.lockSwipeToPrev=function(){f.params.allowSwipeToPrev=!1;f.params.allowSwipeToNext===!1&&f.params.grabCursor&&f.unsetGrabCursor()};f.lockSwipes=function(){f.params.allowSwipeToNext=f.params.allowSwipeToPrev=!1;f.params.grabCursor&&f.unsetGrabCursor()};f.unlockSwipeToNext=function(){f.params.allowSwipeToNext=!0;f.params.allowSwipeToPrev===!0&&f.params.grabCursor&&f.setGrabCursor()};f.unlockSwipeToPrev=function(){f.params.allowSwipeToPrev=!0;f.params.allowSwipeToNext===!0&&f.params.grabCursor&&f.setGrabCursor()};f.unlockSwipes=function(){f.params.allowSwipeToNext=f.params.allowSwipeToPrev=!0;f.params.grabCursor&&f.setGrabCursor()};f.setGrabCursor=function(n){f.container[0].style.cursor="move";f.container[0].style.cursor=n?"-webkit-grabbing":"-webkit-grab";f.container[0].style.cursor=n?"-moz-grabbin":"-moz-grab";f.container[0].style.cursor=n?"grabbing":"grab"};f.unsetGrabCursor=function(){f.container[0].style.cursor=""};f.params.grabCursor&&f.setGrabCursor();f.imagesToLoad=[];f.imagesLoaded=0;f.loadImage=function(n,t,i,r,u,f){function o(){f&&f()}var e;n.complete&&u?o():t?(e=new window.Image,e.onload=o,e.onerror=o,r&&(e.sizes=r),i&&(e.srcset=i),t&&(e.src=t)):o()};f.preloadImages=function(){function t(){void 0!==f&&null!==f&&f&&(void 0!==f.imagesLoaded&&f.imagesLoaded++,f.imagesLoaded===f.imagesToLoad.length&&(f.params.updateOnImagesReady&&f.update(),f.emit("onImagesReady",f)))}f.imagesToLoad=f.container.find("img");for(var n=0;n<f.imagesToLoad.length;n++)f.loadImage(f.imagesToLoad[n],f.imagesToLoad[n].currentSrc||f.imagesToLoad[n].getAttribute("src"),f.imagesToLoad[n].srcset||f.imagesToLoad[n].getAttribute("srcset"),f.imagesToLoad[n].sizes||f.imagesToLoad[n].getAttribute("sizes"),!0,t)};f.autoplayTimeoutId=void 0;f.autoplaying=!1;f.autoplayPaused=!1;f.startAutoplay=function(){return void 0===f.autoplayTimeoutId&&!!f.params.autoplay&&!f.autoplaying&&(f.autoplaying=!0,f.emit("onAutoplayStart",f),void ut())};f.stopAutoplay=function(){f.autoplayTimeoutId&&(f.autoplayTimeoutId&&clearTimeout(f.autoplayTimeoutId),f.autoplaying=!1,f.autoplayTimeoutId=void 0,f.emit("onAutoplayStop",f))};f.pauseAutoplay=function(n){f.autoplayPaused||(f.autoplayTimeoutId&&clearTimeout(f.autoplayTimeoutId),f.autoplayPaused=!0,0===n?(f.autoplayPaused=!1,ut()):f.wrapper.transitionEnd(function(){f&&(f.autoplayPaused=!1,f.autoplaying?ut():f.stopAutoplay())}))};f.minTranslate=function(){return-f.snapGrid[0]};f.maxTranslate=function(){return-f.snapGrid[f.snapGrid.length-1]};f.updateAutoHeight=function(){var n,t=[],i=0,r,u;if("auto"!==f.params.slidesPerView&&f.params.slidesPerView>1)for(n=0;n<Math.ceil(f.params.slidesPerView);n++){if(r=f.activeIndex+n,r>f.slides.length)break;t.push(f.slides.eq(r)[0])}else t.push(f.slides.eq(f.activeIndex)[0]);for(n=0;n<t.length;n++)void 0!==t[n]&&(u=t[n].offsetHeight,i=u>i?u:i);i&&f.wrapper.css("height",i+"px")};f.updateContainerSize=function(){var n,t;n=void 0!==f.params.width?f.params.width:f.container[0].clientWidth;t=void 0!==f.params.height?f.params.height:f.container[0].clientHeight;0===n&&f.isHorizontal()||0===t&&!f.isHorizontal()||(n=n-parseInt(f.container.css("padding-left"),10)-parseInt(f.container.css("padding-right"),10),t=t-parseInt(f.container.css("padding-top"),10)-parseInt(f.container.css("padding-bottom"),10),f.width=n,f.height=t,f.size=f.isHorizontal()?f.width:f.height)};f.updateSlidesSize=function(){var o,h,c,e,u,l;f.slides=f.wrapper.children("."+f.params.slideClass);f.snapGrid=[];f.slidesGrid=[];f.slidesSizesGrid=[];var n,i=f.params.spaceBetween,r=-f.params.slidesOffsetBefore,v=0,y=0;if(void 0!==f.size){"string"==typeof i&&i.indexOf("%")>=0&&(i=parseFloat(i.replace("%",""))/100*f.size);f.virtualSize=-i;f.rtl?f.slides.css({marginLeft:"",marginTop:""}):f.slides.css({marginRight:"",marginBottom:""});f.params.slidesPerColumn>1&&(o=Math.floor(f.slides.length/f.params.slidesPerColumn)===f.slides.length/f.params.slidesPerColumn?f.slides.length:Math.ceil(f.slides.length/f.params.slidesPerColumn)*f.params.slidesPerColumn,"auto"!==f.params.slidesPerView&&"row"===f.params.slidesPerColumnFill&&(o=Math.max(o,f.params.slidesPerView*f.params.slidesPerColumn)));var t,s=f.params.slidesPerColumn,a=o/s,p=a-(f.params.slidesPerColumn*a-f.slides.length);for(n=0;n<f.slides.length;n++)t=0,h=f.slides.eq(n),f.params.slidesPerColumn>1&&("column"===f.params.slidesPerColumnFill?(e=Math.floor(n/s),u=n-e*s,(e>p||e===p&&u===s-1)&&++u>=s&&(u=0,e++),c=e+u*o/s,h.css({"-webkit-box-ordinal-group":c,"-moz-box-ordinal-group":c,"-ms-flex-order":c,"-webkit-order":c,order:c})):(u=Math.floor(n/a),e=n-u*a),h.css("margin-"+(f.isHorizontal()?"top":"left"),0!==u&&f.params.spaceBetween&&f.params.spaceBetween+"px").attr("data-swiper-column",e).attr("data-swiper-row",u)),"none"!==h.css("display")&&("auto"===f.params.slidesPerView?(t=f.isHorizontal()?h.outerWidth(!0):h.outerHeight(!0),f.params.roundLengths&&(t=b(t))):(t=(f.size-(f.params.slidesPerView-1)*i)/f.params.slidesPerView,f.params.roundLengths&&(t=b(t)),f.isHorizontal()?f.slides[n].style.width=t+"px":f.slides[n].style.height=t+"px"),f.slides[n].swiperSlideSize=t,f.slidesSizesGrid.push(t),f.params.centeredSlides?(r=r+t/2+v/2+i,0===v&&0!==n&&(r=r-f.size/2-i),0===n&&(r=r-f.size/2-i),Math.abs(r)<.001&&(r=0),y%f.params.slidesPerGroup==0&&f.snapGrid.push(r),f.slidesGrid.push(r)):(y%f.params.slidesPerGroup==0&&f.snapGrid.push(r),f.slidesGrid.push(r),r=r+t+i),f.virtualSize+=t+i,v=t,y++);if(f.virtualSize=Math.max(f.virtualSize,f.size)+f.params.slidesOffsetAfter,f.rtl&&f.wrongRTL&&("slide"===f.params.effect||"coverflow"===f.params.effect)&&f.wrapper.css({width:f.virtualSize+f.params.spaceBetween+"px"}),f.support.flexbox&&!f.params.setWrapperSize||(f.isHorizontal()?f.wrapper.css({width:f.virtualSize+f.params.spaceBetween+"px"}):f.wrapper.css({height:f.virtualSize+f.params.spaceBetween+"px"})),f.params.slidesPerColumn>1&&(f.virtualSize=(t+f.params.spaceBetween)*o,f.virtualSize=Math.ceil(f.virtualSize/f.params.slidesPerColumn)-f.params.spaceBetween,f.isHorizontal()?f.wrapper.css({width:f.virtualSize+f.params.spaceBetween+"px"}):f.wrapper.css({height:f.virtualSize+f.params.spaceBetween+"px"}),f.params.centeredSlides)){for(l=[],n=0;n<f.snapGrid.length;n++)f.snapGrid[n]<f.virtualSize+f.snapGrid[0]&&l.push(f.snapGrid[n]);f.snapGrid=l}if(!f.params.centeredSlides){for(l=[],n=0;n<f.snapGrid.length;n++)f.snapGrid[n]<=f.virtualSize-f.size&&l.push(f.snapGrid[n]);f.snapGrid=l;Math.floor(f.virtualSize-f.size)-Math.floor(f.snapGrid[f.snapGrid.length-1])>1&&f.snapGrid.push(f.virtualSize-f.size)}0===f.snapGrid.length&&(f.snapGrid=[0]);0!==f.params.spaceBetween&&(f.isHorizontal()?f.rtl?f.slides.css({marginLeft:i+"px"}):f.slides.css({marginRight:i+"px"}):f.slides.css({marginBottom:i+"px"}));f.params.watchSlidesProgress&&f.updateSlidesOffset()}};f.updateSlidesOffset=function(){for(var n=0;n<f.slides.length;n++)f.slides[n].swiperSlideOffset=f.isHorizontal()?f.slides[n].offsetLeft:f.slides[n].offsetTop};f.currentSlidesPerView=function(){var n,t,r=1,u,i;if(f.params.centeredSlides){for(i=f.slides[f.activeIndex].swiperSlideSize,n=f.activeIndex+1;n<f.slides.length;n++)f.slides[n]&&!u&&(i+=f.slides[n].swiperSlideSize,r++,i>f.size&&(u=!0));for(t=f.activeIndex-1;t>=0;t--)f.slides[t]&&!u&&(i+=f.slides[t].swiperSlideSize,r++,i>f.size&&(u=!0))}else for(n=f.activeIndex+1;n<f.slides.length;n++)f.slidesGrid[n]-f.slidesGrid[f.activeIndex]<f.size&&r++;return r};f.updateSlidesProgress=function(n){var u,t,i,o,r,e;if(void 0===n&&(n=f.translate||0),0!==f.slides.length)for(void 0===f.slides[0].swiperSlideOffset&&f.updateSlidesOffset(),u=-n,f.rtl&&(u=n),f.slides.removeClass(f.params.slideVisibleClass),t=0;t<f.slides.length;t++)i=f.slides[t],o=(u+(f.params.centeredSlides?f.minTranslate():0)-i.swiperSlideOffset)/(i.swiperSlideSize+f.params.spaceBetween),f.params.watchSlidesVisibility&&(r=-(u-i.swiperSlideOffset),e=r+f.slidesSizesGrid[t],(r>=0&&r<f.size||e>0&&e<=f.size||r<=0&&e>=f.size)&&f.slides.eq(t).addClass(f.params.slideVisibleClass)),i.progress=f.rtl?-o:o};f.updateProgress=function(n){void 0===n&&(n=f.translate||0);var t=f.maxTranslate()-f.minTranslate(),i=f.isBeginning,r=f.isEnd;0===t?(f.progress=0,f.isBeginning=f.isEnd=!0):(f.progress=(n-f.minTranslate())/t,f.isBeginning=f.progress<=0,f.isEnd=f.progress>=1);f.isBeginning&&!i&&f.emit("onReachBeginning",f);f.isEnd&&!r&&f.emit("onReachEnd",f);f.params.watchSlidesProgress&&f.updateSlidesProgress(n);f.emit("onProgress",f,f.progress)};f.updateActiveIndex=function(){for(var t,r,i=f.rtl?f.translate:-f.translate,n=0;n<f.slidesGrid.length;n++)void 0!==f.slidesGrid[n+1]?i>=f.slidesGrid[n]&&i<f.slidesGrid[n+1]-(f.slidesGrid[n+1]-f.slidesGrid[n])/2?t=n:i>=f.slidesGrid[n]&&i<f.slidesGrid[n+1]&&(t=n+1):i>=f.slidesGrid[n]&&(t=n);f.params.normalizeSlideIndex&&(t<0||void 0===t)&&(t=0);r=Math.floor(t/f.params.slidesPerGroup);r>=f.snapGrid.length&&(r=f.snapGrid.length-1);t!==f.activeIndex&&(f.snapIndex=r,f.previousIndex=f.activeIndex,f.activeIndex=t,f.updateClasses(),f.updateRealIndex())};f.updateRealIndex=function(){f.realIndex=parseInt(f.slides.eq(f.activeIndex).attr("data-swiper-slide-index")||f.activeIndex,10)};f.updateClasses=function(){var o,i,r,t,e;if(f.slides.removeClass(f.params.slideActiveClass+" "+f.params.slideNextClass+" "+f.params.slidePrevClass+" "+f.params.slideDuplicateActiveClass+" "+f.params.slideDuplicateNextClass+" "+f.params.slideDuplicatePrevClass),o=f.slides.eq(f.activeIndex),o.addClass(f.params.slideActiveClass),u.loop&&(o.hasClass(f.params.slideDuplicateClass)?f.wrapper.children("."+f.params.slideClass+":not(."+f.params.slideDuplicateClass+')[data-swiper-slide-index="'+f.realIndex+'"]').addClass(f.params.slideDuplicateActiveClass):f.wrapper.children("."+f.params.slideClass+"."+f.params.slideDuplicateClass+'[data-swiper-slide-index="'+f.realIndex+'"]').addClass(f.params.slideDuplicateActiveClass)),i=o.next("."+f.params.slideClass).addClass(f.params.slideNextClass),f.params.loop&&0===i.length&&(i=f.slides.eq(0),i.addClass(f.params.slideNextClass)),r=o.prev("."+f.params.slideClass).addClass(f.params.slidePrevClass),f.params.loop&&0===r.length&&(r=f.slides.eq(-1),r.addClass(f.params.slidePrevClass)),u.loop&&(i.hasClass(f.params.slideDuplicateClass)?f.wrapper.children("."+f.params.slideClass+":not(."+f.params.slideDuplicateClass+')[data-swiper-slide-index="'+i.attr("data-swiper-slide-index")+'"]').addClass(f.params.slideDuplicateNextClass):f.wrapper.children("."+f.params.slideClass+"."+f.params.slideDuplicateClass+'[data-swiper-slide-index="'+i.attr("data-swiper-slide-index")+'"]').addClass(f.params.slideDuplicateNextClass),r.hasClass(f.params.slideDuplicateClass)?f.wrapper.children("."+f.params.slideClass+":not(."+f.params.slideDuplicateClass+')[data-swiper-slide-index="'+r.attr("data-swiper-slide-index")+'"]').addClass(f.params.slideDuplicatePrevClass):f.wrapper.children("."+f.params.slideClass+"."+f.params.slideDuplicateClass+'[data-swiper-slide-index="'+r.attr("data-swiper-slide-index")+'"]').addClass(f.params.slideDuplicatePrevClass)),f.paginationContainer&&f.paginationContainer.length>0){if(e=f.params.loop?Math.ceil((f.slides.length-2*f.loopedSlides)/f.params.slidesPerGroup):f.snapGrid.length,f.params.loop?(t=Math.ceil((f.activeIndex-f.loopedSlides)/f.params.slidesPerGroup),t>f.slides.length-1-2*f.loopedSlides&&(t-=f.slides.length-2*f.loopedSlides),t>e-1&&(t-=e),t<0&&"bullets"!==f.params.paginationType&&(t=e+t)):t=void 0!==f.snapIndex?f.snapIndex:f.activeIndex||0,"bullets"===f.params.paginationType&&f.bullets&&f.bullets.length>0&&(f.bullets.removeClass(f.params.bulletActiveClass),f.paginationContainer.length>1?f.bullets.each(function(){n(this).index()===t&&n(this).addClass(f.params.bulletActiveClass)}):f.bullets.eq(t).addClass(f.params.bulletActiveClass)),"fraction"===f.params.paginationType&&(f.paginationContainer.find("."+f.params.paginationCurrentClass).text(t+1),f.paginationContainer.find("."+f.params.paginationTotalClass).text(e)),"progress"===f.params.paginationType){var s=(t+1)/e,h=s,c=1;f.isHorizontal()||(c=s,h=1);f.paginationContainer.find("."+f.params.paginationProgressbarClass).transform("translate3d(0,0,0) scaleX("+h+") scaleY("+c+")").transition(f.params.speed)}"custom"===f.params.paginationType&&f.params.paginationCustomRender&&(f.paginationContainer.html(f.params.paginationCustomRender(f,t+1,e)),f.emit("onPaginationRendered",f,f.paginationContainer[0]))}f.params.loop||(f.params.prevButton&&f.prevButton&&f.prevButton.length>0&&(f.isBeginning?(f.prevButton.addClass(f.params.buttonDisabledClass),f.params.a11y&&f.a11y&&f.a11y.disable(f.prevButton)):(f.prevButton.removeClass(f.params.buttonDisabledClass),f.params.a11y&&f.a11y&&f.a11y.enable(f.prevButton))),f.params.nextButton&&f.nextButton&&f.nextButton.length>0&&(f.isEnd?(f.nextButton.addClass(f.params.buttonDisabledClass),f.params.a11y&&f.a11y&&f.a11y.disable(f.nextButton)):(f.nextButton.removeClass(f.params.buttonDisabledClass),f.params.a11y&&f.a11y&&f.a11y.enable(f.nextButton))))};f.updatePagination=function(){var n,i,t;if(f.params.pagination&&f.paginationContainer&&f.paginationContainer.length>0){if(n="","bullets"===f.params.paginationType){for(i=f.params.loop?Math.ceil((f.slides.length-2*f.loopedSlides)/f.params.slidesPerGroup):f.snapGrid.length,t=0;t<i;t++)n+=f.params.paginationBulletRender?f.params.paginationBulletRender(f,t,f.params.bulletClass):"<"+f.params.paginationElement+' class="'+f.params.bulletClass+'"><\/'+f.params.paginationElement+">";f.paginationContainer.html(n);f.bullets=f.paginationContainer.find("."+f.params.bulletClass);f.params.paginationClickable&&f.params.a11y&&f.a11y&&f.a11y.initPagination()}"fraction"===f.params.paginationType&&(n=f.params.paginationFractionRender?f.params.paginationFractionRender(f,f.params.paginationCurrentClass,f.params.paginationTotalClass):'<span class="'+f.params.paginationCurrentClass+'"><\/span> / <span class="'+f.params.paginationTotalClass+'"><\/span>',f.paginationContainer.html(n));"progress"===f.params.paginationType&&(n=f.params.paginationProgressRender?f.params.paginationProgressRender(f,f.params.paginationProgressbarClass):'<span class="'+f.params.paginationProgressbarClass+'"><\/span>',f.paginationContainer.html(n));"custom"!==f.params.paginationType&&f.emit("onPaginationRendered",f,f.paginationContainer[0])}};f.update=function(n){function t(){f.rtl;f.translate;i=Math.min(Math.max(f.translate,f.maxTranslate()),f.minTranslate());f.setWrapperTranslate(i);f.updateActiveIndex();f.updateClasses()}if(f){f.updateContainerSize();f.updateSlidesSize();f.updateProgress();f.updatePagination();f.updateClasses();f.params.scrollbar&&f.scrollbar&&f.scrollbar.set();var i;n?(f.controller&&f.controller.spline&&(f.controller.spline=void 0),f.params.freeMode?(t(),f.params.autoHeight&&f.updateAutoHeight()):(("auto"===f.params.slidesPerView||f.params.slidesPerView>1)&&f.isEnd&&!f.params.centeredSlides?f.slideTo(f.slides.length-1,0,!1,!0):f.slideTo(f.activeIndex,0,!1,!0))||t()):f.params.autoHeight&&f.updateAutoHeight()}};f.onResize=function(n){var i,r,t,u;f.params.onBeforeResize&&f.params.onBeforeResize(f);f.params.breakpoints&&f.setBreakpoint();i=f.params.allowSwipeToPrev;r=f.params.allowSwipeToNext;f.params.allowSwipeToPrev=f.params.allowSwipeToNext=!0;f.updateContainerSize();f.updateSlidesSize();("auto"===f.params.slidesPerView||f.params.freeMode||n)&&f.updatePagination();f.params.scrollbar&&f.scrollbar&&f.scrollbar.set();f.controller&&f.controller.spline&&(f.controller.spline=void 0);t=!1;f.params.freeMode?(u=Math.min(Math.max(f.translate,f.maxTranslate()),f.minTranslate()),f.setWrapperTranslate(u),f.updateActiveIndex(),f.updateClasses(),f.params.autoHeight&&f.updateAutoHeight()):(f.updateClasses(),t=("auto"===f.params.slidesPerView||f.params.slidesPerView>1)&&f.isEnd&&!f.params.centeredSlides?f.slideTo(f.slides.length-1,0,!1,!0):f.slideTo(f.activeIndex,0,!1,!0));f.params.lazyLoading&&!t&&f.lazy&&f.lazy.load();f.params.allowSwipeToPrev=i;f.params.allowSwipeToNext=r;f.params.onAfterResize&&f.params.onAfterResize(f)};f.touchEventsDesktop={start:"mousedown",move:"mousemove",end:"mouseup"};window.navigator.pointerEnabled?f.touchEventsDesktop={start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled&&(f.touchEventsDesktop={start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"});f.touchEvents={start:f.support.touch||!f.params.simulateTouch?"touchstart":f.touchEventsDesktop.start,move:f.support.touch||!f.params.simulateTouch?"touchmove":f.touchEventsDesktop.move,end:f.support.touch||!f.params.simulateTouch?"touchend":f.touchEventsDesktop.end};(window.navigator.pointerEnabled||window.navigator.msPointerEnabled)&&("container"===f.params.touchEventsTarget?f.container:f.wrapper).addClass("swiper-wp8-"+f.params.direction);f.initEvents=function(n){var r=n?"off":"on",t=n?"removeEventListener":"addEventListener",i="container"===f.params.touchEventsTarget?f.container[0]:f.wrapper[0],s=f.support.touch?i:document,e=!!f.params.nested,o;f.browser.ie?(i[t](f.touchEvents.start,f.onTouchStart,!1),s[t](f.touchEvents.move,f.onTouchMove,e),s[t](f.touchEvents.end,f.onTouchEnd,!1)):(f.support.touch&&(o=!("touchstart"!==f.touchEvents.start||!f.support.passiveListener||!f.params.passiveListeners)&&{passive:!0,capture:!1},i[t](f.touchEvents.start,f.onTouchStart,o),i[t](f.touchEvents.move,f.onTouchMove,e),i[t](f.touchEvents.end,f.onTouchEnd,o)),(u.simulateTouch&&!f.device.ios&&!f.device.android||u.simulateTouch&&!f.support.touch&&f.device.ios)&&(i[t]("mousedown",f.onTouchStart,!1),document[t]("mousemove",f.onTouchMove,e),document[t]("mouseup",f.onTouchEnd,!1)));window[t]("resize",f.onResize);f.params.nextButton&&f.nextButton&&f.nextButton.length>0&&(f.nextButton[r]("click",f.onClickNext),f.params.a11y&&f.a11y&&f.nextButton[r]("keydown",f.a11y.onEnterKey));f.params.prevButton&&f.prevButton&&f.prevButton.length>0&&(f.prevButton[r]("click",f.onClickPrev),f.params.a11y&&f.a11y&&f.prevButton[r]("keydown",f.a11y.onEnterKey));f.params.pagination&&f.params.paginationClickable&&(f.paginationContainer[r]("click","."+f.params.bulletClass,f.onClickIndex),f.params.a11y&&f.a11y&&f.paginationContainer[r]("keydown","."+f.params.bulletClass,f.a11y.onEnterKey));(f.params.preventClicks||f.params.preventClicksPropagation)&&i[t]("click",f.preventClicks,!0)};f.attachEvents=function(){f.initEvents()};f.detachEvents=function(){f.initEvents(!0)};f.allowClick=!0;f.preventClicks=function(n){f.allowClick||(f.params.preventClicks&&n.preventDefault(),f.params.preventClicksPropagation&&f.animating&&(n.stopPropagation(),n.stopImmediatePropagation()))};f.onClickNext=function(n){n.preventDefault();f.isEnd&&!f.params.loop||f.slideNext()};f.onClickPrev=function(n){n.preventDefault();f.isBeginning&&!f.params.loop||f.slidePrev()};f.onClickIndex=function(t){t.preventDefault();var i=n(this).index()*f.params.slidesPerGroup;f.params.loop&&(i+=f.loopedSlides);f.slideTo(i)};f.updateClickedSlide=function(t){var r=ft(t,"."+f.params.slideClass),s=!1,u,o,i,e;if(r)for(u=0;u<f.slides.length;u++)f.slides[u]===r&&(s=!0);if(!r||!s)return f.clickedSlide=void 0,void(f.clickedIndex=void 0);if(f.clickedSlide=r,f.clickedIndex=n(r).index(),f.params.slideToClickedSlide&&void 0!==f.clickedIndex&&f.clickedIndex!==f.activeIndex)if(i=f.clickedIndex,e="auto"===f.params.slidesPerView?f.currentSlidesPerView():f.params.slidesPerView,f.params.loop){if(f.animating)return;o=parseInt(n(f.clickedSlide).attr("data-swiper-slide-index"),10);f.params.centeredSlides?i<f.loopedSlides-e/2||i>f.slides.length-f.loopedSlides+e/2?(f.fixLoop(),i=f.wrapper.children("."+f.params.slideClass+'[data-swiper-slide-index="'+o+'"]:not(.'+f.params.slideDuplicateClass+")").eq(0).index(),setTimeout(function(){f.slideTo(i)},0)):f.slideTo(i):i>f.slides.length-e?(f.fixLoop(),i=f.wrapper.children("."+f.params.slideClass+'[data-swiper-slide-index="'+o+'"]:not(.'+f.params.slideDuplicateClass+")").eq(0).index(),setTimeout(function(){f.slideTo(i)},0)):f.slideTo(i)}else f.slideTo(i)};var c,l,d,g,v,e,s,nt,w,tt,ct="input, select, textarea, button, video",lt=Date.now(),a=[];f.animating=!1;f.touches={startX:0,startY:0,currentX:0,currentY:0,diff:0};f.onTouchStart=function(t){var i,u,r;if(t.originalEvent&&(t=t.originalEvent),(it="touchstart"===t.type)||!("which"in t)||3!==t.which){if(f.params.noSwiping&&ft(t,"."+f.params.noSwipingClass))return void(f.allowClick=!0);(!f.params.swipeHandler||ft(t,f.params.swipeHandler))&&(i=f.touches.currentX="touchstart"===t.type?t.targetTouches[0].pageX:t.pageX,u=f.touches.currentY="touchstart"===t.type?t.targetTouches[0].pageY:t.pageY,f.device.ios&&f.params.iOSEdgeSwipeDetection&&i<=f.params.iOSEdgeSwipeThreshold||((c=!0,l=!1,d=!0,v=void 0,rt=void 0,f.touches.startX=i,f.touches.startY=u,g=Date.now(),f.allowClick=!0,f.updateContainerSize(),f.swipeDirection=void 0,f.params.threshold>0&&(nt=!1),"touchstart"!==t.type)&&(r=!0,n(t.target).is(ct)&&(r=!1),document.activeElement&&n(document.activeElement).is(ct)&&document.activeElement.blur(),r&&t.preventDefault()),f.emit("onTouchStart",f,t)))}};f.onTouchMove=function(t){var o,i,r;if(t.originalEvent&&(t=t.originalEvent),!it||"mousemove"!==t.type){if(t.preventedByNestedSwiper)return f.touches.startX="touchmove"===t.type?t.targetTouches[0].pageX:t.pageX,void(f.touches.startY="touchmove"===t.type?t.targetTouches[0].pageY:t.pageY);if(f.params.onlyExternal)return f.allowClick=!1,void(c&&(f.touches.startX=f.touches.currentX="touchmove"===t.type?t.targetTouches[0].pageX:t.pageX,f.touches.startY=f.touches.currentY="touchmove"===t.type?t.targetTouches[0].pageY:t.pageY,g=Date.now()));if(it&&f.params.touchReleaseOnEdges&&!f.params.loop)if(f.isHorizontal()){if(f.touches.currentX<f.touches.startX&&f.translate<=f.maxTranslate()||f.touches.currentX>f.touches.startX&&f.translate>=f.minTranslate())return}else if(f.touches.currentY<f.touches.startY&&f.translate<=f.maxTranslate()||f.touches.currentY>f.touches.startY&&f.translate>=f.minTranslate())return;if(it&&document.activeElement&&t.target===document.activeElement&&n(t.target).is(ct))return l=!0,void(f.allowClick=!1);if((d&&f.emit("onTouchMove",f,t),!(t.targetTouches&&t.targetTouches.length>1))&&((f.touches.currentX="touchmove"===t.type?t.targetTouches[0].pageX:t.pageX,f.touches.currentY="touchmove"===t.type?t.targetTouches[0].pageY:t.pageY,void 0===v)&&(f.isHorizontal()&&f.touches.currentY===f.touches.startY||!f.isHorizontal()&&f.touches.currentX===f.touches.startX?v=!1:(o=180*Math.atan2(Math.abs(f.touches.currentY-f.touches.startY),Math.abs(f.touches.currentX-f.touches.startX))/Math.PI,v=f.isHorizontal()?o>f.params.touchAngle:90-o>f.params.touchAngle)),v&&f.emit("onTouchMoveOpposite",f,t),void 0===rt&&(f.touches.currentX===f.touches.startX&&f.touches.currentY===f.touches.startY||(rt=!0)),c)){if(v)return void(c=!1);if(rt){if(f.allowClick=!1,f.emit("onSliderMove",f,t),t.preventDefault(),f.params.touchMoveStopPropagation&&!f.params.nested&&t.stopPropagation(),l||(u.loop&&f.fixLoop(),s=f.getWrapperTranslate(),f.setWrapperTransition(0),f.animating&&f.wrapper.trigger("webkitTransitionEnd transitionend oTransitionEnd MSTransitionEnd msTransitionEnd"),f.params.autoplay&&f.autoplaying&&(f.params.autoplayDisableOnInteraction?f.stopAutoplay():f.pauseAutoplay()),tt=!1,!f.params.grabCursor||f.params.allowSwipeToNext!==!0&&f.params.allowSwipeToPrev!==!0||f.setGrabCursor(!0)),l=!0,i=f.touches.diff=f.isHorizontal()?f.touches.currentX-f.touches.startX:f.touches.currentY-f.touches.startY,i*=f.params.touchRatio,f.rtl&&(i=-i),f.swipeDirection=i>0?"prev":"next",e=i+s,r=!0,i>0&&e>f.minTranslate()?(r=!1,f.params.resistance&&(e=f.minTranslate()-1+Math.pow(-f.minTranslate()+s+i,f.params.resistanceRatio))):i<0&&e<f.maxTranslate()&&(r=!1,f.params.resistance&&(e=f.maxTranslate()+1-Math.pow(f.maxTranslate()-s-i,f.params.resistanceRatio))),r&&(t.preventedByNestedSwiper=!0),!f.params.allowSwipeToNext&&"next"===f.swipeDirection&&e<s&&(e=s),!f.params.allowSwipeToPrev&&"prev"===f.swipeDirection&&e>s&&(e=s),f.params.threshold>0){if(!(Math.abs(i)>f.params.threshold||nt))return void(e=s);if(!nt)return nt=!0,f.touches.startX=f.touches.currentX,f.touches.startY=f.touches.currentY,e=s,void(f.touches.diff=f.isHorizontal()?f.touches.currentX-f.touches.startX:f.touches.currentY-f.touches.startY)}f.params.followFinger&&((f.params.freeMode||f.params.watchSlidesProgress)&&f.updateActiveIndex(),f.params.freeMode&&(0===a.length&&a.push({position:f.touches[f.isHorizontal()?"startX":"startY"],time:g}),a.push({position:f.touches[f.isHorizontal()?"currentX":"currentY"],time:(new window.Date).getTime()})),f.updateProgress(e),f.setWrapperTranslate(e))}}}};f.onTouchEnd=function(t){var b,v,o,nt,it,y,p,h,r,u,rt,ft;if(t.originalEvent&&(t=t.originalEvent),d&&f.emit("onTouchEnd",f,t),d=!1,c){if(f.params.grabCursor&&l&&c&&(f.params.allowSwipeToNext===!0||f.params.allowSwipeToPrev===!0)&&f.setGrabCursor(!1),b=Date.now(),v=b-g,f.allowClick&&(f.updateClickedSlide(t),f.emit("onTap",f,t),v<300&&b-lt>300&&(w&&clearTimeout(w),w=setTimeout(function(){f&&(f.params.paginationHide&&f.paginationContainer.length>0&&!n(t.target).hasClass(f.params.bulletClass)&&f.paginationContainer.toggleClass(f.params.paginationHiddenClass),f.emit("onClick",f,t))},300)),v<300&&b-lt<300&&(w&&clearTimeout(w),f.emit("onDoubleTap",f,t))),lt=Date.now(),setTimeout(function(){f&&(f.allowClick=!0)},0),!c||!l||!f.swipeDirection||0===f.touches.diff||e===s)return void(c=l=!1);if(c=l=!1,o=f.params.followFinger?f.rtl?f.translate:-f.translate:-e,f.params.freeMode){if(o<-f.minTranslate())return void f.slideTo(f.activeIndex);if(o>-f.maxTranslate())return void(f.slides.length<f.snapGrid.length?f.slideTo(f.snapGrid.length-1):f.slideTo(f.slides.length-1));if(f.params.freeModeMomentum){if(a.length>1){var ut=a.pop(),et=a.pop(),st=ut.position-et.position,ot=ut.time-et.time;f.velocity=st/ot;f.velocity=f.velocity/2;Math.abs(f.velocity)<f.params.freeModeMinimumVelocity&&(f.velocity=0);(ot>150||(new window.Date).getTime()-ut.time>300)&&(f.velocity=0)}else f.velocity=0;f.velocity=f.velocity*f.params.freeModeMomentumVelocityRatio;a.length=0;var k=1e3*f.params.freeModeMomentumRatio,ht=f.velocity*k,i=f.translate+ht;if(f.rtl&&(i=-i),it=!1,y=20*Math.abs(f.velocity)*f.params.freeModeMomentumBounceRatio,i<f.maxTranslate())f.params.freeModeMomentumBounce?(i+f.maxTranslate()<-y&&(i=f.maxTranslate()-y),nt=f.maxTranslate(),it=!0,tt=!0):i=f.maxTranslate();else if(i>f.minTranslate())f.params.freeModeMomentumBounce?(i-f.minTranslate()>y&&(i=f.minTranslate()+y),nt=f.minTranslate(),it=!0,tt=!0):i=f.minTranslate();else if(f.params.freeModeSticky){for(h=0,h=0;h<f.snapGrid.length;h+=1)if(f.snapGrid[h]>-i){p=h;break}i=Math.abs(f.snapGrid[p]-i)<Math.abs(f.snapGrid[p-1]-i)||"next"===f.swipeDirection?f.snapGrid[p]:f.snapGrid[p-1];f.rtl||(i=-i)}if(0!==f.velocity)k=f.rtl?Math.abs((-i-f.translate)/f.velocity):Math.abs((i-f.translate)/f.velocity);else if(f.params.freeModeSticky)return void f.slideReset();f.params.freeModeMomentumBounce&&it?(f.updateProgress(nt),f.setWrapperTransition(k),f.setWrapperTranslate(i),f.onTransitionStart(),f.animating=!0,f.wrapper.transitionEnd(function(){f&&tt&&(f.emit("onMomentumBounce",f),f.setWrapperTransition(f.params.speed),f.setWrapperTranslate(nt),f.wrapper.transitionEnd(function(){f&&f.onTransitionEnd()}))})):f.velocity?(f.updateProgress(i),f.setWrapperTransition(k),f.setWrapperTranslate(i),f.onTransitionStart(),f.animating||(f.animating=!0,f.wrapper.transitionEnd(function(){f&&f.onTransitionEnd()}))):f.updateProgress(i);f.updateActiveIndex()}return void((!f.params.freeModeMomentum||v>=f.params.longSwipesMs)&&(f.updateProgress(),f.updateActiveIndex()))}for(u=0,rt=f.slidesSizesGrid[0],r=0;r<f.slidesGrid.length;r+=f.params.slidesPerGroup)void 0!==f.slidesGrid[r+f.params.slidesPerGroup]?o>=f.slidesGrid[r]&&o<f.slidesGrid[r+f.params.slidesPerGroup]&&(u=r,rt=f.slidesGrid[r+f.params.slidesPerGroup]-f.slidesGrid[r]):o>=f.slidesGrid[r]&&(u=r,rt=f.slidesGrid[f.slidesGrid.length-1]-f.slidesGrid[f.slidesGrid.length-2]);if(ft=(o-f.slidesGrid[u])/rt,v>f.params.longSwipesMs){if(!f.params.longSwipes)return void f.slideTo(f.activeIndex);"next"===f.swipeDirection&&(ft>=f.params.longSwipesRatio?f.slideTo(u+f.params.slidesPerGroup):f.slideTo(u));"prev"===f.swipeDirection&&(ft>1-f.params.longSwipesRatio?f.slideTo(u+f.params.slidesPerGroup):f.slideTo(u))}else{if(!f.params.shortSwipes)return void f.slideTo(f.activeIndex);"next"===f.swipeDirection&&f.slideTo(u+f.params.slidesPerGroup);"prev"===f.swipeDirection&&f.slideTo(u)}}};f._slideTo=function(n,t){return f.slideTo(n,t,!0,!0)};f.slideTo=function(n,t,i,r){var u,e;if(void 0===i&&(i=!0),void 0===n&&(n=0),n<0&&(n=0),f.snapIndex=Math.floor(n/f.params.slidesPerGroup),f.snapIndex>=f.snapGrid.length&&(f.snapIndex=f.snapGrid.length-1),u=-f.snapGrid[f.snapIndex],f.params.autoplay&&f.autoplaying&&(r||!f.params.autoplayDisableOnInteraction?f.pauseAutoplay(t):f.stopAutoplay()),f.updateProgress(u),f.params.normalizeSlideIndex)for(e=0;e<f.slidesGrid.length;e++)-Math.floor(100*u)>=Math.floor(100*f.slidesGrid[e])&&(n=e);return!(!f.params.allowSwipeToNext&&u<f.translate&&u<f.minTranslate())&&!(!f.params.allowSwipeToPrev&&u>f.translate&&u>f.maxTranslate()&&(f.activeIndex||0)!==n)&&(void 0===t&&(t=f.params.speed),f.previousIndex=f.activeIndex||0,f.activeIndex=n,f.updateRealIndex(),f.rtl&&-u===f.translate||!f.rtl&&u===f.translate?(f.params.autoHeight&&f.updateAutoHeight(),f.updateClasses(),"slide"!==f.params.effect&&f.setWrapperTranslate(u),!1):(f.updateClasses(),f.onTransitionStart(i),0===t||f.browser.lteIE9?(f.setWrapperTranslate(u),f.setWrapperTransition(0),f.onTransitionEnd(i)):(f.setWrapperTranslate(u),f.setWrapperTransition(t),f.animating||(f.animating=!0,f.wrapper.transitionEnd(function(){f&&f.onTransitionEnd(i)}))),!0))};f.onTransitionStart=function(n){void 0===n&&(n=!0);f.params.autoHeight&&f.updateAutoHeight();f.lazy&&f.lazy.onTransitionStart();n&&(f.emit("onTransitionStart",f),f.activeIndex!==f.previousIndex&&(f.emit("onSlideChangeStart",f),f.activeIndex>f.previousIndex?f.emit("onSlideNextStart",f):f.emit("onSlidePrevStart",f)))};f.onTransitionEnd=function(n){f.animating=!1;f.setWrapperTransition(0);void 0===n&&(n=!0);f.lazy&&f.lazy.onTransitionEnd();n&&(f.emit("onTransitionEnd",f),f.activeIndex!==f.previousIndex&&(f.emit("onSlideChangeEnd",f),f.activeIndex>f.previousIndex?f.emit("onSlideNextEnd",f):f.emit("onSlidePrevEnd",f)));f.params.history&&f.history&&f.history.setHistory(f.params.history,f.activeIndex);f.params.hashnav&&f.hashnav&&f.hashnav.setHash()};f.slideNext=function(n,t,i){return f.params.loop?f.animating?!1:(f.fixLoop(),f.container[0].clientLeft,f.slideTo(f.activeIndex+f.params.slidesPerGroup,t,n,i)):f.slideTo(f.activeIndex+f.params.slidesPerGroup,t,n,i)};f._slideNext=function(n){return f.slideNext(!0,n,!0)};f.slidePrev=function(n,t,i){return f.params.loop?f.animating?!1:(f.fixLoop(),f.container[0].clientLeft,f.slideTo(f.activeIndex-1,t,n,i)):f.slideTo(f.activeIndex-1,t,n,i)};f._slidePrev=function(n){return f.slidePrev(!0,n,!0)};f.slideReset=function(n,t){return f.slideTo(f.activeIndex,t,n)};f.disableTouchControl=function(){return f.params.onlyExternal=!0,!0};f.enableTouchControl=function(){return f.params.onlyExternal=!1,!0};f.setWrapperTransition=function(n,t){f.wrapper.transition(n);"slide"!==f.params.effect&&f.effects[f.params.effect]&&f.effects[f.params.effect].setTransition(n);f.params.parallax&&f.parallax&&f.parallax.setTransition(n);f.params.scrollbar&&f.scrollbar&&f.scrollbar.setTransition(n);f.params.control&&f.controller&&f.controller.setTransition(n,t);f.emit("onSetTransition",f,n)};f.setWrapperTranslate=function(n,t,i){var r=0,u=0,o,e;f.isHorizontal()?r=f.rtl?-n:n:u=n;f.params.roundLengths&&(r=b(r),u=b(u));f.params.virtualTranslate||(f.support.transforms3d?f.wrapper.transform("translate3d("+r+"px, "+u+"px, 0px)"):f.wrapper.transform("translate("+r+"px, "+u+"px)"));f.translate=f.isHorizontal()?r:u;e=f.maxTranslate()-f.minTranslate();o=0===e?0:(n-f.minTranslate())/e;o!==f.progress&&f.updateProgress(n);t&&f.updateActiveIndex();"slide"!==f.params.effect&&f.effects[f.params.effect]&&f.effects[f.params.effect].setTranslate(f.translate);f.params.parallax&&f.parallax&&f.parallax.setTranslate(f.translate);f.params.scrollbar&&f.scrollbar&&f.scrollbar.setTranslate(f.translate);f.params.control&&f.controller&&f.controller.setTranslate(f.translate,i);f.emit("onSetTranslate",f,f.translate)};f.getTranslate=function(n,t){var u,i,r,e;return void 0===t&&(t="x"),f.params.virtualTranslate?f.rtl?-f.translate:f.translate:(r=window.getComputedStyle(n,null),window.WebKitCSSMatrix?(i=r.transform||r.webkitTransform,i.split(",").length>6&&(i=i.split(", ").map(function(n){return n.replace(",",".")}).join(", ")),e=new window.WebKitCSSMatrix("none"===i?"":i)):(e=r.MozTransform||r.OTransform||r.MsTransform||r.msTransform||r.transform||r.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),u=e.toString().split(",")),"x"===t&&(i=window.WebKitCSSMatrix?e.m41:16===u.length?parseFloat(u[12]):parseFloat(u[4])),"y"===t&&(i=window.WebKitCSSMatrix?e.m42:16===u.length?parseFloat(u[13]):parseFloat(u[5])),f.rtl&&i&&(i=-i),i||0)};f.getWrapperTranslate=function(n){return void 0===n&&(n=f.isHorizontal()?"x":"y"),f.getTranslate(f.wrapper[0],n)};f.observers=[];f.initObservers=function(){if(f.params.observeParents)for(var t=f.container.parents(),n=0;n<t.length;n++)et(t[n]);et(f.container[0],{childList:!1});et(f.wrapper[0],{attributes:!1})};f.disconnectObservers=function(){for(var n=0;n<f.observers.length;n++)f.observers[n].disconnect();f.observers=[]};f.createLoop=function(){var i,t,r,u;for(f.wrapper.children("."+f.params.slideClass+"."+f.params.slideDuplicateClass).remove(),i=f.wrapper.children("."+f.params.slideClass),"auto"!==f.params.slidesPerView||f.params.loopedSlides||(f.params.loopedSlides=i.length),f.loopedSlides=parseInt(f.params.loopedSlides||f.params.slidesPerView,10),f.loopedSlides=f.loopedSlides+f.params.loopAdditionalSlides,f.loopedSlides>i.length&&(f.loopedSlides=i.length),r=[],u=[],i.each(function(t,e){var o=n(this);t<f.loopedSlides&&u.push(e);t<i.length&&t>=i.length-f.loopedSlides&&r.push(e);o.attr("data-swiper-slide-index",t)}),t=0;t<u.length;t++)f.wrapper.append(n(u[t].cloneNode(!0)).addClass(f.params.slideDuplicateClass));for(t=r.length-1;t>=0;t--)f.wrapper.prepend(n(r[t].cloneNode(!0)).addClass(f.params.slideDuplicateClass))};f.destroyLoop=function(){f.wrapper.children("."+f.params.slideClass+"."+f.params.slideDuplicateClass).remove();f.slides.removeAttr("data-swiper-slide-index")};f.reLoop=function(n){var t=f.activeIndex-f.loopedSlides;f.destroyLoop();f.createLoop();f.updateSlidesSize();n&&f.slideTo(t+f.loopedSlides,0,!1)};f.fixLoop=function(){var n;f.activeIndex<f.loopedSlides?(n=f.slides.length-3*f.loopedSlides+f.activeIndex,n+=f.loopedSlides,f.slideTo(n,0,!1,!0)):("auto"===f.params.slidesPerView&&f.activeIndex>=2*f.loopedSlides||f.activeIndex>f.slides.length-2*f.params.slidesPerView)&&(n=-f.slides.length+f.activeIndex+f.loopedSlides,n+=f.loopedSlides,f.slideTo(n,0,!1,!0))};f.appendSlide=function(n){if(f.params.loop&&f.destroyLoop(),"object"==typeof n&&n.length)for(var t=0;t<n.length;t++)n[t]&&f.wrapper.append(n[t]);else f.wrapper.append(n);f.params.loop&&f.createLoop();f.params.observer&&f.support.observer||f.update(!0)};f.prependSlide=function(n){var i,t;if(f.params.loop&&f.destroyLoop(),i=f.activeIndex+1,"object"==typeof n&&n.length){for(t=0;t<n.length;t++)n[t]&&f.wrapper.prepend(n[t]);i=f.activeIndex+n.length}else f.wrapper.prepend(n);f.params.loop&&f.createLoop();f.params.observer&&f.support.observer||f.update(!0);f.slideTo(i,0,!1)};f.removeSlide=function(n){var i,t,r;if(f.params.loop&&(f.destroyLoop(),f.slides=f.wrapper.children("."+f.params.slideClass)),t=f.activeIndex,"object"==typeof n&&n.length){for(r=0;r<n.length;r++)i=n[r],f.slides[i]&&f.slides.eq(i).remove(),i<t&&t--;t=Math.max(t,0)}else i=n,f.slides[i]&&f.slides.eq(i).remove(),i<t&&t--,t=Math.max(t,0);f.params.loop&&f.createLoop();f.params.observer&&f.support.observer||f.update(!0);f.params.loop?f.slideTo(t+f.loopedSlides,0,!1):f.slideTo(t,0,!1)};f.removeAllSlides=function(){for(var t=[],n=0;n<f.slides.length;n++)t.push(n);f.removeSlide(t)};f.effects={fade:{setTranslate:function(){for(var r,u,n=0;n<f.slides.length;n++){var t=f.slides.eq(n),e=t[0].swiperSlideOffset,i=-e;f.params.virtualTranslate||(i-=f.translate);r=0;f.isHorizontal()||(r=i,i=0);u=f.params.fade.crossFade?Math.max(1-Math.abs(t[0].progress),0):1+Math.min(Math.max(t[0].progress,-1),0);t.css({opacity:u}).transform("translate3d("+i+"px, "+r+"px, 0px)")}},setTransition:function(n){if(f.slides.transition(n),f.params.virtualTranslate&&0!==n){var t=!1;f.slides.transitionEnd(function(){if(!t&&f){t=!0;f.animating=!1;for(var i=["webkitTransitionEnd","transitionend","oTransitionEnd","MSTransitionEnd","msTransitionEnd"],n=0;n<i.length;n++)f.wrapper.trigger(i[n])}})}}},flip:{setTranslate:function(){for(var t,i,r,u,o=0;o<f.slides.length;o++){t=f.slides.eq(o);i=t[0].progress;f.params.flip.limitRotation&&(i=Math.max(Math.min(t[0].progress,1),-1));var l=t[0].swiperSlideOffset,a=-180*i,e=a,h=0,s=-l,c=0;(f.isHorizontal()?f.rtl&&(e=-e):(c=s,s=0,h=-e,e=0),t[0].style.zIndex=-Math.abs(Math.round(i))+f.slides.length,f.params.flip.slideShadows)&&(r=f.isHorizontal()?t.find(".swiper-slide-shadow-left"):t.find(".swiper-slide-shadow-top"),u=f.isHorizontal()?t.find(".swiper-slide-shadow-right"):t.find(".swiper-slide-shadow-bottom"),0===r.length&&(r=n('<div class="swiper-slide-shadow-'+(f.isHorizontal()?"left":"top")+'"><\/div>'),t.append(r)),0===u.length&&(u=n('<div class="swiper-slide-shadow-'+(f.isHorizontal()?"right":"bottom")+'"><\/div>'),t.append(u)),r.length&&(r[0].style.opacity=Math.max(-i,0)),u.length&&(u[0].style.opacity=Math.max(i,0)));t.transform("translate3d("+s+"px, "+c+"px, 0px) rotateX("+h+"deg) rotateY("+e+"deg)")}},setTransition:function(t){if(f.slides.transition(t).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(t),f.params.virtualTranslate&&0!==t){var i=!1;f.slides.eq(f.activeIndex).transitionEnd(function(){if(!i&&f&&n(this).hasClass(f.params.slideActiveClass)){i=!0;f.animating=!1;for(var r=["webkitTransitionEnd","transitionend","oTransitionEnd","MSTransitionEnd","msTransitionEnd"],t=0;t<r.length;t++)f.wrapper.trigger(r[t])}})}}},cube:{setTranslate:function(){var t,e=0,i,y,h,c,b;for(f.params.cube.shadow&&(f.isHorizontal()?(t=f.wrapper.find(".swiper-cube-shadow"),0===t.length&&(t=n('<div class="swiper-cube-shadow"><\/div>'),f.wrapper.append(t)),t.css({height:f.width+"px"})):(t=f.container.find(".swiper-cube-shadow"),0===t.length&&(t=n('<div class="swiper-cube-shadow"><\/div>'),f.container.append(t)))),i=0;i<f.slides.length;i++){var u=f.slides.eq(i),o=90*i,l=Math.floor(o/360);f.rtl&&(o=-o,l=Math.floor(-o/360));var s=Math.max(Math.min(u[0].progress,1),-1),r=0,v=0,a=0;i%4==0?(r=4*-l*f.size,a=0):(i-1)%4==0?(r=0,a=4*-l*f.size):(i-2)%4==0?(r=f.size+4*l*f.size,a=f.size):(i-3)%4==0&&(r=-f.size,a=3*f.size+4*f.size*l);f.rtl&&(r=-r);f.isHorizontal()||(v=r,r=0);y="rotateX("+(f.isHorizontal()?0:-o)+"deg) rotateY("+(f.isHorizontal()?o:0)+"deg) translate3d("+r+"px, "+v+"px, "+a+"px)";(s<=1&&s>-1&&(e=90*i+90*s,f.rtl&&(e=90*-i-90*s)),u.transform(y),f.params.cube.slideShadows)&&(h=f.isHorizontal()?u.find(".swiper-slide-shadow-left"):u.find(".swiper-slide-shadow-top"),c=f.isHorizontal()?u.find(".swiper-slide-shadow-right"):u.find(".swiper-slide-shadow-bottom"),0===h.length&&(h=n('<div class="swiper-slide-shadow-'+(f.isHorizontal()?"left":"top")+'"><\/div>'),u.append(h)),0===c.length&&(c=n('<div class="swiper-slide-shadow-'+(f.isHorizontal()?"right":"bottom")+'"><\/div>'),u.append(c)),h.length&&(h[0].style.opacity=Math.max(-s,0)),c.length&&(c[0].style.opacity=Math.max(s,0)))}if(f.wrapper.css({"-webkit-transform-origin":"50% 50% -"+f.size/2+"px","-moz-transform-origin":"50% 50% -"+f.size/2+"px","-ms-transform-origin":"50% 50% -"+f.size/2+"px","transform-origin":"50% 50% -"+f.size/2+"px"}),f.params.cube.shadow)if(f.isHorizontal())t.transform("translate3d(0px, "+(f.width/2+f.params.cube.shadowOffset)+"px, "+-f.width/2+"px) rotateX(90deg) rotateZ(0deg) scale("+f.params.cube.shadowScale+")");else{var p=Math.abs(e)-90*Math.floor(Math.abs(e)/90),k=1.5-(Math.sin(2*p*Math.PI/360)/2+Math.cos(2*p*Math.PI/360)/2),d=f.params.cube.shadowScale,w=f.params.cube.shadowScale/k,g=f.params.cube.shadowOffset;t.transform("scale3d("+d+", 1, "+w+") translate3d(0px, "+(f.height/2+g)+"px, "+-f.height/2/w+"px) rotateX(-90deg)")}b=f.isSafari||f.isUiWebView?-f.size/2:0;f.wrapper.transform("translate3d(0px,0,"+b+"px) rotateX("+(f.isHorizontal()?0:e)+"deg) rotateY("+(f.isHorizontal()?-e:0)+"deg)")},setTransition:function(n){f.slides.transition(n).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(n);f.params.cube.shadow&&!f.isHorizontal()&&f.container.find(".swiper-cube-shadow").transition(n)}},coverflow:{setTranslate:function(){for(var w,r,u,a=f.translate,v=f.isHorizontal()?-a+f.width/2:-a+f.height/2,y=f.isHorizontal()?f.params.coverflow.rotate:-f.params.coverflow.rotate,b=f.params.coverflow.depth,e=0,k=f.slides.length;e<k;e++){var i=f.slides.eq(e),p=f.slidesSizesGrid[e],d=i[0].swiperSlideOffset,t=(v-d-p/2)/p*f.params.coverflow.modifier,o=f.isHorizontal()?y*t:0,s=f.isHorizontal()?0:y*t,h=-b*Math.abs(t),c=f.isHorizontal()?0:f.params.coverflow.stretch*t,l=f.isHorizontal()?f.params.coverflow.stretch*t:0;Math.abs(l)<.001&&(l=0);Math.abs(c)<.001&&(c=0);Math.abs(h)<.001&&(h=0);Math.abs(o)<.001&&(o=0);Math.abs(s)<.001&&(s=0);w="translate3d("+l+"px,"+c+"px,"+h+"px)  rotateX("+s+"deg) rotateY("+o+"deg)";(i.transform(w),i[0].style.zIndex=1-Math.abs(Math.round(t)),f.params.coverflow.slideShadows)&&(r=f.isHorizontal()?i.find(".swiper-slide-shadow-left"):i.find(".swiper-slide-shadow-top"),u=f.isHorizontal()?i.find(".swiper-slide-shadow-right"):i.find(".swiper-slide-shadow-bottom"),0===r.length&&(r=n('<div class="swiper-slide-shadow-'+(f.isHorizontal()?"left":"top")+'"><\/div>'),i.append(r)),0===u.length&&(u=n('<div class="swiper-slide-shadow-'+(f.isHorizontal()?"right":"bottom")+'"><\/div>'),i.append(u)),r.length&&(r[0].style.opacity=t>0?t:0),u.length&&(u[0].style.opacity=-t>0?-t:0))}f.browser.ie&&(f.wrapper[0].style.perspectiveOrigin=v+"px 50%")},setTransition:function(n){f.slides.transition(n).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(n)}}};f.lazy={initialImageLoaded:!1,loadImageInSlide:function(t,i){if(void 0!==t&&(void 0===i&&(i=!0),0!==f.slides.length)){var r=f.slides.eq(t),u=r.find("."+f.params.lazyLoadingClass+":not(."+f.params.lazyStatusLoadedClass+"):not(."+f.params.lazyStatusLoadingClass+")");!r.hasClass(f.params.lazyLoadingClass)||r.hasClass(f.params.lazyStatusLoadedClass)||r.hasClass(f.params.lazyStatusLoadingClass)||(u=u.add(r[0]));0!==u.length&&u.each(function(){var t=n(this);t.addClass(f.params.lazyStatusLoadingClass);var u=t.attr("data-background"),e=t.attr("data-src"),o=t.attr("data-srcset"),s=t.attr("data-sizes");f.loadImage(t[0],e||u,o,s,!1,function(){var n,h,c;void 0!==f&&null!==f&&f&&((u?(t.css("background-image",'url("'+u+'")'),t.removeAttr("data-background")):(o&&(t.attr("srcset",o),t.removeAttr("data-srcset")),s&&(t.attr("sizes",s),t.removeAttr("data-sizes")),e&&(t.attr("src",e),t.removeAttr("data-src"))),t.addClass(f.params.lazyStatusLoadedClass).removeClass(f.params.lazyStatusLoadingClass),r.find("."+f.params.lazyPreloaderClass+", ."+f.params.preloaderClass).remove(),f.params.loop&&i)&&(n=r.attr("data-swiper-slide-index"),r.hasClass(f.params.slideDuplicateClass)?(h=f.wrapper.children('[data-swiper-slide-index="'+n+'"]:not(.'+f.params.slideDuplicateClass+")"),f.lazy.loadImageInSlide(h.index(),!1)):(c=f.wrapper.children("."+f.params.slideDuplicateClass+'[data-swiper-slide-index="'+n+'"]'),f.lazy.loadImageInSlide(c.index(),!1))),f.emit("onLazyImageReady",f,r[0],t[0]))});f.emit("onLazyImageLoad",f,r[0],t[0])})}},load:function(){var t,i=f.params.slidesPerView,u,e;if("auto"===i&&(i=0),f.lazy.initialImageLoaded||(f.lazy.initialImageLoaded=!0),f.params.watchSlidesVisibility)f.wrapper.children("."+f.params.slideVisibleClass).each(function(){f.lazy.loadImageInSlide(n(this).index())});else if(i>1)for(t=f.activeIndex;t<f.activeIndex+i;t++)f.slides[t]&&f.lazy.loadImageInSlide(t);else f.lazy.loadImageInSlide(f.activeIndex);if(f.params.lazyLoadingInPrevNext)if(i>1||f.params.lazyLoadingInPrevNextAmount&&f.params.lazyLoadingInPrevNextAmount>1){var o=f.params.lazyLoadingInPrevNextAmount,r=i,s=Math.min(f.activeIndex+r+Math.max(o,r),f.slides.length),h=Math.max(f.activeIndex-Math.max(r,o),0);for(t=f.activeIndex+i;t<s;t++)f.slides[t]&&f.lazy.loadImageInSlide(t);for(t=h;t<f.activeIndex;t++)f.slides[t]&&f.lazy.loadImageInSlide(t)}else u=f.wrapper.children("."+f.params.slideNextClass),u.length>0&&f.lazy.loadImageInSlide(u.index()),e=f.wrapper.children("."+f.params.slidePrevClass),e.length>0&&f.lazy.loadImageInSlide(e.index())},onTransitionStart:function(){f.params.lazyLoading&&(f.params.lazyLoadingOnTransitionStart||!f.params.lazyLoadingOnTransitionStart&&!f.lazy.initialImageLoaded)&&f.lazy.load()},onTransitionEnd:function(){f.params.lazyLoading&&!f.params.lazyLoadingOnTransitionStart&&f.lazy.load()}};f.scrollbar={isTouched:!1,setDragPosition:function(n){var i=f.scrollbar,e=f.isHorizontal()?"touchstart"===n.type||"touchmove"===n.type?n.targetTouches[0].pageX:n.pageX||n.clientX:"touchstart"===n.type||"touchmove"===n.type?n.targetTouches[0].pageY:n.pageY||n.clientY,t=e-i.track.offset()[f.isHorizontal()?"left":"top"]-i.dragSize/2,r=-f.minTranslate()*i.moveDivider,u=-f.maxTranslate()*i.moveDivider;t<r?t=r:t>u&&(t=u);t=-t/i.moveDivider;f.updateProgress(t);f.setWrapperTranslate(t,!0)},dragStart:function(n){var t=f.scrollbar;t.isTouched=!0;n.preventDefault();n.stopPropagation();t.setDragPosition(n);clearTimeout(t.dragTimeout);t.track.transition(0);f.params.scrollbarHide&&t.track.css("opacity",1);f.wrapper.transition(100);t.drag.transition(100);f.emit("onScrollbarDragStart",f)},dragMove:function(n){var t=f.scrollbar;t.isTouched&&(n.preventDefault?n.preventDefault():n.returnValue=!1,t.setDragPosition(n),f.wrapper.transition(0),t.track.transition(0),t.drag.transition(0),f.emit("onScrollbarDragMove",f))},dragEnd:function(){var n=f.scrollbar;n.isTouched&&(n.isTouched=!1,f.params.scrollbarHide&&(clearTimeout(n.dragTimeout),n.dragTimeout=setTimeout(function(){n.track.css("opacity",0);n.track.transition(400)},1e3)),f.emit("onScrollbarDragEnd",f),f.params.scrollbarSnapOnRelease&&f.slideReset())},draggableEvents:function(){return f.params.simulateTouch!==!1||f.support.touch?f.touchEvents:f.touchEventsDesktop}(),enableDraggable:function(){var t=f.scrollbar,i=f.support.touch?t.track:document;n(t.track).on(t.draggableEvents.start,t.dragStart);n(i).on(t.draggableEvents.move,t.dragMove);n(i).on(t.draggableEvents.end,t.dragEnd)},disableDraggable:function(){var t=f.scrollbar,i=f.support.touch?t.track:document;n(t.track).off(t.draggableEvents.start,t.dragStart);n(i).off(t.draggableEvents.move,t.dragMove);n(i).off(t.draggableEvents.end,t.dragEnd)},set:function(){if(f.params.scrollbar){var t=f.scrollbar;t.track=n(f.params.scrollbar);f.params.uniqueNavElements&&"string"==typeof f.params.scrollbar&&t.track.length>1&&1===f.container.find(f.params.scrollbar).length&&(t.track=f.container.find(f.params.scrollbar));t.drag=t.track.find(".swiper-scrollbar-drag");0===t.drag.length&&(t.drag=n('<div class="swiper-scrollbar-drag"><\/div>'),t.track.append(t.drag));t.drag[0].style.width="";t.drag[0].style.height="";t.trackSize=f.isHorizontal()?t.track[0].offsetWidth:t.track[0].offsetHeight;t.divider=f.size/f.virtualSize;t.moveDivider=t.divider*(t.trackSize/f.size);t.dragSize=t.trackSize*t.divider;f.isHorizontal()?t.drag[0].style.width=t.dragSize+"px":t.drag[0].style.height=t.dragSize+"px";t.track[0].style.display=t.divider>=1?"none":"";f.params.scrollbarHide&&(t.track[0].style.opacity=0)}},setTranslate:function(){if(f.params.scrollbar){var t,n=f.scrollbar,i=(f.translate,n.dragSize);t=(n.trackSize-n.dragSize)*f.progress;f.rtl&&f.isHorizontal()?(t=-t,t>0?(i=n.dragSize-t,t=0):-t+n.dragSize>n.trackSize&&(i=n.trackSize+t)):t<0?(i=n.dragSize+t,t=0):t+n.dragSize>n.trackSize&&(i=n.trackSize-t);f.isHorizontal()?(f.support.transforms3d?n.drag.transform("translate3d("+t+"px, 0, 0)"):n.drag.transform("translateX("+t+"px)"),n.drag[0].style.width=i+"px"):(f.support.transforms3d?n.drag.transform("translate3d(0px, "+t+"px, 0)"):n.drag.transform("translateY("+t+"px)"),n.drag[0].style.height=i+"px");f.params.scrollbarHide&&(clearTimeout(n.timeout),n.track[0].style.opacity=1,n.timeout=setTimeout(function(){n.track[0].style.opacity=0;n.track.transition(400)},1e3))}},setTransition:function(n){f.params.scrollbar&&f.scrollbar.drag.transition(n)}};f.controller={LinearSpline:function(n,t){var u=function(){var n,t,i;return function(r,u){for(t=-1,n=r.length;n-t>1;)r[i=n+t>>1]<=u?t=i:n=i;return n}}(),i,r;this.x=n;this.y=t;this.lastIndex=n.length-1;this.x.length;this.interpolate=function(n){return n?(r=u(this.x,n),i=r-1,(n-this.x[i])*(this.y[r]-this.y[i])/(this.x[r]-this.x[i])+this.y[i]):0}},getInterpolateFunction:function(n){f.controller.spline||(f.controller.spline=f.params.loop?new f.controller.LinearSpline(f.slidesGrid,n.slidesGrid):new f.controller.LinearSpline(f.snapGrid,n.snapGrid))},setTranslate:function(n,i){function o(t){n=t.rtl&&"horizontal"===t.params.direction?-f.translate:f.translate;"slide"===f.params.controlBy&&(f.controller.getInterpolateFunction(t),u=-f.controller.spline.interpolate(-n));u&&"container"!==f.params.controlBy||(s=(t.maxTranslate()-t.minTranslate())/(f.maxTranslate()-f.minTranslate()),u=(n-f.minTranslate())*s+t.minTranslate());f.params.controlInverse&&(u=t.maxTranslate()-u);t.updateProgress(u);t.setWrapperTranslate(u,!1,f);t.updateActiveIndex()}var s,u,r=f.params.control,e;if(Array.isArray(r))for(e=0;e<r.length;e++)r[e]!==i&&r[e]instanceof t&&o(r[e]);else r instanceof t&&i!==r&&o(r)},setTransition:function(n,i){function e(t){t.setWrapperTransition(n,f);0!==n&&(t.onTransitionStart(),t.wrapper.transitionEnd(function(){r&&(t.params.loop&&"slide"===f.params.controlBy&&t.fixLoop(),t.onTransitionEnd())}))}var u,r=f.params.control;if(Array.isArray(r))for(u=0;u<r.length;u++)r[u]!==i&&r[u]instanceof t&&e(r[u]);else r instanceof t&&i!==r&&e(r)}};f.hashnav={onHashCange:function(){var n=document.location.hash.replace("#","");n!==f.slides.eq(f.activeIndex).attr("data-hash")&&f.slideTo(f.wrapper.children("."+f.params.slideClass+'[data-hash="'+n+'"]').index())},attachEvents:function(t){var i=t?"off":"on";n(window)[i]("hashchange",f.hashnav.onHashCange)},setHash:function(){if(f.hashnav.initialized&&f.params.hashnav)if(f.params.replaceState&&window.history&&window.history.replaceState)window.history.replaceState(null,null,"#"+f.slides.eq(f.activeIndex).attr("data-hash")||"");else{var n=f.slides.eq(f.activeIndex),t=n.attr("data-hash")||n.attr("data-history");document.location.hash=t||""}},init:function(){var i,t,r,n,u,e;if(f.params.hashnav&&!f.params.history){if(f.hashnav.initialized=!0,i=document.location.hash.replace("#",""),i)for(t=0,r=f.slides.length;t<r;t++)n=f.slides.eq(t),u=n.attr("data-hash")||n.attr("data-history"),u!==i||n.hasClass(f.params.slideDuplicateClass)||(e=n.index(),f.slideTo(e,0,f.params.runCallbacksOnInit,!0));f.params.hashnavWatchState&&f.hashnav.attachEvents()}},destroy:function(){f.params.hashnavWatchState&&f.hashnav.attachEvents(!0)}};f.history={init:function(){if(f.params.history){if(!window.history||!window.history.pushState)return f.params.history=!1,void(f.params.hashnav=!0);f.history.initialized=!0;this.paths=this.getPathValues();(this.paths.key||this.paths.value)&&(this.scrollToSlide(0,this.paths.value,f.params.runCallbacksOnInit),f.params.replaceState||window.addEventListener("popstate",this.setHistoryPopState))}},setHistoryPopState:function(){f.history.paths=f.history.getPathValues();f.history.scrollToSlide(f.params.speed,f.history.paths.value,!1)},getPathValues:function(){var n=window.location.pathname.slice(1).split("/"),t=n.length;return{key:n[t-2],value:n[t-1]}},setHistory:function(n,t){if(f.history.initialized&&f.params.history){var r=f.slides.eq(t),i=this.slugify(r.attr("data-history"));window.location.pathname.includes(n)||(i=n+"/"+i);f.params.replaceState?window.history.replaceState(null,null,i):window.history.pushState(null,null,i)}},slugify:function(n){return n.toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")},scrollToSlide:function(n,t,i){var r,e,u,o,s;if(t)for(r=0,e=f.slides.length;r<e;r++)u=f.slides.eq(r),o=this.slugify(u.attr("data-history")),o!==t||u.hasClass(f.params.slideDuplicateClass)||(s=u.index(),f.slideTo(s,n,i));else f.slideTo(0,n,i)}};f.disableKeyboardControl=function(){f.params.keyboardControl=!1;n(document).off("keydown",yt)};f.enableKeyboardControl=function(){f.params.keyboardControl=!0;n(document).on("keydown",yt)};f.mousewheel={event:!1,lastScrollTime:(new window.Date).getTime()};f.params.mousewheelControl&&(f.mousewheel.event=navigator.userAgent.indexOf("firefox")>-1?"DOMMouseScroll":function(){var n="onwheel"in document,t;return n||(t=document.createElement("div"),t.setAttribute("onwheel","return;"),n="function"==typeof t.onwheel),!n&&document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0&&(n=document.implementation.hasFeature("Events.wheel","3.0")),n}()?"wheel":"mousewheel");f.disableMousewheelControl=function(){if(!f.mousewheel.event)return!1;var t=f.container;return"container"!==f.params.mousewheelEventsTarged&&(t=n(f.params.mousewheelEventsTarged)),t.off(f.mousewheel.event,pt),f.params.mousewheelControl=!1,!0};f.enableMousewheelControl=function(){if(!f.mousewheel.event)return!1;var t=f.container;return"container"!==f.params.mousewheelEventsTarged&&(t=n(f.params.mousewheelEventsTarged)),t.on(f.mousewheel.event,pt),f.params.mousewheelControl=!0,!0};f.parallax={setTranslate:function(){f.container.children("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y]").each(function(){wt(this,f.progress)});f.slides.each(function(){var t=n(this);t.find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y]").each(function(){wt(this,Math.min(Math.max(t[0].progress,-1),1))})})},setTransition:function(t){void 0===t&&(t=f.params.speed);f.container.find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y]").each(function(){var i=n(this),r=parseInt(i.attr("data-swiper-parallax-duration"),10)||t;0===t&&(r=0);i.transition(r)})}};f.zoom={scale:1,currentScale:1,isScaling:!1,gesture:{slide:void 0,slideWidth:void 0,slideHeight:void 0,image:void 0,imageWrap:void 0,zoomMax:f.params.zoomMax},image:{isTouched:void 0,isMoved:void 0,currentX:void 0,currentY:void 0,minX:void 0,minY:void 0,maxX:void 0,maxY:void 0,width:void 0,height:void 0,startX:void 0,startY:void 0,touchesStart:{},touchesCurrent:{}},velocity:{x:void 0,y:void 0,prevPositionX:void 0,prevPositionY:void 0,prevTime:void 0},getDistanceBetweenTouches:function(n){if(n.targetTouches.length<2)return 1;var t=n.targetTouches[0].pageX,i=n.targetTouches[0].pageY,r=n.targetTouches[1].pageX,u=n.targetTouches[1].pageY;return Math.sqrt(Math.pow(r-t,2)+Math.pow(u-i,2))},onGestureStart:function(t){var i=f.zoom;if(!f.support.gestures){if("touchstart"!==t.type||"touchstart"===t.type&&t.targetTouches.length<2)return;i.gesture.scaleStart=i.getDistanceBetweenTouches(t)}if(!(i.gesture.slide&&i.gesture.slide.length||(i.gesture.slide=n(this),0===i.gesture.slide.length&&(i.gesture.slide=f.slides.eq(f.activeIndex)),i.gesture.image=i.gesture.slide.find("img, svg, canvas"),i.gesture.imageWrap=i.gesture.image.parent("."+f.params.zoomContainerClass),i.gesture.zoomMax=i.gesture.imageWrap.attr("data-swiper-zoom")||f.params.zoomMax,0!==i.gesture.imageWrap.length)))return void(i.gesture.image=void 0);i.gesture.image.transition(0);i.isScaling=!0},onGestureChange:function(n){var t=f.zoom;if(!f.support.gestures){if("touchmove"!==n.type||"touchmove"===n.type&&n.targetTouches.length<2)return;t.gesture.scaleMove=t.getDistanceBetweenTouches(n)}t.gesture.image&&0!==t.gesture.image.length&&(t.scale=f.support.gestures?n.scale*t.currentScale:t.gesture.scaleMove/t.gesture.scaleStart*t.currentScale,t.scale>t.gesture.zoomMax&&(t.scale=t.gesture.zoomMax-1+Math.pow(t.scale-t.gesture.zoomMax+1,.5)),t.scale<f.params.zoomMin&&(t.scale=f.params.zoomMin+1-Math.pow(f.params.zoomMin-t.scale+1,.5)),t.gesture.image.transform("translate3d(0,0,0) scale("+t.scale+")"))},onGestureEnd:function(n){var t=f.zoom;!f.support.gestures&&("touchend"!==n.type||"touchend"===n.type&&n.changedTouches.length<2)||t.gesture.image&&0!==t.gesture.image.length&&(t.scale=Math.max(Math.min(t.scale,t.gesture.zoomMax),f.params.zoomMin),t.gesture.image.transition(f.params.speed).transform("translate3d(0,0,0) scale("+t.scale+")"),t.currentScale=t.scale,t.isScaling=!1,1===t.scale&&(t.gesture.slide=void 0))},onTouchStart:function(n,t){var i=n.zoom;i.gesture.image&&0!==i.gesture.image.length&&(i.image.isTouched||("android"===n.device.os&&t.preventDefault(),i.image.isTouched=!0,i.image.touchesStart.x="touchstart"===t.type?t.targetTouches[0].pageX:t.pageX,i.image.touchesStart.y="touchstart"===t.type?t.targetTouches[0].pageY:t.pageY))},onTouchMove:function(n){var t=f.zoom,i,r;if(t.gesture.image&&0!==t.gesture.image.length&&(f.allowClick=!1,t.image.isTouched&&t.gesture.slide)&&(t.image.isMoved||(t.image.width=t.gesture.image[0].offsetWidth,t.image.height=t.gesture.image[0].offsetHeight,t.image.startX=f.getTranslate(t.gesture.imageWrap[0],"x")||0,t.image.startY=f.getTranslate(t.gesture.imageWrap[0],"y")||0,t.gesture.slideWidth=t.gesture.slide[0].offsetWidth,t.gesture.slideHeight=t.gesture.slide[0].offsetHeight,t.gesture.imageWrap.transition(0),f.rtl&&(t.image.startX=-t.image.startX),f.rtl&&(t.image.startY=-t.image.startY)),i=t.image.width*t.scale,r=t.image.height*t.scale,!(i<t.gesture.slideWidth&&r<t.gesture.slideHeight))){if((t.image.minX=Math.min(t.gesture.slideWidth/2-i/2,0),t.image.maxX=-t.image.minX,t.image.minY=Math.min(t.gesture.slideHeight/2-r/2,0),t.image.maxY=-t.image.minY,t.image.touchesCurrent.x="touchmove"===n.type?n.targetTouches[0].pageX:n.pageX,t.image.touchesCurrent.y="touchmove"===n.type?n.targetTouches[0].pageY:n.pageY,!t.image.isMoved&&!t.isScaling)&&(f.isHorizontal()&&Math.floor(t.image.minX)===Math.floor(t.image.startX)&&t.image.touchesCurrent.x<t.image.touchesStart.x||Math.floor(t.image.maxX)===Math.floor(t.image.startX)&&t.image.touchesCurrent.x>t.image.touchesStart.x||!f.isHorizontal()&&Math.floor(t.image.minY)===Math.floor(t.image.startY)&&t.image.touchesCurrent.y<t.image.touchesStart.y||Math.floor(t.image.maxY)===Math.floor(t.image.startY)&&t.image.touchesCurrent.y>t.image.touchesStart.y))return void(t.image.isTouched=!1);n.preventDefault();n.stopPropagation();t.image.isMoved=!0;t.image.currentX=t.image.touchesCurrent.x-t.image.touchesStart.x+t.image.startX;t.image.currentY=t.image.touchesCurrent.y-t.image.touchesStart.y+t.image.startY;t.image.currentX<t.image.minX&&(t.image.currentX=t.image.minX+1-Math.pow(t.image.minX-t.image.currentX+1,.8));t.image.currentX>t.image.maxX&&(t.image.currentX=t.image.maxX-1+Math.pow(t.image.currentX-t.image.maxX+1,.8));t.image.currentY<t.image.minY&&(t.image.currentY=t.image.minY+1-Math.pow(t.image.minY-t.image.currentY+1,.8));t.image.currentY>t.image.maxY&&(t.image.currentY=t.image.maxY-1+Math.pow(t.image.currentY-t.image.maxY+1,.8));t.velocity.prevPositionX||(t.velocity.prevPositionX=t.image.touchesCurrent.x);t.velocity.prevPositionY||(t.velocity.prevPositionY=t.image.touchesCurrent.y);t.velocity.prevTime||(t.velocity.prevTime=Date.now());t.velocity.x=(t.image.touchesCurrent.x-t.velocity.prevPositionX)/(Date.now()-t.velocity.prevTime)/2;t.velocity.y=(t.image.touchesCurrent.y-t.velocity.prevPositionY)/(Date.now()-t.velocity.prevTime)/2;Math.abs(t.image.touchesCurrent.x-t.velocity.prevPositionX)<2&&(t.velocity.x=0);Math.abs(t.image.touchesCurrent.y-t.velocity.prevPositionY)<2&&(t.velocity.y=0);t.velocity.prevPositionX=t.image.touchesCurrent.x;t.velocity.prevPositionY=t.image.touchesCurrent.y;t.velocity.prevTime=Date.now();t.gesture.imageWrap.transform("translate3d("+t.image.currentX+"px, "+t.image.currentY+"px,0)")}},onTouchEnd:function(n){var t=n.zoom,e,o,s;if(t.gesture.image&&0!==t.gesture.image.length){if(!t.image.isTouched||!t.image.isMoved)return t.image.isTouched=!1,void(t.image.isMoved=!1);t.image.isTouched=!1;t.image.isMoved=!1;var i=300,r=300,h=t.velocity.x*i,u=t.image.currentX+h,c=t.velocity.y*r,f=t.image.currentY+c;0!==t.velocity.x&&(i=Math.abs((u-t.image.currentX)/t.velocity.x));0!==t.velocity.y&&(r=Math.abs((f-t.image.currentY)/t.velocity.y));e=Math.max(i,r);t.image.currentX=u;t.image.currentY=f;o=t.image.width*t.scale;s=t.image.height*t.scale;t.image.minX=Math.min(t.gesture.slideWidth/2-o/2,0);t.image.maxX=-t.image.minX;t.image.minY=Math.min(t.gesture.slideHeight/2-s/2,0);t.image.maxY=-t.image.minY;t.image.currentX=Math.max(Math.min(t.image.currentX,t.image.maxX),t.image.minX);t.image.currentY=Math.max(Math.min(t.image.currentY,t.image.maxY),t.image.minY);t.gesture.imageWrap.transition(e).transform("translate3d("+t.image.currentX+"px, "+t.image.currentY+"px,0)")}},onTransitionEnd:function(n){var t=n.zoom;t.gesture.slide&&n.previousIndex!==n.activeIndex&&(t.gesture.image.transform("translate3d(0,0,0) scale(1)"),t.gesture.imageWrap.transform("translate3d(0,0,0)"),t.gesture.slide=t.gesture.image=t.gesture.imageWrap=void 0,t.scale=t.currentScale=1)},toggleZoom:function(t,i){var r=t.zoom,s,h,y,p,w,b,u,f,k,d,g,nt,e,o,c,l,a,v;(r.gesture.slide||(r.gesture.slide=t.clickedSlide?n(t.clickedSlide):t.slides.eq(t.activeIndex),r.gesture.image=r.gesture.slide.find("img, svg, canvas"),r.gesture.imageWrap=r.gesture.image.parent("."+t.params.zoomContainerClass)),r.gesture.image&&0!==r.gesture.image.length)&&(void 0===r.image.touchesStart.x&&i?(s="touchend"===i.type?i.changedTouches[0].pageX:i.pageX,h="touchend"===i.type?i.changedTouches[0].pageY:i.pageY):(s=r.image.touchesStart.x,h=r.image.touchesStart.y),r.scale&&1!==r.scale?(r.scale=r.currentScale=1,r.gesture.imageWrap.transition(300).transform("translate3d(0,0,0)"),r.gesture.image.transition(300).transform("translate3d(0,0,0) scale(1)"),r.gesture.slide=void 0):(r.scale=r.currentScale=r.gesture.imageWrap.attr("data-swiper-zoom")||t.params.zoomMax,i?(a=r.gesture.slide[0].offsetWidth,v=r.gesture.slide[0].offsetHeight,y=r.gesture.slide.offset().left,p=r.gesture.slide.offset().top,w=y+a/2-s,b=p+v/2-h,k=r.gesture.image[0].offsetWidth,d=r.gesture.image[0].offsetHeight,g=k*r.scale,nt=d*r.scale,e=Math.min(a/2-g/2,0),o=Math.min(v/2-nt/2,0),c=-e,l=-o,u=w*r.scale,f=b*r.scale,u<e&&(u=e),u>c&&(u=c),f<o&&(f=o),f>l&&(f=l)):(u=0,f=0),r.gesture.imageWrap.transition(300).transform("translate3d("+u+"px, "+f+"px,0)"),r.gesture.image.transition(300).transform("translate3d(0,0,0) scale("+r.scale+")")))},attachEvents:function(t){var i=t?"off":"on",r;f.params.zoom&&(r=(f.slides,!("touchstart"!==f.touchEvents.start||!f.support.passiveListener||!f.params.passiveListeners)&&{passive:!0,capture:!1}),f.support.gestures?(f.slides[i]("gesturestart",f.zoom.onGestureStart,r),f.slides[i]("gesturechange",f.zoom.onGestureChange,r),f.slides[i]("gestureend",f.zoom.onGestureEnd,r)):"touchstart"===f.touchEvents.start&&(f.slides[i](f.touchEvents.start,f.zoom.onGestureStart,r),f.slides[i](f.touchEvents.move,f.zoom.onGestureChange,r),f.slides[i](f.touchEvents.end,f.zoom.onGestureEnd,r)),f[i]("touchStart",f.zoom.onTouchStart),f.slides.each(function(t,r){n(r).find("."+f.params.zoomContainerClass).length>0&&n(r)[i](f.touchEvents.move,f.zoom.onTouchMove)}),f[i]("touchEnd",f.zoom.onTouchEnd),f[i]("transitionEnd",f.zoom.onTransitionEnd),f.params.zoomToggle&&f.on("doubleTap",f.zoom.toggleZoom))},init:function(){f.zoom.attachEvents()},destroy:function(){f.zoom.attachEvents(!0)}};f._plugins=[];for(at in f.plugins)vt=f.plugins[at](f,f.params[at]),vt&&f._plugins.push(vt);return f.callPlugins=function(n){for(var t=0;t<f._plugins.length;t++)n in f._plugins[t]&&f._plugins[t][n](arguments[1],arguments[2],arguments[3],arguments[4],arguments[5])},f.emitterEventListeners={},f.emit=function(n){f.params[n]&&f.params[n](arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);var t;if(f.emitterEventListeners[n])for(t=0;t<f.emitterEventListeners[n].length;t++)f.emitterEventListeners[n][t](arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);f.callPlugins&&f.callPlugins(n,arguments[1],arguments[2],arguments[3],arguments[4],arguments[5])},f.on=function(n,t){return n=ot(n),f.emitterEventListeners[n]||(f.emitterEventListeners[n]=[]),f.emitterEventListeners[n].push(t),f},f.off=function(n,t){var i;if(n=ot(n),void 0===t)return f.emitterEventListeners[n]=[],f;if(f.emitterEventListeners[n]&&0!==f.emitterEventListeners[n].length){for(i=0;i<f.emitterEventListeners[n].length;i++)f.emitterEventListeners[n][i]===t&&f.emitterEventListeners[n].splice(i,1);return f}},f.once=function(n,t){n=ot(n);var i=function(){t(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);f.off(n,i)};return f.on(n,i),f},f.a11y={makeFocusable:function(n){return n.attr("tabIndex","0"),n},addRole:function(n,t){return n.attr("role",t),n},addLabel:function(n,t){return n.attr("aria-label",t),n},disable:function(n){return n.attr("aria-disabled",!0),n},enable:function(n){return n.attr("aria-disabled",!1),n},onEnterKey:function(t){13===t.keyCode&&(n(t.target).is(f.params.nextButton)?(f.onClickNext(t),f.isEnd?f.a11y.notify(f.params.lastSlideMessage):f.a11y.notify(f.params.nextSlideMessage)):n(t.target).is(f.params.prevButton)&&(f.onClickPrev(t),f.isBeginning?f.a11y.notify(f.params.firstSlideMessage):f.a11y.notify(f.params.prevSlideMessage)),n(t.target).is("."+f.params.bulletClass)&&n(t.target)[0].click())},liveRegion:n('<span class="'+f.params.notificationClass+'" aria-live="assertive" aria-atomic="true"><\/span>'),notify:function(n){var t=f.a11y.liveRegion;0!==t.length&&(t.html(""),t.html(n))},init:function(){f.params.nextButton&&f.nextButton&&f.nextButton.length>0&&(f.a11y.makeFocusable(f.nextButton),f.a11y.addRole(f.nextButton,"button"),f.a11y.addLabel(f.nextButton,f.params.nextSlideMessage));f.params.prevButton&&f.prevButton&&f.prevButton.length>0&&(f.a11y.makeFocusable(f.prevButton),f.a11y.addRole(f.prevButton,"button"),f.a11y.addLabel(f.prevButton,f.params.prevSlideMessage));n(f.container).append(f.a11y.liveRegion)},initPagination:function(){f.params.pagination&&f.params.paginationClickable&&f.bullets&&f.bullets.length&&f.bullets.each(function(){var t=n(this);f.a11y.makeFocusable(t);f.a11y.addRole(t,"button");f.a11y.addLabel(t,f.params.paginationBulletMessage.replace(/{{index}}/,t.index()+1))})},destroy:function(){f.a11y.liveRegion&&f.a11y.liveRegion.length>0&&f.a11y.liveRegion.remove()}},f.init=function(){f.params.loop&&f.createLoop();f.updateContainerSize();f.updateSlidesSize();f.updatePagination();f.params.scrollbar&&f.scrollbar&&(f.scrollbar.set(),f.params.scrollbarDraggable&&f.scrollbar.enableDraggable());"slide"!==f.params.effect&&f.effects[f.params.effect]&&(f.params.loop||f.updateProgress(),f.effects[f.params.effect].setTranslate());f.params.loop?f.slideTo(f.params.initialSlide+f.loopedSlides,0,f.params.runCallbacksOnInit):(f.slideTo(f.params.initialSlide,0,f.params.runCallbacksOnInit),0===f.params.initialSlide&&(f.parallax&&f.params.parallax&&f.parallax.setTranslate(),f.lazy&&f.params.lazyLoading&&(f.lazy.load(),f.lazy.initialImageLoaded=!0)));f.attachEvents();f.params.observer&&f.support.observer&&f.initObservers();f.params.preloadImages&&!f.params.lazyLoading&&f.preloadImages();f.params.zoom&&f.zoom&&f.zoom.init();f.params.autoplay&&f.startAutoplay();f.params.keyboardControl&&f.enableKeyboardControl&&f.enableKeyboardControl();f.params.mousewheelControl&&f.enableMousewheelControl&&f.enableMousewheelControl();f.params.hashnavReplaceState&&(f.params.replaceState=f.params.hashnavReplaceState);f.params.history&&f.history&&f.history.init();f.params.hashnav&&f.hashnav&&f.hashnav.init();f.params.a11y&&f.a11y&&f.a11y.init();f.emit("onInit",f)},f.cleanupStyles=function(){f.container.removeClass(f.classNames.join(" ")).removeAttr("style");f.wrapper.removeAttr("style");f.slides&&f.slides.length&&f.slides.removeClass([f.params.slideVisibleClass,f.params.slideActiveClass,f.params.slideNextClass,f.params.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-column").removeAttr("data-swiper-row");f.paginationContainer&&f.paginationContainer.length&&f.paginationContainer.removeClass(f.params.paginationHiddenClass);f.bullets&&f.bullets.length&&f.bullets.removeClass(f.params.bulletActiveClass);f.params.prevButton&&n(f.params.prevButton).removeClass(f.params.buttonDisabledClass);f.params.nextButton&&n(f.params.nextButton).removeClass(f.params.buttonDisabledClass);f.params.scrollbar&&f.scrollbar&&(f.scrollbar.track&&f.scrollbar.track.length&&f.scrollbar.track.removeAttr("style"),f.scrollbar.drag&&f.scrollbar.drag.length&&f.scrollbar.drag.removeAttr("style"))},f.destroy=function(n,t){f.detachEvents();f.stopAutoplay();f.params.scrollbar&&f.scrollbar&&f.params.scrollbarDraggable&&f.scrollbar.disableDraggable();f.params.loop&&f.destroyLoop();t&&f.cleanupStyles();f.disconnectObservers();f.params.zoom&&f.zoom&&f.zoom.destroy();f.params.keyboardControl&&f.disableKeyboardControl&&f.disableKeyboardControl();f.params.mousewheelControl&&f.disableMousewheelControl&&f.disableMousewheelControl();f.params.a11y&&f.a11y&&f.a11y.destroy();f.params.history&&!f.params.replaceState&&window.removeEventListener("popstate",f.history.setHistoryPopState);f.params.hashnav&&f.hashnav&&f.hashnav.destroy();f.emit("onDestroy");n!==!1&&(f=null)},f.init(),f}},i;t.prototype={isSafari:function(){var n=window.navigator.userAgent.toLowerCase();return n.indexOf("safari")>=0&&n.indexOf("chrome")<0&&n.indexOf("android")<0}(),isUiWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(window.navigator.userAgent),isArray:function(n){return"[object Array]"===Object.prototype.toString.apply(n)},browser:{ie:window.navigator.pointerEnabled||window.navigator.msPointerEnabled,ieTouch:window.navigator.msPointerEnabled&&window.navigator.msMaxTouchPoints>1||window.navigator.pointerEnabled&&window.navigator.maxTouchPoints>1,lteIE9:function(){var n=document.createElement("div");return n.innerHTML="<!--[if lte IE 9]><i><\/i><![endif]-->",1===n.getElementsByTagName("i").length}()},device:function(){var n=window.navigator.userAgent,i=n.match(/(Android);?[\s\/]+([\d.]+)?/),t=n.match(/(iPad).*OS\s([\d_]+)/),r=n.match(/(iPod)(.*OS\s([\d_]+))?/),u=!t&&n.match(/(iPhone\sOS|iOS)\s([\d_]+)/);return{ios:t||u||r,android:i}}(),support:{touch:window.Modernizr&&Modernizr.touch===!0||function(){return!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)}(),transforms3d:window.Modernizr&&Modernizr.csstransforms3d===!0||function(){var n=document.createElement("div").style;return"webkitPerspective"in n||"MozPerspective"in n||"OPerspective"in n||"MsPerspective"in n||"perspective"in n}(),flexbox:function(){for(var i=document.createElement("div").style,t="alignItems webkitAlignItems webkitBoxAlign msFlexAlign mozBoxAlign webkitFlexDirection msFlexDirection mozBoxDirection mozBoxOrient webkitBoxDirection webkitBoxOrient".split(" "),n=0;n<t.length;n++)if(t[n]in i)return!0}(),observer:function(){return"MutationObserver"in window||"WebkitMutationObserver"in window}(),passiveListener:function(){var n=!1,t;try{t=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("testPassiveListener",null,t)}catch(n){}return n}(),gestures:function(){return"ongesturestart"in window}()},plugins:{}};for(var r=function(){var t=function(n){for(var i=this,t=0,t=0;t<n.length;t++)i[t]=n[t];return i.length=n.length,this},n=function(n,i){var e=[],r=0,o,s,u,f;if(n&&!i&&n instanceof t)return n;if(n)if("string"==typeof n)if(u=n.trim(),u.indexOf("<")>=0&&u.indexOf(">")>=0)for(f="div",0===u.indexOf("<li")&&(f="ul"),0===u.indexOf("<tr")&&(f="tbody"),0!==u.indexOf("<td")&&0!==u.indexOf("<th")||(f="tr"),0===u.indexOf("<tbody")&&(f="table"),0===u.indexOf("<option")&&(f="select"),s=document.createElement(f),s.innerHTML=n,r=0;r<s.childNodes.length;r++)e.push(s.childNodes[r]);else for(o=i||"#"!==n[0]||n.match(/[ .<>:~]/)?(i||document).querySelectorAll(n):[document.getElementById(n.split("#")[1])],r=0;r<o.length;r++)o[r]&&e.push(o[r]);else if(n.nodeType||n===window||n===document)e.push(n);else if(n.length>0&&n[0].nodeType)for(r=0;r<n.length;r++)e.push(n[r]);return new t(e)};return t.prototype={addClass:function(n){var r,t,i;if(void 0===n)return this;for(r=n.split(" "),t=0;t<r.length;t++)for(i=0;i<this.length;i++)this[i].classList.add(r[t]);return this},removeClass:function(n){for(var i,r=n.split(" "),t=0;t<r.length;t++)for(i=0;i<this.length;i++)this[i].classList.remove(r[t]);return this},hasClass:function(n){return!!this[0]&&this[0].classList.contains(n)},toggleClass:function(n){for(var i,r=n.split(" "),t=0;t<r.length;t++)for(i=0;i<this.length;i++)this[i].classList.toggle(r[t]);return this},attr:function(n,t){var i,r;if(1===arguments.length&&"string"==typeof n)return this[0]?this[0].getAttribute(n):void 0;for(i=0;i<this.length;i++)if(2===arguments.length)this[i].setAttribute(n,t);else for(r in n)this[i][r]=n[r],this[i].setAttribute(r,n[r]);return this},removeAttr:function(n){for(var t=0;t<this.length;t++)this[t].removeAttribute(n);return this},data:function(n,t){var i,r,u;if(void 0!==t){for(i=0;i<this.length;i++)r=this[i],r.dom7ElementDataStorage||(r.dom7ElementDataStorage={}),r.dom7ElementDataStorage[n]=t;return this}if(this[0])return u=this[0].getAttribute("data-"+n),u?u:this[0].dom7ElementDataStorage&&n in this[0].dom7ElementDataStorage?this[0].dom7ElementDataStorage[n]:void 0},transform:function(n){for(var t,i=0;i<this.length;i++)t=this[i].style,t.webkitTransform=t.MsTransform=t.msTransform=t.MozTransform=t.OTransform=t.transform=n;return this},transition:function(n){var i,t;for("string"!=typeof n&&(n+="ms"),i=0;i<this.length;i++)t=this[i].style,t.webkitTransitionDuration=t.MsTransitionDuration=t.msTransitionDuration=t.MozTransitionDuration=t.OTransitionDuration=t.transitionDuration=n;return this},on:function(t,i,r,u){function s(t){var e=t.target,f,u;if(n(e).is(i))r.call(e,t);else for(f=n(e).parents(),u=0;u<f.length;u++)n(f[u]).is(i)&&r.call(f[u],t)}for(var e,o=t.split(" "),f=0;f<this.length;f++)if("function"==typeof i||i===!1)for("function"==typeof i&&(r=arguments[1],u=arguments[2]||!1),e=0;e<o.length;e++)this[f].addEventListener(o[e],r,u);else for(e=0;e<o.length;e++)this[f].dom7LiveListeners||(this[f].dom7LiveListeners=[]),this[f].dom7LiveListeners.push({listener:r,liveListener:s}),this[f].addEventListener(o[e],s,u);return this},off:function(n,t,i,r){for(var u,e,o=n.split(" "),f=0;f<o.length;f++)for(u=0;u<this.length;u++)if("function"==typeof t||t===!1)"function"==typeof t&&(i=arguments[1],r=arguments[2]||!1),this[u].removeEventListener(o[f],i,r);else if(this[u].dom7LiveListeners)for(e=0;e<this[u].dom7LiveListeners.length;e++)this[u].dom7LiveListeners[e].listener===i&&this[u].removeEventListener(o[f],this[u].dom7LiveListeners[e].liveListener,r);return this},once:function(n,t,i,r){function u(e){i(e);f.off(n,t,u,r)}var f=this;"function"==typeof t&&(t=!1,i=arguments[1],r=arguments[2]);f.on(n,t,u,r)},trigger:function(n,t){for(var i,r=0;r<this.length;r++){try{i=new window.CustomEvent(n,{detail:t,bubbles:!0,cancelable:!0})}catch(r){i=document.createEvent("Event");i.initEvent(n,!0,!0);i.detail=t}this[r].dispatchEvent(i)}return this},transitionEnd:function(n){function r(f){if(f.target===this)for(n.call(this,f),t=0;t<i.length;t++)u.off(i[t],r)}var t,i=["webkitTransitionEnd","transitionend","oTransitionEnd","MSTransitionEnd","msTransitionEnd"],u=this;if(n)for(t=0;t<i.length;t++)u.on(i[t],r);return this},width:function(){return this[0]===window?window.innerWidth:this.length>0?parseFloat(this.css("width")):null},outerWidth:function(n){return this.length>0?n?this[0].offsetWidth+parseFloat(this.css("margin-right"))+parseFloat(this.css("margin-left")):this[0].offsetWidth:null},height:function(){return this[0]===window?window.innerHeight:this.length>0?parseFloat(this.css("height")):null},outerHeight:function(n){return this.length>0?n?this[0].offsetHeight+parseFloat(this.css("margin-top"))+parseFloat(this.css("margin-bottom")):this[0].offsetHeight:null},offset:function(){if(this.length>0){var n=this[0],t=n.getBoundingClientRect(),i=document.body,r=n.clientTop||i.clientTop||0,u=n.clientLeft||i.clientLeft||0,f=window.pageYOffset||n.scrollTop,e=window.pageXOffset||n.scrollLeft;return{top:t.top+f-r,left:t.left+e-u}}return null},css:function(n,t){var i,r;if(1===arguments.length){if("string"!=typeof n){for(i=0;i<this.length;i++)for(r in n)this[i].style[r]=n[r];return this}if(this[0])return window.getComputedStyle(this[0],null).getPropertyValue(n)}if(2===arguments.length&&"string"==typeof n){for(i=0;i<this.length;i++)this[i].style[n]=t;return this}return this},each:function(n){for(var t=0;t<this.length;t++)n.call(this[t],t,this[t]);return this},html:function(n){if(void 0===n)return this[0]?this[0].innerHTML:void 0;for(var t=0;t<this.length;t++)this[t].innerHTML=n;return this},text:function(n){if(void 0===n)return this[0]?this[0].textContent.trim():null;for(var t=0;t<this.length;t++)this[t].textContent=n;return this},is:function(i){var f,u,r;if(!this[0])return!1;if("string"==typeof i){if(r=this[0],r===document)return i===document;if(r===window)return i===window;if(r.matches)return r.matches(i);if(r.webkitMatchesSelector)return r.webkitMatchesSelector(i);if(r.mozMatchesSelector)return r.mozMatchesSelector(i);if(r.msMatchesSelector)return r.msMatchesSelector(i);for(f=n(i),u=0;u<f.length;u++)if(f[u]===this[0])return!0;return!1}if(i===document)return this[0]===document;if(i===window)return this[0]===window;if(i.nodeType||i instanceof t){for(f=i.nodeType?[i]:i,u=0;u<f.length;u++)if(f[u]===this[0])return!0;return!1}return!1},index:function(){if(this[0]){for(var n=this[0],t=0;null!==(n=n.previousSibling);)1===n.nodeType&&t++;return t}},eq:function(n){if(void 0===n)return this;var i,r=this.length;return n>r-1?new t([]):n<0?(i=r+n,new t(i<0?[]:[this[i]])):new t([this[n]])},append:function(n){for(var r,u,i=0;i<this.length;i++)if("string"==typeof n)for(u=document.createElement("div"),u.innerHTML=n;u.firstChild;)this[i].appendChild(u.firstChild);else if(n instanceof t)for(r=0;r<n.length;r++)this[i].appendChild(n[r]);else this[i].appendChild(n);return this},prepend:function(n){for(var r,u,i=0;i<this.length;i++)if("string"==typeof n)for(u=document.createElement("div"),u.innerHTML=n,r=u.childNodes.length-1;r>=0;r--)this[i].insertBefore(u.childNodes[r],this[i].childNodes[0]);else if(n instanceof t)for(r=0;r<n.length;r++)this[i].insertBefore(n[r],this[i].childNodes[0]);else this[i].insertBefore(n,this[i].childNodes[0]);return this},insertBefore:function(t){for(var u,i=n(t),r=0;r<this.length;r++)if(1===i.length)i[0].parentNode.insertBefore(this[r],i[0]);else if(i.length>1)for(u=0;u<i.length;u++)i[u].parentNode.insertBefore(this[r].cloneNode(!0),i[u])},insertAfter:function(t){for(var u,i=n(t),r=0;r<this.length;r++)if(1===i.length)i[0].parentNode.insertBefore(this[r],i[0].nextSibling);else if(i.length>1)for(u=0;u<i.length;u++)i[u].parentNode.insertBefore(this[r].cloneNode(!0),i[u].nextSibling)},next:function(i){return new t(this.length>0?i?this[0].nextElementSibling&&n(this[0].nextElementSibling).is(i)?[this[0].nextElementSibling]:[]:this[0].nextElementSibling?[this[0].nextElementSibling]:[]:[])},nextAll:function(i){var f=[],u=this[0],r;if(!u)return new t([]);for(;u.nextElementSibling;)r=u.nextElementSibling,i?n(r).is(i)&&f.push(r):f.push(r),u=r;return new t(f)},prev:function(i){return new t(this.length>0?i?this[0].previousElementSibling&&n(this[0].previousElementSibling).is(i)?[this[0].previousElementSibling]:[]:this[0].previousElementSibling?[this[0].previousElementSibling]:[]:[])},prevAll:function(i){var f=[],u=this[0],r;if(!u)return new t([]);for(;u.previousElementSibling;)r=u.previousElementSibling,i?n(r).is(i)&&f.push(r):f.push(r),u=r;return new t(f)},parent:function(t){for(var r=[],i=0;i<this.length;i++)t?n(this[i].parentNode).is(t)&&r.push(this[i].parentNode):r.push(this[i].parentNode);return n(n.unique(r))},parents:function(t){for(var i,r=[],u=0;u<this.length;u++)for(i=this[u].parentNode;i;)t?n(i).is(t)&&r.push(i):r.push(i),i=i.parentNode;return n(n.unique(r))},find:function(n){for(var f,r,u=[],i=0;i<this.length;i++)for(f=this[i].querySelectorAll(n),r=0;r<f.length;r++)u.push(f[r]);return new t(u)},children:function(i){for(var u,r,f=[],e=0;e<this.length;e++)for(u=this[e].childNodes,r=0;r<u.length;r++)i?1===u[r].nodeType&&n(u[r]).is(i)&&f.push(u[r]):1===u[r].nodeType&&f.push(u[r]);return new t(n.unique(f))},remove:function(){for(var n=0;n<this.length;n++)this[n].parentNode&&this[n].parentNode.removeChild(this[n]);return this},add:function(){for(var i,r=this,u,t=0;t<arguments.length;t++)for(u=n(arguments[t]),i=0;i<u.length;i++)r[r.length]=u[i],r.length++;return r}},n.fn=t.prototype,n.unique=function(n){for(var i=[],t=0;t<n.length;t++)i.indexOf(n[t])===-1&&i.push(n[t]);return i},n}(),f=["jQuery","Zepto","Dom7"],u=0;u<f.length;u++)window[f[u]]&&function(n){n.fn.swiper=function(i){var r;return n(this).each(function(){var n=new t(this,i);r||(r=n)}),r}}(window[f[u]]);i=void 0===r?window.Dom7||window.Zepto||window.jQuery:r;i&&("transitionEnd"in i.fn||(i.fn.transitionEnd=function(n){function r(f){if(f.target===this)for(n.call(this,f),t=0;t<i.length;t++)u.off(i[t],r)}var t,i=["webkitTransitionEnd","transitionend","oTransitionEnd","MSTransitionEnd","msTransitionEnd"],u=this;if(n)for(t=0;t<i.length;t++)u.on(i[t],r);return this}),"transform"in i.fn||(i.fn.transform=function(n){for(var t,i=0;i<this.length;i++)t=this[i].style,t.webkitTransform=t.MsTransform=t.msTransform=t.MozTransform=t.OTransform=t.transform=n;return this}),"transition"in i.fn||(i.fn.transition=function(n){var i,t;for("string"!=typeof n&&(n+="ms"),i=0;i<this.length;i++)t=this[i].style,t.webkitTransitionDuration=t.MsTransitionDuration=t.msTransitionDuration=t.MozTransitionDuration=t.OTransitionDuration=t.transitionDuration=n;return this}),"outerWidth"in i.fn||(i.fn.outerWidth=function(n){return this.length>0?n?this[0].offsetWidth+parseFloat(this.css("margin-right"))+parseFloat(this.css("margin-left")):this[0].offsetWidth:null}));window.Swiper=t}();"undefined"!=typeof module?module.exports=window.Swiper:"function"==typeof define&&define.amd&&define([],function(){"use strict";return window.Swiper})